# 好友系統測試指南

## 🧪 測試準備

### 1. 創建測試用戶

為了測試好友系統，建議創建以下測試帳號：

#### 測試用戶 1

- **電子郵件**: test1@example.com
- **密碼**: test123456
- **暱稱**: 健身達人

#### 測試用戶 2

- **電子郵件**: test2@example.com
- **密碼**: test123456
- **暱稱**: 運動愛好者

#### 測試用戶 3

- **電子郵件**: test3@example.com
- **密碼**: test123456
- **暱稱**: 健康生活

### 2. 測試步驟

#### 步驟 1: 註冊測試帳號

1. 打開應用程式 (http://localhost:3000)
2. 點擊「登入」
3. 切換到「註冊」模式
4. 註冊上述測試帳號

#### 步驟 2: 測試搜尋功能

1. 使用第一個帳號登入
2. 點擊底部導航的「好友」
3. 點擊「搜尋好友」標籤
4. 嘗試搜尋：
   - 暱稱開頭：「健身」
   - 完整電子郵件：「test2@example.com」

#### 步驟 3: 測試好友邀請

1. 搜尋到其他用戶後
2. 點擊「加好友」按鈕
3. 檢查邀請是否發送成功

#### 步驟 4: 測試接受邀請

1. 使用第二個帳號登入
2. 進入好友頁面
3. 查看「邀請通知」標籤
4. 點擊「接受」按鈕

#### 步驟 5: 測試訊息功能

1. 在好友列表中點擊「💬」按鈕
2. 發送文字訊息
3. 發送表情符號
4. 檢查訊息是否正確顯示

### 3. 預期結果

#### ✅ 搜尋功能

- 輸入暱稱開頭能搜尋到對應用戶
- 輸入完整電子郵件能精確搜尋
- 搜尋結果不包含自己
- 顯示正確的用戶資訊

#### ✅ 好友邀請

- 能成功發送好友邀請
- 避免重複發送邀請
- 邀請狀態正確顯示

#### ✅ 好友管理

- 能成功接受好友邀請
- 好友列表正確顯示
- 能移除好友

#### ✅ 訊息系統

- 能發送文字訊息
- 能發送表情符號
- 訊息正確顯示在對話中
- 時間戳正確顯示

### 4. 故障排除

#### 搜尋無結果

- 確認用戶已註冊並有暱稱
- 檢查暱稱拼寫是否正確
- 嘗試使用電子郵件搜尋

#### 邀請發送失敗

- 檢查 Firebase 安全規則是否正確設置
- 確認用戶已登入
- 檢查網路連接

#### 訊息發送失敗

- 確認雙方已是好友關係
- 檢查訊息內容是否符合要求
- 確認 Firebase 規則允許訊息創建

### 5. Firebase 安全規則檢查

確保在 Firebase Console 中設置了正確的安全規則：

```javascript
// 檢查以下規則是否存在：
// 1. users 集合的讀取權限
// 2. friendInvitations 集合的創建和更新權限
// 3. friendMessages 集合的創建和讀取權限
```

### 6. 性能優化建議

#### 搜尋優化

- 為 `nickname` 欄位創建索引
- 為 `email` 欄位創建索引
- 考慮使用 Algolia 等第三方搜尋服務

#### 訊息優化

- 實現分頁載入
- 添加訊息已讀狀態
- 考慮實時更新功能

## 🎯 測試完成檢查清單

- [ ] 搜尋功能正常工作
- [ ] 好友邀請發送成功
- [ ] 好友邀請接受成功
- [ ] 好友列表正確顯示
- [ ] 訊息發送功能正常
- [ ] 表情符號功能正常
- [ ] 移除好友功能正常
- [ ] 錯誤處理正確
- [ ] 載入狀態正確顯示
- [ ] 響應式設計正常

## 📝 注意事項

1. **測試環境**：確保在開發環境中測試
2. **數據清理**：測試完成後可以清理測試數據
3. **安全規則**：確保 Firebase 安全規則正確設置
4. **網路連接**：確保網路連接穩定
5. **瀏覽器相容性**：在不同瀏覽器中測試功能
