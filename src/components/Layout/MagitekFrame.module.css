/* ============================================================
   MAGITEK FRAME - 魔導外殼容器 (V4.2: Triple-Layer Strata)
   ============================================================ */

/* ============================================================
   根容器：徹底擊穿 390px 限制，確保邊框自動貼邊
   ⚡ V4.2 精準擊穿：針對瀏覽器模擬，恢復滑動邏輯
   ============================================================ */
.container {
  padding: 0 !important;
  margin: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  max-width: none !important; /* ⚡ 擊穿 390px 限制 */
  /* ⚡ V4.2 精準擊穿：真正的滾動容器（針對瀏覽器） */
  overflow-y: auto !important;
  overflow-x: hidden !important;
  position: relative !important;
  background-color: transparent !important;
  z-index: 0;
}

/* ============================================================
   Layer 1: 唯一星空背景層 (z: -100)
   主要樣式由 index.css 的 #layer-master-bg 控制
   此處保留類名以維持兼容性
   ============================================================ */
.layerBg {
  /* 主要樣式由 index.css 的 #layer-master-bg 控制 */
  /* 此處僅保留基本定位，確保兼容性 */
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -100 !important;
  pointer-events: none;
  background-color: transparent !important;
  /* 性能優化：禁用所有動畫 */
  animation: none !important;
  transform: none !important;
  will-change: auto !important;
  transition: none !important;
}

/* ============================================================
   Layer 3: 唯一捲動層 (z: 10)
   主要樣式由 index.css 的 #layer-scroll-content 控制
   此處保留類名以維持兼容性
   ============================================================ */
.layerContent {
  /* 主要樣式由 index.css 的 #layer-scroll-content 控制 */
  /* 保留基本樣式以維持兼容性 */
  width: 100%;
  margin: 0 !important;
  background: transparent !important;
  background-color: transparent !important;
  box-sizing: border-box;
  /* GPU 加速優化 */
  transform: translateZ(0);
  will-change: scroll-position;
}

/* ============================================================
   V6.1 響應式 HUD 包裝器 - 百分比錨定策略
   確保 HUD 圖片在不同設備上拉伸時，頭像和文本能正確對齊
   ============================================================ */
.hudWrapper {
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  width: 100% !important;
  height: 100px !important;
  min-height: 100px !important;
  max-height: 100px !important;
  padding-top: calc(
    var(--mg-safe-area-top, 0px) + env(safe-area-inset-top, 44px)
  ) !important;
  margin: 0 !important;
  pointer-events: none !important;
  z-index: 1000 !important; /* ⚡ 根據 .cursorrules 規範：z-index: 1000 */
  overflow: visible !important;
}

/* ============================================================
   V6.1 頂部狀態列 HUD - 使用 V6_Top_HUD_Clean.png
   響應式拉伸，確保在不同設備上正確顯示
   ============================================================ */
.topStatusHud {
  position: absolute !important; /* ⚡ V6.1: 改為 absolute，相對於 .hudWrapper */
  top: 0 !important;
  left: 0 !important;
  width: 100% !important;
  height: 100% !important;
  /* ⚡ V6.1: 使用 V6_Top_HUD_Clean.png 背景圖片 */
  background-image: url('/images/V6_Top_HUD_Clean.png?v=v6.23') !important;
  background-size: 100% 100% !important;
  background-position: top center !important;
  background-repeat: no-repeat !important;
  background-color: transparent !important;
  box-shadow: none !important;
  mix-blend-mode: normal !important;
  margin: 0 !important;
  padding: 0 !important;
  pointer-events: none !important;
  /* ⚡ V6.15: HUD Mask 必須在 Avatar 之上 - 物理層級鎖死 */
  z-index: 1000 !important;
  overflow: visible !important;
}

/* ⚡ V6.3: SYSTEM: READY 文本覆蓋 - 精確資產對位 */
.systemReadyText {
  position: absolute !important;
  left: 56% !important; /* ⚡ V6.3: 精確水平位置 */
  top: 48.5% !important; /* ⚡ V6.17: 同步更新為 48.5%，與 Avatar 保持視覺水平一致 */
  transform: translate(-50%, -50%) !important; /* ⚡ 完美居中 */
  color: #ff8c00 !important; /* ⚡ Magitek Gold */
  font-family: 'Courier New', monospace !important;
  font-size: 14px !important;
  font-weight: bold !important;
  text-align: center !important;
  text-shadow: 0 0 8px rgba(255, 140, 0, 0.8), 0 0 16px rgba(255, 140, 0, 0.4) !important;
  letter-spacing: 2px !important;
  pointer-events: none !important;
  z-index: 1002 !important; /* ⚡ 高於頭像 */
  white-space: nowrap !important;
}

/* ⚡ V5.8: 只有 HUD 內部的按鈕能點擊 */
.topStatusHud > *,
.topStatusHud button,
.topStatusHud a {
  pointer-events: auto !important; /* ⚡ 只有裡面的按鈕能點擊 */
}
