/* ============================================================
   MAGITEK FRAME - 魔導外殼容器
   深邃虛空背景 + 魔力粒子 VFX 層
   ⚡ 紋理化效能超頻：以圖片紋理取代 CSS 漸層運算
   ============================================================ */

.container {
  /* ⚡ 解除滑動封鎖：恢復全域捲動 */
  width: 100%;
  min-height: 100vh;
  height: auto;
  overflow-y: visible !important; /* 核心：恢復縱向捲動 */
  overflow-x: hidden;
  background-color: transparent !important; /* ⚡ 關鍵修正：改為透明，讓星空顯示 */
  position: relative;
  /* 終極導覽列淨化：確保背景漸層包含到 padding-bottom: env(safe-area-inset-bottom) 的區域 */
  padding-bottom: env(safe-area-inset-bottom, 0px);

  /* 確保 z-index 層級正確 */
  z-index: 0;
}

/* ⚡ 紋理化效能超頻：星域圖層 - 以貼圖取代數學運算 */
.starLayer {
  /* ⚡ 核心優化：修正圖片路徑（使用實際文件名） */
  background-image: url('/images/magitek_nebula_core.webp.png') !important;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;

  /* ⚡ 空間擴張：設為 300vmax 確保任何旋轉角度都不會露白邊 */
  position: fixed;
  top: 50%;
  left: 50%;
  width: 300vmax;
  height: 300vmax;
  transform: translate(-50%, -50%) translateZ(0); /* 居中並開啟 GPU 加速 */

  z-index: 0 !important; /* ⚡ 關鍵修正：改為 0，確保在 container 之上 */
  pointer-events: none;
  will-change: transform;

  /* ⚡ 緊急降噪：移除亮度濾鏡，恢復原始深邃虛空對比感 */
  /* filter: brightness(1.3) saturate(1.2) !important; 已移除 */

  animation: galaxyRotate 240s linear infinite;
}

/* 銀河自轉動畫 - 視界大開：虛空深度校準 */
@keyframes galaxyRotate {
  from {
    transform: translate(-50%, -50%) translateZ(0) rotate(0deg) scale(1.2);
  }
  to {
    transform: translate(-50%, -50%) translateZ(0) rotate(360deg) scale(1.2);
  }
}

/* 內容層 - 確保在 VFX 層之上，強力穿透：確保星空「穿過」所有組件 */
.content {
  background: transparent !important;
  position: relative;
  z-index: 1;
  width: 100%;
  min-height: 100vh;
  /* 強力穿透：確保星空背景能直接透視到 CrystalCard 的毛玻璃後方 */
  /* 不設定 overflow，讓 .main-content 自己控制滾動 */
}

/* ⚡ 降級開關：移動端性能優化 */
@media (max-width: 768px) {
  .starLayer {
    /* 手機模式：將 galaxyRotate 動畫速度放慢（從 240s 改為 480s） */
    animation: galaxyRotate 480s linear infinite;
  }
}

/* 低效能模式：減少動畫 */
@media (prefers-reduced-motion: reduce) {
  .starLayer {
    animation: none !important; /* 禁用自轉動畫 */
  }
}
