# 天梯排行榜功能說明

## 🎯 實現的功能

### 1. 年齡分段功能 ✅

- **修復了年齡分段過濾功能**
- 支持以下年齡段：
  - 全部年齡
  - 18 歲以下 (teen)
  - 18-24 歲 (young)
  - 25-34 歲 (adult)
  - 35-49 歲 (middle)
  - 50 歲以上 (senior)

### 2. 新增選項頁功能 ✅

- **🏆 總排行榜**：顯示所有用戶的完整排名
- **⭐ 本周新進榜**：顯示過去 7 天內有活動的用戶

## 🔧 技術實現

### 查詢優化

- 使用客戶端過濾避免 Firebase 複合查詢限制
- 優先處理年齡分段過濾
- 客戶端處理本周新進榜過濾

### 排名計算

- 支持年齡分段排名
- 支持本周新進榜排名
- 準確計算用戶在當前過濾條件下的排名

### UI/UX 優化

- 添加選項頁切換按鈕
- 響應式設計，支持手機端
- 保持原有的火焰主題色彩
- 動態顯示不同的提示信息

## 📱 界面特點

### 選項頁設計

- 使用火焰漸變色彩
- 懸停效果和動畫
- 清晰的活動狀態指示

### 用戶統計區域

- 動態顯示標籤（本周排名 vs 我的天梯排名）
- 本周新進榜時顯示額外提示
- 保持原有的火焰漸變背景

### 響應式設計

- 手機端選項頁自動換行
- 調整按鈕大小和間距
- 保持功能完整性

## 🎨 顏色主題

保持原有的火焰主題：

- 主色：#ff6b35 (火焰紅)
- 漸變：#f7931e (橙色)
- 強調：#ffd700 (金色)

## 🔍 功能測試建議

1. **年齡分段測試**

   - 測試各個年齡段的過濾功能
   - 驗證排名計算的準確性

2. **選項頁測試**

   - 測試總排行榜和本周新進榜的切換
   - 驗證本周新進榜的 7 天過濾邏輯

3. **響應式測試**

   - 測試手機端的選項頁顯示
   - 驗證觸控操作的流暢性

4. **性能測試**
   - 驗證查詢性能
   - 檢查客戶端過濾的效率

## 📊 數據邏輯

### 年齡分段

- 基於用戶的年齡數據進行分段
- 使用 `getAgeGroup` 函數進行分類

### 本周新進榜

- 基於 `lastActive` 字段進行過濾
- 顯示過去 7 天內有活動的用戶
- 客戶端過濾確保準確性

### 排名計算

- 考慮當前選擇的年齡分段
- 考慮當前選擇的選項頁
- 準確計算用戶在過濾條件下的排名

## 🚀 未來擴展

1. **更多時間段**

   - 本月新進榜
   - 本季度排行榜

2. **更多過濾條件**

   - 性別過濾
   - 地區過濾

3. **統計功能**
   - 年齡段統計
   - 活躍度分析
