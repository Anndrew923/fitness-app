# å¯¦æ™‚æ™‰å‡å‹•ç•«å¯¦ç¾

## ğŸ¯ å•é¡Œæè¿°

ç”¨æˆ¶åæ˜ ï¼šæ›´æ–°åˆ†æ•¸å¾Œé€²å…¥å¤©æ¢¯é é¢æ™‚ï¼Œæ’åå·²ç¶“è®Šæˆç¬¬ 1 åï¼Œç„¡æ³•çœ‹åˆ°å¾ç¬¬ 3 ååˆ°ç¬¬ 1 åçš„è®ŠåŒ–éç¨‹ã€‚

## ğŸ” å•é¡Œåˆ†æ

### åŸæœ‰å•é¡Œ

1. **æ•¸æ“šåŒæ­¥å•é¡Œ**ï¼šç”¨æˆ¶æ•¸æ“šåœ¨å¾Œå°å·²ç¶“æ›´æ–°
2. **å‹•ç•«è§¸ç™¼æ™‚æ©Ÿ**ï¼šå‹•ç•«åœ¨æ•¸æ“šè¼‰å…¥æ™‚å°±è§¸ç™¼
3. **è¦–è¦ºæ•ˆæœç¼ºå¤±**ï¼šç”¨æˆ¶çœ‹ä¸åˆ°æ’åè®ŠåŒ–éç¨‹

### è§£æ±ºæ–¹æ¡ˆ

1. **å»¶é²å‹•ç•«è§¸ç™¼**ï¼šè®“ç”¨æˆ¶å…ˆçœ‹åˆ°èˆŠæ’å
2. **å¯¦æ™‚æ’åé¡¯ç¤º**ï¼šå‹•ç•«æœŸé–“é¡¯ç¤ºæ­£ç¢ºçš„æ’å
3. **è¦–è¦ºè·¯å¾‘**ï¼šå¾èˆŠä½ç½®é£›åˆ°æ–°ä½ç½®

## ğŸ› ï¸ æŠ€è¡“å¯¦ç¾

### 1. **å‹•ç•«è§¸ç™¼é‚è¼¯**

```javascript
// æª¢æŸ¥æ˜¯å¦æœ‰æ’åè®ŠåŒ–
if (oldRank > 0 && newRank > 0 && oldRank !== newRank && newRank < oldRank) {
  // æœ‰æ’åæå‡ï¼Œå»¶é²è§¸ç™¼å‹•ç•«
  setTimeout(() => {
    setPromotionAnimation({
      isActive: true,
      oldRank: oldRank,
      newRank: newRank,
      direction: 'up',
      progress: 0,
    });
  }, 500); // å»¶é²500msè®“ç”¨æˆ¶çœ‹åˆ°èˆŠæ’å
}
```

### 2. **æ’åé¡¯ç¤ºé‚è¼¯**

```javascript
// å‹•ç•«æœŸé–“é¡¯ç¤ºæ­£ç¢ºçš„æ’å
{
  promotionAnimation.isActive &&
  user.id === userData?.userId &&
  promotionAnimation.progress > 0.3
    ? promotionAnimation.newRank // å‹•ç•«å¾ŒæœŸé¡¯ç¤ºæ–°æ’å
    : promotionAnimation.isActive && user.id === userData?.userId
    ? promotionAnimation.oldRank // å‹•ç•«æœŸé–“é¡¯ç¤ºèˆŠæ’å
    : index + 1;
} // æ­£å¸¸é¡¯ç¤ºç•¶å‰æ’å
```

### 3. **ä½ç½®è¨ˆç®—é‚è¼¯**

```javascript
// åœ¨å‹•ç•«é–‹å§‹æ™‚ï¼Œé¡¯ç¤ºåœ¨èˆŠæ’åä½ç½®
const initialOffset = progress < 0.1 ? (oldRank - currentRank) * 80 : 0;

// è¨ˆç®—é£›è¡Œè·¯å¾‘
const horizontalMove = (newPosition - oldPosition) * flyProgress;

// æœ€çµ‚è®Šæ›
transform: `translateY(-${floatHeight + flyDistance}px) translateX(${
  horizontalMove + initialOffset
}px) scale(${scale})`;
```

## ğŸ¬ å‹•ç•«æµç¨‹

### éšæ®µ 1ï¼šåˆå§‹é¡¯ç¤º (0-500ms)

- ç”¨æˆ¶é€²å…¥å¤©æ¢¯é é¢
- çœ‹åˆ°è‡ªå·±ä½æ–¼ç¬¬ 3 åä½ç½®
- æ’åæ•¸å­—é¡¯ç¤º"3"

### éšæ®µ 2ï¼šå‹•ç•«æº–å‚™ (500ms)

- æª¢æ¸¬åˆ°æ’åè®ŠåŒ–
- å»¶é² 500ms è®“ç”¨æˆ¶ç¢ºèªä½ç½®
- æº–å‚™é–‹å§‹å‹•ç•«

### éšæ®µ 3ï¼šå‹•ç•«åŸ·è¡Œ (500ms-3s)

- æ’åå¡å¾ç¬¬ 3 åä½ç½®æµ®èµ·
- æ²¿å¼§ç·šé£›å‘ç¬¬ 1 åä½ç½®
- æ’åæ•¸å­—å¾"3"è®Šæˆ"1"
- å…¶ä»–ç”¨æˆ¶è¢«æ“ é–‹

### éšæ®µ 4ï¼šå‹•ç•«å®Œæˆ (3s+)

- æ’åå¡é™è½åˆ°ç¬¬ 1 åä½ç½®
- ç²’å­çˆ†ç‚¸æ•ˆæœ
- å‹•ç•«ç‹€æ…‹é‡ç½®

## ğŸ“Š ç”¨æˆ¶é«”é©—

### 1. **è¦–è¦ºç¢ºèª**

- ç”¨æˆ¶èƒ½æ¸…æ¥šçœ‹åˆ°è‡ªå·±åŸæœ¬åœ¨ç¬¬ 3 å
- ç¢ºèªæ’åè®ŠåŒ–ç¢ºå¯¦ç™¼ç”Ÿ
- å¢å¼·æˆå°±æ„Ÿ

### 2. **å‹•ç•«æ•ˆæœ**

- å¾èˆŠä½ç½®åˆ°æ–°ä½ç½®çš„å®Œæ•´è·¯å¾‘
- æ’åæ•¸å­—çš„å‹•æ…‹è®ŠåŒ–
- æ“ é–‹æ•ˆæœçš„è¦–è¦ºè¡æ“Š

### 3. **æ™‚é–“æ§åˆ¶**

- 500ms å»¶é²è®“ç”¨æˆ¶æº–å‚™
- 2.5 ç§’å‹•ç•«æ™‚é–“é©ä¸­
- ç¸½é«”é«”é©—æµæš¢

## ğŸ”§ èª¿è©¦åŠŸèƒ½

### 1. **é–‹ç™¼ç’°å¢ƒ**

- è©³ç´°çš„æ§åˆ¶å°æ—¥èªŒ
- å‹•ç•«ç‹€æ…‹ç›£æ§
- æ€§èƒ½è¨ˆæ™‚

### 2. **æ¸¬è©¦æŒ‰éˆ•**

- æ‰‹å‹•è§¸ç™¼å‹•ç•«
- æ¨¡æ“¬æ’åè®ŠåŒ–
- é©—è­‰å‹•ç•«æ•ˆæœ

## ğŸ¯ é æœŸæ•ˆæœ

### ç”¨æˆ¶æ“ä½œæµç¨‹

1. **æ›´æ–°åˆ†æ•¸**ï¼šåœ¨ UserInfo é é¢ä¿®æ”¹è©•æ¸¬åˆ†æ•¸
2. **é€²å…¥å¤©æ¢¯**ï¼šåˆ‡æ›åˆ°å¤©æ¢¯é é¢
3. **çœ‹åˆ°èˆŠæ’å**ï¼šç¢ºèªè‡ªå·±åŸæœ¬åœ¨ç¬¬ 3 å
4. **è§€çœ‹å‹•ç•«**ï¼šçœ‹åˆ°æ’åå¡å¾ç¬¬ 3 åé£›åˆ°ç¬¬ 1 å
5. **äº«å—æˆå°±æ„Ÿ**ï¼šé«”é©—å®Œæ•´çš„æ™‰å‡éç¨‹

### è¦–è¦ºæ•ˆæœ

- æ’åå¡å¾ç¬¬ 3 åä½ç½®æµ®èµ·
- æ²¿å„ªç¾å¼§ç·šé£›å‘ç¬¬ 1 åä½ç½®
- æ’åæ•¸å­— 3D ç¿»è½‰å¾"3"è®Šæˆ"1"
- ç¬¬ 1 åå’Œç¬¬ 2 åè¢«å¾€ä¸‹æ“ 
- æœ€çµ‚é™è½åˆ°ç¬¬ 1 åä½ç½®

## ğŸš€ å„ªåŒ–å»ºè­°

### 1. **ç”¨æˆ¶åé¥‹**

- æ·»åŠ éŸ³æ•ˆé…åˆ
- éœ‡å‹•åé¥‹ï¼ˆç§»å‹•ç«¯ï¼‰
- ç¤¾äº¤åˆ†äº«åŠŸèƒ½

### 2. **æ€§èƒ½å„ªåŒ–**

- å‹•ç•«ç·©å­˜æ©Ÿåˆ¶
- ä½ç«¯è¨­å‚™é©é…
- å‹•ç•«é–‹é—œé¸é …

### 3. **åŠŸèƒ½æ“´å±•**

- æ”¯æŒå¤šç¨®æ’åè®ŠåŒ–
- è‡ªå®šç¾©å‹•ç•«æ•ˆæœ
- æˆå°±ç³»çµ±æ•´åˆ
