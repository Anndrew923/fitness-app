# 圖表網格線和間距優化

## 🎯 優化目標

根據用戶需求，對圖表進行以下改進：

1. **添加水平網格線**：在每個分數區間加上水平線，提升閱讀體驗
2. **縮小間距**：減少項目選擇器與圖表之間的空白，提升畫面緊湊度

## 🔧 實現方案

### 1. **水平網格線優化**

#### **修正前**：

```javascript
{
  /* 網格線 */
}
{
  [...Array(5)].map((_, i) => (
    <line
      key={`grid-y-${i}`}
      x1="50"
      y1={120 + i * 120}
      x2="750"
      y2={120 + i * 120}
      stroke="#e9ecef"
      strokeWidth="1"
    />
  ));
}
```

#### **修正後**：

```javascript
{
  /* 網格線 */
}
{
  [...Array(5)].map((_, i) => {
    const value = i * 20;
    const y = 720 - (value * 480) / 100; // 使用與數據點相同的計算方式
    return (
      <line
        key={`grid-y-${i}`}
        x1="50"
        y1={y}
        x2="750"
        y2={y}
        stroke="#f8f9fa"
        strokeWidth="1"
      />
    );
  });
}
```

#### **優化細節**：

1. **統一計算方式**：

   ```javascript
   const y = 720 - (value * 480) / 100;
   ```

   - 使用與數據點和 Y 軸標籤相同的計算公式
   - 確保網格線與數據點完美對齊

2. **顏色調整**：

   ```javascript
   stroke = '#f8f9fa'; // 從 #e9ecef 調整為更淺的顏色
   ```

   - 使用更淺的灰色 (#f8f9fa)
   - 不搶過趨勢線的風頭
   - 提供適度的視覺引導

3. **位置精確對齊**：
   - 網格線與 Y 軸標籤和數據點在同一水平線上
   - 0 分、20 分、40 分、60 分、80 分都有對應的網格線

### 2. **間距優化**

#### **修正前**：

```css
.chart-header {
  margin-bottom: 1rem; /* 16px */
}
```

#### **修正後**：

```css
.chart-header {
  margin-bottom: 0.5rem; /* 8px */
}
```

#### **優化效果**：

- 間距從 16px 減少到 8px
- 減少 50%的空白空間
- 提升畫面緊湊度
- 保持適當的視覺分離

## 📊 視覺效果

### **網格線效果**：

#### **顏色選擇**：

- **原顏色**：#e9ecef（較深的灰色）
- **新顏色**：#f8f9fa（更淺的灰色）
- **效果**：不搶過趨勢線的風頭，提供適度的視覺引導

#### **對齊精度**：

- **網格線位置**：與數據點和 Y 軸標籤完美對齊
- **視覺效果**：每個分數區間都有清晰的水平參考線
- **閱讀體驗**：更容易判斷數據點的位置和變化

### **間距效果**：

#### **緊湊度提升**：

- **原間距**：16px（1rem）
- **新間距**：8px（0.5rem）
- **效果**：畫面更緊湊，減少不必要的空白

#### **視覺平衡**：

- 保持適當的視覺分離
- 不影響可讀性
- 提升整體佈局的緊湊度

## 🎨 設計原則

### 1. **網格線設計原則**

- **不搶風頭**：使用淺色，不干擾主要數據線
- **精確對齊**：與數據點和軸標籤完美對齊
- **適度引導**：提供視覺參考，不造成干擾

### 2. **間距設計原則**

- **緊湊性**：減少不必要的空白
- **可讀性**：保持適當的視覺分離
- **平衡性**：維持整體佈局的視覺平衡

## 📐 座標系統

### **網格線位置**：

- **0 分**：y = 720
- **20 分**：y = 624
- **40 分**：y = 528
- **60 分**：y = 432
- **80 分**：y = 336

### **計算公式**：

```javascript
const y = 720 - (value * 480) / 100;
```

## 🔧 技術實現

### **關鍵改進點**：

1. **統一座標計算**：

   ```javascript
   const y = 720 - (value * 480) / 100;
   ```

2. **顏色優化**：

   ```javascript
   stroke = '#f8f9fa';
   ```

3. **間距調整**：
   ```css
   margin-bottom: 0.5rem;
   ```

## 📱 響應式考慮

### **網格線**：

- 所有設備都使用相同的計算方式
- 保持一致的對齊效果
- 顏色在所有設備上都適用

### **間距**：

- 桌面版和手機版都適用
- 保持一致的緊湊度
- 不影響響應式佈局

## 📝 總結

這次優化成功實現了用戶的兩個需求：

### **網格線優化**：

1. **精確對齊**：網格線與數據點和 Y 軸標籤完美對齊
2. **顏色調整**：使用更淺的顏色，不搶過趨勢線的風頭
3. **視覺引導**：提供適度的水平參考線，提升閱讀體驗

### **間距優化**：

1. **緊湊度提升**：間距從 16px 減少到 8px
2. **視覺平衡**：保持適當的視覺分離
3. **佈局優化**：提升整體畫面的緊湊度

### **整體效果**：

- 圖表更易讀，每個分數區間都有清晰的參考線
- 畫面更緊湊，減少不必要的空白
- 視覺效果更專業，更符合數據可視化最佳實踐
- 保持所有原有功能正常運作

現在圖表具有更好的可讀性和更緊湊的佈局，用戶體驗進一步提升！
