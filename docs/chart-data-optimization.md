# 數據趨勢圖優化

## 🎯 優化目標

根據用戶需求，對數據趨勢圖進行以下優化：

1. **加大圖表上下空間**：讓數據變化更為明顯
2. **限制數據量**：只顯示最新 6 次數據
3. **簡化日期格式**：從"7 月 21 日"改為"7/21"

## 🔧 優化方案

### 1. **數據量限制**

**優化前**：

```javascript
// 顯示所有歷史記錄
const labels = sortedHistory.map(record => {
  // 處理所有記錄
});
```

**優化後**：

```javascript
// 只取最新6次數據
const recentHistory = sortedHistory.slice(0, 6);

const labels = recentHistory.map(record => {
  // 只處理最新6次記錄
});
```

**優化效果**：

- 減少數據噪音，突出重要趨勢
- 適合用戶兩週更新一次的頻率
- 能顯示 1.5-2 個月的數據走向

### 2. **日期格式簡化**

**優化前**：

```javascript
return date.toLocaleDateString('zh-TW', {
  month: 'short', // 顯示為 "7月21日"
  day: 'numeric',
});
```

**優化後**：

```javascript
return date.toLocaleDateString('zh-TW', {
  month: 'numeric', // 顯示為 "7/21"
  day: 'numeric',
});
```

**優化效果**：

- 減少視覺干擾
- 節省空間
- 保持清晰可讀

### 3. **圖表空間優化**

**優化前**：

```javascript
// viewBox 設定
viewBox={`0 0 800 300`}

// 數據線計算
const y = 250 - (value * 200) / 100;

// 網格線間距
y1={50 + i * 50}
```

**優化後**：

```javascript
// viewBox 設定 - 增加高度
viewBox={`0 0 800 400`}

// 數據線計算 - 加大上下空間
const y = 380 - (value * 240) / 100;

// 網格線間距 - 增加間距
y1={80 + i * 60}
```

**優化效果**：

- 圖表高度從 300 增加到 400
- 數據變化幅度從 200 增加到 240
- 網格線間距從 50 增加到 60

## 📊 優化效果對比

### 1. **數據顯示**

| 項目     | 優化前       | 優化後        |
| -------- | ------------ | ------------- |
| 數據量   | 全部歷史記錄 | 最新 6 次記錄 |
| 時間跨度 | 可能很長     | 1.5-2 個月    |
| 數據密度 | 可能很密集   | 適中，易讀    |

### 2. **日期格式**

| 格式     | 優化前       | 優化後     |
| -------- | ------------ | ---------- |
| 顯示方式 | "7 月 21 日" | "7/21"     |
| 字符長度 | 5-6 個字符   | 3-4 個字符 |
| 視覺干擾 | 較多         | 較少       |

### 3. **圖表空間**

| 參數         | 優化前 | 優化後 | 改進 |
| ------------ | ------ | ------ | ---- |
| 圖表高度     | 300px  | 400px  | +33% |
| 數據變化幅度 | 200px  | 240px  | +20% |
| 網格線間距   | 50px   | 60px   | +20% |
| 上下邊距     | 50px   | 80px   | +60% |

## 🎯 優化效果

### 1. **數據可讀性提升**

- ✅ 只顯示最新 6 次數據，避免過多數據點
- ✅ 適合用戶兩週更新一次的頻率
- ✅ 能清楚看到 1.5-2 個月的進步趨勢

### 2. **視覺效果改善**

- ✅ 日期格式簡潔，減少視覺干擾
- ✅ 圖表空間加大，數據變化更明顯
- ✅ 網格線間距增加，更容易讀取數值

### 3. **用戶體驗優化**

- ✅ 專注於最近的進步趨勢
- ✅ 減少無關歷史數據的干擾
- ✅ 更清晰的數據變化展示

## 🔧 技術實現

### 1. **數據限制邏輯**

```javascript
// 只取最新6次數據
const recentHistory = sortedHistory.slice(0, 6);
```

### 2. **日期格式調整**

```javascript
// 簡化日期格式
return date.toLocaleDateString('zh-TW', {
  month: 'numeric', // 數字月份
  day: 'numeric', // 數字日期
});
```

### 3. **圖表空間調整**

```javascript
// 增加圖表高度
viewBox={`0 0 800 400`}

// 加大數據變化幅度
const y = 380 - (value * 240) / 100;

// 增加網格線間距
y1={80 + i * 60}
```

## 📱 響應式設計

### 1. **保持原有響應式特性**

- 字體大小根據螢幕尺寸自動調整
- 圖表容器自動縮放
- 保持所有顏色和佈局不變

### 2. **優化後的響應式效果**

- 桌面版：更大的圖表空間，更清晰的數據展示
- 手機版：適中的圖表大小，保持良好的可讀性

## 📝 總結

這次優化成功實現了用戶的所有需求：

1. **數據量優化**：只顯示最新 6 次數據，突出重要趨勢
2. **日期格式簡化**：從"7 月 21 日"改為"7/21"，減少干擾
3. **圖表空間加大**：數據變化更明顯，更容易觀察進步趨勢
4. **保持其他功能**：所有顏色、佈局、響應式設計都保持不變

現在數據趨勢圖更適合用戶的使用習慣，能夠清楚展示最近的進步趨勢，同時保持簡潔的視覺效果。
