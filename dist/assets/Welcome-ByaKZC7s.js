import{u as f,a as j,i as v,j as e,b as w}from"./index-BIhibsyR.js";import{d as N,r as a}from"./react-vendor-BToktFYo.js";import{n as b}from"./firebase-D0136ThQ.js";import{P as m}from"./charts-BNGpwEcn.js";import{L as E}from"./LanguageSwitcher-DPnT8PmU.js";function L({onGuestMode:n}){const s=N(),{isAuthenticated:o,isLoading:r}=f(),{t}=j(),[l,u]=a.useState(!1);a.useEffect(()=>{console.log("i18n current language:",v.language)},[]),a.useEffect(()=>{const x=async()=>{if(l||o)return;const c=localStorage.getItem("savedEmail"),d=localStorage.getItem("savedPassword");if(c&&d&&!l){console.log("Welcome - 嘗試自動登入:",c),u(!0);try{const i=await b(w,c,d);console.log("Welcome - 自動登入成功:",i.user.email),setTimeout(()=>{s("/user-info")},500)}catch(i){console.error("Welcome - 自動登入失敗:",i),localStorage.removeItem("savedEmail"),localStorage.removeItem("savedPassword")}}},p=setTimeout(()=>{x()},100);return()=>clearTimeout(p)},[l,o,s]),a.useEffect(()=>{o&&!r&&(console.log("Welcome - 用戶已認證，導航到 user-info"),s("/user-info"))},[o,r,s]);const h=()=>{s("/login")},g=()=>{n?n():s("/guest")};return e.jsxs("div",{className:"welcome-container",children:[e.jsx("div",{className:"welcome-header",children:e.jsx(E,{})}),e.jsxs("div",{className:"welcome-content",children:[e.jsx("h1",{className:"welcome-title",children:t("welcome.title")}),e.jsx("p",{className:"welcome-subtitle",children:t("welcome.subtitle")}),e.jsxs("div",{className:"welcome-features",children:[e.jsxs("div",{className:"feature-card",children:[e.jsx("h3",{children:"🏋️ 專業評測"}),e.jsx("p",{children:"提供力量、心肺、爆發力、肌肉量、體脂等多項專業評測"})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("h3",{children:"📊 詳細分析"}),e.jsx("p",{children:"基於科學標準，提供個人化的健身建議和進步追蹤"})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("h3",{children:"👥 社群互動"}),e.jsx("p",{children:"與其他健身愛好者分享成果，互相激勵成長"})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("h3",{children:"📈 歷史記錄"}),e.jsx("p",{children:"完整記錄您的健身歷程，見證每一次進步"})]})]}),e.jsxs("div",{className:"button-group-mode",children:[e.jsxs("div",{className:"button-with-tooltip",children:[e.jsx("button",{onClick:h,className:"mode-btn login-btn",children:t("welcome.login")}),e.jsx("span",{className:"tooltip",children:t("welcomeTooltips.login")})]}),e.jsxs("div",{className:"button-with-tooltip",children:[e.jsx("button",{onClick:g,className:"mode-btn guest-btn",children:t("welcome.guestMode")}),e.jsx("span",{className:"tooltip",children:t("welcomeTooltips.guest")})]})]})]})]})}L.propTypes={onLogin:m.func,onGuestMode:m.func};export{L as default};
