var rp=Object.defineProperty;var cp=(o,s,u)=>s in o?rp(o,s,{enumerable:!0,configurable:!0,writable:!0,value:u}):o[s]=u;var Ah=(o,s,u)=>cp(o,typeof s!="symbol"?s+"":s,u);import{a as op,b as up,g as dp,r as A,u as Ha,d as xn,R as Lo,e as fp,B as hp,f as mp,h as zt,N as bo,L as gp}from"./react-vendor-tf4g78s5.js";import{_ as pp,C as vp,r as Eh,S as xp,a as yp,F as bp,g as Np,b as ur,c as Sp,d as jp,i as rm,p as Ap,u as Ep,e as wp,f as Tp,h as Rp,j as _p,G as cm,k as Op,l as Je,m as va,s as Yn,n as zo,o as It,q as pn,w as cn,t as Io,v as Ll,x as vn,y as Vn,z as Cp,A as Up,B as Ro,D as _o,E as Bp,H as Dp,I as Mp}from"./firebase-DwPSQ8VP.js";import{P as ie,R as lr,a as om,b as um,c as dm,d as fm,e as hm,B as wh,C as Th,X as Rh,Y as _h,T as Oh,L as kp,f as Ch}from"./charts-LW-YqZy6.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))r(d);new MutationObserver(d=>{for(const f of d)if(f.type==="childList")for(const m of f.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function u(d){const f={};return d.integrity&&(f.integrity=d.integrity),d.referrerPolicy&&(f.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?f.credentials="include":d.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function r(d){if(d.ep)return;d.ep=!0;const f=u(d);fetch(d.href,f)}})();var No={exports:{}},_l={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uh;function Lp(){if(Uh)return _l;Uh=1;var o=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function u(r,d,f){var m=null;if(f!==void 0&&(m=""+f),d.key!==void 0&&(m=""+d.key),"key"in d){f={};for(var p in d)p!=="key"&&(f[p]=d[p])}else f=d;return d=f.ref,{$$typeof:o,type:r,key:m,ref:d!==void 0?d:null,props:f}}return _l.Fragment=s,_l.jsx=u,_l.jsxs=u,_l}var Bh;function zp(){return Bh||(Bh=1,No.exports=Lp()),No.exports}var l=zp(),So={exports:{}},Ol={},jo={exports:{}},Ao={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dh;function Ip(){return Dh||(Dh=1,function(o){function s(y,N){var k=y.length;y.push(N);e:for(;0<k;){var F=k-1>>>1,ee=y[F];if(0<d(ee,N))y[F]=N,y[k]=ee,k=F;else break e}}function u(y){return y.length===0?null:y[0]}function r(y){if(y.length===0)return null;var N=y[0],k=y.pop();if(k!==N){y[0]=k;e:for(var F=0,ee=y.length,J=ee>>>1;F<J;){var q=2*(F+1)-1,D=y[q],K=q+1,Ee=y[K];if(0>d(D,k))K<ee&&0>d(Ee,D)?(y[F]=Ee,y[K]=k,F=K):(y[F]=D,y[q]=k,F=q);else if(K<ee&&0>d(Ee,k))y[F]=Ee,y[K]=k,F=K;else break e}}return N}function d(y,N){var k=y.sortIndex-N.sortIndex;return k!==0?k:y.id-N.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;o.unstable_now=function(){return f.now()}}else{var m=Date,p=m.now();o.unstable_now=function(){return m.now()-p}}var v=[],b=[],x=1,E=null,w=3,I=!1,_=!1,Z=!1,Q=!1,re=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;function H(y){for(var N=u(b);N!==null;){if(N.callback===null)r(b);else if(N.startTime<=y)r(b),N.sortIndex=N.expirationTime,s(v,N);else break;N=u(b)}}function le(y){if(Z=!1,H(y),!_)if(u(v)!==null)_=!0,fe||(fe=!0,he());else{var N=u(b);N!==null&&ge(le,N.startTime-y)}}var fe=!1,te=-1,se=5,ae=-1;function z(){return Q?!0:!(o.unstable_now()-ae<se)}function ce(){if(Q=!1,fe){var y=o.unstable_now();ae=y;var N=!0;try{e:{_=!1,Z&&(Z=!1,oe(te),te=-1),I=!0;var k=w;try{t:{for(H(y),E=u(v);E!==null&&!(E.expirationTime>y&&z());){var F=E.callback;if(typeof F=="function"){E.callback=null,w=E.priorityLevel;var ee=F(E.expirationTime<=y);if(y=o.unstable_now(),typeof ee=="function"){E.callback=ee,H(y),N=!0;break t}E===u(v)&&r(v),H(y)}else r(v);E=u(v)}if(E!==null)N=!0;else{var J=u(b);J!==null&&ge(le,J.startTime-y),N=!1}}break e}finally{E=null,w=k,I=!1}N=void 0}}finally{N?he():fe=!1}}}var he;if(typeof G=="function")he=function(){G(ce)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,U=V.port2;V.port1.onmessage=ce,he=function(){U.postMessage(null)}}else he=function(){re(ce,0)};function ge(y,N){te=re(function(){y(o.unstable_now())},N)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(y){y.callback=null},o.unstable_forceFrameRate=function(y){0>y||125<y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<y?Math.floor(1e3/y):5},o.unstable_getCurrentPriorityLevel=function(){return w},o.unstable_next=function(y){switch(w){case 1:case 2:case 3:var N=3;break;default:N=w}var k=w;w=N;try{return y()}finally{w=k}},o.unstable_requestPaint=function(){Q=!0},o.unstable_runWithPriority=function(y,N){switch(y){case 1:case 2:case 3:case 4:case 5:break;default:y=3}var k=w;w=y;try{return N()}finally{w=k}},o.unstable_scheduleCallback=function(y,N,k){var F=o.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?F+k:F):k=F,y){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=k+ee,y={id:x++,callback:N,priorityLevel:y,startTime:k,expirationTime:ee,sortIndex:-1},k>F?(y.sortIndex=k,s(b,y),u(v)===null&&y===u(b)&&(Z?(oe(te),te=-1):Z=!0,ge(le,k-F))):(y.sortIndex=ee,s(v,y),_||I||(_=!0,fe||(fe=!0,he()))),y},o.unstable_shouldYield=z,o.unstable_wrapCallback=function(y){var N=w;return function(){var k=w;w=N;try{return y.apply(this,arguments)}finally{w=k}}}}(Ao)),Ao}var Mh;function Hp(){return Mh||(Mh=1,jo.exports=Ip()),jo.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kh;function qp(){if(kh)return Ol;kh=1;var o=Hp(),s=op(),u=up();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function m(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(f(e)!==e)throw Error(r(188))}function v(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(r(188));return t!==e?null:e}for(var n=e,a=t;;){var i=n.return;if(i===null)break;var c=i.alternate;if(c===null){if(a=i.return,a!==null){n=a;continue}break}if(i.child===c.child){for(c=i.child;c;){if(c===n)return p(i),e;if(c===a)return p(i),t;c=c.sibling}throw Error(r(188))}if(n.return!==a.return)n=i,a=c;else{for(var h=!1,g=i.child;g;){if(g===n){h=!0,n=i,a=c;break}if(g===a){h=!0,a=i,n=c;break}g=g.sibling}if(!h){for(g=c.child;g;){if(g===n){h=!0,n=c,a=i;break}if(g===a){h=!0,a=c,n=i;break}g=g.sibling}if(!h)throw Error(r(189))}}if(n.alternate!==a)throw Error(r(190))}if(n.tag!==3)throw Error(r(188));return n.stateNode.current===n?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,E=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),re=Symbol.for("react.provider"),oe=Symbol.for("react.consumer"),G=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),ae=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),ce=Symbol.iterator;function he(e){return e===null||typeof e!="object"?null:(e=ce&&e[ce]||e["@@iterator"],typeof e=="function"?e:null)}var V=Symbol.for("react.client.reference");function U(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===V?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _:return"Fragment";case Q:return"Profiler";case Z:return"StrictMode";case le:return"Suspense";case fe:return"SuspenseList";case ae:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case I:return"Portal";case G:return(e.displayName||"Context")+".Provider";case oe:return(e._context.displayName||"Context")+".Consumer";case H:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case te:return t=e.displayName||null,t!==null?t:U(e.type)||"Memo";case se:t=e._payload,e=e._init;try{return U(e(t))}catch{}}return null}var ge=Array.isArray,y=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N=u.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k={pending:!1,data:null,method:null,action:null},F=[],ee=-1;function J(e){return{current:e}}function q(e){0>ee||(e.current=F[ee],F[ee]=null,ee--)}function D(e,t){ee++,F[ee]=e.current,e.current=t}var K=J(null),Ee=J(null),Re=J(null),Ue=J(null);function _e(e,t){switch(D(Re,t),D(Ee,e),D(K,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Pf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Pf(t),e=Wf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}q(K),D(K,e)}function qe(){q(K),q(Ee),q(Re)}function et(e){e.memoizedState!==null&&D(Ue,e);var t=K.current,n=Wf(t,e.type);t!==n&&(D(Ee,e),D(K,n))}function Ct(e){Ee.current===e&&(q(K),q(Ee)),Ue.current===e&&(q(Ue),Al._currentValue=k)}var Ht=Object.prototype.hasOwnProperty,Pe=o.unstable_scheduleCallback,St=o.unstable_cancelCallback,yn=o.unstable_shouldYield,Rt=o.unstable_requestPaint,ut=o.unstable_now,j=o.unstable_getCurrentPriorityLevel,O=o.unstable_ImmediatePriority,P=o.unstable_UserBlockingPriority,ne=o.unstable_NormalPriority,W=o.unstable_LowPriority,de=o.unstable_IdlePriority,pe=o.log,ve=o.unstable_setDisableYieldValue,xe=null,me=null;function Ye(e){if(typeof pe=="function"&&ve(e),me&&typeof me.setStrictMode=="function")try{me.setStrictMode(xe,e)}catch{}}var tt=Math.clz32?Math.clz32:Ga,mt=Math.log,qa=Math.LN2;function Ga(e){return e>>>=0,e===0?32:31-(mt(e)/qa|0)|0}var xa=256,ya=4194304;function bn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ba(e,t,n){var a=e.pendingLanes;if(a===0)return 0;var i=0,c=e.suspendedLanes,h=e.pingedLanes;e=e.warmLanes;var g=a&134217727;return g!==0?(a=g&~c,a!==0?i=bn(a):(h&=g,h!==0?i=bn(h):n||(n=g&~e,n!==0&&(i=bn(n))))):(g=a&~c,g!==0?i=bn(g):h!==0?i=bn(h):n||(n=a&~e,n!==0&&(i=bn(n)))),i===0?0:t!==0&&t!==i&&(t&c)===0&&(c=i&-i,n=t&-t,c>=n||c===32&&(n&4194048)!==0)?t:i}function Fn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Hl(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Os(){var e=xa;return xa<<=1,(xa&4194048)===0&&(xa=256),e}function Cs(){var e=ya;return ya<<=1,(ya&62914560)===0&&(ya=4194304),e}function Va(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Xn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ql(e,t,n,a,i,c){var h=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var g=e.entanglements,S=e.expirationTimes,B=e.hiddenUpdates;for(n=h&~n;0<n;){var Y=31-tt(n),$=1<<Y;g[Y]=0,S[Y]=-1;var M=B[Y];if(M!==null)for(B[Y]=null,Y=0;Y<M.length;Y++){var L=M[Y];L!==null&&(L.lane&=-536870913)}n&=~$}a!==0&&Us(e,a,0),c!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=c&~(h&~t))}function Us(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-tt(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|n&4194090}function Bs(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-tt(n),i=1<<a;i&t|e[a]&t&&(e[a]|=t),n&=~i}}function Ya(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fa(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Ds(){var e=N.p;return e!==0?e:(e=window.event,e===void 0?32:xh(e.type))}function Gl(e,t){var n=N.p;try{return N.p=e,t()}finally{N.p=n}}var un=Math.random().toString(36).slice(2),gt="__reactFiber$"+un,jt="__reactProps$"+un,Rn="__reactContainer$"+un,Xa="__reactEvents$"+un,Vl="__reactListeners$"+un,Yl="__reactHandles$"+un,Ms="__reactResources$"+un,ye="__reactMarker$"+un;function Me(e){delete e[gt],delete e[jt],delete e[Xa],delete e[Vl],delete e[Yl]}function ke(e){var t=e[gt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Rn]||n[gt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ah(e);e!==null;){if(n=e[gt])return n;e=ah(e)}return t}e=n,n=e.parentNode}return null}function pt(e){if(e=e[gt]||e[Rn]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Ke(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(r(33))}function rt(e){var t=e[Ms];return t||(t=e[Ms]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ie(e){e[ye]=!0}var dn=new Set,Qn={};function dt(e,t){Kt(e,t),Kt(e+"Capture",t)}function Kt(e,t){for(Qn[e]=t,e=0;e<t.length;e++)dn.add(t[e])}var fr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fl={},Xl={};function hr(e){return Ht.call(Xl,e)?!0:Ht.call(Fl,e)?!1:fr.test(e)?Xl[e]=!0:(Fl[e]=!0,!1)}function Qa(e,t,n){if(hr(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function $a(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function fn(e,t,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+a)}}var ks,Zt;function Jt(e){if(ks===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ks=t&&t[1]||"",Zt=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ks+e+Zt}var mr=!1;function gr(e,t){if(!e||mr)return"";mr=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(L){var M=L}Reflect.construct(e,[],$)}else{try{$.call()}catch(L){M=L}e.call($.prototype)}}else{try{throw Error()}catch(L){M=L}($=e())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(L){if(L&&M&&typeof L.stack=="string")return[L.stack,M.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var c=a.DetermineComponentFrameRoot(),h=c[0],g=c[1];if(h&&g){var S=h.split(`
`),B=g.split(`
`);for(i=a=0;a<S.length&&!S[a].includes("DetermineComponentFrameRoot");)a++;for(;i<B.length&&!B[i].includes("DetermineComponentFrameRoot");)i++;if(a===S.length||i===B.length)for(a=S.length-1,i=B.length-1;1<=a&&0<=i&&S[a]!==B[i];)i--;for(;1<=a&&0<=i;a--,i--)if(S[a]!==B[i]){if(a!==1||i!==1)do if(a--,i--,0>i||S[a]!==B[i]){var Y=`
`+S[a].replace(" at new "," at ");return e.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",e.displayName)),Y}while(1<=a&&0<=i);break}}}finally{mr=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Jt(n):""}function t0(e){switch(e.tag){case 26:case 27:case 5:return Jt(e.type);case 16:return Jt("Lazy");case 13:return Jt("Suspense");case 19:return Jt("SuspenseList");case 0:case 15:return gr(e.type,!1);case 11:return gr(e.type.render,!1);case 1:return gr(e.type,!0);case 31:return Jt("Activity");default:return""}}function Fo(e){try{var t="";do t+=t0(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function Pt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xo(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function n0(e){var t=Xo(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,c=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(h){a=""+h,c.call(this,h)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(h){a=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ql(e){e._valueTracker||(e._valueTracker=n0(e))}function Qo(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=Xo(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function $l(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var a0=/[\n"\\]/g;function Wt(e){return e.replace(a0,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function pr(e,t,n,a,i,c,h,g){e.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.type=h:e.removeAttribute("type"),t!=null?h==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Pt(t)):e.value!==""+Pt(t)&&(e.value=""+Pt(t)):h!=="submit"&&h!=="reset"||e.removeAttribute("value"),t!=null?vr(e,h,Pt(t)):n!=null?vr(e,h,Pt(n)):a!=null&&e.removeAttribute("value"),i==null&&c!=null&&(e.defaultChecked=!!c),i!=null&&(e.checked=i&&typeof i!="function"&&typeof i!="symbol"),g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.name=""+Pt(g):e.removeAttribute("name")}function $o(e,t,n,a,i,c,h,g){if(c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.type=c),t!=null||n!=null){if(!(c!=="submit"&&c!=="reset"||t!=null))return;n=n!=null?""+Pt(n):"",t=t!=null?""+Pt(t):n,g||t===e.value||(e.value=t),e.defaultValue=t}a=a??i,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=g?e.checked:!!a,e.defaultChecked=!!a,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.name=h)}function vr(e,t,n){t==="number"&&$l(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Ka(e,t,n,a){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&a&&(e[n].defaultSelected=!0)}else{for(n=""+Pt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,a&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Ko(e,t,n){if(t!=null&&(t=""+Pt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Pt(n):""}function Zo(e,t,n,a){if(t==null){if(a!=null){if(n!=null)throw Error(r(92));if(ge(a)){if(1<a.length)throw Error(r(93));a=a[0]}n=a}n==null&&(n=""),t=n}n=Pt(t),e.defaultValue=n,a=e.textContent,a===n&&a!==""&&a!==null&&(e.value=a)}function Za(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var s0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jo(e,t,n){var a=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,n):typeof n!="number"||n===0||s0.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Po(e,t,n){if(t!=null&&typeof t!="object")throw Error(r(62));if(e=e.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var i in t)a=t[i],t.hasOwnProperty(i)&&n[i]!==a&&Jo(e,i,a)}else for(var c in t)t.hasOwnProperty(c)&&Jo(e,c,t[c])}function xr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var l0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),i0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Kl(e){return i0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var yr=null;function br(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ja=null,Pa=null;function Wo(e){var t=pt(e);if(t&&(e=t.stateNode)){var n=e[jt]||null;e:switch(e=t.stateNode,t.type){case"input":if(pr(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Wt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var i=a[jt]||null;if(!i)throw Error(r(90));pr(a,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)a=n[t],a.form===e.form&&Qo(a)}break e;case"textarea":Ko(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Ka(e,!!n.multiple,t,!1)}}}var Nr=!1;function eu(e,t,n){if(Nr)return e(t,n);Nr=!0;try{var a=e(t);return a}finally{if(Nr=!1,(Ja!==null||Pa!==null)&&(Di(),Ja&&(t=Ja,e=Pa,Pa=Ja=null,Wo(t),e)))for(t=0;t<e.length;t++)Wo(e[t])}}function Ls(e,t){var n=e.stateNode;if(n===null)return null;var a=n[jt]||null;if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(r(231,t,typeof n));return n}var _n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sr=!1;if(_n)try{var zs={};Object.defineProperty(zs,"passive",{get:function(){Sr=!0}}),window.addEventListener("test",zs,zs),window.removeEventListener("test",zs,zs)}catch{Sr=!1}var $n=null,jr=null,Zl=null;function tu(){if(Zl)return Zl;var e,t=jr,n=t.length,a,i="value"in $n?$n.value:$n.textContent,c=i.length;for(e=0;e<n&&t[e]===i[e];e++);var h=n-e;for(a=1;a<=h&&t[n-a]===i[c-a];a++);return Zl=i.slice(e,1<a?1-a:void 0)}function Jl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Pl(){return!0}function nu(){return!1}function Dt(e){function t(n,a,i,c,h){this._reactName=n,this._targetInst=i,this.type=a,this.nativeEvent=c,this.target=h,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(n=e[g],this[g]=n?n(c):c[g]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Pl:nu,this.isPropagationStopped=nu,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pl)},persist:function(){},isPersistent:Pl}),t}var Na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wl=Dt(Na),Is=x({},Na,{view:0,detail:0}),r0=Dt(Is),Ar,Er,Hs,ei=x({},Is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hs&&(Hs&&e.type==="mousemove"?(Ar=e.screenX-Hs.screenX,Er=e.screenY-Hs.screenY):Er=Ar=0,Hs=e),Ar)},movementY:function(e){return"movementY"in e?e.movementY:Er}}),au=Dt(ei),c0=x({},ei,{dataTransfer:0}),o0=Dt(c0),u0=x({},Is,{relatedTarget:0}),wr=Dt(u0),d0=x({},Na,{animationName:0,elapsedTime:0,pseudoElement:0}),f0=Dt(d0),h0=x({},Na,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),m0=Dt(h0),g0=x({},Na,{data:0}),su=Dt(g0),p0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},v0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},x0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function y0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=x0[e])?!!t[e]:!1}function Tr(){return y0}var b0=x({},Is,{key:function(e){if(e.key){var t=p0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Jl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?v0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tr,charCode:function(e){return e.type==="keypress"?Jl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),N0=Dt(b0),S0=x({},ei,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lu=Dt(S0),j0=x({},Is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tr}),A0=Dt(j0),E0=x({},Na,{propertyName:0,elapsedTime:0,pseudoElement:0}),w0=Dt(E0),T0=x({},ei,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),R0=Dt(T0),_0=x({},Na,{newState:0,oldState:0}),O0=Dt(_0),C0=[9,13,27,32],Rr=_n&&"CompositionEvent"in window,qs=null;_n&&"documentMode"in document&&(qs=document.documentMode);var U0=_n&&"TextEvent"in window&&!qs,iu=_n&&(!Rr||qs&&8<qs&&11>=qs),ru=" ",cu=!1;function ou(e,t){switch(e){case"keyup":return C0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Wa=!1;function B0(e,t){switch(e){case"compositionend":return uu(t);case"keypress":return t.which!==32?null:(cu=!0,ru);case"textInput":return e=t.data,e===ru&&cu?null:e;default:return null}}function D0(e,t){if(Wa)return e==="compositionend"||!Rr&&ou(e,t)?(e=tu(),Zl=jr=$n=null,Wa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return iu&&t.locale!=="ko"?null:t.data;default:return null}}var M0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function du(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!M0[e.type]:t==="textarea"}function fu(e,t,n,a){Ja?Pa?Pa.push(a):Pa=[a]:Ja=a,t=Hi(t,"onChange"),0<t.length&&(n=new Wl("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Gs=null,Vs=null;function k0(e){Qf(e,0)}function ti(e){var t=Ke(e);if(Qo(t))return e}function hu(e,t){if(e==="change")return t}var mu=!1;if(_n){var _r;if(_n){var Or="oninput"in document;if(!Or){var gu=document.createElement("div");gu.setAttribute("oninput","return;"),Or=typeof gu.oninput=="function"}_r=Or}else _r=!1;mu=_r&&(!document.documentMode||9<document.documentMode)}function pu(){Gs&&(Gs.detachEvent("onpropertychange",vu),Vs=Gs=null)}function vu(e){if(e.propertyName==="value"&&ti(Vs)){var t=[];fu(t,Vs,e,br(e)),eu(k0,t)}}function L0(e,t,n){e==="focusin"?(pu(),Gs=t,Vs=n,Gs.attachEvent("onpropertychange",vu)):e==="focusout"&&pu()}function z0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ti(Vs)}function I0(e,t){if(e==="click")return ti(t)}function H0(e,t){if(e==="input"||e==="change")return ti(t)}function q0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qt=typeof Object.is=="function"?Object.is:q0;function Ys(e,t){if(qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var i=n[a];if(!Ht.call(t,i)||!qt(e[i],t[i]))return!1}return!0}function xu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yu(e,t){var n=xu(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xu(n)}}function bu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Nu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=$l(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=$l(e.document)}return t}function Cr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var G0=_n&&"documentMode"in document&&11>=document.documentMode,es=null,Ur=null,Fs=null,Br=!1;function Su(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Br||es==null||es!==$l(a)||(a=es,"selectionStart"in a&&Cr(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Fs&&Ys(Fs,a)||(Fs=a,a=Hi(Ur,"onSelect"),0<a.length&&(t=new Wl("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=es)))}function Sa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ts={animationend:Sa("Animation","AnimationEnd"),animationiteration:Sa("Animation","AnimationIteration"),animationstart:Sa("Animation","AnimationStart"),transitionrun:Sa("Transition","TransitionRun"),transitionstart:Sa("Transition","TransitionStart"),transitioncancel:Sa("Transition","TransitionCancel"),transitionend:Sa("Transition","TransitionEnd")},Dr={},ju={};_n&&(ju=document.createElement("div").style,"AnimationEvent"in window||(delete ts.animationend.animation,delete ts.animationiteration.animation,delete ts.animationstart.animation),"TransitionEvent"in window||delete ts.transitionend.transition);function ja(e){if(Dr[e])return Dr[e];if(!ts[e])return e;var t=ts[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ju)return Dr[e]=t[n];return e}var Au=ja("animationend"),Eu=ja("animationiteration"),wu=ja("animationstart"),V0=ja("transitionrun"),Y0=ja("transitionstart"),F0=ja("transitioncancel"),Tu=ja("transitionend"),Ru=new Map,Mr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mr.push("scrollEnd");function hn(e,t){Ru.set(e,t),dt(t,[e])}var _u=new WeakMap;function en(e,t){if(typeof e=="object"&&e!==null){var n=_u.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Fo(t)},_u.set(e,t),t)}return{value:e,source:t,stack:Fo(t)}}var tn=[],ns=0,kr=0;function ni(){for(var e=ns,t=kr=ns=0;t<e;){var n=tn[t];tn[t++]=null;var a=tn[t];tn[t++]=null;var i=tn[t];tn[t++]=null;var c=tn[t];if(tn[t++]=null,a!==null&&i!==null){var h=a.pending;h===null?i.next=i:(i.next=h.next,h.next=i),a.pending=i}c!==0&&Ou(n,i,c)}}function ai(e,t,n,a){tn[ns++]=e,tn[ns++]=t,tn[ns++]=n,tn[ns++]=a,kr|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function Lr(e,t,n,a){return ai(e,t,n,a),si(e)}function as(e,t){return ai(e,null,null,t),si(e)}function Ou(e,t,n){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n);for(var i=!1,c=e.return;c!==null;)c.childLanes|=n,a=c.alternate,a!==null&&(a.childLanes|=n),c.tag===22&&(e=c.stateNode,e===null||e._visibility&1||(i=!0)),e=c,c=c.return;return e.tag===3?(c=e.stateNode,i&&t!==null&&(i=31-tt(n),e=c.hiddenUpdates,a=e[i],a===null?e[i]=[t]:a.push(t),t.lane=n|536870912),c):null}function si(e){if(50<pl)throw pl=0,Vc=null,Error(r(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ss={};function X0(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(e,t,n,a){return new X0(e,t,n,a)}function zr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function On(e,t){var n=e.alternate;return n===null?(n=Gt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Cu(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function li(e,t,n,a,i,c){var h=0;if(a=e,typeof e=="function")zr(e)&&(h=1);else if(typeof e=="string")h=$g(e,n,K.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ae:return e=Gt(31,n,t,i),e.elementType=ae,e.lanes=c,e;case _:return Aa(n.children,i,c,t);case Z:h=8,i|=24;break;case Q:return e=Gt(12,n,t,i|2),e.elementType=Q,e.lanes=c,e;case le:return e=Gt(13,n,t,i),e.elementType=le,e.lanes=c,e;case fe:return e=Gt(19,n,t,i),e.elementType=fe,e.lanes=c,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case re:case G:h=10;break e;case oe:h=9;break e;case H:h=11;break e;case te:h=14;break e;case se:h=16,a=null;break e}h=29,n=Error(r(130,e===null?"null":typeof e,"")),a=null}return t=Gt(h,n,t,i),t.elementType=e,t.type=a,t.lanes=c,t}function Aa(e,t,n,a){return e=Gt(7,e,a,t),e.lanes=n,e}function Ir(e,t,n){return e=Gt(6,e,null,t),e.lanes=n,e}function Hr(e,t,n){return t=Gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ls=[],is=0,ii=null,ri=0,nn=[],an=0,Ea=null,Cn=1,Un="";function wa(e,t){ls[is++]=ri,ls[is++]=ii,ii=e,ri=t}function Uu(e,t,n){nn[an++]=Cn,nn[an++]=Un,nn[an++]=Ea,Ea=e;var a=Cn;e=Un;var i=32-tt(a)-1;a&=~(1<<i),n+=1;var c=32-tt(t)+i;if(30<c){var h=i-i%5;c=(a&(1<<h)-1).toString(32),a>>=h,i-=h,Cn=1<<32-tt(t)+i|n<<i|a,Un=c+e}else Cn=1<<c|n<<i|a,Un=e}function qr(e){e.return!==null&&(wa(e,1),Uu(e,1,0))}function Gr(e){for(;e===ii;)ii=ls[--is],ls[is]=null,ri=ls[--is],ls[is]=null;for(;e===Ea;)Ea=nn[--an],nn[an]=null,Un=nn[--an],nn[an]=null,Cn=nn[--an],nn[an]=null}var Ut=null,at=null,He=!1,Ta=null,Nn=!1,Vr=Error(r(519));function Ra(e){var t=Error(r(418,""));throw $s(en(t,e)),Vr}function Bu(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[gt]=e,t[jt]=a,n){case"dialog":De("cancel",t),De("close",t);break;case"iframe":case"object":case"embed":De("load",t);break;case"video":case"audio":for(n=0;n<xl.length;n++)De(xl[n],t);break;case"source":De("error",t);break;case"img":case"image":case"link":De("error",t),De("load",t);break;case"details":De("toggle",t);break;case"input":De("invalid",t),$o(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0),Ql(t);break;case"select":De("invalid",t);break;case"textarea":De("invalid",t),Zo(t,a.value,a.defaultValue,a.children),Ql(t)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||a.suppressHydrationWarning===!0||Jf(t.textContent,n)?(a.popover!=null&&(De("beforetoggle",t),De("toggle",t)),a.onScroll!=null&&De("scroll",t),a.onScrollEnd!=null&&De("scrollend",t),a.onClick!=null&&(t.onclick=qi),t=!0):t=!1,t||Ra(e)}function Du(e){for(Ut=e.return;Ut;)switch(Ut.tag){case 5:case 13:Nn=!1;return;case 27:case 3:Nn=!0;return;default:Ut=Ut.return}}function Xs(e){if(e!==Ut)return!1;if(!He)return Du(e),He=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||lo(e.type,e.memoizedProps)),n=!n),n&&at&&Ra(e),Du(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){at=gn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}at=null}}else t===27?(t=at,ua(e.type)?(e=oo,oo=null,at=e):at=t):at=Ut?gn(e.stateNode.nextSibling):null;return!0}function Qs(){at=Ut=null,He=!1}function Mu(){var e=Ta;return e!==null&&(Lt===null?Lt=e:Lt.push.apply(Lt,e),Ta=null),e}function $s(e){Ta===null?Ta=[e]:Ta.push(e)}var Yr=J(null),_a=null,Bn=null;function Kn(e,t,n){D(Yr,t._currentValue),t._currentValue=n}function Dn(e){e._currentValue=Yr.current,q(Yr)}function Fr(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Xr(e,t,n,a){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){var h=i.child;c=c.firstContext;e:for(;c!==null;){var g=c;c=i;for(var S=0;S<t.length;S++)if(g.context===t[S]){c.lanes|=n,g=c.alternate,g!==null&&(g.lanes|=n),Fr(c.return,n,e),a||(h=null);break e}c=g.next}}else if(i.tag===18){if(h=i.return,h===null)throw Error(r(341));h.lanes|=n,c=h.alternate,c!==null&&(c.lanes|=n),Fr(h,n,e),h=null}else h=i.child;if(h!==null)h.return=i;else for(h=i;h!==null;){if(h===e){h=null;break}if(i=h.sibling,i!==null){i.return=h.return,h=i;break}h=h.return}i=h}}function Ks(e,t,n,a){e=null;for(var i=t,c=!1;i!==null;){if(!c){if((i.flags&524288)!==0)c=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var h=i.alternate;if(h===null)throw Error(r(387));if(h=h.memoizedProps,h!==null){var g=i.type;qt(i.pendingProps.value,h.value)||(e!==null?e.push(g):e=[g])}}else if(i===Ue.current){if(h=i.alternate,h===null)throw Error(r(387));h.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(Al):e=[Al])}i=i.return}e!==null&&Xr(t,e,n,a),t.flags|=262144}function ci(e){for(e=e.firstContext;e!==null;){if(!qt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Oa(e){_a=e,Bn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function _t(e){return ku(_a,e)}function oi(e,t){return _a===null&&Oa(e),ku(e,t)}function ku(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Bn===null){if(e===null)throw Error(r(308));Bn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Bn=Bn.next=t;return n}var Q0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},$0=o.unstable_scheduleCallback,K0=o.unstable_NormalPriority,vt={$$typeof:G,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qr(){return{controller:new Q0,data:new Map,refCount:0}}function Zs(e){e.refCount--,e.refCount===0&&$0(K0,function(){e.controller.abort()})}var Js=null,$r=0,rs=0,cs=null;function Z0(e,t){if(Js===null){var n=Js=[];$r=0,rs=Zc(),cs={status:"pending",value:void 0,then:function(a){n.push(a)}}}return $r++,t.then(Lu,Lu),t}function Lu(){if(--$r===0&&Js!==null){cs!==null&&(cs.status="fulfilled");var e=Js;Js=null,rs=0,cs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function J0(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var i=0;i<n.length;i++)(0,n[i])(t)},function(i){for(a.status="rejected",a.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),a}var zu=y.S;y.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Z0(e,t),zu!==null&&zu(e,t)};var Ca=J(null);function Kr(){var e=Ca.current;return e!==null?e:Ze.pooledCache}function ui(e,t){t===null?D(Ca,Ca.current):D(Ca,t.pool)}function Iu(){var e=Kr();return e===null?null:{parent:vt._currentValue,pool:e}}var Ps=Error(r(460)),Hu=Error(r(474)),di=Error(r(542)),Zr={then:function(){}};function qu(e){return e=e.status,e==="fulfilled"||e==="rejected"}function fi(){}function Gu(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(fi,fi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Yu(e),e;default:if(typeof t.status=="string")t.then(fi,fi);else{if(e=Ze,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var i=t;i.status="fulfilled",i.value=a}},function(a){if(t.status==="pending"){var i=t;i.status="rejected",i.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Yu(e),e}throw Ws=t,Ps}}var Ws=null;function Vu(){if(Ws===null)throw Error(r(459));var e=Ws;return Ws=null,e}function Yu(e){if(e===Ps||e===di)throw Error(r(483))}var Zn=!1;function Jr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Jn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Pn(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Ge&2)!==0){var i=a.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),a.pending=t,t=si(e),Ou(e,null,n),t}return ai(e,a,t,n),si(e)}function el(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Bs(e,n)}}function Wr(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var i=null,c=null;if(n=n.firstBaseUpdate,n!==null){do{var h={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};c===null?i=c=h:c=c.next=h,n=n.next}while(n!==null);c===null?i=c=t:c=c.next=t}else i=c=t;n={baseState:a.baseState,firstBaseUpdate:i,lastBaseUpdate:c,shared:a.shared,callbacks:a.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ec=!1;function tl(){if(ec){var e=cs;if(e!==null)throw e}}function nl(e,t,n,a){ec=!1;var i=e.updateQueue;Zn=!1;var c=i.firstBaseUpdate,h=i.lastBaseUpdate,g=i.shared.pending;if(g!==null){i.shared.pending=null;var S=g,B=S.next;S.next=null,h===null?c=B:h.next=B,h=S;var Y=e.alternate;Y!==null&&(Y=Y.updateQueue,g=Y.lastBaseUpdate,g!==h&&(g===null?Y.firstBaseUpdate=B:g.next=B,Y.lastBaseUpdate=S))}if(c!==null){var $=i.baseState;h=0,Y=B=S=null,g=c;do{var M=g.lane&-536870913,L=M!==g.lane;if(L?(Le&M)===M:(a&M)===M){M!==0&&M===rs&&(ec=!0),Y!==null&&(Y=Y.next={lane:0,tag:g.tag,payload:g.payload,callback:null,next:null});e:{var Ae=e,Se=g;M=t;var Qe=n;switch(Se.tag){case 1:if(Ae=Se.payload,typeof Ae=="function"){$=Ae.call(Qe,$,M);break e}$=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Se.payload,M=typeof Ae=="function"?Ae.call(Qe,$,M):Ae,M==null)break e;$=x({},$,M);break e;case 2:Zn=!0}}M=g.callback,M!==null&&(e.flags|=64,L&&(e.flags|=8192),L=i.callbacks,L===null?i.callbacks=[M]:L.push(M))}else L={lane:M,tag:g.tag,payload:g.payload,callback:g.callback,next:null},Y===null?(B=Y=L,S=$):Y=Y.next=L,h|=M;if(g=g.next,g===null){if(g=i.shared.pending,g===null)break;L=g,g=L.next,L.next=null,i.lastBaseUpdate=L,i.shared.pending=null}}while(!0);Y===null&&(S=$),i.baseState=S,i.firstBaseUpdate=B,i.lastBaseUpdate=Y,c===null&&(i.shared.lanes=0),ia|=h,e.lanes=h,e.memoizedState=$}}function Fu(e,t){if(typeof e!="function")throw Error(r(191,e));e.call(t)}function Xu(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Fu(n[e],t)}var os=J(null),hi=J(0);function Qu(e,t){e=qn,D(hi,e),D(os,t),qn=e|t.baseLanes}function tc(){D(hi,qn),D(os,os.current)}function nc(){qn=hi.current,q(os),q(hi)}var Wn=0,Oe=null,Fe=null,ft=null,mi=!1,us=!1,Ua=!1,gi=0,al=0,ds=null,P0=0;function ct(){throw Error(r(321))}function ac(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qt(e[n],t[n]))return!1;return!0}function sc(e,t,n,a,i,c){return Wn=c,Oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,y.H=e===null||e.memoizedState===null?Od:Cd,Ua=!1,c=n(a,i),Ua=!1,us&&(c=Ku(t,n,a,i)),$u(e),c}function $u(e){y.H=Ni;var t=Fe!==null&&Fe.next!==null;if(Wn=0,ft=Fe=Oe=null,mi=!1,al=0,ds=null,t)throw Error(r(300));e===null||yt||(e=e.dependencies,e!==null&&ci(e)&&(yt=!0))}function Ku(e,t,n,a){Oe=e;var i=0;do{if(us&&(ds=null),al=0,us=!1,25<=i)throw Error(r(301));if(i+=1,ft=Fe=null,e.updateQueue!=null){var c=e.updateQueue;c.lastEffect=null,c.events=null,c.stores=null,c.memoCache!=null&&(c.memoCache.index=0)}y.H=lg,c=t(n,a)}while(us);return c}function W0(){var e=y.H,t=e.useState()[0];return t=typeof t.then=="function"?sl(t):t,e=e.useState()[0],(Fe!==null?Fe.memoizedState:null)!==e&&(Oe.flags|=1024),t}function lc(){var e=gi!==0;return gi=0,e}function ic(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function rc(e){if(mi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}mi=!1}Wn=0,ft=Fe=Oe=null,us=!1,al=gi=0,ds=null}function Mt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Oe.memoizedState=ft=e:ft=ft.next=e,ft}function ht(){if(Fe===null){var e=Oe.alternate;e=e!==null?e.memoizedState:null}else e=Fe.next;var t=ft===null?Oe.memoizedState:ft.next;if(t!==null)ft=t,Fe=e;else{if(e===null)throw Oe.alternate===null?Error(r(467)):Error(r(310));Fe=e,e={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},ft===null?Oe.memoizedState=ft=e:ft=ft.next=e}return ft}function cc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sl(e){var t=al;return al+=1,ds===null&&(ds=[]),e=Gu(ds,e,t),t=Oe,(ft===null?t.memoizedState:ft.next)===null&&(t=t.alternate,y.H=t===null||t.memoizedState===null?Od:Cd),e}function pi(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return sl(e);if(e.$$typeof===G)return _t(e)}throw Error(r(438,String(e)))}function oc(e){var t=null,n=Oe.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var a=Oe.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(i){return i.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=cc(),Oe.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=z;return t.index++,n}function Mn(e,t){return typeof t=="function"?t(e):t}function vi(e){var t=ht();return uc(t,Fe,e)}function uc(e,t,n){var a=e.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var i=e.baseQueue,c=a.pending;if(c!==null){if(i!==null){var h=i.next;i.next=c.next,c.next=h}t.baseQueue=i=c,a.pending=null}if(c=e.baseState,i===null)e.memoizedState=c;else{t=i.next;var g=h=null,S=null,B=t,Y=!1;do{var $=B.lane&-536870913;if($!==B.lane?(Le&$)===$:(Wn&$)===$){var M=B.revertLane;if(M===0)S!==null&&(S=S.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),$===rs&&(Y=!0);else if((Wn&M)===M){B=B.next,M===rs&&(Y=!0);continue}else $={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},S===null?(g=S=$,h=c):S=S.next=$,Oe.lanes|=M,ia|=M;$=B.action,Ua&&n(c,$),c=B.hasEagerState?B.eagerState:n(c,$)}else M={lane:$,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},S===null?(g=S=M,h=c):S=S.next=M,Oe.lanes|=$,ia|=$;B=B.next}while(B!==null&&B!==t);if(S===null?h=c:S.next=g,!qt(c,e.memoizedState)&&(yt=!0,Y&&(n=cs,n!==null)))throw n;e.memoizedState=c,e.baseState=h,e.baseQueue=S,a.lastRenderedState=c}return i===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function dc(e){var t=ht(),n=t.queue;if(n===null)throw Error(r(311));n.lastRenderedReducer=e;var a=n.dispatch,i=n.pending,c=t.memoizedState;if(i!==null){n.pending=null;var h=i=i.next;do c=e(c,h.action),h=h.next;while(h!==i);qt(c,t.memoizedState)||(yt=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),n.lastRenderedState=c}return[c,a]}function Zu(e,t,n){var a=Oe,i=ht(),c=He;if(c){if(n===void 0)throw Error(r(407));n=n()}else n=t();var h=!qt((Fe||i).memoizedState,n);h&&(i.memoizedState=n,yt=!0),i=i.queue;var g=Wu.bind(null,a,i,e);if(ll(2048,8,g,[e]),i.getSnapshot!==t||h||ft!==null&&ft.memoizedState.tag&1){if(a.flags|=2048,fs(9,xi(),Pu.bind(null,a,i,n,t),null),Ze===null)throw Error(r(349));c||(Wn&124)!==0||Ju(a,t,n)}return n}function Ju(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Oe.updateQueue,t===null?(t=cc(),Oe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Pu(e,t,n,a){t.value=n,t.getSnapshot=a,ed(t)&&td(e)}function Wu(e,t,n){return n(function(){ed(t)&&td(e)})}function ed(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!qt(e,n)}catch{return!0}}function td(e){var t=as(e,2);t!==null&&Qt(t,e,2)}function fc(e){var t=Mt();if(typeof e=="function"){var n=e;if(e=n(),Ua){Ye(!0);try{n()}finally{Ye(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:e},t}function nd(e,t,n,a){return e.baseState=n,uc(e,Fe,typeof a=="function"?a:Mn)}function eg(e,t,n,a,i){if(bi(e))throw Error(r(485));if(e=t.action,e!==null){var c={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){c.listeners.push(h)}};y.T!==null?n(!0):c.isTransition=!1,a(c),n=t.pending,n===null?(c.next=t.pending=c,ad(t,c)):(c.next=n.next,t.pending=n.next=c)}}function ad(e,t){var n=t.action,a=t.payload,i=e.state;if(t.isTransition){var c=y.T,h={};y.T=h;try{var g=n(i,a),S=y.S;S!==null&&S(h,g),sd(e,t,g)}catch(B){hc(e,t,B)}finally{y.T=c}}else try{c=n(i,a),sd(e,t,c)}catch(B){hc(e,t,B)}}function sd(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){ld(e,t,a)},function(a){return hc(e,t,a)}):ld(e,t,n)}function ld(e,t,n){t.status="fulfilled",t.value=n,id(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,ad(e,n)))}function hc(e,t,n){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=n,id(t),t=t.next;while(t!==a)}e.action=null}function id(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function rd(e,t){return t}function cd(e,t){if(He){var n=Ze.formState;if(n!==null){e:{var a=Oe;if(He){if(at){t:{for(var i=at,c=Nn;i.nodeType!==8;){if(!c){i=null;break t}if(i=gn(i.nextSibling),i===null){i=null;break t}}c=i.data,i=c==="F!"||c==="F"?i:null}if(i){at=gn(i.nextSibling),a=i.data==="F!";break e}}Ra(a)}a=!1}a&&(t=n[0])}}return n=Mt(),n.memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rd,lastRenderedState:t},n.queue=a,n=Td.bind(null,Oe,a),a.dispatch=n,a=fc(!1),c=xc.bind(null,Oe,!1,a.queue),a=Mt(),i={state:t,dispatch:null,action:e,pending:null},a.queue=i,n=eg.bind(null,Oe,i,c,n),i.dispatch=n,a.memoizedState=e,[t,n,!1]}function od(e){var t=ht();return ud(t,Fe,e)}function ud(e,t,n){if(t=uc(e,t,rd)[0],e=vi(Mn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=sl(t)}catch(h){throw h===Ps?di:h}else a=t;t=ht();var i=t.queue,c=i.dispatch;return n!==t.memoizedState&&(Oe.flags|=2048,fs(9,xi(),tg.bind(null,i,n),null)),[a,c,e]}function tg(e,t){e.action=t}function dd(e){var t=ht(),n=Fe;if(n!==null)return ud(t,n,e);ht(),t=t.memoizedState,n=ht();var a=n.queue.dispatch;return n.memoizedState=e,[t,a,!1]}function fs(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},t=Oe.updateQueue,t===null&&(t=cc(),Oe.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function xi(){return{destroy:void 0,resource:void 0}}function fd(){return ht().memoizedState}function yi(e,t,n,a){var i=Mt();a=a===void 0?null:a,Oe.flags|=e,i.memoizedState=fs(1|t,xi(),n,a)}function ll(e,t,n,a){var i=ht();a=a===void 0?null:a;var c=i.memoizedState.inst;Fe!==null&&a!==null&&ac(a,Fe.memoizedState.deps)?i.memoizedState=fs(t,c,n,a):(Oe.flags|=e,i.memoizedState=fs(1|t,c,n,a))}function hd(e,t){yi(8390656,8,e,t)}function md(e,t){ll(2048,8,e,t)}function gd(e,t){return ll(4,2,e,t)}function pd(e,t){return ll(4,4,e,t)}function vd(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function xd(e,t,n){n=n!=null?n.concat([e]):null,ll(4,4,vd.bind(null,t,e),n)}function mc(){}function yd(e,t){var n=ht();t=t===void 0?null:t;var a=n.memoizedState;return t!==null&&ac(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function bd(e,t){var n=ht();t=t===void 0?null:t;var a=n.memoizedState;if(t!==null&&ac(t,a[1]))return a[0];if(a=e(),Ua){Ye(!0);try{e()}finally{Ye(!1)}}return n.memoizedState=[a,t],a}function gc(e,t,n){return n===void 0||(Wn&1073741824)!==0?e.memoizedState=t:(e.memoizedState=n,e=Af(),Oe.lanes|=e,ia|=e,n)}function Nd(e,t,n,a){return qt(n,t)?n:os.current!==null?(e=gc(e,n,a),qt(e,t)||(yt=!0),e):(Wn&42)===0?(yt=!0,e.memoizedState=n):(e=Af(),Oe.lanes|=e,ia|=e,t)}function Sd(e,t,n,a,i){var c=N.p;N.p=c!==0&&8>c?c:8;var h=y.T,g={};y.T=g,xc(e,!1,t,n);try{var S=i(),B=y.S;if(B!==null&&B(g,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var Y=J0(S,a);il(e,t,Y,Xt(e))}else il(e,t,a,Xt(e))}catch($){il(e,t,{then:function(){},status:"rejected",reason:$},Xt())}finally{N.p=c,y.T=h}}function ng(){}function pc(e,t,n,a){if(e.tag!==5)throw Error(r(476));var i=jd(e).queue;Sd(e,i,t,k,n===null?ng:function(){return Ad(e),n(a)})}function jd(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:k,baseState:k,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:k},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ad(e){var t=jd(e).next.queue;il(e,t,{},Xt())}function vc(){return _t(Al)}function Ed(){return ht().memoizedState}function wd(){return ht().memoizedState}function ag(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Xt();e=Jn(n);var a=Pn(t,e,n);a!==null&&(Qt(a,t,n),el(a,t,n)),t={cache:Qr()},e.payload=t;return}t=t.return}}function sg(e,t,n){var a=Xt();n={lane:a,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},bi(e)?Rd(t,n):(n=Lr(e,t,n,a),n!==null&&(Qt(n,e,a),_d(n,t,a)))}function Td(e,t,n){var a=Xt();il(e,t,n,a)}function il(e,t,n,a){var i={lane:a,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(bi(e))Rd(t,i);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var h=t.lastRenderedState,g=c(h,n);if(i.hasEagerState=!0,i.eagerState=g,qt(g,h))return ai(e,t,i,0),Ze===null&&ni(),!1}catch{}finally{}if(n=Lr(e,t,i,a),n!==null)return Qt(n,e,a),_d(n,t,a),!0}return!1}function xc(e,t,n,a){if(a={lane:2,revertLane:Zc(),action:a,hasEagerState:!1,eagerState:null,next:null},bi(e)){if(t)throw Error(r(479))}else t=Lr(e,n,a,2),t!==null&&Qt(t,e,2)}function bi(e){var t=e.alternate;return e===Oe||t!==null&&t===Oe}function Rd(e,t){us=mi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function _d(e,t,n){if((n&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Bs(e,n)}}var Ni={readContext:_t,use:pi,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useLayoutEffect:ct,useInsertionEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useSyncExternalStore:ct,useId:ct,useHostTransitionStatus:ct,useFormState:ct,useActionState:ct,useOptimistic:ct,useMemoCache:ct,useCacheRefresh:ct},Od={readContext:_t,use:pi,useCallback:function(e,t){return Mt().memoizedState=[e,t===void 0?null:t],e},useContext:_t,useEffect:hd,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,yi(4194308,4,vd.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yi(4194308,4,e,t)},useInsertionEffect:function(e,t){yi(4,2,e,t)},useMemo:function(e,t){var n=Mt();t=t===void 0?null:t;var a=e();if(Ua){Ye(!0);try{e()}finally{Ye(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=Mt();if(n!==void 0){var i=n(t);if(Ua){Ye(!0);try{n(t)}finally{Ye(!1)}}}else i=t;return a.memoizedState=a.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},a.queue=e,e=e.dispatch=sg.bind(null,Oe,e),[a.memoizedState,e]},useRef:function(e){var t=Mt();return e={current:e},t.memoizedState=e},useState:function(e){e=fc(e);var t=e.queue,n=Td.bind(null,Oe,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:mc,useDeferredValue:function(e,t){var n=Mt();return gc(n,e,t)},useTransition:function(){var e=fc(!1);return e=Sd.bind(null,Oe,e.queue,!0,!1),Mt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=Oe,i=Mt();if(He){if(n===void 0)throw Error(r(407));n=n()}else{if(n=t(),Ze===null)throw Error(r(349));(Le&124)!==0||Ju(a,t,n)}i.memoizedState=n;var c={value:n,getSnapshot:t};return i.queue=c,hd(Wu.bind(null,a,c,e),[e]),a.flags|=2048,fs(9,xi(),Pu.bind(null,a,c,n,t),null),n},useId:function(){var e=Mt(),t=Ze.identifierPrefix;if(He){var n=Un,a=Cn;n=(a&~(1<<32-tt(a)-1)).toString(32)+n,t="«"+t+"R"+n,n=gi++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=P0++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:vc,useFormState:cd,useActionState:cd,useOptimistic:function(e){var t=Mt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=xc.bind(null,Oe,!0,n),n.dispatch=t,[e,t]},useMemoCache:oc,useCacheRefresh:function(){return Mt().memoizedState=ag.bind(null,Oe)}},Cd={readContext:_t,use:pi,useCallback:yd,useContext:_t,useEffect:md,useImperativeHandle:xd,useInsertionEffect:gd,useLayoutEffect:pd,useMemo:bd,useReducer:vi,useRef:fd,useState:function(){return vi(Mn)},useDebugValue:mc,useDeferredValue:function(e,t){var n=ht();return Nd(n,Fe.memoizedState,e,t)},useTransition:function(){var e=vi(Mn)[0],t=ht().memoizedState;return[typeof e=="boolean"?e:sl(e),t]},useSyncExternalStore:Zu,useId:Ed,useHostTransitionStatus:vc,useFormState:od,useActionState:od,useOptimistic:function(e,t){var n=ht();return nd(n,Fe,e,t)},useMemoCache:oc,useCacheRefresh:wd},lg={readContext:_t,use:pi,useCallback:yd,useContext:_t,useEffect:md,useImperativeHandle:xd,useInsertionEffect:gd,useLayoutEffect:pd,useMemo:bd,useReducer:dc,useRef:fd,useState:function(){return dc(Mn)},useDebugValue:mc,useDeferredValue:function(e,t){var n=ht();return Fe===null?gc(n,e,t):Nd(n,Fe.memoizedState,e,t)},useTransition:function(){var e=dc(Mn)[0],t=ht().memoizedState;return[typeof e=="boolean"?e:sl(e),t]},useSyncExternalStore:Zu,useId:Ed,useHostTransitionStatus:vc,useFormState:dd,useActionState:dd,useOptimistic:function(e,t){var n=ht();return Fe!==null?nd(n,Fe,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:oc,useCacheRefresh:wd},hs=null,rl=0;function Si(e){var t=rl;return rl+=1,hs===null&&(hs=[]),Gu(hs,e,t)}function cl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ji(e,t){throw t.$$typeof===E?Error(r(525)):(e=Object.prototype.toString.call(t),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ud(e){var t=e._init;return t(e._payload)}function Bd(e){function t(R,T){if(e){var C=R.deletions;C===null?(R.deletions=[T],R.flags|=16):C.push(T)}}function n(R,T){if(!e)return null;for(;T!==null;)t(R,T),T=T.sibling;return null}function a(R){for(var T=new Map;R!==null;)R.key!==null?T.set(R.key,R):T.set(R.index,R),R=R.sibling;return T}function i(R,T){return R=On(R,T),R.index=0,R.sibling=null,R}function c(R,T,C){return R.index=C,e?(C=R.alternate,C!==null?(C=C.index,C<T?(R.flags|=67108866,T):C):(R.flags|=67108866,T)):(R.flags|=1048576,T)}function h(R){return e&&R.alternate===null&&(R.flags|=67108866),R}function g(R,T,C,X){return T===null||T.tag!==6?(T=Ir(C,R.mode,X),T.return=R,T):(T=i(T,C),T.return=R,T)}function S(R,T,C,X){var be=C.type;return be===_?Y(R,T,C.props.children,X,C.key):T!==null&&(T.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===se&&Ud(be)===T.type)?(T=i(T,C.props),cl(T,C),T.return=R,T):(T=li(C.type,C.key,C.props,null,R.mode,X),cl(T,C),T.return=R,T)}function B(R,T,C,X){return T===null||T.tag!==4||T.stateNode.containerInfo!==C.containerInfo||T.stateNode.implementation!==C.implementation?(T=Hr(C,R.mode,X),T.return=R,T):(T=i(T,C.children||[]),T.return=R,T)}function Y(R,T,C,X,be){return T===null||T.tag!==7?(T=Aa(C,R.mode,X,be),T.return=R,T):(T=i(T,C),T.return=R,T)}function $(R,T,C){if(typeof T=="string"&&T!==""||typeof T=="number"||typeof T=="bigint")return T=Ir(""+T,R.mode,C),T.return=R,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case w:return C=li(T.type,T.key,T.props,null,R.mode,C),cl(C,T),C.return=R,C;case I:return T=Hr(T,R.mode,C),T.return=R,T;case se:var X=T._init;return T=X(T._payload),$(R,T,C)}if(ge(T)||he(T))return T=Aa(T,R.mode,C,null),T.return=R,T;if(typeof T.then=="function")return $(R,Si(T),C);if(T.$$typeof===G)return $(R,oi(R,T),C);ji(R,T)}return null}function M(R,T,C,X){var be=T!==null?T.key:null;if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return be!==null?null:g(R,T,""+C,X);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case w:return C.key===be?S(R,T,C,X):null;case I:return C.key===be?B(R,T,C,X):null;case se:return be=C._init,C=be(C._payload),M(R,T,C,X)}if(ge(C)||he(C))return be!==null?null:Y(R,T,C,X,null);if(typeof C.then=="function")return M(R,T,Si(C),X);if(C.$$typeof===G)return M(R,T,oi(R,C),X);ji(R,C)}return null}function L(R,T,C,X,be){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return R=R.get(C)||null,g(T,R,""+X,be);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case w:return R=R.get(X.key===null?C:X.key)||null,S(T,R,X,be);case I:return R=R.get(X.key===null?C:X.key)||null,B(T,R,X,be);case se:var Ce=X._init;return X=Ce(X._payload),L(R,T,C,X,be)}if(ge(X)||he(X))return R=R.get(C)||null,Y(T,R,X,be,null);if(typeof X.then=="function")return L(R,T,C,Si(X),be);if(X.$$typeof===G)return L(R,T,C,oi(T,X),be);ji(T,X)}return null}function Ae(R,T,C,X){for(var be=null,Ce=null,Ne=T,je=T=0,Nt=null;Ne!==null&&je<C.length;je++){Ne.index>je?(Nt=Ne,Ne=null):Nt=Ne.sibling;var ze=M(R,Ne,C[je],X);if(ze===null){Ne===null&&(Ne=Nt);break}e&&Ne&&ze.alternate===null&&t(R,Ne),T=c(ze,T,je),Ce===null?be=ze:Ce.sibling=ze,Ce=ze,Ne=Nt}if(je===C.length)return n(R,Ne),He&&wa(R,je),be;if(Ne===null){for(;je<C.length;je++)Ne=$(R,C[je],X),Ne!==null&&(T=c(Ne,T,je),Ce===null?be=Ne:Ce.sibling=Ne,Ce=Ne);return He&&wa(R,je),be}for(Ne=a(Ne);je<C.length;je++)Nt=L(Ne,R,je,C[je],X),Nt!==null&&(e&&Nt.alternate!==null&&Ne.delete(Nt.key===null?je:Nt.key),T=c(Nt,T,je),Ce===null?be=Nt:Ce.sibling=Nt,Ce=Nt);return e&&Ne.forEach(function(ga){return t(R,ga)}),He&&wa(R,je),be}function Se(R,T,C,X){if(C==null)throw Error(r(151));for(var be=null,Ce=null,Ne=T,je=T=0,Nt=null,ze=C.next();Ne!==null&&!ze.done;je++,ze=C.next()){Ne.index>je?(Nt=Ne,Ne=null):Nt=Ne.sibling;var ga=M(R,Ne,ze.value,X);if(ga===null){Ne===null&&(Ne=Nt);break}e&&Ne&&ga.alternate===null&&t(R,Ne),T=c(ga,T,je),Ce===null?be=ga:Ce.sibling=ga,Ce=ga,Ne=Nt}if(ze.done)return n(R,Ne),He&&wa(R,je),be;if(Ne===null){for(;!ze.done;je++,ze=C.next())ze=$(R,ze.value,X),ze!==null&&(T=c(ze,T,je),Ce===null?be=ze:Ce.sibling=ze,Ce=ze);return He&&wa(R,je),be}for(Ne=a(Ne);!ze.done;je++,ze=C.next())ze=L(Ne,R,je,ze.value,X),ze!==null&&(e&&ze.alternate!==null&&Ne.delete(ze.key===null?je:ze.key),T=c(ze,T,je),Ce===null?be=ze:Ce.sibling=ze,Ce=ze);return e&&Ne.forEach(function(ip){return t(R,ip)}),He&&wa(R,je),be}function Qe(R,T,C,X){if(typeof C=="object"&&C!==null&&C.type===_&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case w:e:{for(var be=C.key;T!==null;){if(T.key===be){if(be=C.type,be===_){if(T.tag===7){n(R,T.sibling),X=i(T,C.props.children),X.return=R,R=X;break e}}else if(T.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===se&&Ud(be)===T.type){n(R,T.sibling),X=i(T,C.props),cl(X,C),X.return=R,R=X;break e}n(R,T);break}else t(R,T);T=T.sibling}C.type===_?(X=Aa(C.props.children,R.mode,X,C.key),X.return=R,R=X):(X=li(C.type,C.key,C.props,null,R.mode,X),cl(X,C),X.return=R,R=X)}return h(R);case I:e:{for(be=C.key;T!==null;){if(T.key===be)if(T.tag===4&&T.stateNode.containerInfo===C.containerInfo&&T.stateNode.implementation===C.implementation){n(R,T.sibling),X=i(T,C.children||[]),X.return=R,R=X;break e}else{n(R,T);break}else t(R,T);T=T.sibling}X=Hr(C,R.mode,X),X.return=R,R=X}return h(R);case se:return be=C._init,C=be(C._payload),Qe(R,T,C,X)}if(ge(C))return Ae(R,T,C,X);if(he(C)){if(be=he(C),typeof be!="function")throw Error(r(150));return C=be.call(C),Se(R,T,C,X)}if(typeof C.then=="function")return Qe(R,T,Si(C),X);if(C.$$typeof===G)return Qe(R,T,oi(R,C),X);ji(R,C)}return typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint"?(C=""+C,T!==null&&T.tag===6?(n(R,T.sibling),X=i(T,C),X.return=R,R=X):(n(R,T),X=Ir(C,R.mode,X),X.return=R,R=X),h(R)):n(R,T)}return function(R,T,C,X){try{rl=0;var be=Qe(R,T,C,X);return hs=null,be}catch(Ne){if(Ne===Ps||Ne===di)throw Ne;var Ce=Gt(29,Ne,null,R.mode);return Ce.lanes=X,Ce.return=R,Ce}finally{}}}var ms=Bd(!0),Dd=Bd(!1),sn=J(null),Sn=null;function ea(e){var t=e.alternate;D(xt,xt.current&1),D(sn,e),Sn===null&&(t===null||os.current!==null||t.memoizedState!==null)&&(Sn=e)}function Md(e){if(e.tag===22){if(D(xt,xt.current),D(sn,e),Sn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Sn=e)}}else ta()}function ta(){D(xt,xt.current),D(sn,sn.current)}function kn(e){q(sn),Sn===e&&(Sn=null),q(xt)}var xt=J(0);function Ai(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||co(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function yc(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:x({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var bc={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Xt(),i=Jn(a);i.payload=t,n!=null&&(i.callback=n),t=Pn(e,i,a),t!==null&&(Qt(t,e,a),el(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Xt(),i=Jn(a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Pn(e,i,a),t!==null&&(Qt(t,e,a),el(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xt(),a=Jn(n);a.tag=2,t!=null&&(a.callback=t),t=Pn(e,a,n),t!==null&&(Qt(t,e,n),el(t,e,n))}};function kd(e,t,n,a,i,c,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,c,h):t.prototype&&t.prototype.isPureReactComponent?!Ys(n,a)||!Ys(i,c):!0}function Ld(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&bc.enqueueReplaceState(t,t.state,null)}function Ba(e,t){var n=t;if("ref"in t){n={};for(var a in t)a!=="ref"&&(n[a]=t[a])}if(e=e.defaultProps){n===t&&(n=x({},n));for(var i in e)n[i]===void 0&&(n[i]=e[i])}return n}var Ei=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function zd(e){Ei(e)}function Id(e){console.error(e)}function Hd(e){Ei(e)}function wi(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function qd(e,t,n){try{var a=e.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Nc(e,t,n){return n=Jn(n),n.tag=3,n.payload={element:null},n.callback=function(){wi(e,t)},n}function Gd(e){return e=Jn(e),e.tag=3,e}function Vd(e,t,n,a){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var c=a.value;e.payload=function(){return i(c)},e.callback=function(){qd(t,n,a)}}var h=n.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(e.callback=function(){qd(t,n,a),typeof i!="function"&&(ra===null?ra=new Set([this]):ra.add(this));var g=a.stack;this.componentDidCatch(a.value,{componentStack:g!==null?g:""})})}function ig(e,t,n,a,i){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=n.alternate,t!==null&&Ks(t,n,i,!0),n=sn.current,n!==null){switch(n.tag){case 13:return Sn===null?Fc():n.alternate===null&&st===0&&(st=3),n.flags&=-257,n.flags|=65536,n.lanes=i,a===Zr?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([a]):t.add(a),Qc(e,a,i)),!1;case 22:return n.flags|=65536,a===Zr?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([a]):n.add(a)),Qc(e,a,i)),!1}throw Error(r(435,n.tag))}return Qc(e,a,i),Fc(),!1}if(He)return t=sn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=i,a!==Vr&&(e=Error(r(422),{cause:a}),$s(en(e,n)))):(a!==Vr&&(t=Error(r(423),{cause:a}),$s(en(t,n))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,a=en(a,n),i=Nc(e.stateNode,a,i),Wr(e,i),st!==4&&(st=2)),!1;var c=Error(r(520),{cause:a});if(c=en(c,n),gl===null?gl=[c]:gl.push(c),st!==4&&(st=2),t===null)return!0;a=en(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,e=Nc(n.stateNode,a,e),Wr(n,e),!1;case 1:if(t=n.type,c=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(ra===null||!ra.has(c))))return n.flags|=65536,i&=-i,n.lanes|=i,i=Gd(i),Vd(i,e,n,a),Wr(n,i),!1}n=n.return}while(n!==null);return!1}var Yd=Error(r(461)),yt=!1;function At(e,t,n,a){t.child=e===null?Dd(t,null,n,a):ms(t,e.child,n,a)}function Fd(e,t,n,a,i){n=n.render;var c=t.ref;if("ref"in a){var h={};for(var g in a)g!=="ref"&&(h[g]=a[g])}else h=a;return Oa(t),a=sc(e,t,n,h,c,i),g=lc(),e!==null&&!yt?(ic(e,t,i),Ln(e,t,i)):(He&&g&&qr(t),t.flags|=1,At(e,t,a,i),t.child)}function Xd(e,t,n,a,i){if(e===null){var c=n.type;return typeof c=="function"&&!zr(c)&&c.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=c,Qd(e,t,c,a,i)):(e=li(n.type,null,a,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!_c(e,i)){var h=c.memoizedProps;if(n=n.compare,n=n!==null?n:Ys,n(h,a)&&e.ref===t.ref)return Ln(e,t,i)}return t.flags|=1,e=On(c,a),e.ref=t.ref,e.return=t,t.child=e}function Qd(e,t,n,a,i){if(e!==null){var c=e.memoizedProps;if(Ys(c,a)&&e.ref===t.ref)if(yt=!1,t.pendingProps=a=c,_c(e,i))(e.flags&131072)!==0&&(yt=!0);else return t.lanes=e.lanes,Ln(e,t,i)}return Sc(e,t,n,a,i)}function $d(e,t,n){var a=t.pendingProps,i=a.children,c=e!==null?e.memoizedState:null;if(a.mode==="hidden"){if((t.flags&128)!==0){if(a=c!==null?c.baseLanes|n:n,e!==null){for(i=t.child=e.child,c=0;i!==null;)c=c|i.lanes|i.childLanes,i=i.sibling;t.childLanes=c&~a}else t.childLanes=0,t.child=null;return Kd(e,t,a,n)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ui(t,c!==null?c.cachePool:null),c!==null?Qu(t,c):tc(),Md(t);else return t.lanes=t.childLanes=536870912,Kd(e,t,c!==null?c.baseLanes|n:n,n)}else c!==null?(ui(t,c.cachePool),Qu(t,c),ta(),t.memoizedState=null):(e!==null&&ui(t,null),tc(),ta());return At(e,t,i,n),t.child}function Kd(e,t,n,a){var i=Kr();return i=i===null?null:{parent:vt._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},e!==null&&ui(t,null),tc(),Md(t),e!==null&&Ks(e,t,a,!0),null}function Ti(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(r(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Sc(e,t,n,a,i){return Oa(t),n=sc(e,t,n,a,void 0,i),a=lc(),e!==null&&!yt?(ic(e,t,i),Ln(e,t,i)):(He&&a&&qr(t),t.flags|=1,At(e,t,n,i),t.child)}function Zd(e,t,n,a,i,c){return Oa(t),t.updateQueue=null,n=Ku(t,a,n,i),$u(e),a=lc(),e!==null&&!yt?(ic(e,t,c),Ln(e,t,c)):(He&&a&&qr(t),t.flags|=1,At(e,t,n,c),t.child)}function Jd(e,t,n,a,i){if(Oa(t),t.stateNode===null){var c=ss,h=n.contextType;typeof h=="object"&&h!==null&&(c=_t(h)),c=new n(a,c),t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=bc,t.stateNode=c,c._reactInternals=t,c=t.stateNode,c.props=a,c.state=t.memoizedState,c.refs={},Jr(t),h=n.contextType,c.context=typeof h=="object"&&h!==null?_t(h):ss,c.state=t.memoizedState,h=n.getDerivedStateFromProps,typeof h=="function"&&(yc(t,n,h,a),c.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(h=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),h!==c.state&&bc.enqueueReplaceState(c,c.state,null),nl(t,a,c,i),tl(),c.state=t.memoizedState),typeof c.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){c=t.stateNode;var g=t.memoizedProps,S=Ba(n,g);c.props=S;var B=c.context,Y=n.contextType;h=ss,typeof Y=="object"&&Y!==null&&(h=_t(Y));var $=n.getDerivedStateFromProps;Y=typeof $=="function"||typeof c.getSnapshotBeforeUpdate=="function",g=t.pendingProps!==g,Y||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(g||B!==h)&&Ld(t,c,a,h),Zn=!1;var M=t.memoizedState;c.state=M,nl(t,a,c,i),tl(),B=t.memoizedState,g||M!==B||Zn?(typeof $=="function"&&(yc(t,n,$,a),B=t.memoizedState),(S=Zn||kd(t,n,S,a,M,B,h))?(Y||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=B),c.props=a,c.state=B,c.context=h,a=S):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{c=t.stateNode,Pr(e,t),h=t.memoizedProps,Y=Ba(n,h),c.props=Y,$=t.pendingProps,M=c.context,B=n.contextType,S=ss,typeof B=="object"&&B!==null&&(S=_t(B)),g=n.getDerivedStateFromProps,(B=typeof g=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(h!==$||M!==S)&&Ld(t,c,a,S),Zn=!1,M=t.memoizedState,c.state=M,nl(t,a,c,i),tl();var L=t.memoizedState;h!==$||M!==L||Zn||e!==null&&e.dependencies!==null&&ci(e.dependencies)?(typeof g=="function"&&(yc(t,n,g,a),L=t.memoizedState),(Y=Zn||kd(t,n,Y,a,M,L,S)||e!==null&&e.dependencies!==null&&ci(e.dependencies))?(B||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(a,L,S),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(a,L,S)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||h===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=L),c.props=a,c.state=L,c.context=S,a=Y):(typeof c.componentDidUpdate!="function"||h===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),a=!1)}return c=a,Ti(e,t),a=(t.flags&128)!==0,c||a?(c=t.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:c.render(),t.flags|=1,e!==null&&a?(t.child=ms(t,e.child,null,i),t.child=ms(t,null,n,i)):At(e,t,n,i),t.memoizedState=c.state,e=t.child):e=Ln(e,t,i),e}function Pd(e,t,n,a){return Qs(),t.flags|=256,At(e,t,n,a),t.child}var jc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ac(e){return{baseLanes:e,cachePool:Iu()}}function Ec(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=ln),e}function Wd(e,t,n){var a=t.pendingProps,i=!1,c=(t.flags&128)!==0,h;if((h=c)||(h=e!==null&&e.memoizedState===null?!1:(xt.current&2)!==0),h&&(i=!0,t.flags&=-129),h=(t.flags&32)!==0,t.flags&=-33,e===null){if(He){if(i?ea(t):ta(),He){var g=at,S;if(S=g){e:{for(S=g,g=Nn;S.nodeType!==8;){if(!g){g=null;break e}if(S=gn(S.nextSibling),S===null){g=null;break e}}g=S}g!==null?(t.memoizedState={dehydrated:g,treeContext:Ea!==null?{id:Cn,overflow:Un}:null,retryLane:536870912,hydrationErrors:null},S=Gt(18,null,null,0),S.stateNode=g,S.return=t,t.child=S,Ut=t,at=null,S=!0):S=!1}S||Ra(t)}if(g=t.memoizedState,g!==null&&(g=g.dehydrated,g!==null))return co(g)?t.lanes=32:t.lanes=536870912,null;kn(t)}return g=a.children,a=a.fallback,i?(ta(),i=t.mode,g=Ri({mode:"hidden",children:g},i),a=Aa(a,i,n,null),g.return=t,a.return=t,g.sibling=a,t.child=g,i=t.child,i.memoizedState=Ac(n),i.childLanes=Ec(e,h,n),t.memoizedState=jc,a):(ea(t),wc(t,g))}if(S=e.memoizedState,S!==null&&(g=S.dehydrated,g!==null)){if(c)t.flags&256?(ea(t),t.flags&=-257,t=Tc(e,t,n)):t.memoizedState!==null?(ta(),t.child=e.child,t.flags|=128,t=null):(ta(),i=a.fallback,g=t.mode,a=Ri({mode:"visible",children:a.children},g),i=Aa(i,g,n,null),i.flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,ms(t,e.child,null,n),a=t.child,a.memoizedState=Ac(n),a.childLanes=Ec(e,h,n),t.memoizedState=jc,t=i);else if(ea(t),co(g)){if(h=g.nextSibling&&g.nextSibling.dataset,h)var B=h.dgst;h=B,a=Error(r(419)),a.stack="",a.digest=h,$s({value:a,source:null,stack:null}),t=Tc(e,t,n)}else if(yt||Ks(e,t,n,!1),h=(n&e.childLanes)!==0,yt||h){if(h=Ze,h!==null&&(a=n&-n,a=(a&42)!==0?1:Ya(a),a=(a&(h.suspendedLanes|n))!==0?0:a,a!==0&&a!==S.retryLane))throw S.retryLane=a,as(e,a),Qt(h,e,a),Yd;g.data==="$?"||Fc(),t=Tc(e,t,n)}else g.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=S.treeContext,at=gn(g.nextSibling),Ut=t,He=!0,Ta=null,Nn=!1,e!==null&&(nn[an++]=Cn,nn[an++]=Un,nn[an++]=Ea,Cn=e.id,Un=e.overflow,Ea=t),t=wc(t,a.children),t.flags|=4096);return t}return i?(ta(),i=a.fallback,g=t.mode,S=e.child,B=S.sibling,a=On(S,{mode:"hidden",children:a.children}),a.subtreeFlags=S.subtreeFlags&65011712,B!==null?i=On(B,i):(i=Aa(i,g,n,null),i.flags|=2),i.return=t,a.return=t,a.sibling=i,t.child=a,a=i,i=t.child,g=e.child.memoizedState,g===null?g=Ac(n):(S=g.cachePool,S!==null?(B=vt._currentValue,S=S.parent!==B?{parent:B,pool:B}:S):S=Iu(),g={baseLanes:g.baseLanes|n,cachePool:S}),i.memoizedState=g,i.childLanes=Ec(e,h,n),t.memoizedState=jc,a):(ea(t),n=e.child,e=n.sibling,n=On(n,{mode:"visible",children:a.children}),n.return=t,n.sibling=null,e!==null&&(h=t.deletions,h===null?(t.deletions=[e],t.flags|=16):h.push(e)),t.child=n,t.memoizedState=null,n)}function wc(e,t){return t=Ri({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ri(e,t){return e=Gt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Tc(e,t,n){return ms(t,e.child,null,n),e=wc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ef(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Fr(e.return,t,n)}function Rc(e,t,n,a,i){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:i}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=a,c.tail=n,c.tailMode=i)}function tf(e,t,n){var a=t.pendingProps,i=a.revealOrder,c=a.tail;if(At(e,t,a.children,n),a=xt.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ef(e,n,t);else if(e.tag===19)ef(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}switch(D(xt,a),i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Ai(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Rc(t,!1,i,n,c);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ai(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Rc(t,!0,n,null,c);break;case"together":Rc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ln(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ia|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Ks(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(r(153));if(t.child!==null){for(e=t.child,n=On(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=On(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function _c(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ci(e)))}function rg(e,t,n){switch(t.tag){case 3:_e(t,t.stateNode.containerInfo),Kn(t,vt,e.memoizedState.cache),Qs();break;case 27:case 5:et(t);break;case 4:_e(t,t.stateNode.containerInfo);break;case 10:Kn(t,t.type,t.memoizedProps.value);break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(ea(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Wd(e,t,n):(ea(t),e=Ln(e,t,n),e!==null?e.sibling:null);ea(t);break;case 19:var i=(e.flags&128)!==0;if(a=(n&t.childLanes)!==0,a||(Ks(e,t,n,!1),a=(n&t.childLanes)!==0),i){if(a)return tf(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),D(xt,xt.current),a)break;return null;case 22:case 23:return t.lanes=0,$d(e,t,n);case 24:Kn(t,vt,e.memoizedState.cache)}return Ln(e,t,n)}function nf(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)yt=!0;else{if(!_c(e,n)&&(t.flags&128)===0)return yt=!1,rg(e,t,n);yt=(e.flags&131072)!==0}else yt=!1,He&&(t.flags&1048576)!==0&&Uu(t,ri,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var a=t.elementType,i=a._init;if(a=i(a._payload),t.type=a,typeof a=="function")zr(a)?(e=Ba(a,e),t.tag=1,t=Jd(null,t,a,e,n)):(t.tag=0,t=Sc(null,t,a,e,n));else{if(a!=null){if(i=a.$$typeof,i===H){t.tag=11,t=Fd(null,t,a,e,n);break e}else if(i===te){t.tag=14,t=Xd(null,t,a,e,n);break e}}throw t=U(a)||a,Error(r(306,t,""))}}return t;case 0:return Sc(e,t,t.type,t.pendingProps,n);case 1:return a=t.type,i=Ba(a,t.pendingProps),Jd(e,t,a,i,n);case 3:e:{if(_e(t,t.stateNode.containerInfo),e===null)throw Error(r(387));a=t.pendingProps;var c=t.memoizedState;i=c.element,Pr(e,t),nl(t,a,null,n);var h=t.memoizedState;if(a=h.cache,Kn(t,vt,a),a!==c.cache&&Xr(t,[vt],n,!0),tl(),a=h.element,c.isDehydrated)if(c={element:a,isDehydrated:!1,cache:h.cache},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){t=Pd(e,t,a,n);break e}else if(a!==i){i=en(Error(r(424)),t),$s(i),t=Pd(e,t,a,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(at=gn(e.firstChild),Ut=t,He=!0,Ta=null,Nn=!0,n=Dd(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Qs(),a===i){t=Ln(e,t,n);break e}At(e,t,a,n)}t=t.child}return t;case 26:return Ti(e,t),e===null?(n=rh(t.type,null,t.pendingProps,null))?t.memoizedState=n:He||(n=t.type,e=t.pendingProps,a=Gi(Re.current).createElement(n),a[gt]=t,a[jt]=e,wt(a,n,e),Ie(a),t.stateNode=a):t.memoizedState=rh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return et(t),e===null&&He&&(a=t.stateNode=sh(t.type,t.pendingProps,Re.current),Ut=t,Nn=!0,i=at,ua(t.type)?(oo=i,at=gn(a.firstChild)):at=i),At(e,t,t.pendingProps.children,n),Ti(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&He&&((i=a=at)&&(a=Mg(a,t.type,t.pendingProps,Nn),a!==null?(t.stateNode=a,Ut=t,at=gn(a.firstChild),Nn=!1,i=!0):i=!1),i||Ra(t)),et(t),i=t.type,c=t.pendingProps,h=e!==null?e.memoizedProps:null,a=c.children,lo(i,c)?a=null:h!==null&&lo(i,h)&&(t.flags|=32),t.memoizedState!==null&&(i=sc(e,t,W0,null,null,n),Al._currentValue=i),Ti(e,t),At(e,t,a,n),t.child;case 6:return e===null&&He&&((e=n=at)&&(n=kg(n,t.pendingProps,Nn),n!==null?(t.stateNode=n,Ut=t,at=null,e=!0):e=!1),e||Ra(t)),null;case 13:return Wd(e,t,n);case 4:return _e(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=ms(t,null,a,n):At(e,t,a,n),t.child;case 11:return Fd(e,t,t.type,t.pendingProps,n);case 7:return At(e,t,t.pendingProps,n),t.child;case 8:return At(e,t,t.pendingProps.children,n),t.child;case 12:return At(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,Kn(t,t.type,a.value),At(e,t,a.children,n),t.child;case 9:return i=t.type._context,a=t.pendingProps.children,Oa(t),i=_t(i),a=a(i),t.flags|=1,At(e,t,a,n),t.child;case 14:return Xd(e,t,t.type,t.pendingProps,n);case 15:return Qd(e,t,t.type,t.pendingProps,n);case 19:return tf(e,t,n);case 31:return a=t.pendingProps,n=t.mode,a={mode:a.mode,children:a.children},e===null?(n=Ri(a,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=On(e.child,a),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return $d(e,t,n);case 24:return Oa(t),a=_t(vt),e===null?(i=Kr(),i===null&&(i=Ze,c=Qr(),i.pooledCache=c,c.refCount++,c!==null&&(i.pooledCacheLanes|=n),i=c),t.memoizedState={parent:a,cache:i},Jr(t),Kn(t,vt,i)):((e.lanes&n)!==0&&(Pr(e,t),nl(t,null,null,n),tl()),i=e.memoizedState,c=t.memoizedState,i.parent!==a?(i={parent:a,cache:a},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),Kn(t,vt,a)):(a=c.cache,Kn(t,vt,a),a!==i.cache&&Xr(t,[vt],n,!0))),At(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function zn(e){e.flags|=4}function af(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!fh(t)){if(t=sn.current,t!==null&&((Le&4194048)===Le?Sn!==null:(Le&62914560)!==Le&&(Le&536870912)===0||t!==Sn))throw Ws=Zr,Hu;e.flags|=8192}}function _i(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Cs():536870912,e.lanes|=t,xs|=t)}function ol(e,t){if(!He)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags&65011712,a|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,a|=i.subtreeFlags,a|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function cg(e,t,n){var a=t.pendingProps;switch(Gr(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(t),null;case 1:return nt(t),null;case 3:return n=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Dn(vt),qe(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Xs(t)?zn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Mu())),nt(t),null;case 26:return n=t.memoizedState,e===null?(zn(t),n!==null?(nt(t),af(t,n)):(nt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(zn(t),nt(t),af(t,n)):(nt(t),t.flags&=-16777217):(e.memoizedProps!==a&&zn(t),nt(t),t.flags&=-16777217),null;case 27:Ct(t),n=Re.current;var i=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==a&&zn(t);else{if(!a){if(t.stateNode===null)throw Error(r(166));return nt(t),null}e=K.current,Xs(t)?Bu(t):(e=sh(i,a,n),t.stateNode=e,zn(t))}return nt(t),null;case 5:if(Ct(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&zn(t);else{if(!a){if(t.stateNode===null)throw Error(r(166));return nt(t),null}if(e=K.current,Xs(t))Bu(t);else{switch(i=Gi(Re.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof a.is=="string"?i.createElement("select",{is:a.is}):i.createElement("select"),a.multiple?e.multiple=!0:a.size&&(e.size=a.size);break;default:e=typeof a.is=="string"?i.createElement(n,{is:a.is}):i.createElement(n)}}e[gt]=t,e[jt]=a;e:for(i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.tag!==27&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(wt(e,n,a),n){case"button":case"input":case"select":case"textarea":e=!!a.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&zn(t)}}return nt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&zn(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(r(166));if(e=Re.current,Xs(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,i=Ut,i!==null)switch(i.tag){case 27:case 5:a=i.memoizedProps}e[gt]=t,e=!!(e.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||Jf(e.nodeValue,n)),e||Ra(t)}else e=Gi(e).createTextNode(a),e[gt]=t,t.stateNode=e}return nt(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=Xs(t),a!==null&&a.dehydrated!==null){if(e===null){if(!i)throw Error(r(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));i[gt]=t}else Qs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;nt(t),i=!1}else i=Mu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(kn(t),t):(kn(t),null)}if(kn(t),(t.flags&128)!==0)return t.lanes=n,t;if(n=a!==null,e=e!==null&&e.memoizedState!==null,n){a=t.child,i=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(i=a.alternate.memoizedState.cachePool.pool);var c=null;a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==i&&(a.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),_i(t,t.updateQueue),nt(t),null;case 4:return qe(),e===null&&eo(t.stateNode.containerInfo),nt(t),null;case 10:return Dn(t.type),nt(t),null;case 19:if(q(xt),i=t.memoizedState,i===null)return nt(t),null;if(a=(t.flags&128)!==0,c=i.rendering,c===null)if(a)ol(i,!1);else{if(st!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(c=Ai(e),c!==null){for(t.flags|=128,ol(i,!1),e=c.updateQueue,t.updateQueue=e,_i(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Cu(n,e),n=n.sibling;return D(xt,xt.current&1|2),t.child}e=e.sibling}i.tail!==null&&ut()>Ui&&(t.flags|=128,a=!0,ol(i,!1),t.lanes=4194304)}else{if(!a)if(e=Ai(c),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,_i(t,e),ol(i,!0),i.tail===null&&i.tailMode==="hidden"&&!c.alternate&&!He)return nt(t),null}else 2*ut()-i.renderingStartTime>Ui&&n!==536870912&&(t.flags|=128,a=!0,ol(i,!1),t.lanes=4194304);i.isBackwards?(c.sibling=t.child,t.child=c):(e=i.last,e!==null?e.sibling=c:t.child=c,i.last=c)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ut(),t.sibling=null,e=xt.current,D(xt,a?e&1|2:e&1),t):(nt(t),null);case 22:case 23:return kn(t),nc(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(n&536870912)!==0&&(t.flags&128)===0&&(nt(t),t.subtreeFlags&6&&(t.flags|=8192)):nt(t),n=t.updateQueue,n!==null&&_i(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),e!==null&&q(Ca),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Dn(vt),nt(t),null;case 25:return null;case 30:return null}throw Error(r(156,t.tag))}function og(e,t){switch(Gr(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Dn(vt),qe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ct(t),null;case 13:if(kn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(r(340));Qs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return q(xt),null;case 4:return qe(),null;case 10:return Dn(t.type),null;case 22:case 23:return kn(t),nc(),e!==null&&q(Ca),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Dn(vt),null;case 25:return null;default:return null}}function sf(e,t){switch(Gr(t),t.tag){case 3:Dn(vt),qe();break;case 26:case 27:case 5:Ct(t);break;case 4:qe();break;case 13:kn(t);break;case 19:q(xt);break;case 10:Dn(t.type);break;case 22:case 23:kn(t),nc(),e!==null&&q(Ca);break;case 24:Dn(vt)}}function ul(e,t){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var i=a.next;n=i;do{if((n.tag&e)===e){a=void 0;var c=n.create,h=n.inst;a=c(),h.destroy=a}n=n.next}while(n!==i)}}catch(g){$e(t,t.return,g)}}function na(e,t,n){try{var a=t.updateQueue,i=a!==null?a.lastEffect:null;if(i!==null){var c=i.next;a=c;do{if((a.tag&e)===e){var h=a.inst,g=h.destroy;if(g!==void 0){h.destroy=void 0,i=t;var S=n,B=g;try{B()}catch(Y){$e(i,S,Y)}}}a=a.next}while(a!==c)}}catch(Y){$e(t,t.return,Y)}}function lf(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Xu(t,n)}catch(a){$e(e,e.return,a)}}}function rf(e,t,n){n.props=Ba(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){$e(e,t,a)}}function dl(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(i){$e(e,t,i)}}function jn(e,t){var n=e.ref,a=e.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(i){$e(e,t,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){$e(e,t,i)}else n.current=null}function cf(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(i){$e(e,e.return,i)}}function Oc(e,t,n){try{var a=e.stateNode;Og(a,e.type,n,t),a[jt]=t}catch(i){$e(e,e.return,i)}}function of(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ua(e.type)||e.tag===4}function Cc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||of(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ua(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Uc(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=qi));else if(a!==4&&(a===27&&ua(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Uc(e,t,n),e=e.sibling;e!==null;)Uc(e,t,n),e=e.sibling}function Oi(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(a===27&&ua(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Oi(e,t,n),e=e.sibling;e!==null;)Oi(e,t,n),e=e.sibling}function uf(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);wt(t,a,n),t[gt]=e,t[jt]=n}catch(c){$e(e,e.return,c)}}var In=!1,ot=!1,Bc=!1,df=typeof WeakSet=="function"?WeakSet:Set,bt=null;function ug(e,t){if(e=e.containerInfo,ao=$i,e=Nu(e),Cr(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var i=a.anchorOffset,c=a.focusNode;a=a.focusOffset;try{n.nodeType,c.nodeType}catch{n=null;break e}var h=0,g=-1,S=-1,B=0,Y=0,$=e,M=null;t:for(;;){for(var L;$!==n||i!==0&&$.nodeType!==3||(g=h+i),$!==c||a!==0&&$.nodeType!==3||(S=h+a),$.nodeType===3&&(h+=$.nodeValue.length),(L=$.firstChild)!==null;)M=$,$=L;for(;;){if($===e)break t;if(M===n&&++B===i&&(g=h),M===c&&++Y===a&&(S=h),(L=$.nextSibling)!==null)break;$=M,M=$.parentNode}$=L}n=g===-1||S===-1?null:{start:g,end:S}}else n=null}n=n||{start:0,end:0}}else n=null;for(so={focusedElem:e,selectionRange:n},$i=!1,bt=t;bt!==null;)if(t=bt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,bt=e;else for(;bt!==null;){switch(t=bt,c=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&c!==null){e=void 0,n=t,i=c.memoizedProps,c=c.memoizedState,a=n.stateNode;try{var Ae=Ba(n.type,i,n.elementType===n.type);e=a.getSnapshotBeforeUpdate(Ae,c),a.__reactInternalSnapshotBeforeUpdate=e}catch(Se){$e(n,n.return,Se)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)ro(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ro(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=t.sibling,e!==null){e.return=t.return,bt=e;break}bt=t.return}}function ff(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:aa(e,n),a&4&&ul(5,n);break;case 1:if(aa(e,n),a&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(h){$e(n,n.return,h)}else{var i=Ba(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(h){$e(n,n.return,h)}}a&64&&lf(n),a&512&&dl(n,n.return);break;case 3:if(aa(e,n),a&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Xu(e,t)}catch(h){$e(n,n.return,h)}}break;case 27:t===null&&a&4&&uf(n);case 26:case 5:aa(e,n),t===null&&a&4&&cf(n),a&512&&dl(n,n.return);break;case 12:aa(e,n);break;case 13:aa(e,n),a&4&&gf(e,n),a&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=yg.bind(null,n),Lg(e,n))));break;case 22:if(a=n.memoizedState!==null||In,!a){t=t!==null&&t.memoizedState!==null||ot,i=In;var c=ot;In=a,(ot=t)&&!c?sa(e,n,(n.subtreeFlags&8772)!==0):aa(e,n),In=i,ot=c}break;case 30:break;default:aa(e,n)}}function hf(e){var t=e.alternate;t!==null&&(e.alternate=null,hf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Me(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var We=null,kt=!1;function Hn(e,t,n){for(n=n.child;n!==null;)mf(e,t,n),n=n.sibling}function mf(e,t,n){if(me&&typeof me.onCommitFiberUnmount=="function")try{me.onCommitFiberUnmount(xe,n)}catch{}switch(n.tag){case 26:ot||jn(n,t),Hn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ot||jn(n,t);var a=We,i=kt;ua(n.type)&&(We=n.stateNode,kt=!1),Hn(e,t,n),bl(n.stateNode),We=a,kt=i;break;case 5:ot||jn(n,t);case 6:if(a=We,i=kt,We=null,Hn(e,t,n),We=a,kt=i,We!==null)if(kt)try{(We.nodeType===9?We.body:We.nodeName==="HTML"?We.ownerDocument.body:We).removeChild(n.stateNode)}catch(c){$e(n,t,c)}else try{We.removeChild(n.stateNode)}catch(c){$e(n,t,c)}break;case 18:We!==null&&(kt?(e=We,nh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Rl(e)):nh(We,n.stateNode));break;case 4:a=We,i=kt,We=n.stateNode.containerInfo,kt=!0,Hn(e,t,n),We=a,kt=i;break;case 0:case 11:case 14:case 15:ot||na(2,n,t),ot||na(4,n,t),Hn(e,t,n);break;case 1:ot||(jn(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"&&rf(n,t,a)),Hn(e,t,n);break;case 21:Hn(e,t,n);break;case 22:ot=(a=ot)||n.memoizedState!==null,Hn(e,t,n),ot=a;break;default:Hn(e,t,n)}}function gf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Rl(e)}catch(n){$e(t,t.return,n)}}function dg(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new df),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new df),t;default:throw Error(r(435,e.tag))}}function Dc(e,t){var n=dg(e);t.forEach(function(a){var i=bg.bind(null,e,a);n.has(a)||(n.add(a),a.then(i,i))})}function Vt(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var i=n[a],c=e,h=t,g=h;e:for(;g!==null;){switch(g.tag){case 27:if(ua(g.type)){We=g.stateNode,kt=!1;break e}break;case 5:We=g.stateNode,kt=!1;break e;case 3:case 4:We=g.stateNode.containerInfo,kt=!0;break e}g=g.return}if(We===null)throw Error(r(160));mf(c,h,i),We=null,kt=!1,c=i.alternate,c!==null&&(c.return=null),i.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)pf(t,e),t=t.sibling}var mn=null;function pf(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Vt(t,e),Yt(e),a&4&&(na(3,e,e.return),ul(3,e),na(5,e,e.return));break;case 1:Vt(t,e),Yt(e),a&512&&(ot||n===null||jn(n,n.return)),a&64&&In&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var i=mn;if(Vt(t,e),Yt(e),a&512&&(ot||n===null||jn(n,n.return)),a&4){var c=n!==null?n.memoizedState:null;if(a=e.memoizedState,n===null)if(a===null)if(e.stateNode===null){e:{a=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(a){case"title":c=i.getElementsByTagName("title")[0],(!c||c[ye]||c[gt]||c.namespaceURI==="http://www.w3.org/2000/svg"||c.hasAttribute("itemprop"))&&(c=i.createElement(a),i.head.insertBefore(c,i.querySelector("head > title"))),wt(c,a,n),c[gt]=e,Ie(c),a=c;break e;case"link":var h=uh("link","href",i).get(a+(n.href||""));if(h){for(var g=0;g<h.length;g++)if(c=h[g],c.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&c.getAttribute("rel")===(n.rel==null?null:n.rel)&&c.getAttribute("title")===(n.title==null?null:n.title)&&c.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){h.splice(g,1);break t}}c=i.createElement(a),wt(c,a,n),i.head.appendChild(c);break;case"meta":if(h=uh("meta","content",i).get(a+(n.content||""))){for(g=0;g<h.length;g++)if(c=h[g],c.getAttribute("content")===(n.content==null?null:""+n.content)&&c.getAttribute("name")===(n.name==null?null:n.name)&&c.getAttribute("property")===(n.property==null?null:n.property)&&c.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&c.getAttribute("charset")===(n.charSet==null?null:n.charSet)){h.splice(g,1);break t}}c=i.createElement(a),wt(c,a,n),i.head.appendChild(c);break;default:throw Error(r(468,a))}c[gt]=e,Ie(c),a=c}e.stateNode=a}else dh(i,e.type,e.stateNode);else e.stateNode=oh(i,a,e.memoizedProps);else c!==a?(c===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):c.count--,a===null?dh(i,e.type,e.stateNode):oh(i,a,e.memoizedProps)):a===null&&e.stateNode!==null&&Oc(e,e.memoizedProps,n.memoizedProps)}break;case 27:Vt(t,e),Yt(e),a&512&&(ot||n===null||jn(n,n.return)),n!==null&&a&4&&Oc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Vt(t,e),Yt(e),a&512&&(ot||n===null||jn(n,n.return)),e.flags&32){i=e.stateNode;try{Za(i,"")}catch(L){$e(e,e.return,L)}}a&4&&e.stateNode!=null&&(i=e.memoizedProps,Oc(e,i,n!==null?n.memoizedProps:i)),a&1024&&(Bc=!0);break;case 6:if(Vt(t,e),Yt(e),a&4){if(e.stateNode===null)throw Error(r(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(L){$e(e,e.return,L)}}break;case 3:if(Fi=null,i=mn,mn=Vi(t.containerInfo),Vt(t,e),mn=i,Yt(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Rl(t.containerInfo)}catch(L){$e(e,e.return,L)}Bc&&(Bc=!1,vf(e));break;case 4:a=mn,mn=Vi(e.stateNode.containerInfo),Vt(t,e),Yt(e),mn=a;break;case 12:Vt(t,e),Yt(e);break;case 13:Vt(t,e),Yt(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Hc=ut()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Dc(e,a)));break;case 22:i=e.memoizedState!==null;var S=n!==null&&n.memoizedState!==null,B=In,Y=ot;if(In=B||i,ot=Y||S,Vt(t,e),ot=Y,In=B,Yt(e),a&8192)e:for(t=e.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(n===null||S||In||ot||Da(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){S=n=t;try{if(c=S.stateNode,i)h=c.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{g=S.stateNode;var $=S.memoizedProps.style,M=$!=null&&$.hasOwnProperty("display")?$.display:null;g.style.display=M==null||typeof M=="boolean"?"":(""+M).trim()}}catch(L){$e(S,S.return,L)}}}else if(t.tag===6){if(n===null){S=t;try{S.stateNode.nodeValue=i?"":S.memoizedProps}catch(L){$e(S,S.return,L)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,Dc(e,n))));break;case 19:Vt(t,e),Yt(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Dc(e,a)));break;case 30:break;case 21:break;default:Vt(t,e),Yt(e)}}function Yt(e){var t=e.flags;if(t&2){try{for(var n,a=e.return;a!==null;){if(of(a)){n=a;break}a=a.return}if(n==null)throw Error(r(160));switch(n.tag){case 27:var i=n.stateNode,c=Cc(e);Oi(e,c,i);break;case 5:var h=n.stateNode;n.flags&32&&(Za(h,""),n.flags&=-33);var g=Cc(e);Oi(e,g,h);break;case 3:case 4:var S=n.stateNode.containerInfo,B=Cc(e);Uc(e,B,S);break;default:throw Error(r(161))}}catch(Y){$e(e,e.return,Y)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function vf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;vf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function aa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)ff(e,t.alternate,t),t=t.sibling}function Da(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:na(4,t,t.return),Da(t);break;case 1:jn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&rf(t,t.return,n),Da(t);break;case 27:bl(t.stateNode);case 26:case 5:jn(t,t.return),Da(t);break;case 22:t.memoizedState===null&&Da(t);break;case 30:Da(t);break;default:Da(t)}e=e.sibling}}function sa(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,i=e,c=t,h=c.flags;switch(c.tag){case 0:case 11:case 15:sa(i,c,n),ul(4,c);break;case 1:if(sa(i,c,n),a=c,i=a.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(B){$e(a,a.return,B)}if(a=c,i=a.updateQueue,i!==null){var g=a.stateNode;try{var S=i.shared.hiddenCallbacks;if(S!==null)for(i.shared.hiddenCallbacks=null,i=0;i<S.length;i++)Fu(S[i],g)}catch(B){$e(a,a.return,B)}}n&&h&64&&lf(c),dl(c,c.return);break;case 27:uf(c);case 26:case 5:sa(i,c,n),n&&a===null&&h&4&&cf(c),dl(c,c.return);break;case 12:sa(i,c,n);break;case 13:sa(i,c,n),n&&h&4&&gf(i,c);break;case 22:c.memoizedState===null&&sa(i,c,n),dl(c,c.return);break;case 30:break;default:sa(i,c,n)}t=t.sibling}}function Mc(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Zs(n))}function kc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Zs(e))}function An(e,t,n,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)xf(e,t,n,a),t=t.sibling}function xf(e,t,n,a){var i=t.flags;switch(t.tag){case 0:case 11:case 15:An(e,t,n,a),i&2048&&ul(9,t);break;case 1:An(e,t,n,a);break;case 3:An(e,t,n,a),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Zs(e)));break;case 12:if(i&2048){An(e,t,n,a),e=t.stateNode;try{var c=t.memoizedProps,h=c.id,g=c.onPostCommit;typeof g=="function"&&g(h,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(S){$e(t,t.return,S)}}else An(e,t,n,a);break;case 13:An(e,t,n,a);break;case 23:break;case 22:c=t.stateNode,h=t.alternate,t.memoizedState!==null?c._visibility&2?An(e,t,n,a):fl(e,t):c._visibility&2?An(e,t,n,a):(c._visibility|=2,gs(e,t,n,a,(t.subtreeFlags&10256)!==0)),i&2048&&Mc(h,t);break;case 24:An(e,t,n,a),i&2048&&kc(t.alternate,t);break;default:An(e,t,n,a)}}function gs(e,t,n,a,i){for(i=i&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var c=e,h=t,g=n,S=a,B=h.flags;switch(h.tag){case 0:case 11:case 15:gs(c,h,g,S,i),ul(8,h);break;case 23:break;case 22:var Y=h.stateNode;h.memoizedState!==null?Y._visibility&2?gs(c,h,g,S,i):fl(c,h):(Y._visibility|=2,gs(c,h,g,S,i)),i&&B&2048&&Mc(h.alternate,h);break;case 24:gs(c,h,g,S,i),i&&B&2048&&kc(h.alternate,h);break;default:gs(c,h,g,S,i)}t=t.sibling}}function fl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,a=t,i=a.flags;switch(a.tag){case 22:fl(n,a),i&2048&&Mc(a.alternate,a);break;case 24:fl(n,a),i&2048&&kc(a.alternate,a);break;default:fl(n,a)}t=t.sibling}}var hl=8192;function ps(e){if(e.subtreeFlags&hl)for(e=e.child;e!==null;)yf(e),e=e.sibling}function yf(e){switch(e.tag){case 26:ps(e),e.flags&hl&&e.memoizedState!==null&&Zg(mn,e.memoizedState,e.memoizedProps);break;case 5:ps(e);break;case 3:case 4:var t=mn;mn=Vi(e.stateNode.containerInfo),ps(e),mn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=hl,hl=16777216,ps(e),hl=t):ps(e));break;default:ps(e)}}function bf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ml(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];bt=a,Sf(a,e)}bf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Nf(e),e=e.sibling}function Nf(e){switch(e.tag){case 0:case 11:case 15:ml(e),e.flags&2048&&na(9,e,e.return);break;case 3:ml(e);break;case 12:ml(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ci(e)):ml(e);break;default:ml(e)}}function Ci(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];bt=a,Sf(a,e)}bf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:na(8,t,t.return),Ci(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Ci(t));break;default:Ci(t)}e=e.sibling}}function Sf(e,t){for(;bt!==null;){var n=bt;switch(n.tag){case 0:case 11:case 15:na(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Zs(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,bt=a;else e:for(n=e;bt!==null;){a=bt;var i=a.sibling,c=a.return;if(hf(a),a===n){bt=null;break e}if(i!==null){i.return=c,bt=i;break e}bt=c}}}var fg={getCacheForType:function(e){var t=_t(vt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},hg=typeof WeakMap=="function"?WeakMap:Map,Ge=0,Ze=null,Be=null,Le=0,Ve=0,Ft=null,la=!1,vs=!1,Lc=!1,qn=0,st=0,ia=0,Ma=0,zc=0,ln=0,xs=0,gl=null,Lt=null,Ic=!1,Hc=0,Ui=1/0,Bi=null,ra=null,Et=0,ca=null,ys=null,bs=0,qc=0,Gc=null,jf=null,pl=0,Vc=null;function Xt(){if((Ge&2)!==0&&Le!==0)return Le&-Le;if(y.T!==null){var e=rs;return e!==0?e:Zc()}return Ds()}function Af(){ln===0&&(ln=(Le&536870912)===0||He?Os():536870912);var e=sn.current;return e!==null&&(e.flags|=32),ln}function Qt(e,t,n){(e===Ze&&(Ve===2||Ve===9)||e.cancelPendingCommit!==null)&&(Ns(e,0),oa(e,Le,ln,!1)),Xn(e,n),((Ge&2)===0||e!==Ze)&&(e===Ze&&((Ge&2)===0&&(Ma|=n),st===4&&oa(e,Le,ln,!1)),En(e))}function Ef(e,t,n){if((Ge&6)!==0)throw Error(r(327));var a=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Fn(e,t),i=a?pg(e,t):Xc(e,t,!0),c=a;do{if(i===0){vs&&!a&&oa(e,t,0,!1);break}else{if(n=e.current.alternate,c&&!mg(n)){i=Xc(e,t,!1),c=!1;continue}if(i===2){if(c=t,e.errorRecoveryDisabledLanes&c)var h=0;else h=e.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){t=h;e:{var g=e;i=gl;var S=g.current.memoizedState.isDehydrated;if(S&&(Ns(g,h).flags|=256),h=Xc(g,h,!1),h!==2){if(Lc&&!S){g.errorRecoveryDisabledLanes|=c,Ma|=c,i=4;break e}c=Lt,Lt=i,c!==null&&(Lt===null?Lt=c:Lt.push.apply(Lt,c))}i=h}if(c=!1,i!==2)continue}}if(i===1){Ns(e,0),oa(e,t,0,!0);break}e:{switch(a=e,c=i,c){case 0:case 1:throw Error(r(345));case 4:if((t&4194048)!==t)break;case 6:oa(a,t,ln,!la);break e;case 2:Lt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((t&62914560)===t&&(i=Hc+300-ut(),10<i)){if(oa(a,t,ln,!la),ba(a,0,!0)!==0)break e;a.timeoutHandle=eh(wf.bind(null,a,n,Lt,Bi,Ic,t,ln,Ma,xs,la,c,2,-0,0),i);break e}wf(a,n,Lt,Bi,Ic,t,ln,Ma,xs,la,c,0,-0,0)}}break}while(!0);En(e)}function wf(e,t,n,a,i,c,h,g,S,B,Y,$,M,L){if(e.timeoutHandle=-1,$=t.subtreeFlags,($&8192||($&16785408)===16785408)&&(jl={stylesheets:null,count:0,unsuspend:Kg},yf(t),$=Jg(),$!==null)){e.cancelPendingCommit=$(Bf.bind(null,e,t,c,n,a,i,h,g,S,Y,1,M,L)),oa(e,c,h,!B);return}Bf(e,t,c,n,a,i,h,g,S)}function mg(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var i=n[a],c=i.getSnapshot;i=i.value;try{if(!qt(c(),i))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function oa(e,t,n,a){t&=~zc,t&=~Ma,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var i=t;0<i;){var c=31-tt(i),h=1<<c;a[c]=-1,i&=~h}n!==0&&Us(e,n,t)}function Di(){return(Ge&6)===0?(vl(0),!1):!0}function Yc(){if(Be!==null){if(Ve===0)var e=Be.return;else e=Be,Bn=_a=null,rc(e),hs=null,rl=0,e=Be;for(;e!==null;)sf(e.alternate,e),e=e.return;Be=null}}function Ns(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Ug(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Yc(),Ze=e,Be=n=On(e.current,null),Le=t,Ve=0,Ft=null,la=!1,vs=Fn(e,t),Lc=!1,xs=ln=zc=Ma=ia=st=0,Lt=gl=null,Ic=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var i=31-tt(a),c=1<<i;t|=e[i],a&=~c}return qn=t,ni(),n}function Tf(e,t){Oe=null,y.H=Ni,t===Ps||t===di?(t=Vu(),Ve=3):t===Hu?(t=Vu(),Ve=4):Ve=t===Yd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ft=t,Be===null&&(st=1,wi(e,en(t,e.current)))}function Rf(){var e=y.H;return y.H=Ni,e===null?Ni:e}function _f(){var e=y.A;return y.A=fg,e}function Fc(){st=4,la||(Le&4194048)!==Le&&sn.current!==null||(vs=!0),(ia&134217727)===0&&(Ma&134217727)===0||Ze===null||oa(Ze,Le,ln,!1)}function Xc(e,t,n){var a=Ge;Ge|=2;var i=Rf(),c=_f();(Ze!==e||Le!==t)&&(Bi=null,Ns(e,t)),t=!1;var h=st;e:do try{if(Ve!==0&&Be!==null){var g=Be,S=Ft;switch(Ve){case 8:Yc(),h=6;break e;case 3:case 2:case 9:case 6:sn.current===null&&(t=!0);var B=Ve;if(Ve=0,Ft=null,Ss(e,g,S,B),n&&vs){h=0;break e}break;default:B=Ve,Ve=0,Ft=null,Ss(e,g,S,B)}}gg(),h=st;break}catch(Y){Tf(e,Y)}while(!0);return t&&e.shellSuspendCounter++,Bn=_a=null,Ge=a,y.H=i,y.A=c,Be===null&&(Ze=null,Le=0,ni()),h}function gg(){for(;Be!==null;)Of(Be)}function pg(e,t){var n=Ge;Ge|=2;var a=Rf(),i=_f();Ze!==e||Le!==t?(Bi=null,Ui=ut()+500,Ns(e,t)):vs=Fn(e,t);e:do try{if(Ve!==0&&Be!==null){t=Be;var c=Ft;t:switch(Ve){case 1:Ve=0,Ft=null,Ss(e,t,c,1);break;case 2:case 9:if(qu(c)){Ve=0,Ft=null,Cf(t);break}t=function(){Ve!==2&&Ve!==9||Ze!==e||(Ve=7),En(e)},c.then(t,t);break e;case 3:Ve=7;break e;case 4:Ve=5;break e;case 7:qu(c)?(Ve=0,Ft=null,Cf(t)):(Ve=0,Ft=null,Ss(e,t,c,7));break;case 5:var h=null;switch(Be.tag){case 26:h=Be.memoizedState;case 5:case 27:var g=Be;if(!h||fh(h)){Ve=0,Ft=null;var S=g.sibling;if(S!==null)Be=S;else{var B=g.return;B!==null?(Be=B,Mi(B)):Be=null}break t}}Ve=0,Ft=null,Ss(e,t,c,5);break;case 6:Ve=0,Ft=null,Ss(e,t,c,6);break;case 8:Yc(),st=6;break e;default:throw Error(r(462))}}vg();break}catch(Y){Tf(e,Y)}while(!0);return Bn=_a=null,y.H=a,y.A=i,Ge=n,Be!==null?0:(Ze=null,Le=0,ni(),st)}function vg(){for(;Be!==null&&!yn();)Of(Be)}function Of(e){var t=nf(e.alternate,e,qn);e.memoizedProps=e.pendingProps,t===null?Mi(e):Be=t}function Cf(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Zd(n,t,t.pendingProps,t.type,void 0,Le);break;case 11:t=Zd(n,t,t.pendingProps,t.type.render,t.ref,Le);break;case 5:rc(t);default:sf(n,t),t=Be=Cu(t,qn),t=nf(n,t,qn)}e.memoizedProps=e.pendingProps,t===null?Mi(e):Be=t}function Ss(e,t,n,a){Bn=_a=null,rc(t),hs=null,rl=0;var i=t.return;try{if(ig(e,i,t,n,Le)){st=1,wi(e,en(n,e.current)),Be=null;return}}catch(c){if(i!==null)throw Be=i,c;st=1,wi(e,en(n,e.current)),Be=null;return}t.flags&32768?(He||a===1?e=!0:vs||(Le&536870912)!==0?e=!1:(la=e=!0,(a===2||a===9||a===3||a===6)&&(a=sn.current,a!==null&&a.tag===13&&(a.flags|=16384))),Uf(t,e)):Mi(t)}function Mi(e){var t=e;do{if((t.flags&32768)!==0){Uf(t,la);return}e=t.return;var n=cg(t.alternate,t,qn);if(n!==null){Be=n;return}if(t=t.sibling,t!==null){Be=t;return}Be=t=e}while(t!==null);st===0&&(st=5)}function Uf(e,t){do{var n=og(e.alternate,e);if(n!==null){n.flags&=32767,Be=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Be=e;return}Be=e=n}while(e!==null);st=6,Be=null}function Bf(e,t,n,a,i,c,h,g,S){e.cancelPendingCommit=null;do ki();while(Et!==0);if((Ge&6)!==0)throw Error(r(327));if(t!==null){if(t===e.current)throw Error(r(177));if(c=t.lanes|t.childLanes,c|=kr,ql(e,n,c,h,g,S),e===Ze&&(Be=Ze=null,Le=0),ys=t,ca=e,bs=n,qc=c,Gc=i,jf=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ng(ne,function(){return zf(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=y.T,y.T=null,i=N.p,N.p=2,h=Ge,Ge|=4;try{ug(e,t,n)}finally{Ge=h,N.p=i,y.T=a}}Et=1,Df(),Mf(),kf()}}function Df(){if(Et===1){Et=0;var e=ca,t=ys,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=y.T,y.T=null;var a=N.p;N.p=2;var i=Ge;Ge|=4;try{pf(t,e);var c=so,h=Nu(e.containerInfo),g=c.focusedElem,S=c.selectionRange;if(h!==g&&g&&g.ownerDocument&&bu(g.ownerDocument.documentElement,g)){if(S!==null&&Cr(g)){var B=S.start,Y=S.end;if(Y===void 0&&(Y=B),"selectionStart"in g)g.selectionStart=B,g.selectionEnd=Math.min(Y,g.value.length);else{var $=g.ownerDocument||document,M=$&&$.defaultView||window;if(M.getSelection){var L=M.getSelection(),Ae=g.textContent.length,Se=Math.min(S.start,Ae),Qe=S.end===void 0?Se:Math.min(S.end,Ae);!L.extend&&Se>Qe&&(h=Qe,Qe=Se,Se=h);var R=yu(g,Se),T=yu(g,Qe);if(R&&T&&(L.rangeCount!==1||L.anchorNode!==R.node||L.anchorOffset!==R.offset||L.focusNode!==T.node||L.focusOffset!==T.offset)){var C=$.createRange();C.setStart(R.node,R.offset),L.removeAllRanges(),Se>Qe?(L.addRange(C),L.extend(T.node,T.offset)):(C.setEnd(T.node,T.offset),L.addRange(C))}}}}for($=[],L=g;L=L.parentNode;)L.nodeType===1&&$.push({element:L,left:L.scrollLeft,top:L.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<$.length;g++){var X=$[g];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}$i=!!ao,so=ao=null}finally{Ge=i,N.p=a,y.T=n}}e.current=t,Et=2}}function Mf(){if(Et===2){Et=0;var e=ca,t=ys,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=y.T,y.T=null;var a=N.p;N.p=2;var i=Ge;Ge|=4;try{ff(e,t.alternate,t)}finally{Ge=i,N.p=a,y.T=n}}Et=3}}function kf(){if(Et===4||Et===3){Et=0,Rt();var e=ca,t=ys,n=bs,a=jf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Et=5:(Et=0,ys=ca=null,Lf(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(ra=null),Fa(n),t=t.stateNode,me&&typeof me.onCommitFiberRoot=="function")try{me.onCommitFiberRoot(xe,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=y.T,i=N.p,N.p=2,y.T=null;try{for(var c=e.onRecoverableError,h=0;h<a.length;h++){var g=a[h];c(g.value,{componentStack:g.stack})}}finally{y.T=t,N.p=i}}(bs&3)!==0&&ki(),En(e),i=e.pendingLanes,(n&4194090)!==0&&(i&42)!==0?e===Vc?pl++:(pl=0,Vc=e):pl=0,vl(0)}}function Lf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Zs(t)))}function ki(e){return Df(),Mf(),kf(),zf()}function zf(){if(Et!==5)return!1;var e=ca,t=qc;qc=0;var n=Fa(bs),a=y.T,i=N.p;try{N.p=32>n?32:n,y.T=null,n=Gc,Gc=null;var c=ca,h=bs;if(Et=0,ys=ca=null,bs=0,(Ge&6)!==0)throw Error(r(331));var g=Ge;if(Ge|=4,Nf(c.current),xf(c,c.current,h,n),Ge=g,vl(0,!1),me&&typeof me.onPostCommitFiberRoot=="function")try{me.onPostCommitFiberRoot(xe,c)}catch{}return!0}finally{N.p=i,y.T=a,Lf(e,t)}}function If(e,t,n){t=en(n,t),t=Nc(e.stateNode,t,2),e=Pn(e,t,2),e!==null&&(Xn(e,2),En(e))}function $e(e,t,n){if(e.tag===3)If(e,e,n);else for(;t!==null;){if(t.tag===3){If(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(ra===null||!ra.has(a))){e=en(n,e),n=Gd(2),a=Pn(t,n,2),a!==null&&(Vd(n,a,t,e),Xn(a,2),En(a));break}}t=t.return}}function Qc(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new hg;var i=new Set;a.set(t,i)}else i=a.get(t),i===void 0&&(i=new Set,a.set(t,i));i.has(n)||(Lc=!0,i.add(n),e=xg.bind(null,e,t,n),t.then(e,e))}function xg(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Ze===e&&(Le&n)===n&&(st===4||st===3&&(Le&62914560)===Le&&300>ut()-Hc?(Ge&2)===0&&Ns(e,0):zc|=n,xs===Le&&(xs=0)),En(e)}function Hf(e,t){t===0&&(t=Cs()),e=as(e,t),e!==null&&(Xn(e,t),En(e))}function yg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Hf(e,n)}function bg(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(r(314))}a!==null&&a.delete(t),Hf(e,n)}function Ng(e,t){return Pe(e,t)}var Li=null,js=null,$c=!1,zi=!1,Kc=!1,ka=0;function En(e){e!==js&&e.next===null&&(js===null?Li=js=e:js=js.next=e),zi=!0,$c||($c=!0,jg())}function vl(e,t){if(!Kc&&zi){Kc=!0;do for(var n=!1,a=Li;a!==null;){if(e!==0){var i=a.pendingLanes;if(i===0)var c=0;else{var h=a.suspendedLanes,g=a.pingedLanes;c=(1<<31-tt(42|e)+1)-1,c&=i&~(h&~g),c=c&201326741?c&201326741|1:c?c|2:0}c!==0&&(n=!0,Yf(a,c))}else c=Le,c=ba(a,a===Ze?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(c&3)===0||Fn(a,c)||(n=!0,Yf(a,c));a=a.next}while(n);Kc=!1}}function Sg(){qf()}function qf(){zi=$c=!1;var e=0;ka!==0&&(Cg()&&(e=ka),ka=0);for(var t=ut(),n=null,a=Li;a!==null;){var i=a.next,c=Gf(a,t);c===0?(a.next=null,n===null?Li=i:n.next=i,i===null&&(js=n)):(n=a,(e!==0||(c&3)!==0)&&(zi=!0)),a=i}vl(e)}function Gf(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,c=e.pendingLanes&-62914561;0<c;){var h=31-tt(c),g=1<<h,S=i[h];S===-1?((g&n)===0||(g&a)!==0)&&(i[h]=Hl(g,t)):S<=t&&(e.expiredLanes|=g),c&=~g}if(t=Ze,n=Le,n=ba(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,n===0||e===t&&(Ve===2||Ve===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&St(a),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Fn(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(a!==null&&St(a),Fa(n)){case 2:case 8:n=P;break;case 32:n=ne;break;case 268435456:n=de;break;default:n=ne}return a=Vf.bind(null,e),n=Pe(n,a),e.callbackPriority=t,e.callbackNode=n,t}return a!==null&&a!==null&&St(a),e.callbackPriority=2,e.callbackNode=null,2}function Vf(e,t){if(Et!==0&&Et!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ki()&&e.callbackNode!==n)return null;var a=Le;return a=ba(e,e===Ze?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Ef(e,a,t),Gf(e,ut()),e.callbackNode!=null&&e.callbackNode===n?Vf.bind(null,e):null)}function Yf(e,t){if(ki())return null;Ef(e,t,!0)}function jg(){Bg(function(){(Ge&6)!==0?Pe(O,Sg):qf()})}function Zc(){return ka===0&&(ka=Os()),ka}function Ff(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Kl(""+e)}function Xf(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function Ag(e,t,n,a,i){if(t==="submit"&&n&&n.stateNode===i){var c=Ff((i[jt]||null).action),h=a.submitter;h&&(t=(t=h[jt]||null)?Ff(t.formAction):h.getAttribute("formAction"),t!==null&&(c=t,h=null));var g=new Wl("action","action",null,a,i);e.push({event:g,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(ka!==0){var S=h?Xf(i,h):new FormData(i);pc(n,{pending:!0,data:S,method:i.method,action:c},null,S)}}else typeof c=="function"&&(g.preventDefault(),S=h?Xf(i,h):new FormData(i),pc(n,{pending:!0,data:S,method:i.method,action:c},c,S))},currentTarget:i}]})}}for(var Jc=0;Jc<Mr.length;Jc++){var Pc=Mr[Jc],Eg=Pc.toLowerCase(),wg=Pc[0].toUpperCase()+Pc.slice(1);hn(Eg,"on"+wg)}hn(Au,"onAnimationEnd"),hn(Eu,"onAnimationIteration"),hn(wu,"onAnimationStart"),hn("dblclick","onDoubleClick"),hn("focusin","onFocus"),hn("focusout","onBlur"),hn(V0,"onTransitionRun"),hn(Y0,"onTransitionStart"),hn(F0,"onTransitionCancel"),hn(Tu,"onTransitionEnd"),Kt("onMouseEnter",["mouseout","mouseover"]),Kt("onMouseLeave",["mouseout","mouseover"]),Kt("onPointerEnter",["pointerout","pointerover"]),Kt("onPointerLeave",["pointerout","pointerover"]),dt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),dt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),dt("onBeforeInput",["compositionend","keypress","textInput","paste"]),dt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),dt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),dt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xl));function Qf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],i=a.event;a=a.listeners;e:{var c=void 0;if(t)for(var h=a.length-1;0<=h;h--){var g=a[h],S=g.instance,B=g.currentTarget;if(g=g.listener,S!==c&&i.isPropagationStopped())break e;c=g,i.currentTarget=B;try{c(i)}catch(Y){Ei(Y)}i.currentTarget=null,c=S}else for(h=0;h<a.length;h++){if(g=a[h],S=g.instance,B=g.currentTarget,g=g.listener,S!==c&&i.isPropagationStopped())break e;c=g,i.currentTarget=B;try{c(i)}catch(Y){Ei(Y)}i.currentTarget=null,c=S}}}}function De(e,t){var n=t[Xa];n===void 0&&(n=t[Xa]=new Set);var a=e+"__bubble";n.has(a)||($f(t,e,2,!1),n.add(a))}function Wc(e,t,n){var a=0;t&&(a|=4),$f(n,e,a,t)}var Ii="_reactListening"+Math.random().toString(36).slice(2);function eo(e){if(!e[Ii]){e[Ii]=!0,dn.forEach(function(n){n!=="selectionchange"&&(Tg.has(n)||Wc(n,!1,e),Wc(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ii]||(t[Ii]=!0,Wc("selectionchange",!1,t))}}function $f(e,t,n,a){switch(xh(t)){case 2:var i=ep;break;case 8:i=tp;break;default:i=go}n=i.bind(null,t,n,e),i=void 0,!Sr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),a?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function to(e,t,n,a,i){var c=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var h=a.tag;if(h===3||h===4){var g=a.stateNode.containerInfo;if(g===i)break;if(h===4)for(h=a.return;h!==null;){var S=h.tag;if((S===3||S===4)&&h.stateNode.containerInfo===i)return;h=h.return}for(;g!==null;){if(h=ke(g),h===null)return;if(S=h.tag,S===5||S===6||S===26||S===27){a=c=h;continue e}g=g.parentNode}}a=a.return}eu(function(){var B=c,Y=br(n),$=[];e:{var M=Ru.get(e);if(M!==void 0){var L=Wl,Ae=e;switch(e){case"keypress":if(Jl(n)===0)break e;case"keydown":case"keyup":L=N0;break;case"focusin":Ae="focus",L=wr;break;case"focusout":Ae="blur",L=wr;break;case"beforeblur":case"afterblur":L=wr;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":L=au;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":L=o0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":L=A0;break;case Au:case Eu:case wu:L=f0;break;case Tu:L=w0;break;case"scroll":case"scrollend":L=r0;break;case"wheel":L=R0;break;case"copy":case"cut":case"paste":L=m0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":L=lu;break;case"toggle":case"beforetoggle":L=O0}var Se=(t&4)!==0,Qe=!Se&&(e==="scroll"||e==="scrollend"),R=Se?M!==null?M+"Capture":null:M;Se=[];for(var T=B,C;T!==null;){var X=T;if(C=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||C===null||R===null||(X=Ls(T,R),X!=null&&Se.push(yl(T,X,C))),Qe)break;T=T.return}0<Se.length&&(M=new L(M,Ae,null,n,Y),$.push({event:M,listeners:Se}))}}if((t&7)===0){e:{if(M=e==="mouseover"||e==="pointerover",L=e==="mouseout"||e==="pointerout",M&&n!==yr&&(Ae=n.relatedTarget||n.fromElement)&&(ke(Ae)||Ae[Rn]))break e;if((L||M)&&(M=Y.window===Y?Y:(M=Y.ownerDocument)?M.defaultView||M.parentWindow:window,L?(Ae=n.relatedTarget||n.toElement,L=B,Ae=Ae?ke(Ae):null,Ae!==null&&(Qe=f(Ae),Se=Ae.tag,Ae!==Qe||Se!==5&&Se!==27&&Se!==6)&&(Ae=null)):(L=null,Ae=B),L!==Ae)){if(Se=au,X="onMouseLeave",R="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(Se=lu,X="onPointerLeave",R="onPointerEnter",T="pointer"),Qe=L==null?M:Ke(L),C=Ae==null?M:Ke(Ae),M=new Se(X,T+"leave",L,n,Y),M.target=Qe,M.relatedTarget=C,X=null,ke(Y)===B&&(Se=new Se(R,T+"enter",Ae,n,Y),Se.target=C,Se.relatedTarget=Qe,X=Se),Qe=X,L&&Ae)t:{for(Se=L,R=Ae,T=0,C=Se;C;C=As(C))T++;for(C=0,X=R;X;X=As(X))C++;for(;0<T-C;)Se=As(Se),T--;for(;0<C-T;)R=As(R),C--;for(;T--;){if(Se===R||R!==null&&Se===R.alternate)break t;Se=As(Se),R=As(R)}Se=null}else Se=null;L!==null&&Kf($,M,L,Se,!1),Ae!==null&&Qe!==null&&Kf($,Qe,Ae,Se,!0)}}e:{if(M=B?Ke(B):window,L=M.nodeName&&M.nodeName.toLowerCase(),L==="select"||L==="input"&&M.type==="file")var be=hu;else if(du(M))if(mu)be=H0;else{be=z0;var Ce=L0}else L=M.nodeName,!L||L.toLowerCase()!=="input"||M.type!=="checkbox"&&M.type!=="radio"?B&&xr(B.elementType)&&(be=hu):be=I0;if(be&&(be=be(e,B))){fu($,be,n,Y);break e}Ce&&Ce(e,M,B),e==="focusout"&&B&&M.type==="number"&&B.memoizedProps.value!=null&&vr(M,"number",M.value)}switch(Ce=B?Ke(B):window,e){case"focusin":(du(Ce)||Ce.contentEditable==="true")&&(es=Ce,Ur=B,Fs=null);break;case"focusout":Fs=Ur=es=null;break;case"mousedown":Br=!0;break;case"contextmenu":case"mouseup":case"dragend":Br=!1,Su($,n,Y);break;case"selectionchange":if(G0)break;case"keydown":case"keyup":Su($,n,Y)}var Ne;if(Rr)e:{switch(e){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else Wa?ou(e,n)&&(je="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(je="onCompositionStart");je&&(iu&&n.locale!=="ko"&&(Wa||je!=="onCompositionStart"?je==="onCompositionEnd"&&Wa&&(Ne=tu()):($n=Y,jr="value"in $n?$n.value:$n.textContent,Wa=!0)),Ce=Hi(B,je),0<Ce.length&&(je=new su(je,e,null,n,Y),$.push({event:je,listeners:Ce}),Ne?je.data=Ne:(Ne=uu(n),Ne!==null&&(je.data=Ne)))),(Ne=U0?B0(e,n):D0(e,n))&&(je=Hi(B,"onBeforeInput"),0<je.length&&(Ce=new su("onBeforeInput","beforeinput",null,n,Y),$.push({event:Ce,listeners:je}),Ce.data=Ne)),Ag($,e,B,n,Y)}Qf($,t)})}function yl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hi(e,t){for(var n=t+"Capture",a=[];e!==null;){var i=e,c=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||c===null||(i=Ls(e,n),i!=null&&a.unshift(yl(e,i,c)),i=Ls(e,t),i!=null&&a.push(yl(e,i,c))),e.tag===3)return a;e=e.return}return[]}function As(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Kf(e,t,n,a,i){for(var c=t._reactName,h=[];n!==null&&n!==a;){var g=n,S=g.alternate,B=g.stateNode;if(g=g.tag,S!==null&&S===a)break;g!==5&&g!==26&&g!==27||B===null||(S=B,i?(B=Ls(n,c),B!=null&&h.unshift(yl(n,B,S))):i||(B=Ls(n,c),B!=null&&h.push(yl(n,B,S)))),n=n.return}h.length!==0&&e.push({event:t,listeners:h})}var Rg=/\r\n?/g,_g=/\u0000|\uFFFD/g;function Zf(e){return(typeof e=="string"?e:""+e).replace(Rg,`
`).replace(_g,"")}function Jf(e,t){return t=Zf(t),Zf(e)===t}function qi(){}function Xe(e,t,n,a,i,c){switch(n){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||Za(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&Za(e,""+a);break;case"className":$a(e,"class",a);break;case"tabIndex":$a(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":$a(e,n,a);break;case"style":Po(e,a,c);break;case"data":if(t!=="object"){$a(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=Kl(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof c=="function"&&(n==="formAction"?(t!=="input"&&Xe(e,t,"name",i.name,i,null),Xe(e,t,"formEncType",i.formEncType,i,null),Xe(e,t,"formMethod",i.formMethod,i,null),Xe(e,t,"formTarget",i.formTarget,i,null)):(Xe(e,t,"encType",i.encType,i,null),Xe(e,t,"method",i.method,i,null),Xe(e,t,"target",i.target,i,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=Kl(""+a),e.setAttribute(n,a);break;case"onClick":a!=null&&(e.onclick=qi);break;case"onScroll":a!=null&&De("scroll",e);break;case"onScrollEnd":a!=null&&De("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(r(61));if(n=a.__html,n!=null){if(i.children!=null)throw Error(r(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}n=Kl(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":a===!0?e.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":De("beforetoggle",e),De("toggle",e),Qa(e,"popover",a);break;case"xlinkActuate":fn(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":fn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":fn(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":fn(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":fn(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":fn(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":fn(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":fn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":fn(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Qa(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=l0.get(n)||n,Qa(e,n,a))}}function no(e,t,n,a,i,c){switch(n){case"style":Po(e,a,c);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(r(61));if(n=a.__html,n!=null){if(i.children!=null)throw Error(r(60));e.innerHTML=n}}break;case"children":typeof a=="string"?Za(e,a):(typeof a=="number"||typeof a=="bigint")&&Za(e,""+a);break;case"onScroll":a!=null&&De("scroll",e);break;case"onScrollEnd":a!=null&&De("scrollend",e);break;case"onClick":a!=null&&(e.onclick=qi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qn.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),c=e[jt]||null,c=c!=null?c[n]:null,typeof c=="function"&&e.removeEventListener(t,c,i),typeof a=="function")){typeof c!="function"&&c!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,i);break e}n in e?e[n]=a:a===!0?e.setAttribute(n,""):Qa(e,n,a)}}}function wt(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",e),De("load",e);var a=!1,i=!1,c;for(c in n)if(n.hasOwnProperty(c)){var h=n[c];if(h!=null)switch(c){case"src":a=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Xe(e,t,c,h,n,null)}}i&&Xe(e,t,"srcSet",n.srcSet,n,null),a&&Xe(e,t,"src",n.src,n,null);return;case"input":De("invalid",e);var g=c=h=i=null,S=null,B=null;for(a in n)if(n.hasOwnProperty(a)){var Y=n[a];if(Y!=null)switch(a){case"name":i=Y;break;case"type":h=Y;break;case"checked":S=Y;break;case"defaultChecked":B=Y;break;case"value":c=Y;break;case"defaultValue":g=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,t));break;default:Xe(e,t,a,Y,n,null)}}$o(e,c,g,S,B,h,i,!1),Ql(e);return;case"select":De("invalid",e),a=h=c=null;for(i in n)if(n.hasOwnProperty(i)&&(g=n[i],g!=null))switch(i){case"value":c=g;break;case"defaultValue":h=g;break;case"multiple":a=g;default:Xe(e,t,i,g,n,null)}t=c,n=h,e.multiple=!!a,t!=null?Ka(e,!!a,t,!1):n!=null&&Ka(e,!!a,n,!0);return;case"textarea":De("invalid",e),c=i=a=null;for(h in n)if(n.hasOwnProperty(h)&&(g=n[h],g!=null))switch(h){case"value":a=g;break;case"defaultValue":i=g;break;case"children":c=g;break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:Xe(e,t,h,g,n,null)}Zo(e,a,i,c),Ql(e);return;case"option":for(S in n)if(n.hasOwnProperty(S)&&(a=n[S],a!=null))switch(S){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:Xe(e,t,S,a,n,null)}return;case"dialog":De("beforetoggle",e),De("toggle",e),De("cancel",e),De("close",e);break;case"iframe":case"object":De("load",e);break;case"video":case"audio":for(a=0;a<xl.length;a++)De(xl[a],e);break;case"image":De("error",e),De("load",e);break;case"details":De("toggle",e);break;case"embed":case"source":case"link":De("error",e),De("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in n)if(n.hasOwnProperty(B)&&(a=n[B],a!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Xe(e,t,B,a,n,null)}return;default:if(xr(t)){for(Y in n)n.hasOwnProperty(Y)&&(a=n[Y],a!==void 0&&no(e,t,Y,a,n,void 0));return}}for(g in n)n.hasOwnProperty(g)&&(a=n[g],a!=null&&Xe(e,t,g,a,n,null))}function Og(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,c=null,h=null,g=null,S=null,B=null,Y=null;for(L in n){var $=n[L];if(n.hasOwnProperty(L)&&$!=null)switch(L){case"checked":break;case"value":break;case"defaultValue":S=$;default:a.hasOwnProperty(L)||Xe(e,t,L,null,a,$)}}for(var M in a){var L=a[M];if($=n[M],a.hasOwnProperty(M)&&(L!=null||$!=null))switch(M){case"type":c=L;break;case"name":i=L;break;case"checked":B=L;break;case"defaultChecked":Y=L;break;case"value":h=L;break;case"defaultValue":g=L;break;case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(r(137,t));break;default:L!==$&&Xe(e,t,M,L,a,$)}}pr(e,h,g,S,B,Y,c,i);return;case"select":L=h=g=M=null;for(c in n)if(S=n[c],n.hasOwnProperty(c)&&S!=null)switch(c){case"value":break;case"multiple":L=S;default:a.hasOwnProperty(c)||Xe(e,t,c,null,a,S)}for(i in a)if(c=a[i],S=n[i],a.hasOwnProperty(i)&&(c!=null||S!=null))switch(i){case"value":M=c;break;case"defaultValue":g=c;break;case"multiple":h=c;default:c!==S&&Xe(e,t,i,c,a,S)}t=g,n=h,a=L,M!=null?Ka(e,!!n,M,!1):!!a!=!!n&&(t!=null?Ka(e,!!n,t,!0):Ka(e,!!n,n?[]:"",!1));return;case"textarea":L=M=null;for(g in n)if(i=n[g],n.hasOwnProperty(g)&&i!=null&&!a.hasOwnProperty(g))switch(g){case"value":break;case"children":break;default:Xe(e,t,g,null,a,i)}for(h in a)if(i=a[h],c=n[h],a.hasOwnProperty(h)&&(i!=null||c!=null))switch(h){case"value":M=i;break;case"defaultValue":L=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(r(91));break;default:i!==c&&Xe(e,t,h,i,a,c)}Ko(e,M,L);return;case"option":for(var Ae in n)if(M=n[Ae],n.hasOwnProperty(Ae)&&M!=null&&!a.hasOwnProperty(Ae))switch(Ae){case"selected":e.selected=!1;break;default:Xe(e,t,Ae,null,a,M)}for(S in a)if(M=a[S],L=n[S],a.hasOwnProperty(S)&&M!==L&&(M!=null||L!=null))switch(S){case"selected":e.selected=M&&typeof M!="function"&&typeof M!="symbol";break;default:Xe(e,t,S,M,a,L)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in n)M=n[Se],n.hasOwnProperty(Se)&&M!=null&&!a.hasOwnProperty(Se)&&Xe(e,t,Se,null,a,M);for(B in a)if(M=a[B],L=n[B],a.hasOwnProperty(B)&&M!==L&&(M!=null||L!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(137,t));break;default:Xe(e,t,B,M,a,L)}return;default:if(xr(t)){for(var Qe in n)M=n[Qe],n.hasOwnProperty(Qe)&&M!==void 0&&!a.hasOwnProperty(Qe)&&no(e,t,Qe,void 0,a,M);for(Y in a)M=a[Y],L=n[Y],!a.hasOwnProperty(Y)||M===L||M===void 0&&L===void 0||no(e,t,Y,M,a,L);return}}for(var R in n)M=n[R],n.hasOwnProperty(R)&&M!=null&&!a.hasOwnProperty(R)&&Xe(e,t,R,null,a,M);for($ in a)M=a[$],L=n[$],!a.hasOwnProperty($)||M===L||M==null&&L==null||Xe(e,t,$,M,a,L)}var ao=null,so=null;function Gi(e){return e.nodeType===9?e:e.ownerDocument}function Pf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Wf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function lo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var io=null;function Cg(){var e=window.event;return e&&e.type==="popstate"?e===io?!1:(io=e,!0):(io=null,!1)}var eh=typeof setTimeout=="function"?setTimeout:void 0,Ug=typeof clearTimeout=="function"?clearTimeout:void 0,th=typeof Promise=="function"?Promise:void 0,Bg=typeof queueMicrotask=="function"?queueMicrotask:typeof th<"u"?function(e){return th.resolve(null).then(e).catch(Dg)}:eh;function Dg(e){setTimeout(function(){throw e})}function ua(e){return e==="head"}function nh(e,t){var n=t,a=0,i=0;do{var c=n.nextSibling;if(e.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"){if(0<a&&8>a){n=a;var h=e.ownerDocument;if(n&1&&bl(h.documentElement),n&2&&bl(h.body),n&4)for(n=h.head,bl(n),h=n.firstChild;h;){var g=h.nextSibling,S=h.nodeName;h[ye]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&h.rel.toLowerCase()==="stylesheet"||n.removeChild(h),h=g}}if(i===0){e.removeChild(c),Rl(t);return}i--}else n==="$"||n==="$?"||n==="$!"?i++:a=n.charCodeAt(0)-48;else a=0;n=c}while(n);Rl(t)}function ro(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":ro(n),Me(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Mg(e,t,n,a){for(;e.nodeType===1;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[ye])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(c=e.getAttribute("rel"),c==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(c!==i.rel||e.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute("title")!==(i.title==null?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(c=e.getAttribute("src"),(c!==(i.src==null?null:i.src)||e.getAttribute("type")!==(i.type==null?null:i.type)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&c&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var c=i.name==null?null:""+i.name;if(i.type==="hidden"&&e.getAttribute("name")===c)return e}else return e;if(e=gn(e.nextSibling),e===null)break}return null}function kg(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=gn(e.nextSibling),e===null))return null;return e}function co(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Lg(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function gn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var oo=null;function ah(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function sh(e,t,n){switch(t=Gi(n),e){case"html":if(e=t.documentElement,!e)throw Error(r(452));return e;case"head":if(e=t.head,!e)throw Error(r(453));return e;case"body":if(e=t.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function bl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Me(e)}var rn=new Map,lh=new Set;function Vi(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Gn=N.d;N.d={f:zg,r:Ig,D:Hg,C:qg,L:Gg,m:Vg,X:Fg,S:Yg,M:Xg};function zg(){var e=Gn.f(),t=Di();return e||t}function Ig(e){var t=pt(e);t!==null&&t.tag===5&&t.type==="form"?Ad(t):Gn.r(e)}var Es=typeof document>"u"?null:document;function ih(e,t,n){var a=Es;if(a&&typeof t=="string"&&t){var i=Wt(t);i='link[rel="'+e+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),lh.has(i)||(lh.add(i),e={rel:e,crossOrigin:n,href:t},a.querySelector(i)===null&&(t=a.createElement("link"),wt(t,"link",e),Ie(t),a.head.appendChild(t)))}}function Hg(e){Gn.D(e),ih("dns-prefetch",e,null)}function qg(e,t){Gn.C(e,t),ih("preconnect",e,t)}function Gg(e,t,n){Gn.L(e,t,n);var a=Es;if(a&&e&&t){var i='link[rel="preload"][as="'+Wt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+Wt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+Wt(n.imageSizes)+'"]')):i+='[href="'+Wt(e)+'"]';var c=i;switch(t){case"style":c=ws(e);break;case"script":c=Ts(e)}rn.has(c)||(e=x({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),rn.set(c,e),a.querySelector(i)!==null||t==="style"&&a.querySelector(Nl(c))||t==="script"&&a.querySelector(Sl(c))||(t=a.createElement("link"),wt(t,"link",e),Ie(t),a.head.appendChild(t)))}}function Vg(e,t){Gn.m(e,t);var n=Es;if(n&&e){var a=t&&typeof t.as=="string"?t.as:"script",i='link[rel="modulepreload"][as="'+Wt(a)+'"][href="'+Wt(e)+'"]',c=i;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":c=Ts(e)}if(!rn.has(c)&&(e=x({rel:"modulepreload",href:e},t),rn.set(c,e),n.querySelector(i)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Sl(c)))return}a=n.createElement("link"),wt(a,"link",e),Ie(a),n.head.appendChild(a)}}}function Yg(e,t,n){Gn.S(e,t,n);var a=Es;if(a&&e){var i=rt(a).hoistableStyles,c=ws(e);t=t||"default";var h=i.get(c);if(!h){var g={loading:0,preload:null};if(h=a.querySelector(Nl(c)))g.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},n),(n=rn.get(c))&&uo(e,n);var S=h=a.createElement("link");Ie(S),wt(S,"link",e),S._p=new Promise(function(B,Y){S.onload=B,S.onerror=Y}),S.addEventListener("load",function(){g.loading|=1}),S.addEventListener("error",function(){g.loading|=2}),g.loading|=4,Yi(h,t,a)}h={type:"stylesheet",instance:h,count:1,state:g},i.set(c,h)}}}function Fg(e,t){Gn.X(e,t);var n=Es;if(n&&e){var a=rt(n).hoistableScripts,i=Ts(e),c=a.get(i);c||(c=n.querySelector(Sl(i)),c||(e=x({src:e,async:!0},t),(t=rn.get(i))&&fo(e,t),c=n.createElement("script"),Ie(c),wt(c,"link",e),n.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},a.set(i,c))}}function Xg(e,t){Gn.M(e,t);var n=Es;if(n&&e){var a=rt(n).hoistableScripts,i=Ts(e),c=a.get(i);c||(c=n.querySelector(Sl(i)),c||(e=x({src:e,async:!0,type:"module"},t),(t=rn.get(i))&&fo(e,t),c=n.createElement("script"),Ie(c),wt(c,"link",e),n.head.appendChild(c)),c={type:"script",instance:c,count:1,state:null},a.set(i,c))}}function rh(e,t,n,a){var i=(i=Re.current)?Vi(i):null;if(!i)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=ws(n.href),n=rt(i).hoistableStyles,a=n.get(t),a||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=ws(n.href);var c=rt(i).hoistableStyles,h=c.get(e);if(h||(i=i.ownerDocument||i,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,h),(c=i.querySelector(Nl(e)))&&!c._p&&(h.instance=c,h.state.loading=5),rn.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},rn.set(e,n),c||Qg(i,e,n,h.state))),t&&a===null)throw Error(r(528,""));return h}if(t&&a!==null)throw Error(r(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ts(n),n=rt(i).hoistableScripts,a=n.get(t),a||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function ws(e){return'href="'+Wt(e)+'"'}function Nl(e){return'link[rel="stylesheet"]['+e+"]"}function ch(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function Qg(e,t,n,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),wt(t,"link",n),Ie(t),e.head.appendChild(t))}function Ts(e){return'[src="'+Wt(e)+'"]'}function Sl(e){return"script[async]"+e}function oh(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+Wt(n.href)+'"]');if(a)return t.instance=a,Ie(a),a;var i=x({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),Ie(a),wt(a,"style",i),Yi(a,n.precedence,e),t.instance=a;case"stylesheet":i=ws(n.href);var c=e.querySelector(Nl(i));if(c)return t.state.loading|=4,t.instance=c,Ie(c),c;a=ch(n),(i=rn.get(i))&&uo(a,i),c=(e.ownerDocument||e).createElement("link"),Ie(c);var h=c;return h._p=new Promise(function(g,S){h.onload=g,h.onerror=S}),wt(c,"link",a),t.state.loading|=4,Yi(c,n.precedence,e),t.instance=c;case"script":return c=Ts(n.src),(i=e.querySelector(Sl(c)))?(t.instance=i,Ie(i),i):(a=n,(i=rn.get(c))&&(a=x({},n),fo(a,i)),e=e.ownerDocument||e,i=e.createElement("script"),Ie(i),wt(i,"link",a),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(r(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,Yi(a,n.precedence,e));return t.instance}function Yi(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=a.length?a[a.length-1]:null,c=i,h=0;h<a.length;h++){var g=a[h];if(g.dataset.precedence===t)c=g;else if(c!==i)break}c?c.parentNode.insertBefore(e,c.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function uo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function fo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Fi=null;function uh(e,t,n){if(Fi===null){var a=new Map,i=Fi=new Map;i.set(n,a)}else i=Fi,a=i.get(n),a||(a=new Map,i.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var c=n[i];if(!(c[ye]||c[gt]||e==="link"&&c.getAttribute("rel")==="stylesheet")&&c.namespaceURI!=="http://www.w3.org/2000/svg"){var h=c.getAttribute(t)||"";h=e+h;var g=a.get(h);g?g.push(c):a.set(h,[c])}}return a}function dh(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function $g(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function fh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var jl=null;function Kg(){}function Zg(e,t,n){if(jl===null)throw Error(r(475));var a=jl;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var i=ws(n.href),c=e.querySelector(Nl(i));if(c){e=c._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(a.count++,a=Xi.bind(a),e.then(a,a)),t.state.loading|=4,t.instance=c,Ie(c);return}c=e.ownerDocument||e,n=ch(n),(i=rn.get(i))&&uo(n,i),c=c.createElement("link"),Ie(c);var h=c;h._p=new Promise(function(g,S){h.onload=g,h.onerror=S}),wt(c,"link",n),t.instance=c}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(a.count++,t=Xi.bind(a),e.addEventListener("load",t),e.addEventListener("error",t))}}function Jg(){if(jl===null)throw Error(r(475));var e=jl;return e.stylesheets&&e.count===0&&ho(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&ho(e,e.stylesheets),e.unsuspend){var a=e.unsuspend;e.unsuspend=null,a()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Xi(){if(this.count--,this.count===0){if(this.stylesheets)ho(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Qi=null;function ho(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Qi=new Map,t.forEach(Pg,e),Qi=null,Xi.call(e))}function Pg(e,t){if(!(t.state.loading&4)){var n=Qi.get(e);if(n)var a=n.get(null);else{n=new Map,Qi.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),c=0;c<i.length;c++){var h=i[c];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(n.set(h.dataset.precedence,h),a=h)}a&&n.set(null,a)}i=t.instance,h=i.getAttribute("data-precedence"),c=n.get(h)||a,c===a&&n.set(null,i),n.set(h,i),this.count++,a=Xi.bind(this),i.addEventListener("load",a),i.addEventListener("error",a),c?c.parentNode.insertBefore(i,c.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var Al={$$typeof:G,Provider:null,Consumer:null,_currentValue:k,_currentValue2:k,_threadCount:0};function Wg(e,t,n,a,i,c,h,g){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Va(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Va(0),this.hiddenUpdates=Va(null),this.identifierPrefix=a,this.onUncaughtError=i,this.onCaughtError=c,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=g,this.incompleteTransitions=new Map}function hh(e,t,n,a,i,c,h,g,S,B,Y,$){return e=new Wg(e,t,n,h,g,S,B,$),t=1,c===!0&&(t|=24),c=Gt(3,null,null,t),e.current=c,c.stateNode=e,t=Qr(),t.refCount++,e.pooledCache=t,t.refCount++,c.memoizedState={element:a,isDehydrated:n,cache:t},Jr(c),e}function mh(e){return e?(e=ss,e):ss}function gh(e,t,n,a,i,c){i=mh(i),a.context===null?a.context=i:a.pendingContext=i,a=Jn(t),a.payload={element:n},c=c===void 0?null:c,c!==null&&(a.callback=c),n=Pn(e,a,t),n!==null&&(Qt(n,e,t),el(n,e,t))}function ph(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function mo(e,t){ph(e,t),(e=e.alternate)&&ph(e,t)}function vh(e){if(e.tag===13){var t=as(e,67108864);t!==null&&Qt(t,e,67108864),mo(e,67108864)}}var $i=!0;function ep(e,t,n,a){var i=y.T;y.T=null;var c=N.p;try{N.p=2,go(e,t,n,a)}finally{N.p=c,y.T=i}}function tp(e,t,n,a){var i=y.T;y.T=null;var c=N.p;try{N.p=8,go(e,t,n,a)}finally{N.p=c,y.T=i}}function go(e,t,n,a){if($i){var i=po(a);if(i===null)to(e,t,a,Ki,n),yh(e,a);else if(ap(i,e,t,n,a))a.stopPropagation();else if(yh(e,a),t&4&&-1<np.indexOf(e)){for(;i!==null;){var c=pt(i);if(c!==null)switch(c.tag){case 3:if(c=c.stateNode,c.current.memoizedState.isDehydrated){var h=bn(c.pendingLanes);if(h!==0){var g=c;for(g.pendingLanes|=2,g.entangledLanes|=2;h;){var S=1<<31-tt(h);g.entanglements[1]|=S,h&=~S}En(c),(Ge&6)===0&&(Ui=ut()+500,vl(0))}}break;case 13:g=as(c,2),g!==null&&Qt(g,c,2),Di(),mo(c,2)}if(c=po(a),c===null&&to(e,t,a,Ki,n),c===i)break;i=c}i!==null&&a.stopPropagation()}else to(e,t,a,null,n)}}function po(e){return e=br(e),vo(e)}var Ki=null;function vo(e){if(Ki=null,e=ke(e),e!==null){var t=f(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=m(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ki=e,null}function xh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(j()){case O:return 2;case P:return 8;case ne:case W:return 32;case de:return 268435456;default:return 32}default:return 32}}var xo=!1,da=null,fa=null,ha=null,El=new Map,wl=new Map,ma=[],np="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yh(e,t){switch(e){case"focusin":case"focusout":da=null;break;case"dragenter":case"dragleave":fa=null;break;case"mouseover":case"mouseout":ha=null;break;case"pointerover":case"pointerout":El.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wl.delete(t.pointerId)}}function Tl(e,t,n,a,i,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:c,targetContainers:[i]},t!==null&&(t=pt(t),t!==null&&vh(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function ap(e,t,n,a,i){switch(t){case"focusin":return da=Tl(da,e,t,n,a,i),!0;case"dragenter":return fa=Tl(fa,e,t,n,a,i),!0;case"mouseover":return ha=Tl(ha,e,t,n,a,i),!0;case"pointerover":var c=i.pointerId;return El.set(c,Tl(El.get(c)||null,e,t,n,a,i)),!0;case"gotpointercapture":return c=i.pointerId,wl.set(c,Tl(wl.get(c)||null,e,t,n,a,i)),!0}return!1}function bh(e){var t=ke(e.target);if(t!==null){var n=f(t);if(n!==null){if(t=n.tag,t===13){if(t=m(n),t!==null){e.blockedOn=t,Gl(e.priority,function(){if(n.tag===13){var a=Xt();a=Ya(a);var i=as(n,a);i!==null&&Qt(i,n,a),mo(n,a)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=po(e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);yr=a,n.target.dispatchEvent(a),yr=null}else return t=pt(n),t!==null&&vh(t),e.blockedOn=n,!1;t.shift()}return!0}function Nh(e,t,n){Zi(e)&&n.delete(t)}function sp(){xo=!1,da!==null&&Zi(da)&&(da=null),fa!==null&&Zi(fa)&&(fa=null),ha!==null&&Zi(ha)&&(ha=null),El.forEach(Nh),wl.forEach(Nh)}function Ji(e,t){e.blockedOn===t&&(e.blockedOn=null,xo||(xo=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,sp)))}var Pi=null;function Sh(e){Pi!==e&&(Pi=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){Pi===e&&(Pi=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],i=e[t+2];if(typeof a!="function"){if(vo(a||n)===null)continue;break}var c=pt(n);c!==null&&(e.splice(t,3),t-=3,pc(c,{pending:!0,data:i,method:n.method,action:a},a,i))}}))}function Rl(e){function t(S){return Ji(S,e)}da!==null&&Ji(da,e),fa!==null&&Ji(fa,e),ha!==null&&Ji(ha,e),El.forEach(t),wl.forEach(t);for(var n=0;n<ma.length;n++){var a=ma[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<ma.length&&(n=ma[0],n.blockedOn===null);)bh(n),n.blockedOn===null&&ma.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var i=n[a],c=n[a+1],h=i[jt]||null;if(typeof c=="function")h||Sh(n);else if(h){var g=null;if(c&&c.hasAttribute("formAction")){if(i=c,h=c[jt]||null)g=h.formAction;else if(vo(i)!==null)continue}else g=h.action;typeof g=="function"?n[a+1]=g:(n.splice(a,3),a-=3),Sh(n)}}}function yo(e){this._internalRoot=e}Wi.prototype.render=yo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(r(409));var n=t.current,a=Xt();gh(n,a,e,t,null,null)},Wi.prototype.unmount=yo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;gh(e.current,2,null,e,null,null),Di(),t[Rn]=null}};function Wi(e){this._internalRoot=e}Wi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ds();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ma.length&&t!==0&&t<ma[n].priority;n++);ma.splice(n,0,e),n===0&&bh(e)}};var jh=s.version;if(jh!=="19.1.1")throw Error(r(527,jh,"19.1.1"));N.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=v(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var lp={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:y,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var er=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!er.isDisabled&&er.supportsFiber)try{xe=er.inject(lp),me=er}catch{}}return Ol.createRoot=function(e,t){if(!d(e))throw Error(r(299));var n=!1,a="",i=zd,c=Id,h=Hd,g=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(c=t.onCaughtError),t.onRecoverableError!==void 0&&(h=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(g=t.unstable_transitionCallbacks)),t=hh(e,1,!1,null,null,n,a,i,c,h,g,null),e[Rn]=t.current,eo(e),new yo(t)},Ol.hydrateRoot=function(e,t,n){if(!d(e))throw Error(r(299));var a=!1,i="",c=zd,h=Id,g=Hd,S=null,B=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(g=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(S=n.unstable_transitionCallbacks),n.formState!==void 0&&(B=n.formState)),t=hh(e,1,!0,t,n??null,a,i,c,h,g,S,B),t.context=mh(null),n=t.current,a=Xt(),a=Ya(a),i=Jn(a),i.callback=null,Pn(n,i,a),n=a,t.current.lanes=n,Xn(t,n),En(t),e[Rn]=t.current,eo(e),new Wi(t)},Ol.version="19.1.1",Ol}var Lh;function Gp(){if(Lh)return So.exports;Lh=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(s){console.error(s)}}return o(),So.exports=qp(),So.exports}var Vp=Gp();const Yp=dp(Vp);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="firebasestorage.googleapis.com",gm="storageBucket",Fp=120*1e3,Xp=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it extends bp{constructor(s,u,r=0){super(Eo(s),`Firebase Storage: ${u} (${Eo(s)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,it.prototype)}get status(){return this.status_}set status(s){this.status_=s}_codeEquals(s){return Eo(s)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(s){this.customData.serverResponse=s,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var lt;(function(o){o.UNKNOWN="unknown",o.OBJECT_NOT_FOUND="object-not-found",o.BUCKET_NOT_FOUND="bucket-not-found",o.PROJECT_NOT_FOUND="project-not-found",o.QUOTA_EXCEEDED="quota-exceeded",o.UNAUTHENTICATED="unauthenticated",o.UNAUTHORIZED="unauthorized",o.UNAUTHORIZED_APP="unauthorized-app",o.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",o.INVALID_CHECKSUM="invalid-checksum",o.CANCELED="canceled",o.INVALID_EVENT_NAME="invalid-event-name",o.INVALID_URL="invalid-url",o.INVALID_DEFAULT_BUCKET="invalid-default-bucket",o.NO_DEFAULT_BUCKET="no-default-bucket",o.CANNOT_SLICE_BLOB="cannot-slice-blob",o.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",o.NO_DOWNLOAD_URL="no-download-url",o.INVALID_ARGUMENT="invalid-argument",o.INVALID_ARGUMENT_COUNT="invalid-argument-count",o.APP_DELETED="app-deleted",o.INVALID_ROOT_OPERATION="invalid-root-operation",o.INVALID_FORMAT="invalid-format",o.INTERNAL_ERROR="internal-error",o.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(lt||(lt={}));function Eo(o){return"storage/"+o}function Ho(){const o="An unknown error occurred, please check the error payload for server response.";return new it(lt.UNKNOWN,o)}function Qp(o){return new it(lt.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")}function $p(o){return new it(lt.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Kp(){const o="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new it(lt.UNAUTHENTICATED,o)}function Zp(){return new it(lt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Jp(o){return new it(lt.UNAUTHORIZED,"User does not have permission to access '"+o+"'.")}function Pp(){return new it(lt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Wp(){return new it(lt.CANCELED,"User canceled the upload/download.")}function e1(o){return new it(lt.INVALID_URL,"Invalid URL '"+o+"'.")}function t1(o){return new it(lt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+o+"'.")}function n1(){return new it(lt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+gm+"' property when initializing the app?")}function a1(){return new it(lt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function s1(){return new it(lt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function l1(o){return new it(lt.UNSUPPORTED_ENVIRONMENT,`${o} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Oo(o){return new it(lt.INVALID_ARGUMENT,o)}function pm(){return new it(lt.APP_DELETED,"The Firebase app was deleted.")}function i1(o){return new it(lt.INVALID_ROOT_OPERATION,"The operation '"+o+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Dl(o,s){return new it(lt.INVALID_FORMAT,"String does not match format '"+o+"': "+s)}function Cl(o){throw new it(lt.INTERNAL_ERROR,"Internal error: "+o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(s,u){this.bucket=s,this.path_=u}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const s=encodeURIComponent;return"/b/"+s(this.bucket)+"/o/"+s(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(s,u){let r;try{r=$t.makeFromUrl(s,u)}catch{return new $t(s,"")}if(r.path==="")return r;throw t1(s)}static makeFromUrl(s,u){let r=null;const d="([A-Za-z0-9.\\-_]+)";function f(H){H.path.charAt(H.path.length-1)==="/"&&(H.path_=H.path_.slice(0,-1))}const m="(/(.*))?$",p=new RegExp("^gs://"+d+m,"i"),v={bucket:1,path:3};function b(H){H.path_=decodeURIComponent(H.path)}const x="v[A-Za-z0-9_]+",E=u.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",I=new RegExp(`^https?://${E}/${x}/b/${d}/o${w}`,"i"),_={bucket:1,path:3},Z=u===mm?"(?:storage.googleapis.com|storage.cloud.google.com)":u,Q="([^?#]*)",re=new RegExp(`^https?://${Z}/${d}/${Q}`,"i"),G=[{regex:p,indices:v,postModify:f},{regex:I,indices:_,postModify:b},{regex:re,indices:{bucket:1,path:2},postModify:b}];for(let H=0;H<G.length;H++){const le=G[H],fe=le.regex.exec(s);if(fe){const te=fe[le.indices.bucket];let se=fe[le.indices.path];se||(se=""),r=new $t(te,se),le.postModify(r);break}}if(r==null)throw e1(s);return r}}class r1{constructor(s){this.promise_=Promise.reject(s)}getPromise(){return this.promise_}cancel(s=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(o,s,u){let r=1,d=null,f=null,m=!1,p=0;function v(){return p===2}let b=!1;function x(...Q){b||(b=!0,s.apply(null,Q))}function E(Q){d=setTimeout(()=>{d=null,o(I,v())},Q)}function w(){f&&clearTimeout(f)}function I(Q,...re){if(b){w();return}if(Q){w(),x.call(null,Q,...re);return}if(v()||m){w(),x.call(null,Q,...re);return}r<64&&(r*=2);let G;p===1?(p=2,G=0):G=(r+Math.random())*1e3,E(G)}let _=!1;function Z(Q){_||(_=!0,w(),!b&&(d!==null?(Q||(p=2),clearTimeout(d),E(0)):Q||(p=1)))}return E(0),f=setTimeout(()=>{m=!0,Z(!0)},u),Z}function o1(o){o(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(o){return o!==void 0}function d1(o){return typeof o=="object"&&!Array.isArray(o)}function qo(o){return typeof o=="string"||o instanceof String}function zh(o){return Go()&&o instanceof Blob}function Go(){return typeof Blob<"u"}function Ih(o,s,u,r){if(r<s)throw Oo(`Invalid value for '${o}'. Expected ${s} or greater.`);if(r>u)throw Oo(`Invalid value for '${o}'. Expected ${u} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(o,s,u){let r=s;return u==null&&(r=`https://${s}`),`${u}://${r}/v0${o}`}function vm(o){const s=encodeURIComponent;let u="?";for(const r in o)if(o.hasOwnProperty(r)){const d=s(r)+"="+s(o[r]);u=u+d+"&"}return u=u.slice(0,-1),u}var La;(function(o){o[o.NO_ERROR=0]="NO_ERROR",o[o.NETWORK_ERROR=1]="NETWORK_ERROR",o[o.ABORT=2]="ABORT"})(La||(La={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(o,s){const u=o>=500&&o<600,d=[408,429].indexOf(o)!==-1,f=s.indexOf(o)!==-1;return u||d||f}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(s,u,r,d,f,m,p,v,b,x,E,w=!0,I=!1){this.url_=s,this.method_=u,this.headers_=r,this.body_=d,this.successCodes_=f,this.additionalRetryCodes_=m,this.callback_=p,this.errorCallback_=v,this.timeout_=b,this.progressCallback_=x,this.connectionFactory_=E,this.retry=w,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,Z)=>{this.resolve_=_,this.reject_=Z,this.start_()})}start_(){const s=(r,d)=>{if(d){r(!1,new tr(!1,null,!0));return}const f=this.connectionFactory_();this.pendingConnection_=f;const m=p=>{const v=p.loaded,b=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(v,b)};this.progressCallback_!==null&&f.addUploadProgressListener(m),f.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&f.removeUploadProgressListener(m),this.pendingConnection_=null;const p=f.getErrorCode()===La.NO_ERROR,v=f.getStatus();if(!p||f1(v,this.additionalRetryCodes_)&&this.retry){const x=f.getErrorCode()===La.ABORT;r(!1,new tr(!1,null,x));return}const b=this.successCodes_.indexOf(v)!==-1;r(!0,new tr(b,f))})},u=(r,d)=>{const f=this.resolve_,m=this.reject_,p=d.connection;if(d.wasSuccessCode)try{const v=this.callback_(p,p.getResponse());u1(v)?f(v):f()}catch(v){m(v)}else if(p!==null){const v=Ho();v.serverResponse=p.getErrorText(),this.errorCallback_?m(this.errorCallback_(p,v)):m(v)}else if(d.canceled){const v=this.appDelete_?pm():Wp();m(v)}else{const v=Pp();m(v)}};this.canceled_?u(!1,new tr(!1,null,!0)):this.backoffId_=c1(s,u,this.timeout_)}getPromise(){return this.promise_}cancel(s){this.canceled_=!0,this.appDelete_=s||!1,this.backoffId_!==null&&o1(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class tr{constructor(s,u,r){this.wasSuccessCode=s,this.connection=u,this.canceled=!!r}}function m1(o,s){s!==null&&s.length>0&&(o.Authorization="Firebase "+s)}function g1(o,s){o["X-Firebase-Storage-Version"]="webjs/"+(s??"AppManager")}function p1(o,s){s&&(o["X-Firebase-GMPID"]=s)}function v1(o,s){s!==null&&(o["X-Firebase-AppCheck"]=s)}function x1(o,s,u,r,d,f,m=!0,p=!1){const v=vm(o.urlParams),b=o.url+v,x=Object.assign({},o.headers);return p1(x,s),m1(x,u),g1(x,f),v1(x,r),new h1(b,o.method,x,o.body,o.successCodes,o.additionalRetryCodes,o.handler,o.errorHandler,o.timeout,o.progressCallback,d,m,p)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function b1(...o){const s=y1();if(s!==void 0){const u=new s;for(let r=0;r<o.length;r++)u.append(o[r]);return u.getBlob()}else{if(Go())return new Blob(o);throw new it(lt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function N1(o,s,u){return o.webkitSlice?o.webkitSlice(s,u):o.mozSlice?o.mozSlice(s,u):o.slice?o.slice(s,u):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(o){if(typeof atob>"u")throw l1("base-64");return atob(o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class wo{constructor(s,u){this.data=s,this.contentType=u||null}}function j1(o,s){switch(o){case wn.RAW:return new wo(xm(s));case wn.BASE64:case wn.BASE64URL:return new wo(ym(o,s));case wn.DATA_URL:return new wo(E1(s),w1(s))}throw Ho()}function xm(o){const s=[];for(let u=0;u<o.length;u++){let r=o.charCodeAt(u);if(r<=127)s.push(r);else if(r<=2047)s.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(u<o.length-1&&(o.charCodeAt(u+1)&64512)===56320))s.push(239,191,189);else{const f=r,m=o.charCodeAt(++u);r=65536|(f&1023)<<10|m&1023,s.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?s.push(239,191,189):s.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(s)}function A1(o){let s;try{s=decodeURIComponent(o)}catch{throw Dl(wn.DATA_URL,"Malformed data URL.")}return xm(s)}function ym(o,s){switch(o){case wn.BASE64:{const d=s.indexOf("-")!==-1,f=s.indexOf("_")!==-1;if(d||f)throw Dl(o,"Invalid character '"+(d?"-":"_")+"' found: is it base64url encoded?");break}case wn.BASE64URL:{const d=s.indexOf("+")!==-1,f=s.indexOf("/")!==-1;if(d||f)throw Dl(o,"Invalid character '"+(d?"+":"/")+"' found: is it base64 encoded?");s=s.replace(/-/g,"+").replace(/_/g,"/");break}}let u;try{u=S1(s)}catch(d){throw d.message.includes("polyfill")?d:Dl(o,"Invalid character found")}const r=new Uint8Array(u.length);for(let d=0;d<u.length;d++)r[d]=u.charCodeAt(d);return r}class bm{constructor(s){this.base64=!1,this.contentType=null;const u=s.match(/^data:([^,]+)?,/);if(u===null)throw Dl(wn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=u[1]||null;r!=null&&(this.base64=T1(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=s.substring(s.indexOf(",")+1)}}function E1(o){const s=new bm(o);return s.base64?ym(wn.BASE64,s.rest):A1(s.rest)}function w1(o){return new bm(o).contentType}function T1(o,s){return o.length>=s.length?o.substring(o.length-s.length)===s:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(s,u){let r=0,d="";zh(s)?(this.data_=s,r=s.size,d=s.type):s instanceof ArrayBuffer?(u?this.data_=new Uint8Array(s):(this.data_=new Uint8Array(s.byteLength),this.data_.set(new Uint8Array(s))),r=this.data_.length):s instanceof Uint8Array&&(u?this.data_=s:(this.data_=new Uint8Array(s.length),this.data_.set(s)),r=s.length),this.size_=r,this.type_=d}size(){return this.size_}type(){return this.type_}slice(s,u){if(zh(this.data_)){const r=this.data_,d=N1(r,s,u);return d===null?null:new pa(d)}else{const r=new Uint8Array(this.data_.buffer,s,u-s);return new pa(r,!0)}}static getBlob(...s){if(Go()){const u=s.map(r=>r instanceof pa?r.data_:r);return new pa(b1.apply(null,u))}else{const u=s.map(m=>qo(m)?j1(wn.RAW,m).data:m.data_);let r=0;u.forEach(m=>{r+=m.byteLength});const d=new Uint8Array(r);let f=0;return u.forEach(m=>{for(let p=0;p<m.length;p++)d[f++]=m[p]}),new pa(d,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(o){let s;try{s=JSON.parse(o)}catch{return null}return d1(s)?s:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(o){if(o.length===0)return null;const s=o.lastIndexOf("/");return s===-1?"":o.slice(0,s)}function _1(o,s){const u=s.split("/").filter(r=>r.length>0).join("/");return o.length===0?u:o+"/"+u}function Sm(o){const s=o.lastIndexOf("/",o.length-2);return s===-1?o:o.slice(s+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(o,s){return s}class Bt{constructor(s,u,r,d){this.server=s,this.local=u||s,this.writable=!!r,this.xform=d||O1}}let nr=null;function C1(o){return!qo(o)||o.length<2?o:Sm(o)}function jm(){if(nr)return nr;const o=[];o.push(new Bt("bucket")),o.push(new Bt("generation")),o.push(new Bt("metageneration")),o.push(new Bt("name","fullPath",!0));function s(f,m){return C1(m)}const u=new Bt("name");u.xform=s,o.push(u);function r(f,m){return m!==void 0?Number(m):m}const d=new Bt("size");return d.xform=r,o.push(d),o.push(new Bt("timeCreated")),o.push(new Bt("updated")),o.push(new Bt("md5Hash",null,!0)),o.push(new Bt("cacheControl",null,!0)),o.push(new Bt("contentDisposition",null,!0)),o.push(new Bt("contentEncoding",null,!0)),o.push(new Bt("contentLanguage",null,!0)),o.push(new Bt("contentType",null,!0)),o.push(new Bt("metadata","customMetadata",!0)),nr=o,nr}function U1(o,s){function u(){const r=o.bucket,d=o.fullPath,f=new $t(r,d);return s._makeStorageReference(f)}Object.defineProperty(o,"ref",{get:u})}function B1(o,s,u){const r={};r.type="file";const d=u.length;for(let f=0;f<d;f++){const m=u[f];r[m.local]=m.xform(r,s[m.server])}return U1(r,o),r}function Am(o,s,u){const r=Nm(s);return r===null?null:B1(o,r,u)}function D1(o,s,u,r){const d=Nm(s);if(d===null||!qo(d.downloadTokens))return null;const f=d.downloadTokens;if(f.length===0)return null;const m=encodeURIComponent;return f.split(",").map(b=>{const x=o.bucket,E=o.fullPath,w="/b/"+m(x)+"/o/"+m(E),I=Vo(w,u,r),_=vm({alt:"media",token:b});return I+_})[0]}function M1(o,s){const u={},r=s.length;for(let d=0;d<r;d++){const f=s[d];f.writable&&(u[f.server]=o[f.local])}return JSON.stringify(u)}class Em{constructor(s,u,r,d){this.url=s,this.method=u,this.handler=r,this.timeout=d,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(o){if(!o)throw Ho()}function k1(o,s){function u(r,d){const f=Am(o,d,s);return wm(f!==null),f}return u}function L1(o,s){function u(r,d){const f=Am(o,d,s);return wm(f!==null),D1(f,d,o.host,o._protocol)}return u}function Tm(o){function s(u,r){let d;return u.getStatus()===401?u.getErrorText().includes("Firebase App Check token is invalid")?d=Zp():d=Kp():u.getStatus()===402?d=$p(o.bucket):u.getStatus()===403?d=Jp(o.path):d=r,d.status=u.getStatus(),d.serverResponse=r.serverResponse,d}return s}function z1(o){const s=Tm(o);function u(r,d){let f=s(r,d);return r.getStatus()===404&&(f=Qp(o.path)),f.serverResponse=d.serverResponse,f}return u}function I1(o,s,u){const r=s.fullServerUrl(),d=Vo(r,o.host,o._protocol),f="GET",m=o.maxOperationRetryTime,p=new Em(d,f,L1(o,u),m);return p.errorHandler=z1(s),p}function H1(o,s){return o&&o.contentType||s&&s.type()||"application/octet-stream"}function q1(o,s,u){const r=Object.assign({},u);return r.fullPath=o.path,r.size=s.size(),r.contentType||(r.contentType=H1(null,s)),r}function G1(o,s,u,r,d){const f=s.bucketOnlyServerUrl(),m={"X-Goog-Upload-Protocol":"multipart"};function p(){let G="";for(let H=0;H<2;H++)G=G+Math.random().toString().slice(2);return G}const v=p();m["Content-Type"]="multipart/related; boundary="+v;const b=q1(s,r,d),x=M1(b,u),E="--"+v+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+x+`\r
--`+v+`\r
Content-Type: `+b.contentType+`\r
\r
`,w=`\r
--`+v+"--",I=pa.getBlob(E,r,w);if(I===null)throw a1();const _={name:b.fullPath},Z=Vo(f,o.host,o._protocol),Q="POST",re=o.maxUploadRetryTime,oe=new Em(Z,Q,k1(o,u),re);return oe.urlParams=_,oe.headers=m,oe.body=I.uploadData(),oe.errorHandler=Tm(s),oe}class V1{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=La.NO_ERROR,this.sendPromise_=new Promise(s=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=La.ABORT,s()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=La.NETWORK_ERROR,s()}),this.xhr_.addEventListener("load",()=>{s()})})}send(s,u,r,d,f){if(this.sent_)throw Cl("cannot .send() more than once");if(rm(s)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(u,s,!0),f!==void 0)for(const m in f)f.hasOwnProperty(m)&&this.xhr_.setRequestHeader(m,f[m].toString());return d!==void 0?this.xhr_.send(d):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Cl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Cl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Cl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Cl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(s){return this.xhr_.getResponseHeader(s)}addUploadProgressListener(s){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",s)}removeUploadProgressListener(s){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",s)}}class Y1 extends V1{initXhr(){this.xhr_.responseType="text"}}function Rm(){return new Y1}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(s,u){this._service=s,u instanceof $t?this._location=u:this._location=$t.makeFromUrl(u,s.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(s,u){return new Ia(s,u)}get root(){const s=new $t(this._location.bucket,"");return this._newRef(this._service,s)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Sm(this._location.path)}get storage(){return this._service}get parent(){const s=R1(this._location.path);if(s===null)return null;const u=new $t(this._location.bucket,s);return new Ia(this._service,u)}_throwIfRoot(s){if(this._location.path==="")throw i1(s)}}function F1(o,s,u){o._throwIfRoot("uploadBytes");const r=G1(o.storage,o._location,jm(),new pa(s,!0),u);return o.storage.makeRequestWithTokens(r,Rm).then(d=>({metadata:d,ref:o}))}function X1(o){o._throwIfRoot("getDownloadURL");const s=I1(o.storage,o._location,jm());return o.storage.makeRequestWithTokens(s,Rm).then(u=>{if(u===null)throw s1();return u})}function Q1(o,s){const u=_1(o._location.path,s),r=new $t(o._location.bucket,u);return new Ia(o.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(o){return/^[A-Za-z]+:\/\//.test(o)}function K1(o,s){return new Ia(o,s)}function _m(o,s){if(o instanceof Yo){const u=o;if(u._bucket==null)throw n1();const r=new Ia(u,u._bucket);return s!=null?_m(r,s):r}else return s!==void 0?Q1(o,s):o}function Z1(o,s){if(s&&$1(s)){if(o instanceof Yo)return K1(o,s);throw Oo("To use ref(service, url), the first argument must be a Storage instance.")}else return _m(o,s)}function Hh(o,s){const u=s==null?void 0:s[gm];return u==null?null:$t.makeFromBucketSpec(u,o)}function J1(o,s,u,r={}){o.host=`${s}:${u}`;const d=rm(s);d&&(Ap(`https://${o.host}/b`),Ep("Storage",!0)),o._isUsingEmulator=!0,o._protocol=d?"https":"http";const{mockUserToken:f}=r;f&&(o._overrideAuthToken=typeof f=="string"?f:wp(f,o.app.options.projectId))}class Yo{constructor(s,u,r,d,f,m=!1){this.app=s,this._authProvider=u,this._appCheckProvider=r,this._url=d,this._firebaseVersion=f,this._isUsingEmulator=m,this._bucket=null,this._host=mm,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Fp,this._maxUploadRetryTime=Xp,this._requests=new Set,d!=null?this._bucket=$t.makeFromBucketSpec(d,this._host):this._bucket=Hh(this._host,this.app.options)}get host(){return this._host}set host(s){this._host=s,this._url!=null?this._bucket=$t.makeFromBucketSpec(this._url,s):this._bucket=Hh(s,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(s){Ih("time",0,Number.POSITIVE_INFINITY,s),this._maxUploadRetryTime=s}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(s){Ih("time",0,Number.POSITIVE_INFINITY,s),this._maxOperationRetryTime=s}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const s=this._authProvider.getImmediate({optional:!0});if(s){const u=await s.getToken();if(u!==null)return u.accessToken}return null}async _getAppCheckToken(){if(yp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const s=this._appCheckProvider.getImmediate({optional:!0});return s?(await s.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(s=>s.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(s){return new Ia(this,s)}_makeRequest(s,u,r,d,f=!0){if(this._deleted)return new r1(pm());{const m=x1(s,this._appId,r,d,u,this._firebaseVersion,f,this._isUsingEmulator);return this._requests.add(m),m.getPromise().then(()=>this._requests.delete(m),()=>this._requests.delete(m)),m}}async makeRequestWithTokens(s,u){const[r,d]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(s,u,r,d).getPromise()}}const qh="@firebase/storage",Gh="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="storage";function P1(o,s,u){return o=ur(o),F1(o,s,u)}function W1(o){return o=ur(o),X1(o)}function ev(o,s){return o=ur(o),Z1(o,s)}function tv(o=Np(),s){o=ur(o);const r=Sp(o,Om).getImmediate({identifier:s}),d=jp("storage");return d&&nv(r,...d),r}function nv(o,s,u,r={}){J1(o,s,u,r)}function av(o,{instanceIdentifier:s}){const u=o.getProvider("app").getImmediate(),r=o.getProvider("auth-internal"),d=o.getProvider("app-check-internal");return new Yo(u,r,d,s,xp)}function sv(){pp(new vp(Om,av,"PUBLIC").setMultipleInstances(!0)),Eh(qh,Gh,""),Eh(qh,Gh,"esm2017")}sv();const lv={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCxl9ki92NaxmXmxB8kc-SCuN_Cmle-MwA",VITE_FIREBASE_APP_ID:"1:51448990869:web:1fd63a1fa84e89bce1af4",VITE_FIREBASE_AUTH_DOMAIN:"fitness-app-69f08.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"51448990869",VITE_FIREBASE_PROJECT_ID:"fitness-app-69f08",VITE_FIREBASE_STORAGE_BUCKET:"fitness-app-69f08.firebasestorage.app"},iv=!1;let ar,ue,Te,Co;try{let o;if(!iv){const d=["VITE_FIREBASE_API_KEY","VITE_FIREBASE_AUTH_DOMAIN","VITE_FIREBASE_PROJECT_ID","VITE_FIREBASE_STORAGE_BUCKET","VITE_FIREBASE_MESSAGING_SENDER_ID","VITE_FIREBASE_APP_ID"].filter(f=>!lv[f]);if(d.length>0)throw console.error("缺少環境變量:",d),new Error(`缺少環境變量：${d.join(", ")}`);o={apiKey:"AIzaSyCxl9ki92NaxmXmxB8kc-SCuN_Cmle-MwA",authDomain:"fitness-app-69f08.firebaseapp.com",projectId:"fitness-app-69f08",storageBucket:"fitness-app-69f08.firebasestorage.app",messagingSenderId:"51448990869",appId:"1:51448990869:web:1fd63a1fa84e89bce1af4"}}console.log("開始初始化 Firebase"),ar=Tp(o),ue=Rp(ar),Te=_p(ar),Co=tv(ar);const s=new cm,u=new Op;s.setCustomParameters({prompt:"select_account"}),u.addScope("email"),u.addScope("public_profile"),console.log("Firebase 初始化成功")}catch(o){console.error("Firebase 初始化失敗:",o.message,o),ue=null,Te=null,Co=null}const Ml=o=>o==null||o<0||o>150?"unknown":o<=20?"under20":o<=30?"21to30":o<=40?"31to40":o<=50?"41to50":o<=60?"51to60":o<=70?"61to70":"over70",Vh=o=>{const{strength:s,explosivePower:u,cardio:r,muscleMass:d,bodyFat:f}=o,m=[s,u,r,d,f];if(m.filter(b=>b>0).length<5)return 0;const v=m.reduce((b,x)=>b+Number(x),0);return Math.round(v/5*100)/100},Yh=o=>!o&&o!==0?"0.00":Number(o).toFixed(2),rv=o=>{if(!o)return"健身愛好者";const s=o.split("@")[0];return s.charAt(0).toUpperCase()+s.slice(1)},cv=o=>{const s={...o},u=[];if(s.height!==void 0){const r=Number(s.height);isNaN(r)||r<50||r>300?(u.push("身高數據無效"),s.height=0):s.height=r}if(s.weight!==void 0){const r=Number(s.weight);isNaN(r)||r<20||r>500?(u.push("體重數據無效"),s.weight=0):s.weight=r}if(s.age!==void 0){const r=Number(s.age);isNaN(r)||r<0||r>150?(u.push("年齡數據無效"),s.age=0):s.age=r}if(s.scores){const r={};Object.entries(s.scores).forEach(([d,f])=>{const m=Number(f);!isNaN(m)&&m>=0&&m<=100?r[d]=m:f!==void 0&&(u.push(`${d} 分數無效`),r[d]=0)}),s.scores=r}if(s.nickname!==void 0){const r=String(s.nickname).trim();r.length>20?(u.push("暱稱過長"),s.nickname=r.substring(0,20)):s.nickname=r}if(s.profession!==void 0){const r=String(s.profession).trim();r.length>100?(u.push("職業描述過長"),s.profession=r.substring(0,100)):s.profession=r}if(s.weeklyTrainingHours!==void 0){const r=Number(s.weeklyTrainingHours);isNaN(r)||r<0||r>168?(u.push("每周訓練時數無效"),s.weeklyTrainingHours=0):s.weeklyTrainingHours=r}if(s.trainingYears!==void 0){const r=Number(s.trainingYears);isNaN(r)||r<0||r>50?(u.push("訓練年資無效"),s.trainingYears=0):s.trainingYears=r}if(s.isAnonymousInLadder!==void 0&&(s.isAnonymousInLadder=!!s.isAnonymousInLadder),s.ladderScore!==void 0){const r=Number(s.ladderScore);isNaN(r)||r<0?(u.push("天梯分數無效"),s.ladderScore=0):s.ladderScore=r}if(s.ladderRank!==void 0){const r=Number(s.ladderRank);isNaN(r)||r<0?(u.push("天梯排名無效"),s.ladderRank=0):s.ladderRank=r}return{cleaned:s,errors:u,isValid:u.length===0}};class ov{constructor(){this.writeCounts={setDoc:0,updateDoc:0,addDoc:0,writeBatch:0,arrayUnion:0,arrayRemove:0},this.writeHistory=[],this.isMonitoring=!1}start(){this.isMonitoring||(this.isMonitoring=!0,console.log("🔥 Firebase 寫入監控已啟動"))}stop(){this.isMonitoring=!1,console.log("🛑 Firebase 寫入監控已停止")}logWrite(s,u,r,d=null){if(!this.isMonitoring)return;this.writeCounts[s]++;const f={timestamp:new Date().toISOString(),operation:s,collection:u,documentId:r,data:d?JSON.stringify(d).substring(0,100)+"...":null};this.writeHistory.push(f),this.writeHistory.length>100&&this.writeHistory.shift(),console.log(`📝 Firebase 寫入: ${s} -> ${u}/${r}`)}getStats(){return{totalWrites:Object.values(this.writeCounts).reduce((u,r)=>u+r,0),writeCounts:{...this.writeCounts},recentWrites:this.writeHistory.slice(-10),averageWritesPerMinute:this.calculateAverageWritesPerMinute()}}calculateAverageWritesPerMinute(){if(this.writeHistory.length<2)return 0;const s=new Date(this.writeHistory[0].timestamp),r=(new Date(this.writeHistory[this.writeHistory.length-1].timestamp)-s)/(1e3*60);return r>0?this.writeHistory.length/r:0}reset(){this.writeCounts={setDoc:0,updateDoc:0,addDoc:0,writeBatch:0,arrayUnion:0,arrayRemove:0},this.writeHistory=[],console.log("🔄 Firebase 寫入統計已重置")}detectAnomalies(){const s=this.getStats(),u=[];s.averageWritesPerMinute>5&&u.push({type:"high_frequency",message:`檢測到高頻率寫入: ${s.averageWritesPerMinute.toFixed(2)} 次/分鐘`,severity:"warning"}),s.writeCounts.updateDoc>20&&u.push({type:"frequent_updates",message:`檢測到頻繁的 updateDoc 操作: ${s.writeCounts.updateDoc} 次`,severity:"warning"});const r=this.writeHistory.slice(-20);if(r.length>=20){const m=new Date(r[r.length-1].timestamp)-new Date(r[0].timestamp),p=r.length/(m/1e3);p>1&&u.push({type:"burst_writes",message:`檢測到寫入爆發: ${p.toFixed(2)} 次/秒`,severity:"error"})}const d=r.map(m=>`${m.operation}-${m.collection}`),f={};return d.forEach(m=>{f[m]=(f[m]||0)+1}),Object.entries(f).forEach(([m,p])=>{p>5&&u.push({type:"repeated_operations",message:`檢測到重複操作: ${m} 執行 ${p} 次`,severity:"warning"})}),u}generateOptimizationSuggestions(){const s=this.getStats(),u=this.detectAnomalies(),r=[];u.length>0&&(r.push("🚨 檢測到異常寫入模式，建議檢查以下方面："),u.forEach(p=>{r.push(`- ${p.message}`)})),s.writeCounts.updateDoc>s.writeCounts.setDoc*2&&r.push("💡 建議：考慮使用 setDoc 替代頻繁的 updateDoc 操作"),s.writeCounts.arrayUnion>5&&r.push("💡 建議：考慮批量處理 arrayUnion 操作"),s.averageWritesPerMinute>3&&r.push("💡 建議：增加防抖機制，減少寫入頻率"),this.writeHistory.length>50&&r.push("💡 建議：檢查寫入隊列是否有積壓，考慮增加處理頻率");const f=new Date().getTime()-36e5;return this.writeHistory.filter(p=>new Date(p.timestamp).getTime()>f).length>30&&r.push("💡 建議：過去一小時寫入頻率過高，考慮優化數據更新策略"),r}}const Ot=new ov,Cm=A.createContext(),Ul={gender:"",height:0,weight:0,age:0,nickname:"",avatarUrl:"",ageGroup:"",friends:[],friendRequests:[],blockedUsers:[],ladderScore:0,ladderRank:0,ladderHistory:[],isGuest:!1,isAnonymousInLadder:!1,lastActive:new Date().toISOString(),scores:{strength:0,explosivePower:0,cardio:0,muscleMass:0,bodyFat:0},history:[],testInputs:{}};function Um({children:o}){const s=A.useRef(!0),[u,r]=A.useState(!0),[d,f]=A.useState(!1),m=(z,ce)=>{switch(ce.type){case"UPDATE_USER_DATA":return{...z,...ce.payload};case"SET_USER_DATA":return ce.payload;case"RESET_USER_DATA":return Ul;default:return z}},[p,v]=A.useReducer(m,Ul),b=A.useCallback(async(z,ce=!1)=>{if(!z||!s.current)return r(!1),!1;r(!0);try{const he=Je(Te,"users",z.uid),V=await va(he);if(V.exists()){const U=V.data(),ge={...Ul,...U,scores:{...Ul.scores,...U.scores||{}},height:Number(U.height)||0,weight:Number(U.weight)||0,age:Number(U.age)||0,ageGroup:U.age?Ml(Number(U.age)):U.ageGroup||"",ladderScore:U.ladderScore||0,ladderRank:Number(U.ladderRank)||0,lastLadderSubmission:U.lastLadderSubmission||null,lastActive:U.lastActive||null};return s.current&&(v({type:"SET_USER_DATA",payload:ge}),localStorage.setItem("userData",JSON.stringify(ge))),r(!1),!0}else{console.log("用戶文檔不存在，創建新的");const U={...Ul,userId:z.uid};return await Yn(he,U),s.current&&(v({type:"SET_USER_DATA",payload:U}),localStorage.setItem("userData",JSON.stringify(U))),r(!1),!0}}catch(he){console.error("載入用戶數據失敗:",he);try{const V=localStorage.getItem("userData");if(V&&s.current){const U=JSON.parse(V);return v({type:"SET_USER_DATA",payload:U}),r(!1),!0}}catch(V){console.error("解析本地數據失敗:",V)}return r(!1),!1}},[]),x=A.useCallback(async z=>{if(!ue.currentUser||!z)return console.warn("無法保存數據：用戶未登入或數據無效"),!1;try{const ce=Je(Te,"users",ue.currentUser.uid),he={...z,userId:ue.currentUser.uid,updatedAt:new Date().toISOString(),height:Number(z.height)||0,weight:Number(z.weight)||0,age:Number(z.age)||0,ageGroup:z.age?Ml(Number(z.age)):z.ageGroup||"",ladderScore:z.ladderScore||0,ladderRank:Number(z.ladderRank)||0,lastLadderSubmission:z.lastLadderSubmission||null,lastActive:z.lastActive||null};return await Yn(ce,he),localStorage.setItem("userData",JSON.stringify(he)),Ot.logWrite("setDoc","users",ue.currentUser.uid,he),!0}catch(ce){return console.error("保存用戶數據失敗:",ce),localStorage.setItem("userData",JSON.stringify(z)),!1}},[]),E=A.useRef(null),w=A.useRef(null),I=A.useRef(0),_=A.useRef(0),Z=A.useRef(Date.now()),Q=A.useRef([]),re=A.useRef(!1),oe=A.useRef(),G=A.useRef(),H=A.useCallback(z=>{const{cleaned:ce,errors:he,isValid:V}=cv(z);return V||console.warn("數據驗證失敗:",he),{isValid:V,errors:he,cleaned:ce}},[]),le=A.useCallback(async()=>{if(!(re.current||Q.current.length===0)){re.current=!0;try{const z=[],ce=[];for(;Q.current.length>0;){const he=Q.current.shift(),V=H(he.data);if(!V.isValid){console.warn("數據驗證失敗，跳過寫入:",V.errors);continue}const U=V.cleaned;z.push({...he,data:U}),ce.push(he.id)}if(z.length>0){console.log(`🔄 批量處理 ${z.length} 個寫入操作`);for(const V of z)try{const U=Je(Te,"users",ue.currentUser.uid);await Yn(U,V.data,{merge:!0}),Ot.logWrite("setDoc","users",ue.currentUser.uid,V.data),console.log(`✅ 寫入成功: ${V.type}`)}catch(U){console.error(`❌ 寫入失敗: ${V.type}`,U),Q.current.unshift(V)}const he=z[z.length-1].data;localStorage.setItem("userData",JSON.stringify(he)),localStorage.setItem("lastSavedUserData",JSON.stringify(he))}}catch(z){console.error("批量寫入處理失敗:",z)}finally{re.current=!1,Q.current.length>0&&setTimeout(()=>le(),1e3)}}},[H]),fe=A.useCallback((z,ce="update")=>{const he={id:Date.now().toString(),type:ce,data:z,timestamp:Date.now()};Q.current.push(he),Q.current.length>20&&Q.current.shift(),re.current||setTimeout(()=>le(),1e3)},[le]),te=A.useCallback(z=>{let ce;if(typeof z=="function"?ce=z(p):ce={...p,...z},ce.age&&(ce.ageGroup=Ml(ce.age)),v({type:"UPDATE_USER_DATA",payload:ce}),ue.currentUser&&["scores","height","weight","age","gender","nickname","avatarUrl","ladderRank","history","isAnonymousInLadder","profession","weeklyTrainingHours","trainingYears"].some(U=>JSON.stringify(ce[U])!==JSON.stringify(p[U]))){const U=JSON.stringify(ce.nickname)!==JSON.stringify(p.nickname)&&JSON.stringify({...ce,nickname:p.nickname})===JSON.stringify({...p,nickname:ce.nickname}),ge=Date.now(),y=ge-I.current;ge-Z.current>36e5&&(_.current=0,Z.current=ge);const k=U?5e3:2e4;y<6e4?(E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{console.log("🔄 防抖後保存用戶數據（60秒頻率限制）"),I.current=Date.now(),_.current++,fe(ce,"userData"),E.current=null},6e4-y)):(E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{console.log(`🔄 防抖後保存用戶數據（${k/1e3}秒防抖，第${_.current+1}次寫入）`),I.current=Date.now(),_.current++,fe(ce,"userData"),E.current=null},k))}},[p,fe]),se=A.useCallback(async z=>{if(!ue.currentUser){console.warn("無法保存歷史記錄：用戶未登入");return}const ce={...z,userId:ue.currentUser.uid,timestamp:new Date().toISOString(),id:Date.now().toString()},he=p.history||[],V=50;if(he.length>=V){console.warn(`歷史記錄已達上限 (${V})，執行自動清理`);const y=[...he].sort((N,k)=>{const F=N.timestamp?new Date(N.timestamp):new Date(N.date);return(k.timestamp?new Date(k.timestamp):new Date(k.date))-F}).slice(0,V-10);console.log(`自動清理完成：刪除 ${he.length-y.length} 條舊記錄`),v({type:"UPDATE_USER_DATA",payload:{history:y}}),typeof window<"u"&&window.alert&&alert("歷史記錄已達上限，已自動清理最舊的記錄以騰出空間。")}const U=[...p.history||[],ce];v({type:"UPDATE_USER_DATA",payload:{history:U}}),w.current&&clearTimeout(w.current),w.current=setTimeout(async()=>{try{const ge={...p,history:U,updatedAt:new Date().toISOString()};fe(ge,"history"),console.log(`歷史記錄已加入寫入隊列 (${U.length}/${V})`)}catch(ge){console.error("保存歷史記錄失敗:",ge)}finally{w.current=null}},15e3)},[p,fe]),ae=A.useCallback(()=>{console.log("清除用戶資料"),localStorage.removeItem("userData"),v({type:"RESET_USER_DATA"}),r(!1)},[]);return oe.current=b,G.current=ae,A.useEffect(()=>{s.current=!0;const z=ue.onAuthStateChanged(async ce=>{ce?(console.log("認證狀態變更 - 用戶已登入:",ce.email),f(!0),sessionStorage.removeItem("guestMode"),await oe.current(ce)):(console.log("認證狀態變更 - 用戶未登入"),f(!1),G.current())});return()=>{s.current=!1,z()}},[]),A.useEffect(()=>{if(!ue.currentUser||!p||Object.keys(p).length===0)return;const z=setInterval(()=>{if(ue.currentUser&&p&&p.height){if(Date.now()-I.current<18e5){console.log("⏭️ 定期同步：距離上次寫入時間太短，跳過同步");return}const V=localStorage.getItem("lastSavedUserData"),U=JSON.stringify({scores:p.scores,height:p.height,weight:p.weight,age:p.age,gender:p.gender,nickname:p.nickname,avatarUrl:p.avatarUrl,ladderRank:p.ladderRank,isAnonymousInLadder:p.isAnonymousInLadder,profession:p.profession,weeklyTrainingHours:p.weeklyTrainingHours,trainingYears:p.trainingYears});V!==U?(console.log("🔄 定期同步：檢測到數據變化，執行保存"),fe(p,"periodic_sync"),localStorage.setItem("lastSavedUserData",U)):console.log("⏭️ 定期同步：無數據變化，跳過保存")}},36e5);return()=>clearInterval(z)},[p,fe]),l.jsx(Cm.Provider,{value:{userData:p,setUserData:te,saveUserData:x,saveHistory:se,clearUserData:ae,loadUserData:(z=!1)=>b(ue.currentUser,z),isLoading:u,isAuthenticated:d},children:o})}Um.propTypes={children:ie.node.isRequired};function on(){const o=A.useContext(Cm);if(!o)throw new Error("useUser must be used within a UserProvider");return o}function uv(){const{pathname:o}=Ha(),s=A.useRef(null);return A.useLayoutEffect(()=>{const u=s.current==="/login"||s.current==="/";o==="/user-info"?u?window.scrollTo(0,0):requestAnimationFrame(()=>{const r=document.getElementById("radar-section");r&&r.scrollIntoView({behavior:"smooth",block:"start"})}):window.scrollTo(0,0),s.current=o},[o]),null}const dv=(o,s,u,r)=>{var f,m,p,v;const d=[u,{code:s,...r||{}}];if((m=(f=o==null?void 0:o.services)==null?void 0:f.logger)!=null&&m.forward)return o.services.logger.forward(d,"warn","react-i18next::",!0);za(d[0])&&(d[0]=`react-i18next:: ${d[0]}`),(v=(p=o==null?void 0:o.services)==null?void 0:p.logger)!=null&&v.warn?o.services.logger.warn(...d):console!=null&&console.warn&&console.warn(...d)},Fh={},Uo=(o,s,u,r)=>{za(u)&&Fh[u]||(za(u)&&(Fh[u]=new Date),dv(o,s,u,r))},Bm=(o,s)=>()=>{if(o.isInitialized)s();else{const u=()=>{setTimeout(()=>{o.off("initialized",u)},0),s()};o.on("initialized",u)}},Bo=(o,s,u)=>{o.loadNamespaces(s,Bm(o,u))},Xh=(o,s,u,r)=>{if(za(u)&&(u=[u]),o.options.preload&&o.options.preload.indexOf(s)>-1)return Bo(o,u,r);u.forEach(d=>{o.options.ns.indexOf(d)<0&&o.options.ns.push(d)}),o.loadLanguages(s,Bm(o,r))},fv=(o,s,u={})=>!s.languages||!s.languages.length?(Uo(s,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:s.languages}),!0):s.hasLoadedNamespace(o,{lng:u.lng,precheck:(r,d)=>{if(u.bindI18n&&u.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!d(r.isLanguageChangingTo,o))return!1}}),za=o=>typeof o=="string",hv=o=>typeof o=="object"&&o!==null,mv=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,gv={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},pv=o=>gv[o],vv=o=>o.replace(mv,pv);let Do={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:vv};const xv=(o={})=>{Do={...Do,...o}},yv=()=>Do;let Dm;const bv=o=>{Dm=o},Nv=()=>Dm,Sv={type:"3rdParty",init(o){xv(o.options.react),bv(o)}},jv=A.createContext();class Av{constructor(){this.usedNamespaces={}}addUsedNamespaces(s){s.forEach(u=>{this.usedNamespaces[u]||(this.usedNamespaces[u]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Ev=(o,s)=>{const u=A.useRef();return A.useEffect(()=>{u.current=o},[o,s]),u.current},Mm=(o,s,u,r)=>o.getFixedT(s,u,r),wv=(o,s,u,r)=>A.useCallback(Mm(o,s,u,r),[o,s,u,r]),km=(o,s={})=>{var H,le,fe,te;const{i18n:u}=s,{i18n:r,defaultNS:d}=A.useContext(jv)||{},f=u||r||Nv();if(f&&!f.reportNamespaces&&(f.reportNamespaces=new Av),!f){Uo(f,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const se=(z,ce)=>za(ce)?ce:hv(ce)&&za(ce.defaultValue)?ce.defaultValue:Array.isArray(z)?z[z.length-1]:z,ae=[se,{},!1];return ae.t=se,ae.i18n={},ae.ready=!1,ae}(H=f.options.react)!=null&&H.wait&&Uo(f,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const m={...yv(),...f.options.react,...s},{useSuspense:p,keyPrefix:v}=m;let b=d||((le=f.options)==null?void 0:le.defaultNS);b=za(b)?[b]:b||["translation"],(te=(fe=f.reportNamespaces).addUsedNamespaces)==null||te.call(fe,b);const x=(f.isInitialized||f.initializedStoreOnce)&&b.every(se=>fv(se,f,m)),E=wv(f,s.lng||null,m.nsMode==="fallback"?b:b[0],v),w=()=>E,I=()=>Mm(f,s.lng||null,m.nsMode==="fallback"?b:b[0],v),[_,Z]=A.useState(w);let Q=b.join();s.lng&&(Q=`${s.lng}${Q}`);const re=Ev(Q),oe=A.useRef(!0);A.useEffect(()=>{const{bindI18n:se,bindI18nStore:ae}=m;oe.current=!0,!x&&!p&&(s.lng?Xh(f,s.lng,b,()=>{oe.current&&Z(I)}):Bo(f,b,()=>{oe.current&&Z(I)})),x&&re&&re!==Q&&oe.current&&Z(I);const z=()=>{oe.current&&Z(I)};return se&&(f==null||f.on(se,z)),ae&&(f==null||f.store.on(ae,z)),()=>{oe.current=!1,f&&se&&(se==null||se.split(" ").forEach(ce=>f.off(ce,z))),ae&&f&&ae.split(" ").forEach(ce=>f.store.off(ce,z))}},[f,Q]),A.useEffect(()=>{oe.current&&x&&Z(w)},[f,v,x]);const G=[_,f,x];if(G.t=_,G.i18n=f,G.ready=x,x||!x&&!p)return G;throw new Promise(se=>{s.lng?Xh(f,s.lng,b,()=>se()):Bo(f,b,()=>se())})},Tv=()=>{const{i18n:o}=km(),s=r=>{o.changeLanguage(r),localStorage.setItem("language",r)},u=o.language;return l.jsxs("div",{className:"language-switcher",children:[l.jsx("button",{className:`lang-btn ${u==="zh-TW"?"active":""}`,onClick:()=>s("zh-TW"),children:"中文"}),l.jsx("button",{className:`lang-btn ${u==="en-US"?"active":""}`,onClick:()=>s("en-US"),children:"English"})]})},we=o=>typeof o=="string",Bl=()=>{let o,s;const u=new Promise((r,d)=>{o=r,s=d});return u.resolve=o,u.reject=s,u},Qh=o=>o==null?"":""+o,Rv=(o,s,u)=>{o.forEach(r=>{s[r]&&(u[r]=s[r])})},_v=/###/g,$h=o=>o&&o.indexOf("###")>-1?o.replace(_v,"."):o,Kh=o=>!o||we(o),kl=(o,s,u)=>{const r=we(s)?s.split("."):s;let d=0;for(;d<r.length-1;){if(Kh(o))return{};const f=$h(r[d]);!o[f]&&u&&(o[f]=new u),Object.prototype.hasOwnProperty.call(o,f)?o=o[f]:o={},++d}return Kh(o)?{}:{obj:o,k:$h(r[d])}},Zh=(o,s,u)=>{const{obj:r,k:d}=kl(o,s,Object);if(r!==void 0||s.length===1){r[d]=u;return}let f=s[s.length-1],m=s.slice(0,s.length-1),p=kl(o,m,Object);for(;p.obj===void 0&&m.length;)f=`${m[m.length-1]}.${f}`,m=m.slice(0,m.length-1),p=kl(o,m,Object),p!=null&&p.obj&&typeof p.obj[`${p.k}.${f}`]<"u"&&(p.obj=void 0);p.obj[`${p.k}.${f}`]=u},Ov=(o,s,u,r)=>{const{obj:d,k:f}=kl(o,s,Object);d[f]=d[f]||[],d[f].push(u)},ir=(o,s)=>{const{obj:u,k:r}=kl(o,s);if(u&&Object.prototype.hasOwnProperty.call(u,r))return u[r]},Cv=(o,s,u)=>{const r=ir(o,u);return r!==void 0?r:ir(s,u)},Lm=(o,s,u)=>{for(const r in s)r!=="__proto__"&&r!=="constructor"&&(r in o?we(o[r])||o[r]instanceof String||we(s[r])||s[r]instanceof String?u&&(o[r]=s[r]):Lm(o[r],s[r],u):o[r]=s[r]);return o},Rs=o=>o.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Uv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Bv=o=>we(o)?o.replace(/[&<>"'\/]/g,s=>Uv[s]):o;class Dv{constructor(s){this.capacity=s,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(s){const u=this.regExpMap.get(s);if(u!==void 0)return u;const r=new RegExp(s);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(s,r),this.regExpQueue.push(s),r}}const Mv=[" ",",","?","!",";"],kv=new Dv(20),Lv=(o,s,u)=>{s=s||"",u=u||"";const r=Mv.filter(m=>s.indexOf(m)<0&&u.indexOf(m)<0);if(r.length===0)return!0;const d=kv.getRegExp(`(${r.map(m=>m==="?"?"\\?":m).join("|")})`);let f=!d.test(o);if(!f){const m=o.indexOf(u);m>0&&!d.test(o.substring(0,m))&&(f=!0)}return f},Mo=(o,s,u=".")=>{if(!o)return;if(o[s])return Object.prototype.hasOwnProperty.call(o,s)?o[s]:void 0;const r=s.split(u);let d=o;for(let f=0;f<r.length;){if(!d||typeof d!="object")return;let m,p="";for(let v=f;v<r.length;++v)if(v!==f&&(p+=u),p+=r[v],m=d[p],m!==void 0){if(["string","number","boolean"].indexOf(typeof m)>-1&&v<r.length-1)continue;f+=v-f+1;break}d=m}return d},zl=o=>o==null?void 0:o.replace("_","-"),zv={type:"logger",log(o){this.output("log",o)},warn(o){this.output("warn",o)},error(o){this.output("error",o)},output(o,s){var u,r;(r=(u=console==null?void 0:console[o])==null?void 0:u.apply)==null||r.call(u,console,s)}};class rr{constructor(s,u={}){this.init(s,u)}init(s,u={}){this.prefix=u.prefix||"i18next:",this.logger=s||zv,this.options=u,this.debug=u.debug}log(...s){return this.forward(s,"log","",!0)}warn(...s){return this.forward(s,"warn","",!0)}error(...s){return this.forward(s,"error","")}deprecate(...s){return this.forward(s,"warn","WARNING DEPRECATED: ",!0)}forward(s,u,r,d){return d&&!this.debug?null:(we(s[0])&&(s[0]=`${r}${this.prefix} ${s[0]}`),this.logger[u](s))}create(s){return new rr(this.logger,{prefix:`${this.prefix}:${s}:`,...this.options})}clone(s){return s=s||this.options,s.prefix=s.prefix||this.prefix,new rr(this.logger,s)}}var Tn=new rr;class dr{constructor(){this.observers={}}on(s,u){return s.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const d=this.observers[r].get(u)||0;this.observers[r].set(u,d+1)}),this}off(s,u){if(this.observers[s]){if(!u){delete this.observers[s];return}this.observers[s].delete(u)}}emit(s,...u){this.observers[s]&&Array.from(this.observers[s].entries()).forEach(([d,f])=>{for(let m=0;m<f;m++)d(...u)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([d,f])=>{for(let m=0;m<f;m++)d.apply(d,[s,...u])})}}class Jh extends dr{constructor(s,u={ns:["translation"],defaultNS:"translation"}){super(),this.data=s||{},this.options=u,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(s){this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}removeNamespaces(s){const u=this.options.ns.indexOf(s);u>-1&&this.options.ns.splice(u,1)}getResource(s,u,r,d={}){var b,x;const f=d.keySeparator!==void 0?d.keySeparator:this.options.keySeparator,m=d.ignoreJSONStructure!==void 0?d.ignoreJSONStructure:this.options.ignoreJSONStructure;let p;s.indexOf(".")>-1?p=s.split("."):(p=[s,u],r&&(Array.isArray(r)?p.push(...r):we(r)&&f?p.push(...r.split(f)):p.push(r)));const v=ir(this.data,p);return!v&&!u&&!r&&s.indexOf(".")>-1&&(s=p[0],u=p[1],r=p.slice(2).join(".")),v||!m||!we(r)?v:Mo((x=(b=this.data)==null?void 0:b[s])==null?void 0:x[u],r,f)}addResource(s,u,r,d,f={silent:!1}){const m=f.keySeparator!==void 0?f.keySeparator:this.options.keySeparator;let p=[s,u];r&&(p=p.concat(m?r.split(m):r)),s.indexOf(".")>-1&&(p=s.split("."),d=u,u=p[1]),this.addNamespaces(u),Zh(this.data,p,d),f.silent||this.emit("added",s,u,r,d)}addResources(s,u,r,d={silent:!1}){for(const f in r)(we(r[f])||Array.isArray(r[f]))&&this.addResource(s,u,f,r[f],{silent:!0});d.silent||this.emit("added",s,u,r)}addResourceBundle(s,u,r,d,f,m={silent:!1,skipCopy:!1}){let p=[s,u];s.indexOf(".")>-1&&(p=s.split("."),d=r,r=u,u=p[1]),this.addNamespaces(u);let v=ir(this.data,p)||{};m.skipCopy||(r=JSON.parse(JSON.stringify(r))),d?Lm(v,r,f):v={...v,...r},Zh(this.data,p,v),m.silent||this.emit("added",s,u,r)}removeResourceBundle(s,u){this.hasResourceBundle(s,u)&&delete this.data[s][u],this.removeNamespaces(u),this.emit("removed",s,u)}hasResourceBundle(s,u){return this.getResource(s,u)!==void 0}getResourceBundle(s,u){return u||(u=this.options.defaultNS),this.getResource(s,u)}getDataByLanguage(s){return this.data[s]}hasLanguageSomeTranslations(s){const u=this.getDataByLanguage(s);return!!(u&&Object.keys(u)||[]).find(d=>u[d]&&Object.keys(u[d]).length>0)}toJSON(){return this.data}}var zm={processors:{},addPostProcessor(o){this.processors[o.name]=o},handle(o,s,u,r,d){return o.forEach(f=>{var m;s=((m=this.processors[f])==null?void 0:m.process(s,u,r,d))??s}),s}};const Ph={},Wh=o=>!we(o)&&typeof o!="boolean"&&typeof o!="number";class cr extends dr{constructor(s,u={}){super(),Rv(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],s,this),this.options=u,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Tn.create("translator")}changeLanguage(s){s&&(this.language=s)}exists(s,u={interpolation:{}}){const r={...u};if(s==null)return!1;const d=this.resolve(s,r);return(d==null?void 0:d.res)!==void 0}extractFromKey(s,u){let r=u.nsSeparator!==void 0?u.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const d=u.keySeparator!==void 0?u.keySeparator:this.options.keySeparator;let f=u.ns||this.options.defaultNS||[];const m=r&&s.indexOf(r)>-1,p=!this.options.userDefinedKeySeparator&&!u.keySeparator&&!this.options.userDefinedNsSeparator&&!u.nsSeparator&&!Lv(s,r,d);if(m&&!p){const v=s.match(this.interpolator.nestingRegexp);if(v&&v.length>0)return{key:s,namespaces:we(f)?[f]:f};const b=s.split(r);(r!==d||r===d&&this.options.ns.indexOf(b[0])>-1)&&(f=b.shift()),s=b.join(d)}return{key:s,namespaces:we(f)?[f]:f}}translate(s,u,r){let d=typeof u=="object"?{...u}:u;if(typeof d!="object"&&this.options.overloadTranslationOptionHandler&&(d=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(d={...d}),d||(d={}),s==null)return"";Array.isArray(s)||(s=[String(s)]);const f=d.returnDetails!==void 0?d.returnDetails:this.options.returnDetails,m=d.keySeparator!==void 0?d.keySeparator:this.options.keySeparator,{key:p,namespaces:v}=this.extractFromKey(s[s.length-1],d),b=v[v.length-1];let x=d.nsSeparator!==void 0?d.nsSeparator:this.options.nsSeparator;x===void 0&&(x=":");const E=d.lng||this.language,w=d.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((E==null?void 0:E.toLowerCase())==="cimode")return w?f?{res:`${b}${x}${p}`,usedKey:p,exactUsedKey:p,usedLng:E,usedNS:b,usedParams:this.getUsedParamsDetails(d)}:`${b}${x}${p}`:f?{res:p,usedKey:p,exactUsedKey:p,usedLng:E,usedNS:b,usedParams:this.getUsedParamsDetails(d)}:p;const I=this.resolve(s,d);let _=I==null?void 0:I.res;const Z=(I==null?void 0:I.usedKey)||p,Q=(I==null?void 0:I.exactUsedKey)||p,re=["[object Number]","[object Function]","[object RegExp]"],oe=d.joinArrays!==void 0?d.joinArrays:this.options.joinArrays,G=!this.i18nFormat||this.i18nFormat.handleAsObject,H=d.count!==void 0&&!we(d.count),le=cr.hasDefaultValue(d),fe=H?this.pluralResolver.getSuffix(E,d.count,d):"",te=d.ordinal&&H?this.pluralResolver.getSuffix(E,d.count,{ordinal:!1}):"",se=H&&!d.ordinal&&d.count===0,ae=se&&d[`defaultValue${this.options.pluralSeparator}zero`]||d[`defaultValue${fe}`]||d[`defaultValue${te}`]||d.defaultValue;let z=_;G&&!_&&le&&(z=ae);const ce=Wh(z),he=Object.prototype.toString.apply(z);if(G&&z&&ce&&re.indexOf(he)<0&&!(we(oe)&&Array.isArray(z))){if(!d.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const V=this.options.returnedObjectHandler?this.options.returnedObjectHandler(Z,z,{...d,ns:v}):`key '${p} (${this.language})' returned an object instead of string.`;return f?(I.res=V,I.usedParams=this.getUsedParamsDetails(d),I):V}if(m){const V=Array.isArray(z),U=V?[]:{},ge=V?Q:Z;for(const y in z)if(Object.prototype.hasOwnProperty.call(z,y)){const N=`${ge}${m}${y}`;le&&!_?U[y]=this.translate(N,{...d,defaultValue:Wh(ae)?ae[y]:void 0,joinArrays:!1,ns:v}):U[y]=this.translate(N,{...d,joinArrays:!1,ns:v}),U[y]===N&&(U[y]=z[y])}_=U}}else if(G&&we(oe)&&Array.isArray(_))_=_.join(oe),_&&(_=this.extendTranslation(_,s,d,r));else{let V=!1,U=!1;!this.isValidLookup(_)&&le&&(V=!0,_=ae),this.isValidLookup(_)||(U=!0,_=p);const y=(d.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&U?void 0:_,N=le&&ae!==_&&this.options.updateMissing;if(U||V||N){if(this.logger.log(N?"updateKey":"missingKey",E,b,p,N?ae:_),m){const J=this.resolve(p,{...d,keySeparator:!1});J&&J.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let k=[];const F=this.languageUtils.getFallbackCodes(this.options.fallbackLng,d.lng||this.language);if(this.options.saveMissingTo==="fallback"&&F&&F[0])for(let J=0;J<F.length;J++)k.push(F[J]);else this.options.saveMissingTo==="all"?k=this.languageUtils.toResolveHierarchy(d.lng||this.language):k.push(d.lng||this.language);const ee=(J,q,D)=>{var Ee;const K=le&&D!==_?D:y;this.options.missingKeyHandler?this.options.missingKeyHandler(J,b,q,K,N,d):(Ee=this.backendConnector)!=null&&Ee.saveMissing&&this.backendConnector.saveMissing(J,b,q,K,N,d),this.emit("missingKey",J,b,q,_)};this.options.saveMissing&&(this.options.saveMissingPlurals&&H?k.forEach(J=>{const q=this.pluralResolver.getSuffixes(J,d);se&&d[`defaultValue${this.options.pluralSeparator}zero`]&&q.indexOf(`${this.options.pluralSeparator}zero`)<0&&q.push(`${this.options.pluralSeparator}zero`),q.forEach(D=>{ee([J],p+D,d[`defaultValue${D}`]||ae)})}):ee(k,p,ae))}_=this.extendTranslation(_,s,d,I,r),U&&_===p&&this.options.appendNamespaceToMissingKey&&(_=`${b}${x}${p}`),(U||V)&&this.options.parseMissingKeyHandler&&(_=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${b}${x}${p}`:p,V?_:void 0,d))}return f?(I.res=_,I.usedParams=this.getUsedParamsDetails(d),I):_}extendTranslation(s,u,r,d,f){var v,b;if((v=this.i18nFormat)!=null&&v.parse)s=this.i18nFormat.parse(s,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||d.usedLng,d.usedNS,d.usedKey,{resolved:d});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const x=we(s)&&(((b=r==null?void 0:r.interpolation)==null?void 0:b.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let E;if(x){const I=s.match(this.interpolator.nestingRegexp);E=I&&I.length}let w=r.replace&&!we(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(w={...this.options.interpolation.defaultVariables,...w}),s=this.interpolator.interpolate(s,w,r.lng||this.language||d.usedLng,r),x){const I=s.match(this.interpolator.nestingRegexp),_=I&&I.length;E<_&&(r.nest=!1)}!r.lng&&d&&d.res&&(r.lng=this.language||d.usedLng),r.nest!==!1&&(s=this.interpolator.nest(s,(...I)=>(f==null?void 0:f[0])===I[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${I[0]} in key: ${u[0]}`),null):this.translate(...I,u),r)),r.interpolation&&this.interpolator.reset()}const m=r.postProcess||this.options.postProcess,p=we(m)?[m]:m;return s!=null&&(p!=null&&p.length)&&r.applyPostProcessor!==!1&&(s=zm.handle(p,s,u,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...d,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),s}resolve(s,u={}){let r,d,f,m,p;return we(s)&&(s=[s]),s.forEach(v=>{if(this.isValidLookup(r))return;const b=this.extractFromKey(v,u),x=b.key;d=x;let E=b.namespaces;this.options.fallbackNS&&(E=E.concat(this.options.fallbackNS));const w=u.count!==void 0&&!we(u.count),I=w&&!u.ordinal&&u.count===0,_=u.context!==void 0&&(we(u.context)||typeof u.context=="number")&&u.context!=="",Z=u.lngs?u.lngs:this.languageUtils.toResolveHierarchy(u.lng||this.language,u.fallbackLng);E.forEach(Q=>{var re,oe;this.isValidLookup(r)||(p=Q,!Ph[`${Z[0]}-${Q}`]&&((re=this.utils)!=null&&re.hasLoadedNamespace)&&!((oe=this.utils)!=null&&oe.hasLoadedNamespace(p))&&(Ph[`${Z[0]}-${Q}`]=!0,this.logger.warn(`key "${d}" for languages "${Z.join(", ")}" won't get resolved as namespace "${p}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),Z.forEach(G=>{var fe;if(this.isValidLookup(r))return;m=G;const H=[x];if((fe=this.i18nFormat)!=null&&fe.addLookupKeys)this.i18nFormat.addLookupKeys(H,x,G,Q,u);else{let te;w&&(te=this.pluralResolver.getSuffix(G,u.count,u));const se=`${this.options.pluralSeparator}zero`,ae=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(w&&(H.push(x+te),u.ordinal&&te.indexOf(ae)===0&&H.push(x+te.replace(ae,this.options.pluralSeparator)),I&&H.push(x+se)),_){const z=`${x}${this.options.contextSeparator}${u.context}`;H.push(z),w&&(H.push(z+te),u.ordinal&&te.indexOf(ae)===0&&H.push(z+te.replace(ae,this.options.pluralSeparator)),I&&H.push(z+se))}}let le;for(;le=H.pop();)this.isValidLookup(r)||(f=le,r=this.getResource(G,Q,le,u))}))})}),{res:r,usedKey:d,exactUsedKey:f,usedLng:m,usedNS:p}}isValidLookup(s){return s!==void 0&&!(!this.options.returnNull&&s===null)&&!(!this.options.returnEmptyString&&s==="")}getResource(s,u,r,d={}){var f;return(f=this.i18nFormat)!=null&&f.getResource?this.i18nFormat.getResource(s,u,r,d):this.resourceStore.getResource(s,u,r,d)}getUsedParamsDetails(s={}){const u=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=s.replace&&!we(s.replace);let d=r?s.replace:s;if(r&&typeof s.count<"u"&&(d.count=s.count),this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),!r){d={...d};for(const f of u)delete d[f]}return d}static hasDefaultValue(s){const u="defaultValue";for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r)&&u===r.substring(0,u.length)&&s[r]!==void 0)return!0;return!1}}class em{constructor(s){this.options=s,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Tn.create("languageUtils")}getScriptPartFromCode(s){if(s=zl(s),!s||s.indexOf("-")<0)return null;const u=s.split("-");return u.length===2||(u.pop(),u[u.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(u.join("-"))}getLanguagePartFromCode(s){if(s=zl(s),!s||s.indexOf("-")<0)return s;const u=s.split("-");return this.formatLanguageCode(u[0])}formatLanguageCode(s){if(we(s)&&s.indexOf("-")>-1){let u;try{u=Intl.getCanonicalLocales(s)[0]}catch{}return u&&this.options.lowerCaseLng&&(u=u.toLowerCase()),u||(this.options.lowerCaseLng?s.toLowerCase():s)}return this.options.cleanCode||this.options.lowerCaseLng?s.toLowerCase():s}isSupportedCode(s){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(s=this.getLanguagePartFromCode(s)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(s)>-1}getBestMatchFromCodes(s){if(!s)return null;let u;return s.forEach(r=>{if(u)return;const d=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(d))&&(u=d)}),!u&&this.options.supportedLngs&&s.forEach(r=>{if(u)return;const d=this.getScriptPartFromCode(r);if(this.isSupportedCode(d))return u=d;const f=this.getLanguagePartFromCode(r);if(this.isSupportedCode(f))return u=f;u=this.options.supportedLngs.find(m=>{if(m===f)return m;if(!(m.indexOf("-")<0&&f.indexOf("-")<0)&&(m.indexOf("-")>0&&f.indexOf("-")<0&&m.substring(0,m.indexOf("-"))===f||m.indexOf(f)===0&&f.length>1))return m})}),u||(u=this.getFallbackCodes(this.options.fallbackLng)[0]),u}getFallbackCodes(s,u){if(!s)return[];if(typeof s=="function"&&(s=s(u)),we(s)&&(s=[s]),Array.isArray(s))return s;if(!u)return s.default||[];let r=s[u];return r||(r=s[this.getScriptPartFromCode(u)]),r||(r=s[this.formatLanguageCode(u)]),r||(r=s[this.getLanguagePartFromCode(u)]),r||(r=s.default),r||[]}toResolveHierarchy(s,u){const r=this.getFallbackCodes((u===!1?[]:u)||this.options.fallbackLng||[],s),d=[],f=m=>{m&&(this.isSupportedCode(m)?d.push(m):this.logger.warn(`rejecting language code not found in supportedLngs: ${m}`))};return we(s)&&(s.indexOf("-")>-1||s.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&f(this.formatLanguageCode(s)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&f(this.getScriptPartFromCode(s)),this.options.load!=="currentOnly"&&f(this.getLanguagePartFromCode(s))):we(s)&&f(this.formatLanguageCode(s)),r.forEach(m=>{d.indexOf(m)<0&&f(this.formatLanguageCode(m))}),d}}const tm={zero:0,one:1,two:2,few:3,many:4,other:5},nm={select:o=>o===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Iv{constructor(s,u={}){this.languageUtils=s,this.options=u,this.logger=Tn.create("pluralResolver"),this.pluralRulesCache={}}addRule(s,u){this.rules[s]=u}clearCache(){this.pluralRulesCache={}}getRule(s,u={}){const r=zl(s==="dev"?"en":s),d=u.ordinal?"ordinal":"cardinal",f=JSON.stringify({cleanedCode:r,type:d});if(f in this.pluralRulesCache)return this.pluralRulesCache[f];let m;try{m=new Intl.PluralRules(r,{type:d})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),nm;if(!s.match(/-|_/))return nm;const v=this.languageUtils.getLanguagePartFromCode(s);m=this.getRule(v,u)}return this.pluralRulesCache[f]=m,m}needsPlural(s,u={}){let r=this.getRule(s,u);return r||(r=this.getRule("dev",u)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(s,u,r={}){return this.getSuffixes(s,r).map(d=>`${u}${d}`)}getSuffixes(s,u={}){let r=this.getRule(s,u);return r||(r=this.getRule("dev",u)),r?r.resolvedOptions().pluralCategories.sort((d,f)=>tm[d]-tm[f]).map(d=>`${this.options.prepend}${u.ordinal?`ordinal${this.options.prepend}`:""}${d}`):[]}getSuffix(s,u,r={}){const d=this.getRule(s,r);return d?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${d.select(u)}`:(this.logger.warn(`no plural rule found for: ${s}`),this.getSuffix("dev",u,r))}}const am=(o,s,u,r=".",d=!0)=>{let f=Cv(o,s,u);return!f&&d&&we(u)&&(f=Mo(o,u,r),f===void 0&&(f=Mo(s,u,r))),f},To=o=>o.replace(/\$/g,"$$$$");class Hv{constructor(s={}){var u;this.logger=Tn.create("interpolator"),this.options=s,this.format=((u=s==null?void 0:s.interpolation)==null?void 0:u.format)||(r=>r),this.init(s)}init(s={}){s.interpolation||(s.interpolation={escapeValue:!0});const{escape:u,escapeValue:r,useRawValueToEscape:d,prefix:f,prefixEscaped:m,suffix:p,suffixEscaped:v,formatSeparator:b,unescapeSuffix:x,unescapePrefix:E,nestingPrefix:w,nestingPrefixEscaped:I,nestingSuffix:_,nestingSuffixEscaped:Z,nestingOptionsSeparator:Q,maxReplaces:re,alwaysFormat:oe}=s.interpolation;this.escape=u!==void 0?u:Bv,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=d!==void 0?d:!1,this.prefix=f?Rs(f):m||"{{",this.suffix=p?Rs(p):v||"}}",this.formatSeparator=b||",",this.unescapePrefix=x?"":E||"-",this.unescapeSuffix=this.unescapePrefix?"":x||"",this.nestingPrefix=w?Rs(w):I||Rs("$t("),this.nestingSuffix=_?Rs(_):Z||Rs(")"),this.nestingOptionsSeparator=Q||",",this.maxReplaces=re||1e3,this.alwaysFormat=oe!==void 0?oe:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const s=(u,r)=>(u==null?void 0:u.source)===r?(u.lastIndex=0,u):new RegExp(r,"g");this.regexp=s(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=s(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=s(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(s,u,r,d){var I;let f,m,p;const v=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},b=_=>{if(_.indexOf(this.formatSeparator)<0){const oe=am(u,v,_,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(oe,void 0,r,{...d,...u,interpolationkey:_}):oe}const Z=_.split(this.formatSeparator),Q=Z.shift().trim(),re=Z.join(this.formatSeparator).trim();return this.format(am(u,v,Q,this.options.keySeparator,this.options.ignoreJSONStructure),re,r,{...d,...u,interpolationkey:Q})};this.resetRegExp();const x=(d==null?void 0:d.missingInterpolationHandler)||this.options.missingInterpolationHandler,E=((I=d==null?void 0:d.interpolation)==null?void 0:I.skipOnVariables)!==void 0?d.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:_=>To(_)},{regex:this.regexp,safeValue:_=>this.escapeValue?To(this.escape(_)):To(_)}].forEach(_=>{for(p=0;f=_.regex.exec(s);){const Z=f[1].trim();if(m=b(Z),m===void 0)if(typeof x=="function"){const re=x(s,f,d);m=we(re)?re:""}else if(d&&Object.prototype.hasOwnProperty.call(d,Z))m="";else if(E){m=f[0];continue}else this.logger.warn(`missed to pass in variable ${Z} for interpolating ${s}`),m="";else!we(m)&&!this.useRawValueToEscape&&(m=Qh(m));const Q=_.safeValue(m);if(s=s.replace(f[0],Q),E?(_.regex.lastIndex+=m.length,_.regex.lastIndex-=f[0].length):_.regex.lastIndex=0,p++,p>=this.maxReplaces)break}}),s}nest(s,u,r={}){let d,f,m;const p=(v,b)=>{const x=this.nestingOptionsSeparator;if(v.indexOf(x)<0)return v;const E=v.split(new RegExp(`${x}[ ]*{`));let w=`{${E[1]}`;v=E[0],w=this.interpolate(w,m);const I=w.match(/'/g),_=w.match(/"/g);(((I==null?void 0:I.length)??0)%2===0&&!_||_.length%2!==0)&&(w=w.replace(/'/g,'"'));try{m=JSON.parse(w),b&&(m={...b,...m})}catch(Z){return this.logger.warn(`failed parsing options string in nesting for key ${v}`,Z),`${v}${x}${w}`}return m.defaultValue&&m.defaultValue.indexOf(this.prefix)>-1&&delete m.defaultValue,v};for(;d=this.nestingRegexp.exec(s);){let v=[];m={...r},m=m.replace&&!we(m.replace)?m.replace:m,m.applyPostProcessor=!1,delete m.defaultValue;const b=/{.*}/.test(d[1])?d[1].lastIndexOf("}")+1:d[1].indexOf(this.formatSeparator);if(b!==-1&&(v=d[1].slice(b).split(this.formatSeparator).map(x=>x.trim()).filter(Boolean),d[1]=d[1].slice(0,b)),f=u(p.call(this,d[1].trim(),m),m),f&&d[0]===s&&!we(f))return f;we(f)||(f=Qh(f)),f||(this.logger.warn(`missed to resolve ${d[1]} for nesting ${s}`),f=""),v.length&&(f=v.reduce((x,E)=>this.format(x,E,r.lng,{...r,interpolationkey:d[1].trim()}),f.trim())),s=s.replace(d[0],f),this.regexp.lastIndex=0}return s}}const qv=o=>{let s=o.toLowerCase().trim();const u={};if(o.indexOf("(")>-1){const r=o.split("(");s=r[0].toLowerCase().trim();const d=r[1].substring(0,r[1].length-1);s==="currency"&&d.indexOf(":")<0?u.currency||(u.currency=d.trim()):s==="relativetime"&&d.indexOf(":")<0?u.range||(u.range=d.trim()):d.split(";").forEach(m=>{if(m){const[p,...v]=m.split(":"),b=v.join(":").trim().replace(/^'+|'+$/g,""),x=p.trim();u[x]||(u[x]=b),b==="false"&&(u[x]=!1),b==="true"&&(u[x]=!0),isNaN(b)||(u[x]=parseInt(b,10))}})}return{formatName:s,formatOptions:u}},sm=o=>{const s={};return(u,r,d)=>{let f=d;d&&d.interpolationkey&&d.formatParams&&d.formatParams[d.interpolationkey]&&d[d.interpolationkey]&&(f={...f,[d.interpolationkey]:void 0});const m=r+JSON.stringify(f);let p=s[m];return p||(p=o(zl(r),d),s[m]=p),p(u)}},Gv=o=>(s,u,r)=>o(zl(u),r)(s);class Vv{constructor(s={}){this.logger=Tn.create("formatter"),this.options=s,this.init(s)}init(s,u={interpolation:{}}){this.formatSeparator=u.interpolation.formatSeparator||",";const r=u.cacheInBuiltFormats?sm:Gv;this.formats={number:r((d,f)=>{const m=new Intl.NumberFormat(d,{...f});return p=>m.format(p)}),currency:r((d,f)=>{const m=new Intl.NumberFormat(d,{...f,style:"currency"});return p=>m.format(p)}),datetime:r((d,f)=>{const m=new Intl.DateTimeFormat(d,{...f});return p=>m.format(p)}),relativetime:r((d,f)=>{const m=new Intl.RelativeTimeFormat(d,{...f});return p=>m.format(p,f.range||"day")}),list:r((d,f)=>{const m=new Intl.ListFormat(d,{...f});return p=>m.format(p)})}}add(s,u){this.formats[s.toLowerCase().trim()]=u}addCached(s,u){this.formats[s.toLowerCase().trim()]=sm(u)}format(s,u,r,d={}){const f=u.split(this.formatSeparator);if(f.length>1&&f[0].indexOf("(")>1&&f[0].indexOf(")")<0&&f.find(p=>p.indexOf(")")>-1)){const p=f.findIndex(v=>v.indexOf(")")>-1);f[0]=[f[0],...f.splice(1,p)].join(this.formatSeparator)}return f.reduce((p,v)=>{var E;const{formatName:b,formatOptions:x}=qv(v);if(this.formats[b]){let w=p;try{const I=((E=d==null?void 0:d.formatParams)==null?void 0:E[d.interpolationkey])||{},_=I.locale||I.lng||d.locale||d.lng||r;w=this.formats[b](p,_,{...x,...d,...I})}catch(I){this.logger.warn(I)}return w}else this.logger.warn(`there was no format function for ${b}`);return p},s)}}const Yv=(o,s)=>{o.pending[s]!==void 0&&(delete o.pending[s],o.pendingCount--)};class Fv extends dr{constructor(s,u,r,d={}){var f,m;super(),this.backend=s,this.store=u,this.services=r,this.languageUtils=r.languageUtils,this.options=d,this.logger=Tn.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=d.maxParallelReads||10,this.readingCalls=0,this.maxRetries=d.maxRetries>=0?d.maxRetries:5,this.retryTimeout=d.retryTimeout>=1?d.retryTimeout:350,this.state={},this.queue=[],(m=(f=this.backend)==null?void 0:f.init)==null||m.call(f,r,d.backend,d)}queueLoad(s,u,r,d){const f={},m={},p={},v={};return s.forEach(b=>{let x=!0;u.forEach(E=>{const w=`${b}|${E}`;!r.reload&&this.store.hasResourceBundle(b,E)?this.state[w]=2:this.state[w]<0||(this.state[w]===1?m[w]===void 0&&(m[w]=!0):(this.state[w]=1,x=!1,m[w]===void 0&&(m[w]=!0),f[w]===void 0&&(f[w]=!0),v[E]===void 0&&(v[E]=!0)))}),x||(p[b]=!0)}),(Object.keys(f).length||Object.keys(m).length)&&this.queue.push({pending:m,pendingCount:Object.keys(m).length,loaded:{},errors:[],callback:d}),{toLoad:Object.keys(f),pending:Object.keys(m),toLoadLanguages:Object.keys(p),toLoadNamespaces:Object.keys(v)}}loaded(s,u,r){const d=s.split("|"),f=d[0],m=d[1];u&&this.emit("failedLoading",f,m,u),!u&&r&&this.store.addResourceBundle(f,m,r,void 0,void 0,{skipCopy:!0}),this.state[s]=u?-1:2,u&&r&&(this.state[s]=0);const p={};this.queue.forEach(v=>{Ov(v.loaded,[f],m),Yv(v,s),u&&v.errors.push(u),v.pendingCount===0&&!v.done&&(Object.keys(v.loaded).forEach(b=>{p[b]||(p[b]={});const x=v.loaded[b];x.length&&x.forEach(E=>{p[b][E]===void 0&&(p[b][E]=!0)})}),v.done=!0,v.errors.length?v.callback(v.errors):v.callback())}),this.emit("loaded",p),this.queue=this.queue.filter(v=>!v.done)}read(s,u,r,d=0,f=this.retryTimeout,m){if(!s.length)return m(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:s,ns:u,fcName:r,tried:d,wait:f,callback:m});return}this.readingCalls++;const p=(b,x)=>{if(this.readingCalls--,this.waitingReads.length>0){const E=this.waitingReads.shift();this.read(E.lng,E.ns,E.fcName,E.tried,E.wait,E.callback)}if(b&&x&&d<this.maxRetries){setTimeout(()=>{this.read.call(this,s,u,r,d+1,f*2,m)},f);return}m(b,x)},v=this.backend[r].bind(this.backend);if(v.length===2){try{const b=v(s,u);b&&typeof b.then=="function"?b.then(x=>p(null,x)).catch(p):p(null,b)}catch(b){p(b)}return}return v(s,u,p)}prepareLoading(s,u,r={},d){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),d&&d();we(s)&&(s=this.languageUtils.toResolveHierarchy(s)),we(u)&&(u=[u]);const f=this.queueLoad(s,u,r,d);if(!f.toLoad.length)return f.pending.length||d(),null;f.toLoad.forEach(m=>{this.loadOne(m)})}load(s,u,r){this.prepareLoading(s,u,{},r)}reload(s,u,r){this.prepareLoading(s,u,{reload:!0},r)}loadOne(s,u=""){const r=s.split("|"),d=r[0],f=r[1];this.read(d,f,"read",void 0,void 0,(m,p)=>{m&&this.logger.warn(`${u}loading namespace ${f} for language ${d} failed`,m),!m&&p&&this.logger.log(`${u}loaded namespace ${f} for language ${d}`,p),this.loaded(s,m,p)})}saveMissing(s,u,r,d,f,m={},p=()=>{}){var v,b,x,E,w;if((b=(v=this.services)==null?void 0:v.utils)!=null&&b.hasLoadedNamespace&&!((E=(x=this.services)==null?void 0:x.utils)!=null&&E.hasLoadedNamespace(u))){this.logger.warn(`did not save key "${r}" as the namespace "${u}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((w=this.backend)!=null&&w.create){const I={...m,isUpdate:f},_=this.backend.create.bind(this.backend);if(_.length<6)try{let Z;_.length===5?Z=_(s,u,r,d,I):Z=_(s,u,r,d),Z&&typeof Z.then=="function"?Z.then(Q=>p(null,Q)).catch(p):p(null,Z)}catch(Z){p(Z)}else _(s,u,r,d,p,I)}!s||!s[0]||this.store.addResource(s[0],u,r,d)}}}const lm=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:o=>{let s={};if(typeof o[1]=="object"&&(s=o[1]),we(o[1])&&(s.defaultValue=o[1]),we(o[2])&&(s.tDescription=o[2]),typeof o[2]=="object"||typeof o[3]=="object"){const u=o[3]||o[2];Object.keys(u).forEach(r=>{s[r]=u[r]})}return s},interpolation:{escapeValue:!0,format:o=>o,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),im=o=>{var s,u;return we(o.ns)&&(o.ns=[o.ns]),we(o.fallbackLng)&&(o.fallbackLng=[o.fallbackLng]),we(o.fallbackNS)&&(o.fallbackNS=[o.fallbackNS]),((u=(s=o.supportedLngs)==null?void 0:s.indexOf)==null?void 0:u.call(s,"cimode"))<0&&(o.supportedLngs=o.supportedLngs.concat(["cimode"])),typeof o.initImmediate=="boolean"&&(o.initAsync=o.initImmediate),o},sr=()=>{},Xv=o=>{Object.getOwnPropertyNames(Object.getPrototypeOf(o)).forEach(u=>{typeof o[u]=="function"&&(o[u]=o[u].bind(o))})};class Il extends dr{constructor(s={},u){if(super(),this.options=im(s),this.services={},this.logger=Tn,this.modules={external:[]},Xv(this),u&&!this.isInitialized&&!s.isClone){if(!this.options.initAsync)return this.init(s,u),this;setTimeout(()=>{this.init(s,u)},0)}}init(s={},u){this.isInitializing=!0,typeof s=="function"&&(u=s,s={}),s.defaultNS==null&&s.ns&&(we(s.ns)?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));const r=lm();this.options={...r,...this.options,...im(s)},this.options.interpolation={...r.interpolation,...this.options.interpolation},s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);const d=b=>b?typeof b=="function"?new b:b:null;if(!this.options.isClone){this.modules.logger?Tn.init(d(this.modules.logger),this.options):Tn.init(null,this.options);let b;this.modules.formatter?b=this.modules.formatter:b=Vv;const x=new em(this.options);this.store=new Jh(this.options.resources,this.options);const E=this.services;E.logger=Tn,E.resourceStore=this.store,E.languageUtils=x,E.pluralResolver=new Iv(x,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),b&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(E.formatter=d(b),E.formatter.init&&E.formatter.init(E,this.options),this.options.interpolation.format=E.formatter.format.bind(E.formatter)),E.interpolator=new Hv(this.options),E.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},E.backendConnector=new Fv(d(this.modules.backend),E.resourceStore,E,this.options),E.backendConnector.on("*",(I,..._)=>{this.emit(I,..._)}),this.modules.languageDetector&&(E.languageDetector=d(this.modules.languageDetector),E.languageDetector.init&&E.languageDetector.init(E,this.options.detection,this.options)),this.modules.i18nFormat&&(E.i18nFormat=d(this.modules.i18nFormat),E.i18nFormat.init&&E.i18nFormat.init(this)),this.translator=new cr(this.services,this.options),this.translator.on("*",(I,..._)=>{this.emit(I,..._)}),this.modules.external.forEach(I=>{I.init&&I.init(this)})}if(this.format=this.options.interpolation.format,u||(u=sr),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const b=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);b.length>0&&b[0]!=="dev"&&(this.options.lng=b[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(b=>{this[b]=(...x)=>this.store[b](...x)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(b=>{this[b]=(...x)=>(this.store[b](...x),this)});const p=Bl(),v=()=>{const b=(x,E)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),p.resolve(E),u(x,E)};if(this.languages&&!this.isInitialized)return b(null,this.t.bind(this));this.changeLanguage(this.options.lng,b)};return this.options.resources||!this.options.initAsync?v():setTimeout(v,0),p}loadResources(s,u=sr){var f,m;let r=u;const d=we(s)?s:this.language;if(typeof s=="function"&&(r=s),!this.options.resources||this.options.partialBundledLanguages){if((d==null?void 0:d.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const p=[],v=b=>{if(!b||b==="cimode")return;this.services.languageUtils.toResolveHierarchy(b).forEach(E=>{E!=="cimode"&&p.indexOf(E)<0&&p.push(E)})};d?v(d):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(x=>v(x)),(m=(f=this.options.preload)==null?void 0:f.forEach)==null||m.call(f,b=>v(b)),this.services.backendConnector.load(p,this.options.ns,b=>{!b&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(b)})}else r(null)}reloadResources(s,u,r){const d=Bl();return typeof s=="function"&&(r=s,s=void 0),typeof u=="function"&&(r=u,u=void 0),s||(s=this.languages),u||(u=this.options.ns),r||(r=sr),this.services.backendConnector.reload(s,u,f=>{d.resolve(),r(f)}),d}use(s){if(!s)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!s.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return s.type==="backend"&&(this.modules.backend=s),(s.type==="logger"||s.log&&s.warn&&s.error)&&(this.modules.logger=s),s.type==="languageDetector"&&(this.modules.languageDetector=s),s.type==="i18nFormat"&&(this.modules.i18nFormat=s),s.type==="postProcessor"&&zm.addPostProcessor(s),s.type==="formatter"&&(this.modules.formatter=s),s.type==="3rdParty"&&this.modules.external.push(s),this}setResolvedLanguage(s){if(!(!s||!this.languages)&&!(["cimode","dev"].indexOf(s)>-1)){for(let u=0;u<this.languages.length;u++){const r=this.languages[u];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(s)<0&&this.store.hasLanguageSomeTranslations(s)&&(this.resolvedLanguage=s,this.languages.unshift(s))}}changeLanguage(s,u){this.isLanguageChangingTo=s;const r=Bl();this.emit("languageChanging",s);const d=p=>{this.language=p,this.languages=this.services.languageUtils.toResolveHierarchy(p),this.resolvedLanguage=void 0,this.setResolvedLanguage(p)},f=(p,v)=>{v?this.isLanguageChangingTo===s&&(d(v),this.translator.changeLanguage(v),this.isLanguageChangingTo=void 0,this.emit("languageChanged",v),this.logger.log("languageChanged",v)):this.isLanguageChangingTo=void 0,r.resolve((...b)=>this.t(...b)),u&&u(p,(...b)=>this.t(...b))},m=p=>{var x,E;!s&&!p&&this.services.languageDetector&&(p=[]);const v=we(p)?p:p&&p[0],b=this.store.hasLanguageSomeTranslations(v)?v:this.services.languageUtils.getBestMatchFromCodes(we(p)?[p]:p);b&&(this.language||d(b),this.translator.language||this.translator.changeLanguage(b),(E=(x=this.services.languageDetector)==null?void 0:x.cacheUserLanguage)==null||E.call(x,b)),this.loadResources(b,w=>{f(w,b)})};return!s&&this.services.languageDetector&&!this.services.languageDetector.async?m(this.services.languageDetector.detect()):!s&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(m):this.services.languageDetector.detect(m):m(s),r}getFixedT(s,u,r){const d=(f,m,...p)=>{let v;typeof m!="object"?v=this.options.overloadTranslationOptionHandler([f,m].concat(p)):v={...m},v.lng=v.lng||d.lng,v.lngs=v.lngs||d.lngs,v.ns=v.ns||d.ns,v.keyPrefix!==""&&(v.keyPrefix=v.keyPrefix||r||d.keyPrefix);const b=this.options.keySeparator||".";let x;return v.keyPrefix&&Array.isArray(f)?x=f.map(E=>`${v.keyPrefix}${b}${E}`):x=v.keyPrefix?`${v.keyPrefix}${b}${f}`:f,this.t(x,v)};return we(s)?d.lng=s:d.lngs=s,d.ns=u,d.keyPrefix=r,d}t(...s){var u;return(u=this.translator)==null?void 0:u.translate(...s)}exists(...s){var u;return(u=this.translator)==null?void 0:u.exists(...s)}setDefaultNamespace(s){this.options.defaultNS=s}hasLoadedNamespace(s,u={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=u.lng||this.resolvedLanguage||this.languages[0],d=this.options?this.options.fallbackLng:!1,f=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const m=(p,v)=>{const b=this.services.backendConnector.state[`${p}|${v}`];return b===-1||b===0||b===2};if(u.precheck){const p=u.precheck(this,m);if(p!==void 0)return p}return!!(this.hasResourceBundle(r,s)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||m(r,s)&&(!d||m(f,s)))}loadNamespaces(s,u){const r=Bl();return this.options.ns?(we(s)&&(s=[s]),s.forEach(d=>{this.options.ns.indexOf(d)<0&&this.options.ns.push(d)}),this.loadResources(d=>{r.resolve(),u&&u(d)}),r):(u&&u(),Promise.resolve())}loadLanguages(s,u){const r=Bl();we(s)&&(s=[s]);const d=this.options.preload||[],f=s.filter(m=>d.indexOf(m)<0&&this.services.languageUtils.isSupportedCode(m));return f.length?(this.options.preload=d.concat(f),this.loadResources(m=>{r.resolve(),u&&u(m)}),r):(u&&u(),Promise.resolve())}dir(s){var d,f;if(s||(s=this.resolvedLanguage||(((d=this.languages)==null?void 0:d.length)>0?this.languages[0]:this.language)),!s)return"rtl";try{const m=new Intl.Locale(s);if(m&&m.getTextInfo){const p=m.getTextInfo();if(p&&p.direction)return p.direction}}catch{}const u=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((f=this.services)==null?void 0:f.languageUtils)||new em(lm());return s.toLowerCase().indexOf("-latn")>1?"ltr":u.indexOf(r.getLanguagePartFromCode(s))>-1||s.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(s={},u){return new Il(s,u)}cloneInstance(s={},u=sr){const r=s.forkResourceStore;r&&delete s.forkResourceStore;const d={...this.options,...s,isClone:!0},f=new Il(d);if((s.debug!==void 0||s.prefix!==void 0)&&(f.logger=f.logger.clone(s)),["store","services","language"].forEach(p=>{f[p]=this[p]}),f.services={...this.services},f.services.utils={hasLoadedNamespace:f.hasLoadedNamespace.bind(f)},r){const p=Object.keys(this.store.data).reduce((v,b)=>(v[b]={...this.store.data[b]},v[b]=Object.keys(v[b]).reduce((x,E)=>(x[E]={...v[b][E]},x),v[b]),v),{});f.store=new Jh(p,d),f.services.resourceStore=f.store}return f.translator=new cr(f.services,d),f.translator.on("*",(p,...v)=>{f.emit(p,...v)}),f.init(d,u),f.translator.options=d,f.translator.backendConnector.services.utils={hasLoadedNamespace:f.hasLoadedNamespace.bind(f)},f}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Tt=Il.createInstance();Tt.createInstance=Il.createInstance;Tt.createInstance;Tt.dir;Tt.init;Tt.loadResources;Tt.reloadResources;Tt.use;Tt.changeLanguage;Tt.getFixedT;Tt.t;Tt.exists;Tt.setDefaultNamespace;Tt.hasLoadedNamespace;Tt.loadNamespaces;Tt.loadLanguages;const Qv={translation:{common:{loading:"載入中...",save:"儲存",cancel:"取消",confirm:"確認",back:"返回",next:"下一步",submit:"提交",edit:"編輯",delete:"刪除",search:"搜尋",filter:"篩選",all:"全部"},navigation:{home:"首頁",profile:"個人資料",history:"歷史紀錄",ladder:"天梯排行榜",friends:"好友",settings:"設定",logout:"登出"},welcome:{title:"歡迎來到最強肉體",subtitle:"留下運動數據,進步多少馬上知道",login:"登入",guestMode:"立即體驗（訪客模式）",register:"註冊帳號",guestInfo:{title:"訪客模式功能：",features:["完整體驗所有評測功能","本地儲存評測結果","隨時可註冊同步資料","無法使用好友、天梯等社交功能"]}},userInfo:{title:"身體狀態與表現總覽",nickname:"暱稱",nicknamePlaceholder:"請輸入暱稱",generateNickname:"生成暱稱",gender:"性別",selectGender:"請選擇性別",male:"男性",female:"女性",height:"身高 (cm)",weight:"體重 (kg)",age:"年齡",saveData:"儲存資料",saving:"儲存中...",dataSaved:"資料已儲存成功！",saveFailed:"儲存失敗，請稍後再試"},tests:{strength:"力量評測",explosivePower:"爆發力測試",cardio:"心肺耐力測試",muscleMass:"骨骼肌肉量",bodyFat:"體脂肪率與FFMI",startTest:"開始評測",completeTest:"完成評測",testComplete:"評測完成",score:"分數",averageScore:"平均分數"},ladder:{title:"天梯排行榜",myScore:"我的天梯分數",myRank:"我的排名",notParticipated:"未參與",notRanked:"未上榜",rank:"第 {{rank}} 名",ageGroups:{all:"全部年齡",under20:"20歲以下","21to30":"21~30歲","31to40":"31~40歲","41to50":"41~50歲","51to60":"51~60歲","61to70":"61~70歲",over70:"70歲以上",unknown:"未知年齡"},empty:{title:"暫無排行榜數據",subtitle:"完成評測即可上榜！"},footer:{scoreFormula:"完成所有評測項目即可計算天梯分數",formula:"天梯分數 = (力量 + 爆發力 + 心肺 + 肌肉量 + 體脂) ÷ 5"}},guestMode:{title:"歡迎使用最強肉體",subtitle:"您可以選擇註冊帳號或直接體驗",startGuest:"立即體驗（訪客模式）",register:"註冊帳號",or:"或",banner:"訪客模式 - 您的資料僅儲存在本地",syncData:"註冊同步",exit:"退出"},errors:{required:"此欄位為必填",invalidFormat:"格式不正確",networkError:"網路錯誤，請稍後再試",authError:"認證失敗",saveError:"儲存失敗",loadError:"載入失敗"}}},$v={translation:{common:{loading:"Loading...",save:"Save",cancel:"Cancel",confirm:"Confirm",back:"Back",next:"Next",submit:"Submit",edit:"Edit",delete:"Delete",search:"Search",filter:"Filter",all:"All"},navigation:{home:"Home",profile:"Profile",history:"History",ladder:"Ladder",friends:"Friends",settings:"Settings",logout:"Logout"},welcome:{title:"Welcome to Fitness Assessment",subtitle:"Track your progress with detailed fitness metrics",login:"Login",guestMode:"Try Now (Guest Mode)",register:"Register",guestInfo:{title:"Guest Mode Features:",features:["Full access to all assessment features","Local storage of assessment results","Register anytime to sync data","Social features like friends and ladder not available"]}},userInfo:{title:"Body Status & Performance Overview",nickname:"Nickname",nicknamePlaceholder:"Enter nickname",generateNickname:"Generate",gender:"Gender",selectGender:"Select gender",male:"Male",female:"Female",height:"Height (cm)",weight:"Weight (kg)",age:"Age",saveData:"Save Data",saving:"Saving...",dataSaved:"Data saved successfully!",saveFailed:"Save failed, please try again"},tests:{strength:"Strength Assessment",explosivePower:"Explosive Power Test",cardio:"Cardio Endurance Test",muscleMass:"Muscle Mass",bodyFat:"Body Fat & FFMI",startTest:"Start Test",completeTest:"Complete Test",testComplete:"Test Complete",score:"Score",averageScore:"Average Score"},ladder:{title:"Ladder Rankings",myScore:"My Ladder Score",myRank:"My Rank",notParticipated:"Not Participated",notRanked:"Not Ranked",rank:"Rank {{rank}}",ageGroups:{all:"All Ages",under20:"Under 20","21to30":"21-30","31to40":"31-40","41to50":"41-50","51to60":"51-60","61to70":"61-70",over70:"Over 70",unknown:"Unknown Age"},empty:{title:"No ladder data available",subtitle:"Complete assessments to rank!"},footer:{scoreFormula:"Complete all assessment items to calculate ladder score",formula:"Ladder Score = (Strength + Explosive Power + Cardio + Muscle Mass + Body Fat) ÷ 5"}},guestMode:{title:"Welcome to Fitness Assessment",subtitle:"You can choose to register or try directly",startGuest:"Try Now (Guest Mode)",register:"Register",or:"or",banner:"Guest Mode - Your data is stored locally only",syncData:"Register to Sync",exit:"Exit"},errors:{required:"This field is required",invalidFormat:"Invalid format",networkError:"Network error, please try again later",authError:"Authentication failed",saveError:"Save failed",loadError:"Load failed"}}};Tt.use(Sv).init({resources:{"zh-TW":Qv,"en-US":$v},lng:"zh-TW",fallbackLng:"zh-TW",interpolation:{escapeValue:!1},react:{useSuspense:!1}});try{localStorage.removeItem("language")}catch{}function Im({onGuestMode:o}){const s=xn(),{isAuthenticated:u,isLoading:r}=on(),{t:d}=km(),[f,m]=A.useState(!1);A.useEffect(()=>{console.log("i18n current language:",Tt.language)},[]),A.useEffect(()=>{const b=async()=>{if(f||u)return;const E=localStorage.getItem("savedEmail"),w=localStorage.getItem("savedPassword");if(E&&w&&!f){console.log("Welcome - 嘗試自動登入:",E),m(!0);try{const I=await zo(ue,E,w);console.log("Welcome - 自動登入成功:",I.user.email),setTimeout(()=>{s("/user-info")},500)}catch(I){console.error("Welcome - 自動登入失敗:",I),localStorage.removeItem("savedEmail"),localStorage.removeItem("savedPassword")}}},x=setTimeout(()=>{b()},100);return()=>clearTimeout(x)},[f,u,s]),A.useEffect(()=>{u&&!r&&(console.log("Welcome - 用戶已認證，導航到 user-info"),s("/user-info"))},[u,r,s]);const p=()=>{s("/login")},v=()=>{o?o():s("/guest")};return l.jsxs("div",{className:"welcome-container",children:[l.jsx("div",{className:"welcome-header",children:l.jsx(Tv,{})}),l.jsxs("div",{className:"welcome-content",children:[l.jsx("h1",{className:"welcome-title",children:d("welcome.title")}),l.jsx("p",{className:"welcome-subtitle",children:d("welcome.subtitle")}),l.jsxs("div",{className:"button-group-mode",children:[l.jsxs("div",{className:"button-with-tooltip",children:[l.jsx("button",{onClick:p,className:"mode-btn login-btn",children:d("welcome.login")}),l.jsx("span",{className:"tooltip",children:"將數據保存到雲端,隨時隨地訪問"})]}),l.jsxs("div",{className:"button-with-tooltip",children:[l.jsx("button",{onClick:v,className:"mode-btn guest-btn",children:d("welcome.guestMode")}),l.jsx("span",{className:"tooltip",children:"無需註冊,立即開始評測"})]})]})]})]})}Im.propTypes={onLogin:ie.func,onGuestMode:ie.func};const _s={strength:0,explosivePower:0,cardio:0,muscleMass:0,bodyFat:0},Kv=["male","female"],Hm=({isOpen:o,onClose:s,title:u,message:r,type:d="info",onAction:f=null,actionText:m=null})=>{if(!o)return null;const p=()=>{switch(d){case"warning":return"⚠️";case"success":return"✅";case"error":return"❌";default:return"ℹ️"}},v=()=>{switch(d){case"warning":return"modal-btn modal-btn-warning";case"success":return"modal-btn modal-btn-success";case"error":return"modal-btn modal-btn-error";default:return"modal-btn modal-btn-info"}},b=()=>{console.log("Modal close button clicked"),s()},x=()=>{console.log("Modal overlay clicked"),s()},E=()=>{f&&f(),s()};return l.jsx("div",{className:"modal-overlay",onClick:x,children:l.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("span",{className:"modal-icon",children:p()}),l.jsx("h3",{className:"modal-title",children:u})]}),l.jsx("div",{className:"modal-body",children:l.jsx("p",{className:"modal-message",children:r})}),l.jsx("div",{className:"modal-footer",children:f&&m?l.jsxs("div",{className:"modal-footer-actions",children:[l.jsx("button",{className:"modal-btn modal-btn-secondary",onClick:b,children:"稍後查看"}),l.jsx("button",{className:v(),onClick:E,style:{position:"relative",zIndex:10001},children:m})]}):l.jsx("button",{className:v(),onClick:b,style:{position:"relative",zIndex:10001},children:"確定"})})]})})};Hm.propTypes={isOpen:ie.bool.isRequired,onClose:ie.func.isRequired,title:ie.string.isRequired,message:ie.string.isRequired,type:ie.oneOf(["info","warning","success","error"]),onAction:ie.func,actionText:ie.string};const ko=({isOpen:o,onConfirm:s,onCancel:u,remainingCount:r})=>{if(!o)return null;const d=f=>{f.target===f.currentTarget&&u()};return l.jsx("div",{className:"modal-overlay submit-confirm-overlay",onClick:d,children:l.jsxs("div",{className:"modal-content submit-confirm-content",onClick:f=>f.stopPropagation(),children:[l.jsxs("div",{className:"modal-header",children:[l.jsx("span",{className:"modal-icon",children:"🏆"}),l.jsx("h3",{className:"modal-title",children:"提交確認"})]}),l.jsx("div",{className:"modal-body",children:l.jsxs("div",{className:"submit-confirm-message",children:[l.jsxs("p",{className:"confirm-text",children:["為提升天梯參考價值，防止誤植，今天還剩下"," ",l.jsx("span",{className:"remaining-count",children:r})," ","次提交機會，每天凌晨12點將重置"]}),l.jsxs("div",{className:"confirm-details",children:[l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-icon",children:"📊"}),l.jsx("span",{className:"detail-text",children:"確保數據準確性"})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-icon",children:"⏰"}),l.jsx("span",{className:"detail-text",children:"每日凌晨重置次數"})]}),l.jsxs("div",{className:"detail-item",children:[l.jsx("span",{className:"detail-icon",children:"🎯"}),l.jsx("span",{className:"detail-text",children:"提升天梯參考價值"})]})]})]})}),l.jsxs("div",{className:"modal-footer submit-confirm-footer",children:[l.jsx("button",{className:"modal-btn modal-btn-secondary",onClick:u,children:"還沒填好"}),l.jsx("button",{className:"modal-btn modal-btn-success",onClick:s,children:"確定提交"})]})]})})};ko.propTypes={isOpen:ie.bool.isRequired,onConfirm:ie.func.isRequired,onCancel:ie.func.isRequired,remainingCount:ie.number.isRequired};async function Zv(o,s=300*1024,u=192,r=192){return new Promise((d,f)=>{const m=new window.Image,p=new FileReader;p.onload=v=>{m.src=v.target.result},m.onload=()=>{const v=document.createElement("canvas");let b=m.width,x=m.height;(b>u||x>r)&&(b>x?(x=Math.round(x*u/b),b=u):(b=Math.round(b*r/x),x=r)),v.width=b,v.height=x,v.getContext("2d").drawImage(m,0,0,b,x),v.toBlob(w=>{w.size>s?v.toBlob(I=>{d(I)},"image/jpeg",.7):d(w)},"image/jpeg",.85)},m.onerror=f,p.onerror=f,p.readAsDataURL(o)})}function qm({testData:o,onLogout:s,clearTestData:u}){const{userData:r,setUserData:d,saveHistory:f,loadUserData:m,isLoading:p}=on(),[v,b]=A.useState(null),[x,E]=A.useState(!1),[w,I]=A.useState(null),[_,Z]=A.useState(!1),Q=xn(),re=Ha(),oe=A.useRef(null),G=A.useRef(null),H=A.useRef(null),[le,fe]=A.useState(!1),[te,se]=A.useState(null),[ae,z]=A.useState({isOpen:!1,title:"",message:"",type:"info",onAction:null,actionText:null}),[ce,he]=A.useState(null),[V,U]=A.useState({lastSubmissionTime:null,dailySubmissionCount:0,lastSubmissionDate:null}),[ge,y]=A.useState({isOpen:!1,remainingCount:3}),N=A.useCallback(()=>{const j=3-(V.dailySubmissionCount||0);y({isOpen:!0,remainingCount:Math.max(0,j)})},[V]),k=A.useCallback(async()=>{if(y({isOpen:!1,remainingCount:0}),!x)try{E(!0);const j=r.scores||{},O=Vh(j),P={...r,ladderScore:O,lastLadderSubmission:new Date().toISOString()};d(P);try{const W={...r,ladderScore:O,lastLadderSubmission:new Date().toISOString(),updatedAt:new Date().toISOString()};localStorage.setItem("userData",JSON.stringify(W)),localStorage.setItem("lastSavedUserData",JSON.stringify(W));const de=Je(Te,"users",ue.currentUser.uid);await Yn(de,{ladderScore:O,lastLadderSubmission:new Date().toISOString(),updatedAt:new Date().toISOString()},{merge:!0}),console.log("天梯分數已立即保存到 Firebase:",O)}catch(W){throw console.error("保存天梯分數失敗:",W),W}const ne=new Date;U(W=>({lastSubmissionTime:ne,dailySubmissionCount:W.dailySubmissionCount+1,lastSubmissionDate:ne.toDateString()})),z({isOpen:!0,title:"提交成功",message:`您的分數 ${O} 已成功提交到天梯！`,type:"success",onAction:()=>{z(W=>({...W,isOpen:!1})),Q("/ladder",{state:{forceReload:!0,from:"/user-info",timestamp:Date.now()}})},actionText:"立即查看天梯"}),setTimeout(()=>{z(W=>({...W,isOpen:!1}))},5e3)}catch(j){console.error("提交到天梯失敗:",j),z({isOpen:!0,title:"提交失敗",message:"提交到天梯時發生錯誤，請稍後再試",type:"error"})}finally{E(!1)}},[r.scores,d,x,Q]),F=A.useCallback(()=>{y({isOpen:!1,remainingCount:0})},[]),ee=A.useCallback(async()=>{if(!ue.currentUser){z({isOpen:!0,title:"需要登入",message:"請先登入以提交到天梯",type:"warning"});return}const j=r.scores||{},O=Object.values(j).filter(P=>P>0).length;if(O<5){z({isOpen:!0,title:"評測未完成",message:`請先完成全部5項評測（目前完成 ${O}/5 項）`,type:"warning"});return}N()},[r,N,z]),J=A.useMemo(()=>{const j=r.scores||_s;return[{name:"力量",value:j.strength?Number(j.strength).toFixed(2)*1:0,icon:"💪"},{name:"爆發力",value:j.explosivePower?Number(j.explosivePower).toFixed(2)*1:0,icon:"⚡"},{name:"心肺耐力",value:j.cardio?Number(j.cardio).toFixed(2)*1:0,icon:"❤️"},{name:"骨骼肌肉量",value:j.muscleMass?Number(j.muscleMass).toFixed(2)*1:0,icon:"🥩"},{name:"FFMI",value:j.bodyFat?Number(j.bodyFat).toFixed(2)*1:0,icon:"📊"}]},[r.scores]),q=A.useMemo(()=>sessionStorage.getItem("guestMode")==="true",[]),D=({payload:j,x:O,y:P})=>{const ne=J.find(xe=>xe.name===j.value);let W=O,de=P;const pe=Math.sqrt(O*O+P*P),ve=Math.atan2(P,O);return j.value==="力量"?(W=O,de=P-pe*.12):j.value==="爆發力"?(W=O+Math.cos(ve)*(pe*.03),de=P+Math.sin(ve)*(pe*.06)):j.value==="FFMI"?(W=O+Math.cos(ve)*(pe*-.2),de=P+Math.sin(ve)*(pe*.06)):j.value==="心肺耐力"?(W=O+Math.cos(ve)*(pe*.01),de=P+Math.sin(ve)*(pe*.06)):j.value==="骨骼肌肉量"?(W=O+Math.cos(ve)*(pe*-.05),de=P+Math.sin(ve)*(pe*.06)):(W=O+Math.cos(ve)*(pe*.1),de=P+Math.sin(ve)*(pe*.1)),l.jsxs("g",{transform:`translate(${W},${de})`,children:[l.jsx("defs",{children:l.jsxs("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[l.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),l.jsxs("feMerge",{children:[l.jsx("feMergeNode",{in:"coloredBlur"}),l.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),l.jsx("circle",{cx:0,cy:0,r:16,fill:"rgba(129, 216, 208, 0.1)",filter:"url(#glow)"}),l.jsx("circle",{cx:0,cy:0,r:14,fill:"rgba(255, 255, 255, 0.95)",stroke:"rgba(129, 216, 208, 0.4)",strokeWidth:2,filter:"drop-shadow(0 2px 4px rgba(129, 216, 208, 0.2))"}),l.jsx("text",{x:0,y:-8,textAnchor:"middle",fill:"#4a5568",fontSize:"16",fontWeight:"600",dominantBaseline:"middle",filter:"drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1))",children:ne==null?void 0:ne.icon}),l.jsx("text",{x:0,y:12,textAnchor:"middle",fill:"#2d3748",fontSize:"13",fontWeight:"700",dominantBaseline:"middle",filter:"drop-shadow(0 1px 3px rgba(255, 255, 255, 0.9))",children:j.value})]})};D.propTypes={payload:ie.shape({value:ie.string.isRequired}).isRequired,x:ie.number.isRequired,y:ie.number.isRequired},A.useEffect(()=>{if(!ue){b("無法初始化身份驗證，請檢查 Firebase 配置並稍後再試。"),console.error("auth 未初始化");return}const j=ue.onAuthStateChanged(O=>{console.log("UserInfo - 認證狀態變更:",O==null?void 0:O.email),I(O),!O&&!q&&Q("/login")});return()=>j()},[]),A.useEffect(()=>{(async()=>{w&&!_&&!p&&(console.log("UserInfo - 檢查資料載入狀態"),!r.height&&!r.weight&&!r.age&&(console.log("UserInfo - 資料為空，嘗試重新載入"),await m(w,!0)),Z(!0))})()},[w,_,p,m,r.height,r.weight,r.age]),A.useEffect(()=>{var ne,W;const j=["/strength","/explosive-power","/cardio","/muscle-mass","/body-fat"],O=(ne=re.state)==null?void 0:ne.from;O&&j.includes(O)&&setTimeout(()=>{oe.current&&oe.current.scrollIntoView({behavior:"smooth",block:"center"})},300);const P=(W=re.state)==null?void 0:W.scrollTo;P&&setTimeout(()=>{P==="radar"&&oe.current?oe.current.scrollIntoView({behavior:"smooth",block:"center"}):P==="tests"&&G.current&&G.current.scrollIntoView({behavior:"smooth",block:"start"})},300)},[re]),A.useEffect(()=>{(()=>{try{const O=localStorage.getItem("ladderSubmissionState");if(O){const P=JSON.parse(O),ne=new Date().toDateString();P.lastSubmissionDate!==ne?U({lastSubmissionTime:null,dailySubmissionCount:0,lastSubmissionDate:ne}):U(P)}}catch(O){console.error("載入提交狀態失敗:",O)}})()},[]),A.useEffect(()=>{V.lastSubmissionDate&&localStorage.setItem("ladderSubmissionState",JSON.stringify(V))},[V]),A.useEffect(()=>{if(o&&Object.keys(o).length>0){console.log("收到測試數據:",o);const j=setTimeout(()=>{d(O=>{const ne={...O.scores||_s,...o.distance!==void 0&&{cardio:o.score||0},...o.squat!==void 0&&{strength:o.averageScore||0},...o.jumpHeight!==void 0&&{explosivePower:o.finalScore||0},...o.smm!==void 0&&{muscleMass:o.finalScore||0},...o.bodyFat!==void 0&&{bodyFat:o.ffmiScore||0}};return console.log("💾 防抖後更新測試數據分數（5秒防抖）"),{...O,scores:ne,ladderScore:O.ladderScore||0}})},5e3);return u&&setTimeout(u,6e3),()=>clearTimeout(j)}},[o,u]);const K=A.useCallback(()=>{const{height:j,weight:O,age:P,gender:ne}=r;return!j||!O||!P||!ne?(b("請填寫所有欄位"),!1):j<=0||O<=0||P<=0?(b("身高、體重和年齡必須大於 0"),!1):Kv.includes(ne)?!0:(b("請選擇有效的性別"),!1)},[r]),Ee=A.useCallback(async j=>{if(j.preventDefault(),b(null),E(!0),!K()){E(!1);return}const O={...r,height:Number(r.height)||0,weight:Number(r.weight)||0,age:Number(r.age)||0,gender:r.gender,scores:r.scores||_s,ladderScore:r.ladderScore||0,lastActive:new Date().toISOString()};try{d(O),z({isOpen:!0,title:"儲存成功",message:"資料已儲存成功！",type:"success"})}catch(P){z(q?{isOpen:!0,title:"訪客模式",message:"訪客模式下無法保存到雲端，但您現在可以開始進行評測了！",type:"info"}:{isOpen:!0,title:"儲存失敗",message:`儲存失敗：${P.message}`,type:"error"})}finally{E(!1)}},[r,K,q,d]),Re=A.useMemo(()=>{const j=(r==null?void 0:r.scores)||_s,O=Object.values(j).filter(ne=>ne>0);return O.length?(O.reduce((ne,W)=>ne+Number(W),0)/O.length).toFixed(2):0},[r==null?void 0:r.scores]),Ue=A.useMemo(()=>{const j=(r==null?void 0:r.scores)||_s;return Vh(j)},[r==null?void 0:r.scores]),_e=(r==null?void 0:r.ladderScore)||0,qe=A.useMemo(()=>{const j=(r==null?void 0:r.scores)||_s,O=Object.values(j).filter(ne=>ne>0).length;return{completedCount:O,isFullyCompleted:O===5,progress:O/5*100}},[r==null?void 0:r.scores]),et=A.useCallback(async()=>{if(!(r!=null&&r.userId)||!_e||_e<=0){he(null);return}try{const j=It(Te,"users"),O=pn(j,cn("ladderScore",">",0),Io("ladderScore","desc"),Ll(100)),P=await vn(O),ne=[];P.forEach(de=>{const pe=de.data();pe.ladderScore>0&&ne.push({id:de.id,...pe})});const W=ne.findIndex(de=>de.id===r.userId);he(W!==-1?W+1:null)}catch(j){console.error("獲取用戶排名失敗:",j),he(null)}},[r==null?void 0:r.userId,_e,he]);A.useEffect(()=>{et()},[et,d]);const Ct=A.useCallback(j=>{const O=j.target.value,P=/[\u4e00-\u9fff]/.test(O);let ne=!0,W="";if(P?O.length>8&&(ne=!1,W="暱稱不能超過8個中文字"):O.length>16&&(ne=!1,W="暱稱不能超過16個英文字元"),!ne){z({isOpen:!0,title:"字數限制",message:W,type:"warning"});return}d(de=>({...de,nickname:O})),H.current&&clearTimeout(H.current),H.current=setTimeout(()=>{H.current=null},1e3)},[d,z]),Ht=A.useCallback(()=>{var P;const j=(P=ue.currentUser)==null?void 0:P.email,O=rv(j);d(ne=>({...ne,nickname:O,ladderScore:ne.ladderScore||0}))},[d]),Pe=A.useCallback(()=>{if(!ue.currentUser){z({isOpen:!0,title:"需要登入",message:"請先登入以儲存結果",type:"warning"});return}const j={date:new Date().toLocaleDateString("zh-TW"),scores:r.scores,averageScore:Re};f(j),z({isOpen:!0,title:"儲存成功",message:"結果已儲存",type:"success"}),setTimeout(()=>{z(O=>({...O,isOpen:!1}))},2e3)},[r.scores,Re,f,z]),St=A.useCallback(async j=>{if(!r.height||!r.weight||!r.age||!r.gender){z({isOpen:!0,title:"需要基本資料",message:"請先填寫並儲存您的身高、體重、年齡和性別，才能開始評測！",type:"warning"});return}K()?Q(j,{state:{from:"/user-info"}}):z({isOpen:!0,title:"資料未保存",message:"請確保資料已正確保存後再進行評測！",type:"warning"})},[r,K,Q,z]),yn=A.useCallback(()=>{localStorage.removeItem("savedEmail"),localStorage.removeItem("savedPassword"),ue.currentUser&&ue.signOut().catch(j=>console.error("登出失敗:",j)),s(),Q("/login")},[s,Q]),Rt=A.useCallback(j=>{const{name:O,value:P}=j.target;let ne=P;O==="gender"||["profession"].includes(O)?ne=P:["weeklyTrainingHours","trainingYears"].includes(O)?ne=P===""?"":Number(P):ne=P===""?0:Number(P),d(W=>({...W,[O]:ne,ladderScore:W.ladderScore||0}))},[d]),ut=async j=>{var P;se(null);const O=j.target.files[0];if(O){if(!O.type.startsWith("image/")){se("請選擇圖片檔案");return}if(O.size>2*1024*1024){se("圖片大小請勿超過 2MB");return}fe(!0);try{const ne=await Zv(O,307200,192,192);if(ne.size>350*1024){se("壓縮後圖片仍超過 350KB，請選擇更小的圖片"),fe(!1);return}const W=(P=ue.currentUser)==null?void 0:P.uid;if(!W)throw new Error("未登入，無法上傳頭像");console.log("🔧 開始上傳頭像:",{userId:W,fileSize:ne.size});const de=ev(Co,`avatars/${W}/avatar.jpg`),pe={contentType:"image/jpeg",customMetadata:{"uploaded-by":W,"upload-time":new Date().toISOString()}};await P1(de,ne,pe),console.log("✅ 頭像上傳成功");const ve=await W1(de);console.log("✅ 獲取下載 URL 成功:",ve),d(xe=>({...xe,avatarUrl:ve,ladderScore:xe.ladderScore||0}));try{const xe=Je(Te,"users",W);await Vn(xe,{avatarUrl:ve,updatedAt:new Date().toISOString()}),console.log("頭像已立即保存到 Firebase"),z({isOpen:!0,title:"頭像上傳成功",message:"您的頭像已成功更新！",type:"success"}),setTimeout(()=>{z(me=>({...me,isOpen:!1}))},2e3)}catch(xe){console.error("頭像保存到 Firebase 失敗:",xe),se("頭像保存失敗: "+xe.message)}}catch(ne){se("頭像上傳失敗: "+ne.message)}finally{fe(!1)}}};return p&&!_?l.jsx("div",{className:"user-info-container",children:l.jsx("div",{className:"loading-message",children:l.jsx("p",{children:"正在載入用戶資料..."})})}):l.jsxs("div",{className:"user-info-container",children:[l.jsx(Hm,{isOpen:ae.isOpen,onClose:()=>{console.log("Modal onClose triggered, current state:",ae),z(j=>(console.log("Setting modal state to closed"),{...j,isOpen:!1}))},title:ae.title,message:ae.message,type:ae.type,onAction:ae.onAction,actionText:ae.actionText}),l.jsx(ko,{isOpen:ge.isOpen,onConfirm:k,onCancel:F,remainingCount:ge.remainingCount}),v&&l.jsx("p",{className:"error-message",children:v}),l.jsxs("div",{className:"avatar-section",children:[l.jsx("div",{className:"avatar-container",children:l.jsx("img",{src:q?"/guest-avatar.svg":(r==null?void 0:r.avatarUrl)||"/default-avatar.svg",alt:"頭像",className:"user-avatar",onError:j=>{j.target.src="/default-avatar.svg"}})}),l.jsxs("div",{className:"avatar-actions-container",children:[!q&&l.jsxs("label",{className:"avatar-upload-label",children:[le?"上傳中...":"更換頭像",l.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:ut,disabled:le})]}),q&&l.jsx("div",{className:"guest-avatar-note",children:l.jsx("span",{children:"訪客模式"})})]}),te&&l.jsx("div",{className:"avatar-error",children:te})]}),(w||q)&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"page-header",children:[l.jsx("h1",{className:"page-title",children:"身體狀態與表現總覽"}),l.jsx("div",{className:"page-subtitle",children:"完善您的個人資料，開始健身之旅"})]}),l.jsx("div",{className:"form-card",children:l.jsxs("form",{className:"user-form",onSubmit:Ee,children:[l.jsxs("div",{className:"form-section",children:[l.jsxs("div",{className:"section-header",children:[l.jsx("h3",{className:"section-title",children:"基本資料"}),w&&l.jsx("button",{type:"button",onClick:yn,title:"登出",className:"user-info__logout-btn",onMouseEnter:j=>{const O=document.createElement("div");O.innerText="登出",O.style.position="absolute",O.style.bottom="44px",O.style.left="50%",O.style.transform="translateX(-50%)",O.style.background="rgba(60,60,60,0.95)",O.style.color="#fff",O.style.padding="6px 14px",O.style.borderRadius="6px",O.style.fontSize="13px",O.style.whiteSpace="nowrap",O.style.pointerEvents="none",O.style.zIndex="1001",O.className="logout-tooltip",j.currentTarget.parentNode.appendChild(O)},onMouseLeave:j=>{const O=j.currentTarget.parentNode.querySelector(".logout-tooltip");O&&O.remove()},children:l.jsx("span",{className:"user-info__logout-icon",children:"⎋"})})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"nickname",className:"form-label",children:"暱稱"}),l.jsxs("div",{className:"nickname-input-group",children:[l.jsx("input",{id:"nickname",name:"nickname",type:"text",value:(r==null?void 0:r.nickname)||"",onChange:Ct,placeholder:"請輸入暱稱",className:"form-input",maxLength:"16"}),l.jsx("button",{type:"button",onClick:Ht,className:"generate-nickname-btn",children:"生成暱稱"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"gender",className:"form-label",children:"性別"}),l.jsxs("select",{id:"gender",name:"gender",value:(r==null?void 0:r.gender)||"",onChange:Rt,className:"form-input",required:!0,children:[l.jsx("option",{value:"",children:"請選擇性別"}),l.jsx("option",{value:"male",children:"男性"}),l.jsx("option",{value:"female",children:"女性"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"age",className:"form-label",children:"年齡"}),l.jsx("input",{id:"age",name:"age",type:"number",value:(r==null?void 0:r.age)||"",onChange:Rt,placeholder:"年齡",className:"form-input",required:!0,min:"0",step:"1"})]})]}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"height",className:"form-label",children:"身高 (cm)"}),l.jsx("input",{id:"height",name:"height",type:"number",value:(r==null?void 0:r.height)||"",onChange:Rt,placeholder:"身高 (cm)",className:"form-input",required:!0,min:"0",step:"0.1"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"weight",className:"form-label",children:"體重 (kg)"}),l.jsx("input",{id:"weight",name:"weight",type:"number",value:(r==null?void 0:r.weight)||"",onChange:Rt,placeholder:"體重 (kg)",className:"form-input",required:!0,min:"0",step:"0.1"})]})]})]}),l.jsxs("div",{className:"form-section",children:[l.jsx("h3",{className:"section-title",children:"🏆 天梯排行榜設置"}),l.jsx("div",{className:"privacy-options",children:l.jsxs("label",{className:"privacy-option",children:[l.jsx("input",{type:"checkbox",checked:r.isAnonymousInLadder===!0,onChange:j=>d(O=>({...O,isAnonymousInLadder:j.target.checked}))}),l.jsxs("div",{className:"privacy-option-content",children:[l.jsx("span",{className:"privacy-option-title",children:"匿名參與天梯排名"}),l.jsx("span",{className:"privacy-option-desc",children:"勾選後將隱藏您的暱稱和頭像，以匿名方式顯示在排行榜中"})]})]})}),l.jsxs("div",{className:"training-info-section",children:[l.jsx("h4",{className:"training-info-title",children:"💪 訓練背景（選填）"}),l.jsx("p",{className:"training-info-desc",children:"分享您的訓練背景，激勵其他健身愛好者！"}),l.jsxs("div",{className:"form-row",children:[l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"profession",className:"form-label",children:"職業"}),l.jsx("input",{id:"profession",name:"profession",type:"text",value:(r==null?void 0:r.profession)||"",onChange:Rt,placeholder:"例如：工程師、學生、教師...",className:"form-input",maxLength:"100"})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"weeklyTrainingHours",className:"form-label",children:"每周訓練時數"}),l.jsx("input",{id:"weeklyTrainingHours",name:"weeklyTrainingHours",type:"number",value:(r==null?void 0:r.weeklyTrainingHours)||"",onChange:Rt,placeholder:"小時",className:"form-input",min:"0",max:"168",step:"0.5"})]})]}),l.jsxs("div",{className:"form-group",children:[l.jsx("label",{htmlFor:"trainingYears",className:"form-label",children:"訓練年資"}),l.jsx("input",{id:"trainingYears",name:"trainingYears",type:"number",value:(r==null?void 0:r.trainingYears)||"",onChange:Rt,placeholder:"年",className:"form-input",min:"0",max:"50",step:"0.5"})]})]})]}),l.jsx("div",{className:"form-actions",children:l.jsx("button",{type:"submit",className:"submit-btn",disabled:x,children:x?"儲存中...":"儲存資料"})})]})})]}),l.jsx("div",{id:"radar-section",className:"radar-section",ref:oe,children:l.jsxs("div",{className:"radar-card",children:[l.jsx("div",{className:"corner-decoration top-left"}),l.jsx("div",{className:"corner-decoration top-right"}),l.jsx("div",{className:"corner-decoration bottom-left"}),l.jsx("div",{className:"corner-decoration bottom-right"}),l.jsx("h2",{className:"radar-title",children:"表現總覽"}),x?l.jsxs("div",{className:"loading-container",children:[l.jsx("div",{className:"loading-spinner"}),l.jsx("p",{children:"正在載入數據..."})]}):l.jsx("div",{className:"radar-chart-container",children:l.jsx(lr,{width:"100%",height:400,children:l.jsxs(om,{data:J,children:[l.jsx(um,{gridType:"polygon",stroke:"rgba(129, 216, 208, 0.25)",strokeWidth:2,strokeDasharray:"4 4"}),l.jsx(dm,{dataKey:"name",tick:l.jsx(D,{}),axisLine:!1}),l.jsx(fm,{angle:90,domain:[0,100],tickCount:5,tick:{fontSize:12,fill:"#2d3748",fontWeight:600},axisLine:!1}),l.jsx(hm,{name:"您的表現",dataKey:"value",stroke:"#81D8D0",fill:"url(#tiffanyGradient)",fillOpacity:.8,strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("defs",{children:l.jsxs("linearGradient",{id:"tiffanyGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[l.jsx("stop",{offset:"0%",stopColor:"#81D8D0",stopOpacity:.9}),l.jsx("stop",{offset:"50%",stopColor:"#5F9EA0",stopOpacity:.7}),l.jsx("stop",{offset:"100%",stopColor:"#81D8D0",stopOpacity:.6})]})})]})})}),!x&&l.jsxs("div",{className:"score-section",children:[Re>0&&l.jsxs("div",{className:"average-score-display",children:[l.jsxs("p",{className:"average-score",children:["⭐ 戰鬥力"," ",l.jsx("span",{className:"score-value-large",children:Re})]}),qe.isFullyCompleted&&l.jsxs("div",{className:"ladder-info",children:[l.jsxs("p",{className:"ladder-rank",children:["🏆 天梯排名:"," ",l.jsx("span",{className:"rank-value",children:ce||"未上榜"})]}),_e>0&&l.jsxs("p",{className:"submitted-score",children:["已提交分數:"," ",l.jsx("span",{className:"score-value",children:_e})]}),Ue>0&&Ue!==_e&&l.jsxs("p",{className:"current-score",children:["當前分數:"," ",l.jsx("span",{className:"score-value",children:Ue}),l.jsx("span",{className:"score-note",children:"（需提交更新）"})]})]})]}),l.jsxs("div",{className:"action-buttons-section",children:[Re>0&&l.jsxs("button",{onClick:Pe,className:"action-btn save-results-btn",disabled:x,children:[l.jsx("span",{className:"btn-icon",children:"💾"}),l.jsx("span",{className:"btn-text",children:"儲存評測結果"})]}),qe.isFullyCompleted&&l.jsxs("button",{onClick:ee,className:"action-btn submit-ladder-btn",disabled:x,children:[l.jsx("span",{className:"btn-icon",children:"🏆"}),l.jsx("span",{className:"btn-text",children:_e>0?"更新天梯分數":"提交到天梯"})]})]}),l.jsx("div",{className:"ladder-info-card",children:l.jsx("p",{className:"ladder-info-text",children:qe.isFullyCompleted?"完成五項評測，可參與天梯排名":`完成 ${qe.completedCount}/5 項評測後可參與天梯排名`})})]})]})}),l.jsxs("div",{className:"test-buttons-section",ref:G,children:[l.jsx("h3",{className:"section-title",children:"開始評測"}),l.jsxs("div",{className:"test-buttons-grid",children:[l.jsxs("button",{onClick:()=>St("/strength"),className:"test-btn strength-btn",children:[l.jsx("span",{className:"test-icon",children:"💪"}),l.jsx("span",{className:"test-label",children:"力量評測"})]}),l.jsxs("button",{onClick:()=>St("/explosive-power"),className:"test-btn explosive-btn",children:[l.jsx("span",{className:"test-icon",children:"⚡"}),l.jsx("span",{className:"test-label",children:"爆發力測試"})]}),l.jsxs("button",{onClick:()=>St("/cardio"),className:"test-btn cardio-btn",children:[l.jsx("span",{className:"test-icon",children:"❤️"}),l.jsx("span",{className:"test-label",children:"心肺耐力測試"})]}),l.jsxs("button",{onClick:()=>St("/muscle-mass"),className:"test-btn muscle-btn",children:[l.jsx("span",{className:"test-icon",children:"🥩"}),l.jsx("span",{className:"test-label",children:"骨骼肌肉量"})]}),l.jsxs("button",{onClick:()=>St("/body-fat"),className:"test-btn bodyfat-btn",children:[l.jsx("span",{className:"test-icon",children:"📊"}),l.jsx("span",{className:"test-label",children:"體脂肪率與FFMI"})]})]})]}),ge.isOpen&&l.jsx(ko,{isOpen:ge.isOpen,onConfirm:k,onCancel:F,remainingCount:ge.remainingCount})]})}qm.propTypes={testData:ie.shape({distance:ie.number,score:ie.number,squat:ie.number,averageScore:ie.number,jumpHeight:ie.number,finalScore:ie.number,smm:ie.number,bodyFat:ie.number,ffmiScore:ie.number}),onLogout:ie.func.isRequired,clearTestData:ie.func.isRequired};const Jv={50:{Beginner:24,Novice:38,Intermediate:57,Advanced:79,Elite:103},55:{Beginner:29,Novice:45,Intermediate:64,Advanced:87,Elite:113},60:{Beginner:34,Novice:51,Intermediate:72,Advanced:96,Elite:123},65:{Beginner:39,Novice:57,Intermediate:79,Advanced:104,Elite:132},70:{Beginner:44,Novice:62,Intermediate:85,Advanced:112,Elite:141},75:{Beginner:49,Novice:68,Intermediate:92,Advanced:119,Elite:149},80:{Beginner:53,Novice:74,Intermediate:98,Advanced:127,Elite:157},85:{Beginner:58,Novice:79,Intermediate:105,Advanced:134,Elite:165},90:{Beginner:62,Novice:84,Intermediate:111,Advanced:141,Elite:172},95:{Beginner:67,Novice:89,Intermediate:116,Advanced:147,Elite:180},100:{Beginner:71,Novice:94,Intermediate:122,Advanced:153,Elite:187},105:{Beginner:75,Novice:99,Intermediate:128,Advanced:160,Elite:194},110:{Beginner:80,Novice:104,Intermediate:133,Advanced:166,Elite:200},115:{Beginner:84,Novice:109,Intermediate:138,Advanced:172,Elite:207},120:{Beginner:88,Novice:113,Intermediate:143,Advanced:177,Elite:213},125:{Beginner:92,Novice:118,Intermediate:148,Advanced:183,Elite:219},130:{Beginner:95,Novice:122,Intermediate:153,Advanced:188,Elite:225},135:{Beginner:99,Novice:126,Intermediate:158,Advanced:194,Elite:231},140:{Beginner:103,Novice:130,Intermediate:163,Advanced:199,Elite:236}},Pv={40:{Beginner:8,Novice:18,Intermediate:32,Advanced:50,Elite:70},45:{Beginner:10,Novice:21,Intermediate:36,Advanced:55,Elite:76},50:{Beginner:12,Novice:24,Intermediate:40,Advanced:59,Elite:82},55:{Beginner:15,Novice:27,Intermediate:43,Advanced:64,Elite:87},60:{Beginner:17,Novice:29,Intermediate:47,Advanced:68,Elite:92},65:{Beginner:19,Novice:32,Intermediate:50,Advanced:72,Elite:96},70:{Beginner:20,Novice:34,Intermediate:53,Advanced:75,Elite:101},75:{Beginner:22,Novice:37,Intermediate:56,Advanced:79,Elite:105},80:{Beginner:24,Novice:39,Intermediate:59,Advanced:82,Elite:109},85:{Beginner:26,Novice:41,Intermediate:62,Advanced:86,Elite:112},90:{Beginner:28,Novice:44,Intermediate:64,Advanced:89,Elite:116},95:{Beginner:29,Novice:46,Intermediate:67,Advanced:92,Elite:119},100:{Beginner:31,Novice:48,Intermediate:69,Advanced:95,Elite:123},105:{Beginner:33,Novice:50,Intermediate:72,Advanced:98,Elite:126},110:{Beginner:34,Novice:52,Intermediate:74,Advanced:100,Elite:129},115:{Beginner:36,Novice:54,Intermediate:76,Advanced:103,Elite:132},120:{Beginner:37,Novice:56,Intermediate:79,Advanced:106,Elite:135}},Wv={50:{Beginner:33,Novice:52,Intermediate:76,Advanced:104,Elite:136},55:{Beginner:40,Novice:60,Intermediate:86,Advanced:116,Elite:149},60:{Beginner:47,Novice:68,Intermediate:95,Advanced:127,Elite:161},65:{Beginner:53,Novice:76,Intermediate:104,Advanced:137,Elite:173},70:{Beginner:59,Novice:83,Intermediate:113,Advanced:147,Elite:184},75:{Beginner:66,Novice:91,Intermediate:122,Advanced:157,Elite:195},80:{Beginner:72,Novice:98,Intermediate:130,Advanced:166,Elite:205},85:{Beginner:78,Novice:105,Intermediate:138,Advanced:175,Elite:215},90:{Beginner:83,Novice:112,Intermediate:146,Advanced:184,Elite:225},95:{Beginner:89,Novice:118,Intermediate:153,Advanced:192,Elite:234},100:{Beginner:95,Novice:125,Intermediate:160,Advanced:201,Elite:243},105:{Beginner:100,Novice:131,Intermediate:168,Advanced:209,Elite:252},110:{Beginner:106,Novice:137,Intermediate:174,Advanced:216,Elite:260},115:{Beginner:111,Novice:143,Intermediate:181,Advanced:224,Elite:269},120:{Beginner:116,Novice:149,Intermediate:188,Advanced:231,Elite:277},125:{Beginner:121,Novice:155,Intermediate:194,Advanced:238,Elite:284},130:{Beginner:126,Novice:160,Intermediate:201,Advanced:245,Elite:292},135:{Beginner:131,Novice:166,Intermediate:207,Advanced:252,Elite:299},140:{Beginner:136,Novice:171,Intermediate:213,Advanced:259,Elite:307}},ex={40:{Beginner:17,Novice:31,Intermediate:51,Advanced:75,Elite:101},45:{Beginner:20,Novice:36,Intermediate:56,Advanced:81,Elite:109},50:{Beginner:23,Novice:39,Intermediate:61,Advanced:87,Elite:115},55:{Beginner:26,Novice:43,Intermediate:65,Advanced:92,Elite:122},60:{Beginner:29,Novice:47,Intermediate:70,Advanced:97,Elite:128},65:{Beginner:32,Novice:50,Intermediate:74,Advanced:102,Elite:133},70:{Beginner:34,Novice:53,Intermediate:78,Advanced:106,Elite:138},75:{Beginner:37,Novice:56,Intermediate:81,Advanced:111,Elite:143},80:{Beginner:39,Novice:59,Intermediate:85,Advanced:115,Elite:148},85:{Beginner:41,Novice:62,Intermediate:88,Advanced:119,Elite:152},90:{Beginner:44,Novice:65,Intermediate:91,Advanced:123,Elite:157},95:{Beginner:46,Novice:68,Intermediate:95,Advanced:126,Elite:161},100:{Beginner:48,Novice:70,Intermediate:98,Advanced:130,Elite:165},105:{Beginner:50,Novice:73,Intermediate:101,Advanced:133,Elite:169},110:{Beginner:52,Novice:75,Intermediate:103,Advanced:136,Elite:172},115:{Beginner:54,Novice:77,Intermediate:106,Advanced:140,Elite:176},120:{Beginner:56,Novice:80,Intermediate:109,Advanced:143,Elite:179}},tx={50:{Beginner:44,Novice:65,Intermediate:93,Advanced:125,Elite:160},55:{Beginner:51,Novice:74,Intermediate:103,Advanced:137,Elite:174},60:{Beginner:58,Novice:83,Intermediate:114,Advanced:149,Elite:187},65:{Beginner:66,Novice:92,Intermediate:124,Advanced:160,Elite:200},70:{Beginner:73,Novice:100,Intermediate:133,Advanced:171,Elite:212},75:{Beginner:79,Novice:108,Intermediate:142,Advanced:182,Elite:224},80:{Beginner:86,Novice:116,Intermediate:151,Advanced:192,Elite:235},85:{Beginner:93,Novice:123,Intermediate:160,Advanced:201,Elite:245},90:{Beginner:99,Novice:131,Intermediate:168,Advanced:211,Elite:256},95:{Beginner:105,Novice:138,Intermediate:176,Advanced:220,Elite:266},100:{Beginner:111,Novice:145,Intermediate:184,Advanced:228,Elite:275},105:{Beginner:117,Novice:151,Intermediate:192,Advanced:237,Elite:284},110:{Beginner:123,Novice:158,Intermediate:199,Advanced:245,Elite:293},115:{Beginner:129,Novice:164,Intermediate:206,Advanced:253,Elite:302},120:{Beginner:134,Novice:171,Intermediate:213,Advanced:261,Elite:311},125:{Beginner:140,Novice:177,Intermediate:220,Advanced:268,Elite:319},130:{Beginner:145,Novice:183,Intermediate:227,Advanced:276,Elite:327},135:{Beginner:150,Novice:188,Intermediate:233,Advanced:283,Elite:335},140:{Beginner:155,Novice:194,Intermediate:240,Advanced:290,Elite:342}},nx={40:{Beginner:24,Novice:40,Intermediate:62,Advanced:89,Elite:118},45:{Beginner:27,Novice:45,Intermediate:68,Advanced:95,Elite:126},50:{Beginner:31,Novice:49,Intermediate:73,Advanced:102,Elite:133},55:{Beginner:34,Novice:53,Intermediate:78,Advanced:107,Elite:140},60:{Beginner:37,Novice:57,Intermediate:83,Advanced:113,Elite:146},65:{Beginner:40,Novice:61,Intermediate:87,Advanced:118,Elite:152},70:{Beginner:43,Novice:64,Intermediate:91,Advanced:123,Elite:157},75:{Beginner:45,Novice:67,Intermediate:95,Advanced:127,Elite:163},80:{Beginner:48,Novice:71,Intermediate:99,Advanced:132,Elite:168},85:{Beginner:51,Novice:74,Intermediate:102,Advanced:136,Elite:172},90:{Beginner:53,Novice:77,Intermediate:106,Advanced:140,Elite:177},95:{Beginner:55,Novice:79,Intermediate:109,Advanced:144,Elite:181},100:{Beginner:58,Novice:82,Intermediate:112,Advanced:147,Elite:185},105:{Beginner:60,Novice:85,Intermediate:116,Advanced:151,Elite:189},110:{Beginner:62,Novice:87,Intermediate:119,Advanced:154,Elite:193},115:{Beginner:64,Novice:90,Intermediate:121,Advanced:158,Elite:197},120:{Beginner:66,Novice:92,Intermediate:124,Advanced:161,Elite:200}},ax={50:{Beginner:25,Novice:39,Intermediate:58,Advanced:81,Elite:105},55:{Beginner:28,Novice:43,Intermediate:63,Advanced:86,Elite:112},60:{Beginner:31,Novice:47,Intermediate:67,Advanced:92,Elite:118},65:{Beginner:34,Novice:51,Intermediate:72,Advanced:97,Elite:124},70:{Beginner:37,Novice:54,Intermediate:76,Advanced:101,Elite:129},75:{Beginner:39,Novice:57,Intermediate:80,Advanced:106,Elite:134},80:{Beginner:42,Novice:61,Intermediate:84,Advanced:110,Elite:139},85:{Beginner:45,Novice:64,Intermediate:87,Advanced:115,Elite:144},90:{Beginner:47,Novice:67,Intermediate:91,Advanced:119,Elite:149},95:{Beginner:50,Novice:70,Intermediate:94,Advanced:122,Elite:153},100:{Beginner:52,Novice:72,Intermediate:97,Advanced:126,Elite:157},105:{Beginner:54,Novice:75,Intermediate:101,Advanced:130,Elite:161},110:{Beginner:57,Novice:78,Intermediate:104,Advanced:133,Elite:165},115:{Beginner:59,Novice:80,Intermediate:107,Advanced:137,Elite:169},120:{Beginner:61,Novice:83,Intermediate:110,Advanced:140,Elite:172},125:{Beginner:63,Novice:85,Intermediate:112,Advanced:143,Elite:176},130:{Beginner:65,Novice:88,Intermediate:115,Advanced:146,Elite:179},135:{Beginner:67,Novice:90,Intermediate:118,Advanced:149,Elite:183},140:{Beginner:69,Novice:92,Intermediate:120,Advanced:152,Elite:186}},sx={40:{Beginner:14,Novice:24,Intermediate:36,Advanced:52,Elite:70},45:{Beginner:15,Novice:25,Intermediate:39,Advanced:55,Elite:72},50:{Beginner:17,Novice:27,Intermediate:41,Advanced:57,Elite:75},55:{Beginner:18,Novice:28,Intermediate:42,Advanced:59,Elite:78},60:{Beginner:19,Novice:30,Intermediate:44,Advanced:61,Elite:80},65:{Beginner:20,Novice:31,Intermediate:46,Advanced:63,Elite:82},70:{Beginner:21,Novice:32,Intermediate:47,Advanced:65,Elite:84},75:{Beginner:22,Novice:34,Intermediate:49,Advanced:66,Elite:86},80:{Beginner:23,Novice:35,Intermediate:50,Advanced:68,Elite:88},85:{Beginner:24,Novice:36,Intermediate:51,Advanced:69,Elite:89},90:{Beginner:24,Novice:37,Intermediate:52,Advanced:71,Elite:91},95:{Beginner:25,Novice:38,Intermediate:54,Advanced:72,Elite:93},100:{Beginner:26,Novice:39,Intermediate:55,Advanced:74,Elite:94},105:{Beginner:27,Novice:40,Intermediate:56,Advanced:75,Elite:95},110:{Beginner:27,Novice:40,Intermediate:57,Advanced:76,Elite:97},115:{Beginner:28,Novice:41,Intermediate:58,Advanced:77,Elite:98},120:{Beginner:29,Novice:42,Intermediate:59,Advanced:78,Elite:99}},lx={15:{Beginner:40,Novice:59,Intermediate:84,Advanced:112,Elite:144},20:{Beginner:46,Novice:68,Intermediate:96,Advanced:129,Elite:164},25:{Beginner:47,Novice:70,Intermediate:98,Advanced:132,Elite:169},30:{Beginner:47,Novice:70,Intermediate:98,Advanced:132,Elite:169},35:{Beginner:47,Novice:70,Intermediate:98,Advanced:132,Elite:169},40:{Beginner:47,Novice:70,Intermediate:98,Advanced:132,Elite:169},45:{Beginner:44,Novice:66,Intermediate:93,Advanced:125,Elite:160},50:{Beginner:42,Novice:62,Intermediate:88,Advanced:118,Elite:150},55:{Beginner:39,Novice:57,Intermediate:81,Advanced:109,Elite:139},60:{Beginner:35,Novice:52,Intermediate:74,Advanced:99,Elite:127},65:{Beginner:32,Novice:47,Intermediate:67,Advanced:90,Elite:115},70:{Beginner:29,Novice:42,Intermediate:60,Advanced:80,Elite:103},75:{Beginner:26,Novice:38,Intermediate:54,Advanced:72,Elite:92},80:{Beginner:23,Novice:34,Intermediate:48,Advanced:64,Elite:82},85:{Beginner:20,Novice:30,Intermediate:43,Advanced:58,Elite:74},90:{Beginner:18,Novice:27,Intermediate:39,Advanced:52,Elite:66}},ix={15:{Beginner:15,Novice:27,Intermediate:43,Advanced:63,Elite:86},20:{Beginner:17,Novice:31,Intermediate:49,Advanced:72,Elite:98},25:{Beginner:17,Novice:31,Intermediate:51,Advanced:74,Elite:101},30:{Beginner:17,Novice:31,Intermediate:51,Advanced:74,Elite:101},35:{Beginner:17,Novice:31,Intermediate:51,Advanced:74,Elite:101},40:{Beginner:17,Novice:31,Intermediate:51,Advanced:74,Elite:101},45:{Beginner:16,Novice:30,Intermediate:48,Advanced:70,Elite:96},50:{Beginner:15,Novice:28,Intermediate:45,Advanced:66,Elite:90},55:{Beginner:14,Novice:26,Intermediate:42,Advanced:61,Elite:83},60:{Beginner:13,Novice:24,Intermediate:38,Advanced:56,Elite:76},65:{Beginner:12,Novice:21,Intermediate:34,Advanced:50,Elite:69},70:{Beginner:11,Novice:19,Intermediate:31,Advanced:45,Elite:62},75:{Beginner:9,Novice:17,Intermediate:28,Advanced:40,Elite:55},80:{Beginner:8,Novice:15,Intermediate:25,Advanced:36,Elite:49},85:{Beginner:8,Novice:14,Intermediate:22,Advanced:32,Elite:44},90:{Beginner:7,Novice:12,Intermediate:20,Advanced:29,Elite:40}},rx={15:{Beginner:55,Novice:80,Intermediate:111,Advanced:147,Elite:187},20:{Beginner:62,Novice:91,Intermediate:127,Advanced:168,Elite:214},25:{Beginner:64,Novice:93,Intermediate:130,Advanced:173,Elite:219},30:{Beginner:64,Novice:93,Intermediate:130,Advanced:173,Elite:219},35:{Beginner:64,Novice:93,Intermediate:130,Advanced:173,Elite:219},40:{Beginner:64,Novice:93,Intermediate:130,Advanced:173,Elite:219},45:{Beginner:61,Novice:89,Intermediate:123,Advanced:164,Elite:208},50:{Beginner:57,Novice:83,Intermediate:116,Advanced:154,Elite:195},55:{Beginner:53,Novice:77,Intermediate:107,Advanced:142,Elite:180},60:{Beginner:48,Novice:70,Intermediate:98,Advanced:130,Elite:165},65:{Beginner:44,Novice:63,Intermediate:88,Advanced:117,Elite:149},70:{Beginner:39,Novice:57,Intermediate:79,Advanced:105,Elite:134},75:{Beginner:35,Novice:51,Intermediate:71,Advanced:94,Elite:119},80:{Beginner:31,Novice:46,Intermediate:63,Advanced:84,Elite:107},85:{Beginner:28,Novice:41,Intermediate:57,Advanced:75,Elite:96},90:{Beginner:25,Novice:37,Intermediate:51,Advanced:68,Elite:86}},cx={15:{Beginner:25,Novice:41,Intermediate:62,Advanced:88,Elite:116},20:{Beginner:29,Novice:47,Intermediate:71,Advanced:100,Elite:132},25:{Beginner:30,Novice:48,Intermediate:73,Advanced:103,Elite:136},30:{Beginner:30,Novice:48,Intermediate:73,Advanced:103,Elite:136},35:{Beginner:30,Novice:48,Intermediate:73,Advanced:103,Elite:136},40:{Beginner:30,Novice:48,Intermediate:73,Advanced:103,Elite:136},45:{Beginner:28,Novice:46,Intermediate:69,Advanced:97,Elite:129},50:{Beginner:26,Novice:43,Intermediate:65,Advanced:92,Elite:121},55:{Beginner:24,Novice:40,Intermediate:60,Advanced:85,Elite:112},60:{Beginner:22,Novice:36,Intermediate:55,Advanced:77,Elite:102},65:{Beginner:20,Novice:33,Intermediate:50,Advanced:70,Elite:92},70:{Beginner:18,Novice:29,Intermediate:44,Advanced:63,Elite:83},75:{Beginner:16,Novice:26,Intermediate:40,Advanced:56,Elite:74},80:{Beginner:14,Novice:24,Intermediate:36,Advanced:50,Elite:66},85:{Beginner:13,Novice:21,Intermediate:32,Advanced:45,Elite:59},90:{Beginner:12,Novice:19,Intermediate:29,Advanced:40,Elite:54}},ox={15:{Beginner:67,Novice:95,Intermediate:130,Advanced:170,Elite:213},20:{Beginner:76,Novice:109,Intermediate:148,Advanced:194,Elite:244},25:{Beginner:78,Novice:112,Intermediate:152,Advanced:200,Elite:250},30:{Beginner:78,Novice:112,Intermediate:152,Advanced:200,Elite:250},35:{Beginner:78,Novice:112,Intermediate:152,Advanced:200,Elite:250},40:{Beginner:78,Novice:112,Intermediate:152,Advanced:200,Elite:250},45:{Beginner:74,Novice:106,Intermediate:145,Advanced:189,Elite:238},50:{Beginner:70,Novice:99,Intermediate:136,Advanced:178,Elite:223},55:{Beginner:65,Novice:92,Intermediate:125,Advanced:164,Elite:206},60:{Beginner:59,Novice:84,Intermediate:115,Advanced:150,Elite:188},65:{Beginner:53,Novice:76,Intermediate:103,Advanced:135,Elite:170},70:{Beginner:48,Novice:68,Intermediate:93,Advanced:122,Elite:153},75:{Beginner:43,Novice:61,Intermediate:83,Advanced:109,Elite:136},80:{Beginner:38,Novice:54,Intermediate:74,Advanced:97,Elite:122},85:{Beginner:34,Novice:49,Intermediate:67,Advanced:87,Elite:109},90:{Beginner:31,Novice:44,Intermediate:60,Advanced:79,Elite:99}},ux={15:{Beginner:32,Novice:51,Intermediate:74,Advanced:102,Elite:133},20:{Beginner:37,Novice:58,Intermediate:85,Advanced:117,Elite:153},25:{Beginner:38,Novice:60,Intermediate:87,Advanced:120,Elite:157},30:{Beginner:38,Novice:60,Intermediate:87,Advanced:120,Elite:157},35:{Beginner:38,Novice:60,Intermediate:87,Advanced:120,Elite:157},40:{Beginner:38,Novice:60,Intermediate:87,Advanced:120,Elite:157},45:{Beginner:36,Novice:57,Intermediate:83,Advanced:114,Elite:149},50:{Beginner:34,Novice:53,Intermediate:78,Advanced:107,Elite:139},55:{Beginner:31,Novice:49,Intermediate:72,Advanced:99,Elite:129},60:{Beginner:29,Novice:45,Intermediate:66,Advanced:90,Elite:118},65:{Beginner:26,Novice:41,Intermediate:59,Advanced:82,Elite:106},70:{Beginner:23,Novice:36,Intermediate:53,Advanced:73,Elite:95},75:{Beginner:21,Novice:33,Intermediate:48,Advanced:66,Elite:85},80:{Beginner:19,Novice:29,Intermediate:43,Advanced:59,Elite:76},85:{Beginner:17,Novice:26,Intermediate:38,Advanced:53,Elite:68},90:{Beginner:15,Novice:23,Intermediate:34,Advanced:47,Elite:62}},dx={15:{Beginner:33,Novice:49,Intermediate:70,Advanced:94,Elite:120},20:{Beginner:37,Novice:56,Intermediate:80,Advanced:107,Elite:138},25:{Beginner:38,Novice:58,Intermediate:82,Advanced:110,Elite:141},30:{Beginner:38,Novice:58,Intermediate:82,Advanced:110,Elite:141},35:{Beginner:38,Novice:58,Intermediate:82,Advanced:110,Elite:141},40:{Beginner:38,Novice:58,Intermediate:82,Advanced:110,Elite:141},45:{Beginner:36,Novice:55,Intermediate:78,Advanced:105,Elite:134},50:{Beginner:34,Novice:51,Intermediate:73,Advanced:98,Elite:126},55:{Beginner:32,Novice:47,Intermediate:67,Advanced:91,Elite:117},60:{Beginner:29,Novice:43,Intermediate:61,Advanced:83,Elite:106},65:{Beginner:26,Novice:39,Intermediate:56,Advanced:75,Elite:96},70:{Beginner:23,Novice:35,Intermediate:50,Advanced:67,Elite:86},75:{Beginner:21,Novice:31,Intermediate:45,Advanced:60,Elite:77},80:{Beginner:19,Novice:28,Intermediate:40,Advanced:54,Elite:69},85:{Beginner:17,Novice:25,Intermediate:36,Advanced:48,Elite:62},90:{Beginner:15,Novice:23,Intermediate:32,Advanced:43,Elite:56}},fx={15:{Beginner:16,Novice:26,Intermediate:39,Advanced:54,Elite:71},20:{Beginner:19,Novice:30,Intermediate:45,Advanced:62,Elite:81},25:{Beginner:19,Novice:31,Intermediate:46,Advanced:64,Elite:83},30:{Beginner:19,Novice:31,Intermediate:46,Advanced:64,Elite:83},35:{Beginner:19,Novice:31,Intermediate:46,Advanced:64,Elite:83},40:{Beginner:19,Novice:31,Intermediate:46,Advanced:64,Elite:83},45:{Beginner:18,Novice:29,Intermediate:43,Advanced:60,Elite:79},50:{Beginner:17,Novice:27,Intermediate:41,Advanced:57,Elite:74},55:{Beginner:16,Novice:25,Intermediate:38,Advanced:52,Elite:69},60:{Beginner:15,Novice:23,Intermediate:34,Advanced:48,Elite:63},65:{Beginner:13,Novice:21,Intermediate:31,Advanced:43,Elite:57},70:{Beginner:12,Novice:19,Intermediate:28,Advanced:39,Elite:51},75:{Beginner:11,Novice:17,Intermediate:25,Advanced:35,Elite:45},80:{Beginner:9,Novice:15,Intermediate:22,Advanced:31,Elite:41},85:{Beginner:8,Novice:13,Intermediate:20,Advanced:28,Elite:36},90:{Beginner:8,Novice:12,Intermediate:18,Advanced:25,Elite:33}},hx={50:{Beginner:15,Novice:25,Intermediate:38,Advanced:53,Elite:71},55:{Beginner:18,Novice:29,Intermediate:42,Advanced:59,Elite:77},60:{Beginner:21,Novice:32,Intermediate:47,Advanced:64,Elite:84},65:{Beginner:24,Novice:36,Intermediate:52,Advanced:70,Elite:90},70:{Beginner:27,Novice:40,Intermediate:56,Advanced:75,Elite:95},75:{Beginner:30,Novice:43,Intermediate:60,Advanced:80,Elite:101},80:{Beginner:33,Novice:47,Intermediate:64,Advanced:84,Elite:106},85:{Beginner:36,Novice:50,Intermediate:68,Advanced:89,Elite:111},90:{Beginner:39,Novice:54,Intermediate:72,Advanced:93,Elite:116},95:{Beginner:41,Novice:57,Intermediate:76,Advanced:97,Elite:121},100:{Beginner:44,Novice:60,Intermediate:79,Advanced:102,Elite:125},105:{Beginner:47,Novice:63,Intermediate:83,Advanced:106,Elite:130},110:{Beginner:49,Novice:66,Intermediate:86,Advanced:109,Elite:134},115:{Beginner:52,Novice:69,Intermediate:90,Advanced:113,Elite:138},120:{Beginner:54,Novice:72,Intermediate:93,Advanced:117,Elite:142},125:{Beginner:57,Novice:75,Intermediate:96,Advanced:120,Elite:146},130:{Beginner:59,Novice:77,Intermediate:99,Advanced:124,Elite:150},135:{Beginner:61,Novice:80,Intermediate:102,Advanced:127,Elite:154},140:{Beginner:64,Novice:83,Intermediate:105,Advanced:131,Elite:157}},mx={15:{Beginner:25,Novice:38,Intermediate:55,Advanced:74,Elite:96},20:{Beginner:29,Novice:44,Intermediate:63,Advanced:85,Elite:109},25:{Beginner:30,Novice:45,Intermediate:64,Advanced:87,Elite:112},30:{Beginner:30,Novice:45,Intermediate:64,Advanced:87,Elite:112},35:{Beginner:30,Novice:45,Intermediate:64,Advanced:87,Elite:112},40:{Beginner:30,Novice:45,Intermediate:64,Advanced:87,Elite:112},45:{Beginner:28,Novice:43,Intermediate:61,Advanced:83,Elite:107},50:{Beginner:27,Novice:40,Intermediate:57,Advanced:78,Elite:100},55:{Beginner:25,Novice:37,Intermediate:53,Advanced:72,Elite:92},60:{Beginner:22,Novice:34,Intermediate:48,Advanced:66,Elite:84},65:{Beginner:20,Novice:31,Intermediate:44,Advanced:59,Elite:76},70:{Beginner:18,Novice:27,Intermediate:39,Advanced:53,Elite:68},75:{Beginner:16,Novice:25,Intermediate:35,Advanced:48,Elite:61},80:{Beginner:15,Novice:22,Intermediate:31,Advanced:43,Elite:55},85:{Beginner:13,Novice:20,Intermediate:28,Advanced:38,Elite:49},90:{Beginner:12,Novice:18,Intermediate:25,Advanced:34,Elite:44}},gx={40:{Beginner:7,Novice:14,Intermediate:23,Advanced:35,Elite:48},45:{Beginner:8,Novice:16,Intermediate:25,Advanced:38,Elite:52},50:{Beginner:10,Novice:17,Intermediate:28,Advanced:40,Elite:55},55:{Beginner:11,Novice:19,Intermediate:30,Advanced:43,Elite:58},60:{Beginner:12,Novice:21,Intermediate:32,Advanced:45,Elite:60},65:{Beginner:13,Novice:22,Intermediate:34,Advanced:48,Elite:63},70:{Beginner:15,Novice:24,Intermediate:35,Advanced:50,Elite:65},75:{Beginner:16,Novice:25,Intermediate:37,Advanced:52,Elite:68},80:{Beginner:17,Novice:26,Intermediate:39,Advanced:54,Elite:70},85:{Beginner:18,Novice:28,Intermediate:40,Advanced:55,Elite:72},90:{Beginner:19,Novice:29,Intermediate:42,Advanced:57,Elite:74},95:{Beginner:20,Novice:30,Intermediate:43,Advanced:59,Elite:76},100:{Beginner:21,Novice:31,Intermediate:45,Advanced:61,Elite:78},105:{Beginner:22,Novice:32,Intermediate:46,Advanced:62,Elite:80},110:{Beginner:23,Novice:34,Intermediate:47,Advanced:64,Elite:81},115:{Beginner:23,Novice:35,Intermediate:49,Advanced:65,Elite:83},120:{Beginner:24,Novice:36,Intermediate:50,Advanced:66,Elite:85}},px={15:{Beginner:11,Novice:19,Intermediate:29,Advanced:41,Elite:55},20:{Beginner:12,Novice:21,Intermediate:33,Advanced:47,Elite:63},25:{Beginner:13,Novice:22,Intermediate:34,Advanced:48,Elite:65},30:{Beginner:13,Novice:22,Intermediate:34,Advanced:48,Elite:65},35:{Beginner:13,Novice:22,Intermediate:34,Advanced:48,Elite:65},40:{Beginner:13,Novice:22,Intermediate:34,Advanced:48,Elite:65},45:{Beginner:12,Novice:21,Intermediate:32,Advanced:46,Elite:62},50:{Beginner:11,Novice:19,Intermediate:30,Advanced:43,Elite:58},55:{Beginner:11,Novice:18,Intermediate:28,Advanced:40,Elite:53},60:{Beginner:10,Novice:16,Intermediate:25,Advanced:36,Elite:49},65:{Beginner:9,Novice:15,Intermediate:23,Advanced:33,Elite:44},70:{Beginner:8,Novice:13,Intermediate:21,Advanced:30,Elite:40},75:{Beginner:7,Novice:12,Intermediate:18,Advanced:26,Elite:35},80:{Beginner:6,Novice:11,Intermediate:16,Advanced:24,Elite:32},85:{Beginner:6,Novice:10,Intermediate:15,Advanced:21,Elite:28},90:{Beginner:5,Novice:9,Intermediate:13,Advanced:19,Elite:26}},vx={"10-12":{100:26,90:24,80:22,70:20,60:18,50:16,40:14,30:12,20:10,10:8,0:6},"13-17":{100:36,90:34,80:32,70:30,60:28,50:26,40:24,30:22,20:20,10:18,0:16},"18-30":{100:42,90:40,80:38,70:36,60:34,50:32,40:30,30:28,20:26,10:24,0:22},"31-40":{100:40,90:38,80:36,70:34,60:32,50:30,40:28,30:26,20:24,10:22,0:20},"41-50":{100:38,90:36,80:34,70:32,60:30,50:28,40:26,30:24,20:22,10:20,0:18},"51-60":{100:36,90:34,80:32,70:30,60:28,50:26,40:24,30:22,20:20,10:18,0:16},"61-70":{100:34,90:32,80:30,70:28,60:26,50:24,40:22,30:20,20:18,10:16,0:14},"71-80":{100:32,90:30,80:28,70:26,60:24,50:22,40:20,30:18,20:16,10:14,0:12}},xx={"10-12":{100:44,90:42,80:40,70:38,60:36,50:34,40:32,30:30,20:28,10:26,0:24},"13-17":{100:46,90:44,80:42,70:40,60:38,50:36,40:34,30:32,20:30,10:28,0:26},"18-30":{100:48,90:46,80:44,70:42,60:40,50:38,40:36,30:34,20:32,10:30,0:28},"31-40":{100:46,90:44,80:42,70:40,60:38,50:36,40:34,30:32,20:30,10:28,0:26},"41-50":{100:44,90:42,80:40,70:38,60:36,50:34,40:32,30:30,20:28,10:26,0:24},"51-60":{100:42,90:40,80:38,70:36,60:34,50:32,40:30,30:28,20:26,10:24,0:22},"61-70":{100:40,90:38,80:36,70:34,60:32,50:30,40:28,30:26,20:24,10:22,0:20},"71-80":{100:38,90:36,80:34,70:32,60:30,50:28,40:26,30:24,20:22,10:20,0:18}},yx={"10-12":{100:18,90:17,80:16,70:15,60:14,50:13,40:12,30:11,20:10,10:9,0:8},"13-17":{100:24,90:23,80:22,70:21,60:20,50:19,40:18,30:17,20:16,10:15,0:14},"18-30":{100:28,90:27,80:26,70:25,60:24,50:23,40:22,30:21,20:20,10:19,0:18},"31-40":{100:27,90:26,80:25,70:24,60:23,50:22,40:21,30:20,20:19,10:18,0:17},"41-50":{100:26,90:25,80:24,70:23,60:22,50:21,40:20,30:19,20:18,10:17,0:16},"51-60":{100:25,90:24,80:23,70:22,60:21,50:20,40:19,30:18,20:17,10:16,0:15},"61-70":{100:24,90:23,80:22,70:21,60:20,50:19,40:18,30:17,20:16,10:15,0:14},"71-80":{100:22,90:21,80:20,70:19,60:18,50:17,40:16,30:15,20:14,10:13,0:12}},bx={"10-12":{100:38,90:36,80:34,70:32,60:30,50:28,40:26,30:24,20:22,10:20,0:18},"13-17":{100:40,90:38,80:36,70:34,60:32,50:30,40:28,30:26,20:24,10:22,0:20},"18-30":{100:42,90:40,80:38,70:36,60:34,50:32,40:30,30:28,20:26,10:24,0:22},"31-40":{100:40,90:38,80:36,70:34,60:32,50:30,40:28,30:26,20:24,10:22,0:20},"41-50":{100:38,90:36,80:34,70:32,60:30,50:28,40:26,30:24,20:22,10:20,0:18},"51-60":{100:36,90:34,80:32,70:30,60:28,50:26,40:24,30:22,20:20,10:18,0:16},"61-70":{100:34,90:32,80:30,70:28,60:26,50:24,40:22,30:20,20:18,10:16,0:14},"71-80":{100:32,90:30,80:28,70:26,60:24,50:22,40:20,30:18,20:16,10:14,0:12}},Nx={"13-14":{100:2700,90:2400,80:2200,70:2100,60:2100},"15-16":{100:2800,90:2500,80:2300,70:2200,60:2200},"17-20":{100:3e3,90:2700,80:2500,70:2300,60:2300},"20-29":{100:2800,90:2400,80:2200,70:1600,60:1600},"30-39":{100:2700,90:2300,80:1900,70:1500,60:1500},"40-49":{100:2500,90:2100,80:1700,70:1400,60:1400},"50+":{100:2400,90:2e3,80:1600,70:1300,60:1300}},Sx={"13-14":{100:2e3,90:1900,80:1600,70:1500,60:1500},"15-16":{100:2100,90:2e3,80:1700,70:1600,60:1600},"17-20":{100:2300,90:2100,80:1800,70:1700,60:1700},"20-29":{100:2700,90:2200,80:1800,70:1500,60:1500},"30-39":{100:2500,90:2e3,80:1700,70:1400,60:1400},"40-49":{100:2300,90:1900,80:1500,70:1200,60:1200},"50+":{100:2200,90:1700,80:1400,70:1100,60:1100}},jx={"12-15":{0:25,50:45,100:65},"16-20":{0:35,50:55,100:75},"21-30":{0:30,50:50,100:70},"31-40":{0:25,50:45,100:65},"41-50":{0:20,50:40,100:60},"51-60":{0:15,50:35,100:55},"61-70":{0:10,50:30,100:50},"71-80":{0:5,50:25,100:45}},Ax={"12-15":{0:20,50:35,100:50},"16-20":{0:25,50:40,100:55},"21-30":{0:22,50:38,100:52},"31-40":{0:18,50:32,100:46},"41-50":{0:15,50:28,100:42},"51-60":{0:10,50:25,100:40},"61-70":{0:5,50:20,100:35},"71-80":{0:0,50:15,100:30}},Ex={"12-15":{0:150,50:200,100:250},"16-20":{0:180,50:230,100:280},"21-30":{0:170,50:220,100:270},"31-40":{0:150,50:200,100:250},"41-50":{0:130,50:180,100:230},"51-60":{0:110,50:160,100:210},"61-70":{0:90,50:140,100:190},"71-80":{0:70,50:120,100:170}},wx={"12-15":{0:120,50:170,100:220},"16-20":{0:140,50:190,100:240},"21-30":{0:130,50:180,100:230},"31-40":{0:115,50:165,100:215},"41-50":{0:100,50:150,100:200},"51-60":{0:80,50:130,100:180},"61-70":{0:60,50:110,100:160},"71-80":{0:40,50:90,100:140}},Tx={"12-15":{0:18,50:15,100:12},"16-20":{0:17,50:14,100:11},"21-30":{0:17,50:14,100:11},"31-40":{0:18,50:15,100:12},"41-50":{0:19,50:16,100:13},"51-60":{0:20,50:17,100:14},"61-70":{0:22,50:19,100:16},"71-80":{0:24,50:21,100:18}},Rx={"12-15":{0:19,50:16,100:13},"16-20":{0:18,50:15,100:12},"21-30":{0:18,50:15,100:12},"31-40":{0:19,50:16,100:13},"41-50":{0:20,50:17,100:14},"51-60":{0:21,50:18,100:15},"61-70":{0:23,50:20,100:17},"71-80":{0:25,50:22,100:19}};function Gm({onComplete:o}){var k,F,ee,J,q,D,K,Ee,Re,Ue,_e,qe,et,Ct,Ht,Pe,St,yn,Rt,ut,j,O,P,ne,W,de,pe,ve,xe,me,Ye,tt,mt,qa,Ga,xa,ya,bn,ba,Fn,Hl,Os,Cs,Va,Xn,ql,Us,Bs,Ya,Fa,Ds,Gl,un,gt,jt,Rn,Xa,Vl,Yl,Ms;const{userData:s,setUserData:u}=on(),r=xn(),{gender:d,age:f}=s,[m,p]=A.useState("exercises"),[v,b]=A.useState({weight:((ee=(F=(k=s.testInputs)==null?void 0:k.strength)==null?void 0:F.benchPress)==null?void 0:ee.weight)||"",reps:((D=(q=(J=s.testInputs)==null?void 0:J.strength)==null?void 0:q.benchPress)==null?void 0:D.reps)||"",max:((Re=(Ee=(K=s.testInputs)==null?void 0:K.strength)==null?void 0:Ee.benchPress)==null?void 0:Re.max)||null,score:((qe=(_e=(Ue=s.testInputs)==null?void 0:Ue.strength)==null?void 0:_e.benchPress)==null?void 0:qe.score)||null}),[x,E]=A.useState({weight:((Ht=(Ct=(et=s.testInputs)==null?void 0:et.strength)==null?void 0:Ct.squat)==null?void 0:Ht.weight)||"",reps:((yn=(St=(Pe=s.testInputs)==null?void 0:Pe.strength)==null?void 0:St.squat)==null?void 0:yn.reps)||"",max:((j=(ut=(Rt=s.testInputs)==null?void 0:Rt.strength)==null?void 0:ut.squat)==null?void 0:j.max)||null,score:((ne=(P=(O=s.testInputs)==null?void 0:O.strength)==null?void 0:P.squat)==null?void 0:ne.score)||null}),[w,I]=A.useState({weight:((pe=(de=(W=s.testInputs)==null?void 0:W.strength)==null?void 0:de.deadlift)==null?void 0:pe.weight)||"",reps:((me=(xe=(ve=s.testInputs)==null?void 0:ve.strength)==null?void 0:xe.deadlift)==null?void 0:me.reps)||"",max:((mt=(tt=(Ye=s.testInputs)==null?void 0:Ye.strength)==null?void 0:tt.deadlift)==null?void 0:mt.max)||null,score:((xa=(Ga=(qa=s.testInputs)==null?void 0:qa.strength)==null?void 0:Ga.deadlift)==null?void 0:xa.score)||null}),[_,Z]=A.useState({weight:((ba=(bn=(ya=s.testInputs)==null?void 0:ya.strength)==null?void 0:bn.latPulldown)==null?void 0:ba.weight)||"",reps:((Os=(Hl=(Fn=s.testInputs)==null?void 0:Fn.strength)==null?void 0:Hl.latPulldown)==null?void 0:Os.reps)||"",max:((Xn=(Va=(Cs=s.testInputs)==null?void 0:Cs.strength)==null?void 0:Va.latPulldown)==null?void 0:Xn.max)||null,score:((Bs=(Us=(ql=s.testInputs)==null?void 0:ql.strength)==null?void 0:Us.latPulldown)==null?void 0:Bs.score)||null}),[Q,re]=A.useState({weight:((Ds=(Fa=(Ya=s.testInputs)==null?void 0:Ya.strength)==null?void 0:Fa.shoulderPress)==null?void 0:Ds.weight)||"",reps:((gt=(un=(Gl=s.testInputs)==null?void 0:Gl.strength)==null?void 0:un.shoulderPress)==null?void 0:gt.reps)||"",max:((Xa=(Rn=(jt=s.testInputs)==null?void 0:jt.strength)==null?void 0:Rn.shoulderPress)==null?void 0:Xa.max)||null,score:((Ms=(Yl=(Vl=s.testInputs)==null?void 0:Vl.strength)==null?void 0:Yl.shoulderPress)==null?void 0:Ms.score)||null}),oe=A.useRef(null),G=A.useCallback(ye=>{const Me=()=>{var rt,Ie;const ke=((rt=s.testInputs)==null?void 0:rt.strength)||{},pt=((Ie=ye.testInputs)==null?void 0:Ie.strength)||{};JSON.stringify(ke)!==JSON.stringify(pt)?(console.log("💾 測試輸入變化，更新用戶數據"),u(ye)):console.log("⏭️ 測試輸入無變化，跳過更新")};oe.current&&clearTimeout(oe.current),oe.current=setTimeout(Me,5e3)},[u,s.testInputs]);A.useEffect(()=>{const ye={...s.testInputs,strength:{benchPress:{weight:v.weight,reps:v.reps,max:v.max,score:v.score},squat:{weight:x.weight,reps:x.reps,max:x.max,score:x.score},deadlift:{weight:w.weight,reps:w.reps,max:w.max,score:w.score},latPulldown:{weight:_.weight,reps:_.reps,max:_.max,score:_.score},shoulderPress:{weight:Q.weight,reps:Q.reps,max:Q.max,score:Q.score}}},Me={...s,testInputs:ye};return G(Me),()=>{oe.current&&clearTimeout(oe.current)}},[v,x,w,_,Q,s,G]);const H=(ye,Me)=>{const{Beginner:ke,Novice:pt,Intermediate:Ke,Advanced:rt,Elite:Ie}=Me;return ye<ke?0:ye>=Ie?100:ye>=rt?80+20*(ye-rt)/(Ie-rt):ye>=Ke?60+20*(ye-Ke)/(rt-Ke):ye>=pt?40+20*(ye-pt)/(Ke-pt):ye>=ke?20+20*(ye-ke)/(pt-ke):0},le=A.useMemo(()=>{const ye=d==="male"||d==="男性";return{benchPress:{bodyweight:ye?Jv:Pv,age:ye?lx:ix},squat:{bodyweight:ye?Wv:ex,age:ye?rx:cx},deadlift:{bodyweight:ye?tx:nx,age:ye?ox:ux},latPulldown:{bodyweight:ye?ax:sx,age:ye?dx:fx},shoulderPress:{bodyweight:ye?hx:gx,age:ye?mx:px}}},[d]),fe=A.useCallback((ye,Me,ke,pt)=>{if(!ye||!Me)return alert("請輸入重量和次數！");const Ke=parseFloat(ye),rt=parseFloat(Me),Ie=parseFloat(s.weight),dn=parseFloat(f);if(!Ie||!dn)return alert("請確保已輸入有效的體重和年齡！");if(rt>12){alert("可完成次數不得超過12次，請重新輸入！"),ke(Zt=>({...Zt,reps:""}));return}const Qn=Ke/(1.0278-.0278*rt),dt=le[pt],Kt=Object.keys(dt.bodyweight).map(Number),fr=Object.keys(dt.age).map(Number),Fl=Kt.reduce((Zt,Jt)=>Math.abs(Jt-Ie)<Math.abs(Zt-Ie)?Jt:Zt),Xl=fr.reduce((Zt,Jt)=>Math.abs(Jt-dn)<Math.abs(Zt-dn)?Jt:Zt),hr=dt.bodyweight[Fl],Qa=dt.age[Xl],$a=H(Qn,hr),fn=H(Qn,Qa),ks=(($a+fn)/2).toFixed(2);ke(Zt=>({...Zt,max:Qn.toFixed(2),score:ks}))},[le,s.weight,f]);A.useEffect(()=>{d&&s.weight&&f&&[{key:"benchPress",state:v,setState:b},{key:"squat",state:x,setState:E},{key:"deadlift",state:w,setState:I},{key:"latPulldown",state:_,setState:Z},{key:"shoulderPress",state:Q,setState:re}].forEach(({key:Me,state:ke,setState:pt})=>{ke.weight&&ke.reps&&!ke.score&&fe(ke.weight,ke.reps,pt,Me)})},[d,s.weight,f,v,x,w,_,Q,fe]);const te=(ye,Me)=>{const ke=Me==="男性"||Me.toLowerCase()==="male"?"male":"female";return ye>=90?ke==="male"?"頂尖表現！你已達建力、舉重專項運動員水平！接受掌聲吧！":"我願稱你為神力女超人!":ye>=80?ke==="male"?"萬里挑一！你已達到職業運動員水平，繼續稱霸！":"太驚艷了！你應該是朋友圈裡最強的吧？超棒的！":ye>=70?ke==="male"?"超越常人！許多國手的力量指標也落在這，相當厲害!":"真的很傑出！表現超棒，繼續保持哦！":ye>=60?ke==="male"?"很強！業餘運動愛好者中的佼佼者，再拼一把！":"表現超棒！超越大多數人，你很厲害！":ye>=50?ke==="male"?"不錯的水準！訓練痕跡肉眼可見！":"很棒的水準！再努力一點，你會更好！":ye>=40?ke==="male"?"已經有基礎了，繼續進步，一切大有可為!":"有規律良好的運動習慣了!再接再厲":ke==="male"?"兄弟，該衝了！全力以赴，突破自己！":"親愛的，還有進步空間，繼續加油哦！"},se=A.useMemo(()=>[{name:"臥推",value:parseFloat(v.score)||0},{name:"深蹲",value:parseFloat(x.score)||0},{name:"硬舉",value:parseFloat(w.score)||0},{name:"滑輪下拉",value:parseFloat(_.score)||0},{name:"站姿肩推",value:parseFloat(Q.score)||0}],[v.score,x.score,w.score,_.score,Q.score]),ae=[v.score,x.score,w.score,_.score,Q.score].filter(ye=>ye!==null),z=ae.length>0?(ae.reduce((ye,Me)=>ye+parseFloat(Me),0)/ae.length).toFixed(2):null,ce=async()=>{if(!z)return alert("請至少完成一項評測！");try{const ye={...s.scores,strength:parseFloat(z)};await u(ke=>({...ke,scores:ye,ladderScore:ke.ladderScore||0}));const Me={squat:x.max?{weight:x.weight,reps:x.reps,max:x.max,score:x.score}:null,benchPress:v.max?{weight:v.weight,reps:v.reps,max:v.max,score:v.score}:null,deadlift:w.max?{weight:w.weight,reps:w.reps,max:w.max,score:w.score}:null,latPulldown:_.max?{weight:_.weight,reps:_.reps,max:_.max,score:_.score}:null,shoulderPress:Q.max?{weight:Q.weight,reps:Q.reps,max:Q.max,score:Q.score}:null,averageScore:parseFloat(z)};o&&o(Me),setTimeout(()=>{r("/user-info",{state:{from:"/strength"}})},500)}catch(ye){console.error("提交失敗:",ye),alert("更新用戶數據或導航失敗，請稍後再試！")}},he=[{range:"90~100",description:"專業舉重、健力專項運動員、大力士水平，如魔山、輪子哥、阿諾、John Cena"},{range:"80~90",description:"職業運動員水平；職業格鬥、橄欖球運動員，如巨石強森、GSP(UFC次中量級世界冠軍)"},{range:"70~80",description:"國手水平、球類運動員，如大谷翔平、LBJ、傑森史塔森"},{range:"60~70",description:"業餘運動愛好者中的高手，如休傑克曼、克里斯漢斯沃、亨利卡維爾"},{range:"50~60",description:"中階運動愛好者"},{range:"40~50",description:"開始步入軌道"},{range:"40分以下",description:"初學者"}],V=[{level:"初階-運動習慣培養中",score:20,color:"#FF6B6B"},{level:"入門-業餘運動愛好者",score:40,color:"#FFA726"},{level:"中等-訓練痕跡肉眼可見",score:60,color:"#FFEE58"},{level:"高階-職業運動員等級",score:80,color:"#66BB6A"},{level:"精英-舉重、健力運動員",score:100,color:"#42A5F5"}],U=[{key:"benchPress",name:"平板臥推",state:v,setState:b},{key:"squat",name:"深蹲",state:x,setState:E},{key:"deadlift",name:"硬舉",state:w,setState:I},{key:"latPulldown",name:"滑輪下拉",state:_,setState:Z},{key:"shoulderPress",name:"站姿肩推",state:Q,setState:re}],[ge,y]=A.useState(new Set),N=ye=>{const{key:Me,name:ke,icon:pt,state:Ke,setState:rt}=ye,Ie=Ke.score!==null,dn=ge.has(Me),Qn=()=>{const dt=new Set(ge);dn?dt.delete(Me):dt.add(Me),y(dt)};return l.jsxs("div",{className:`exercise-card ${Ie?"completed":""}`,children:[l.jsxs("div",{className:"exercise-header",onClick:Qn,children:[l.jsxs("div",{className:"exercise-header-left",children:[l.jsx("span",{className:"exercise-icon",children:pt}),l.jsx("h3",{className:"exercise-name",children:ke})]}),l.jsxs("div",{className:"exercise-header-right",children:[Ie&&l.jsx("span",{className:"score-badge",children:Ke.score}),l.jsx("span",{className:`expand-arrow ${dn?"expanded":""}`,children:dn?"▲":"▼"})]})]}),dn&&l.jsxs("div",{className:"exercise-content",children:[l.jsxs("div",{className:"exercise-inputs",children:[l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:`${Me}Weight`,children:"重量 (kg)"}),l.jsx("input",{id:`${Me}Weight`,type:"number",placeholder:"重量",value:Ke.weight,onChange:dt=>rt(Kt=>({...Kt,weight:dt.target.value})),className:"input-field"})]}),l.jsxs("div",{className:"input-group",children:[l.jsx("label",{htmlFor:`${Me}Reps`,children:"次數"}),l.jsx("input",{id:`${Me}Reps`,type:"number",placeholder:"次數",value:Ke.reps,onChange:dt=>rt(Kt=>({...Kt,reps:dt.target.value})),className:"input-field"})]}),l.jsx("button",{onClick:()=>fe(Ke.weight,Ke.reps,rt,Me),className:"calculate-btn",disabled:!Ke.weight||!Ke.reps,children:"計算"})]}),Ke.max&&l.jsxs("div",{className:"exercise-result",children:[l.jsxs("p",{className:"max-strength",children:["最大力量: ",Ke.max," kg"]}),Ke.score&&l.jsxs("p",{className:"score-display",children:["分數: ",Ke.score]})]})]})]},Me)};return l.jsxs("div",{className:"strength-container",children:[l.jsxs("div",{className:"strength-header",children:[l.jsx("h1",{className:"strength-title",children:"💪 力量評測"}),l.jsx("p",{className:"strength-safety-note",children:"挑戰重量時記得綁上腰帶和手套，注意安全喔"})]}),l.jsxs("div",{className:"tab-navigation",children:[l.jsx("button",{className:`tab-btn ${m==="exercises"?"active":""}`,onClick:()=>p("exercises"),children:"🏋️ 評測項目"}),l.jsx("button",{className:`tab-btn ${m==="standards"?"active":""}`,onClick:()=>p("standards"),children:"📋 評測標準"})]}),m==="exercises"&&l.jsxs("div",{className:"exercises-tab",children:[l.jsx("div",{className:"exercises-grid",children:U.map(N)}),z&&l.jsxs("div",{className:"results-section",children:[l.jsxs("div",{className:"radar-chart-card",children:[l.jsx("div",{className:"corner-decoration top-left"}),l.jsx("div",{className:"corner-decoration top-right"}),l.jsx("div",{className:"corner-decoration bottom-left"}),l.jsx("div",{className:"corner-decoration bottom-right"}),l.jsx("h3",{children:"📈 力量分佈圖"}),l.jsx(lr,{width:"100%",height:300,children:l.jsxs(om,{data:se,children:[l.jsx(um,{gridType:"polygon",stroke:"rgba(129, 216, 208, 0.25)",strokeWidth:2,strokeDasharray:"4 4"}),l.jsx(dm,{dataKey:"name",tick:{fontSize:13,fill:"#2d3748",fontWeight:700}}),l.jsx(fm,{angle:90,domain:[0,100],tick:{fontSize:12,fill:"#2d3748",fontWeight:600}}),l.jsx(hm,{name:"分數",dataKey:"value",stroke:"#81D8D0",fill:"url(#strengthTiffanyGradient)",fillOpacity:.8,strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("defs",{children:l.jsxs("linearGradient",{id:"strengthTiffanyGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[l.jsx("stop",{offset:"0%",stopColor:"#81D8D0",stopOpacity:.9}),l.jsx("stop",{offset:"50%",stopColor:"#5F9EA0",stopOpacity:.7}),l.jsx("stop",{offset:"100%",stopColor:"#81D8D0",stopOpacity:.6})]})})]})})]}),l.jsxs("div",{className:"score-breakdown-card",children:[l.jsx("h3",{children:"📊 分數詳情"}),l.jsx("div",{className:"score-breakdown",children:U.map(ye=>l.jsxs("div",{className:"score-item",children:[l.jsx("span",{className:"score-label",children:ye.name}),l.jsx("span",{className:"score-value",children:ye.state.score||"未測試"})]},ye.key))}),l.jsxs("div",{className:"average-score-display",children:[l.jsxs("p",{className:"average-score",children:["平均分數: ",z]}),l.jsx("p",{className:"average-comment",children:te(z,d)})]})]})]})]}),m==="standards"&&l.jsxs("div",{className:"standards-tab",children:[l.jsxs("div",{className:"standards-content",children:[l.jsx("p",{children:"我們的評測標準基於 Strength Level 用戶提供的超過 1.34 億次舉重數據，涵蓋男女標準，適用於臥推、深蹲、硬舉、肩推等多項健身動作。"}),l.jsxs("p",{className:"source-link",children:["來源：",l.jsx("a",{href:"https://strengthlevel.com/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"https://strengthlevel.com/"})]})]}),l.jsxs("div",{className:"score-levels-table",children:[l.jsx("h3",{children:"分數等級"}),l.jsx("div",{className:"levels-container",children:V.map((ye,Me)=>l.jsxs("div",{className:"level-item",children:[l.jsxs("div",{className:"level-header",children:[l.jsx("span",{className:"level-name",children:ye.level}),l.jsx("span",{className:"level-score",children:ye.score})]}),l.jsx("div",{className:"level-bar-container",children:l.jsx("div",{className:"level-bar",style:{width:`${ye.score}%`,background:`linear-gradient(to right, ${ye.color}dd, ${ye.color})`}})})]},Me))})]}),l.jsxs("div",{className:"score-table",children:[l.jsx("h3",{children:"分數說明"}),l.jsxs("table",{className:"table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"分數範圍"}),l.jsx("th",{children:"說明"})]})}),l.jsx("tbody",{children:he.map((ye,Me)=>l.jsxs("tr",{children:[l.jsx("td",{children:ye.range}),l.jsx("td",{children:ye.description})]},Me))})]})]})]}),l.jsx("div",{className:"submit-section",children:l.jsx("button",{onClick:ce,className:"submit-btn",disabled:!z,children:z?"✅ 提交並返回總覽":"請至少完成一項評測"})})]})}Gm.propTypes={onComplete:ie.func,clearTestData:ie.func};function Vm({onComplete:o}){var re,oe;const{userData:s,setUserData:u}=on(),r=xn(),{age:d,gender:f}=s,[m,p]=A.useState(((oe=(re=s.testInputs)==null?void 0:re.cardio)==null?void 0:oe.distance)||""),[v,b]=A.useState(null),[x,E]=A.useState(!1);A.useEffect(()=>{var G;if(m){const H={...s.testInputs,cardio:{...(G=s.testInputs)==null?void 0:G.cardio,distance:m}};u(le=>({...le,testInputs:H}))}},[m,u,s.testInputs]);const w=G=>{if(!G)return null;const H=parseInt(G);return H>=13&&H<=14?"13-14":H>=15&&H<=16?"15-16":H>=17&&H<=20?"17-20":H>=20&&H<=29?"20-29":H>=30&&H<=39?"30-39":H>=40&&H<=49?"40-49":H>=50?"50+":null},I=(G,H)=>{const le=H[60],fe=H[100];return G<=0?0:G<=le?Math.round(G/le*60*100)/100:G>=fe?100:Math.round((60+(G-le)/(fe-le)*40)*100)/100},_=(G,H)=>{const le=H==="男性"||H.toLowerCase()==="male"?"male":"female",fe=Math.floor(G/10)*10;return{male:{0:"兄弟，該動起來了！全力衝刺吧！",10:"還不夠熱血！再加把勁，衝上去！",20:"起步了！再加速，展現你的實力！",30:"進步中！再拼一點，突破極限吧！",40:"不錯！再猛一點，超越自己！",50:"很棒了！再衝刺，成為王者吧！",60:"強者氣勢！再加速，稱霸全場！",70:"超強！熱血沸騰，繼續衝刺！",80:"頂尖表現！再拼，成為傳說！",90:"無敵了！你是真正的王者，保持！",100:"無敵了！你是真正的王者，保持！"},female:{0:"親愛的，別氣餒，慢慢進步哦！",10:"再努力一點，你會更好的，加油！",20:"小進步了！繼續加油，你很棒！",30:"進步了呢！再努力一點，會更好哦！",40:"很棒了！再加把勁，你會更棒的！",50:"表現很好！再努力一點，超棒的！",60:"好厲害！繼續保持，你很棒哦！",70:"真的很棒！保持下去，你最棒了！",80:"太厲害了！繼續努力，你超棒的！",90:"完美表現！超棒的你，繼續保持！",100:"完美表現！超棒的你，繼續保持！"}}[le][fe]||"加油！"},Z=()=>{if(!m||!d||!f){alert("請確保已在用戶信息中輸入年齡和性別，並在此輸入跑步距離！");return}const G=parseFloat(m),H=w(d);if(!G||!H){alert("請輸入有效的跑步距離和年齡！");return}const te=((f==="男性"||f.toLowerCase()==="male"?"male":"female")==="male"?Nx:Sx)[H];if(!te){alert("無法找到對應的評測標準，請檢查年齡和性別！");return}const se=I(G,te);b(se),console.log("Cardio.js - 計算心肺耐力分數:",se,"距離:",G,"年齡段:",H)},Q=async()=>{if(!v){alert("請先計算心肺耐力分數！");return}const G=sessionStorage.getItem("guestMode")==="true";try{const H={...s.scores,cardio:parseFloat(v)},le={...s,scores:H};u({...le,ladderScore:s.ladderScore||0});const fe={distance:parseFloat(m),score:parseFloat(v)};o&&typeof o=="function"&&o(fe),setTimeout(()=>{r("/user-info",{state:{from:"/cardio"}})},100)}catch(H){console.error("提交失敗:",H),G||alert("更新用戶數據失敗，請稍後再試！"),setTimeout(()=>{r("/user-info",{state:{from:"/cardio"}})},100)}};return l.jsxs("div",{className:"cardio-container",children:[l.jsxs("div",{className:"input-section",children:[l.jsx("h1",{className:"text-2xl font-bold text-center mb-4",children:"心肺耐力測試"}),l.jsxs("p",{children:["年齡：",d||"未輸入"]}),l.jsxs("p",{children:["性別：",f||"未選擇"]}),l.jsxs("div",{className:"exercise-section",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"Cooper 12 分鐘跑步測試"}),l.jsx("label",{htmlFor:"distance",className:"block text-sm font-medium text-gray-700",children:"跑步距離 (公尺)"}),l.jsx("input",{id:"distance",name:"distance",type:"number",placeholder:"跑步距離 (公尺)",value:m,onChange:G=>p(G.target.value),className:"input-field",required:!0}),l.jsx("button",{onClick:Z,className:"calculate-btn",children:"計算"}),v!==null&&l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:"score-display",children:["心肺耐力分數: ",v]}),l.jsx("p",{className:"score-display",children:_(v,f)})]})]}),l.jsx("div",{className:"description-section",children:l.jsxs("div",{className:"description-card",children:[l.jsxs("div",{className:"description-header",onClick:()=>E(!x),children:[l.jsx("h2",{className:"text-lg font-semibold",children:"動作說明"}),l.jsx("span",{className:`arrow ${x?"expanded":""}`,children:x?"▲":"▼"})]}),x&&l.jsxs("div",{className:"description-content",children:[l.jsx("p",{className:"font-semibold",children:"Cooper Test 簡介"}),l.jsx("p",{children:"傳統心肺耐力測試需在實驗室以極限強度測量最大攝氧量（VO₂ Max），但難以普及。Kenneth H. Cooper 博士發現 12 分鐘跑步距離與 VO₂ Max 高度相關，於 1968 年設計 Cooper Test，廣泛應用於美軍體測，簡化測量並提升效率。測試以年齡、性別和跑步距離估算 VO₂ Max。"}),l.jsx("p",{className:"font-semibold mt-2",children:"測量方式"}),l.jsxs("ul",{className:"list-disc pl-5",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"地點"}),"：選擇田徑場或安全跑步環境，方便記錄距離和配速。"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"記錄"}),"：用圈數或運動手錶記錄 12 分鐘跑步距離。"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"熱身"}),"：跑前動態熱身 10-15 分鐘，避免受傷。"]})]}),l.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"本 Cooper 測試標準表可在 Cooper Test Chart 找到，由 Carl Magnus Swahn 設計。"})]})]})})]}),l.jsx("div",{className:"button-group",children:l.jsx("button",{onClick:Q,className:"submit-btn",children:"提交並返回總覽"})})]})}Vm.propTypes={onComplete:ie.func,clearTestData:ie.func};function Ym({onComplete:o}){var te,se,ae,z,ce,he;const{userData:s,setUserData:u}=on(),r=xn(),{age:d,gender:f}=s,[m,p]=A.useState(((se=(te=s.testInputs)==null?void 0:te.power)==null?void 0:se.verticalJump)||""),[v,b]=A.useState(((z=(ae=s.testInputs)==null?void 0:ae.power)==null?void 0:z.standingLongJump)||""),[x,E]=A.useState(((he=(ce=s.testInputs)==null?void 0:ce.power)==null?void 0:he.sprint)||""),[w,I]=A.useState({verticalJumpScore:null,standingLongJumpScore:null,sprintScore:null,finalScore:null}),[_,Z]=A.useState(!1),[Q,re]=A.useState(!1);A.useEffect(()=>{const V={...s.testInputs,power:{verticalJump:m,standingLongJump:v,sprint:x}};u(U=>({...U,testInputs:V}))},[m,v,x,u,s.testInputs]);const oe=V=>{if(!V)return null;const U=parseInt(V);return U>=12&&U<=15?"12-15":U>=16&&U<=20?"16-20":U>=21&&U<=30?"21-30":U>=31&&U<=40?"31-40":U>=41&&U<=50?"41-50":U>=51&&U<=60?"51-60":U>=61&&U<=70?"61-70":U>=71&&U<=80?"71-80":null},G=(V,U)=>V<U[0]?0:V>=U[100]?100:V<U[50]?(V-U[0])/(U[50]-U[0])*50:50+(V-U[50])/(U[100]-U[50])*50,H=(V,U)=>V>U[0]?0:V<=U[100]?100:V>U[50]?(U[0]-V)/(U[0]-U[50])*50:50+(U[50]-V)/(U[50]-U[100])*50,le=()=>{if(!d||!f){alert("請確保已在用戶信息中輸入年齡和性別！");return}if(!m&&!v&&!x){alert("請至少輸入一項動作數據！");return}const V=oe(d);if(!V){alert("請輸入有效的年齡！");return}const U=f==="男性"||f.toLowerCase()==="male"?"male":"female",ge=U==="male"?jx:Ax,y=U==="male"?Ex:wx,N=U==="male"?Tx:Rx,k=ge[V],F=y[V],ee=N[V];if(!k||!F||!ee){alert("無法找到對應的評測標準，請檢查年齡和性別！");return}const J=m?parseFloat(m):null,q=v?parseFloat(v):null,D=x?parseFloat(x):null,K=J!==null?G(J,k):null,Ee=q!==null?G(q,F):null,Re=D!==null?H(D,ee):null,Ue=[K,Ee,Re].filter(qe=>qe!==null);if(Ue.length===0){alert("請至少完成一項動作的測量！");return}const _e=(Ue.reduce((qe,et)=>qe+et,0)/Ue.length).toFixed(2);I({verticalJumpScore:K!==null?K.toFixed(2):null,standingLongJumpScore:Ee!==null?Ee.toFixed(2):null,sprintScore:Re!==null?Re.toFixed(2):null,finalScore:_e})},fe=async()=>{if(!w.finalScore){alert("請先計算爆發力分數！");return}const V=sessionStorage.getItem("guestMode")==="true";try{const U={...s.scores,explosivePower:parseFloat(w.finalScore)},ge={...s,scores:U};u({...ge,ladderScore:s.ladderScore||0});const y={verticalJump:m||null,standingLongJump:v||null,sprint:x||null,finalScore:w.finalScore};o&&typeof o=="function"&&o(y),setTimeout(()=>{r("/user-info",{state:{from:"/explosive-power"}})},100)}catch(U){console.error("Power.js - 更新 UserContext 或導航失敗:",U),V||alert("更新用戶數據失敗，請稍後再試！"),setTimeout(()=>{r("/user-info",{state:{from:"/explosive-power"}})},100)}};return l.jsxs("div",{className:"power-container",children:[l.jsxs("div",{className:"input-section",children:[l.jsx("h1",{className:"text-2xl font-bold text-center mb-4",children:"爆發力測試"}),l.jsxs("p",{children:["年齡：",d||"未輸入"]}),l.jsxs("p",{children:["性別：",f||"未選擇"]}),l.jsxs("div",{className:"exercise-section",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"爆發力動作"}),l.jsx("label",{htmlFor:"verticalJump",className:"block text-sm font-medium text-gray-700",children:"垂直彈跳 (公分)"}),l.jsx("input",{id:"verticalJump",name:"verticalJump",type:"number",placeholder:"垂直彈跳 (公分)",value:m,onChange:V=>p(V.target.value),className:"input-field"}),l.jsx("label",{htmlFor:"standingLongJump",className:"block text-sm font-medium text-gray-700",children:"立定跳遠 (公分)"}),l.jsx("input",{id:"standingLongJump",name:"standingLongJump",type:"number",placeholder:"立定跳遠 (公分)",value:v,onChange:V=>b(V.target.value),className:"input-field"}),l.jsx("label",{htmlFor:"sprint",className:"block text-sm font-medium text-gray-700",children:"100公尺衝刺跑 (秒)"}),l.jsx("input",{id:"sprint",name:"sprint",type:"number",placeholder:"100公尺衝刺跑 (秒)",value:x,onChange:V=>E(V.target.value),className:"input-field"}),l.jsx("button",{onClick:le,className:"calculate-btn",children:"計算"}),w.finalScore&&l.jsxs(l.Fragment,{children:[w.verticalJumpScore&&l.jsxs("p",{className:"score-display",children:["垂直彈跳分數: ",w.verticalJumpScore]}),w.standingLongJumpScore&&l.jsxs("p",{className:"score-display",children:["立定跳遠分數: ",w.standingLongJumpScore]}),w.sprintScore&&l.jsxs("p",{className:"score-display",children:["100公尺衝刺跑分數: ",w.sprintScore]}),l.jsxs("p",{className:"score-display",children:["最終分數: ",w.finalScore]})]})]}),l.jsxs("div",{className:"description-section",children:[l.jsxs("div",{className:"description-card",children:[l.jsxs("div",{className:"description-header",onClick:()=>Z(!_),children:[l.jsx("h2",{className:"text-lg font-semibold",children:"動作說明"}),l.jsx("span",{className:`arrow ${_?"expanded":""}`,children:_?"▲":"▼"})]}),_&&l.jsxs("div",{className:"description-content",children:[l.jsx("p",{className:"exercise-title",children:"垂直彈跳"}),l.jsx("p",{className:"exercise-description",children:"測量垂直跳躍高度，反映下肢爆發力。站立時伸手觸及最高點，然後全力跳起觸及最高點，兩者高度差即為垂直彈跳高度（單位：公分）。"}),l.jsx("p",{className:"exercise-title mt-2",children:"立定跳遠"}),l.jsx("p",{className:"exercise-description",children:"測量站立跳躍距離，反映下肢力量和協調性。雙腳站立於起跳線，無助跑直接跳出，測量起跳線(腳尖)到著地點(腳跟)最近處的距離（單位：公分）。"}),l.jsx("p",{className:"exercise-title mt-2",children:"100公尺衝刺跑"}),l.jsx("p",{className:"exercise-description",children:"測量短距離衝刺速度，反映全身爆發力和速度。從靜止起跑，盡全力衝刺100公尺，記錄完成時間（單位：秒）。"}),l.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"建議：測量前充分熱身，避免受傷。使用專業設備或在標準場地進行測量以確保準確性。"})]})]}),l.jsxs("div",{className:"standards-card",children:[l.jsxs("div",{className:"standards-header",onClick:()=>re(!Q),children:[l.jsx("h2",{className:"text-lg font-semibold",children:"檢測標準說明"}),l.jsx("span",{className:`arrow ${Q?"expanded":""}`,children:Q?"▲":"▼"})]}),Q&&l.jsxs("div",{className:"standards-content",children:[l.jsx("p",{className:"font-semibold",children:"來源："}),l.jsx("p",{children:"參考教育部體育署體適能網站、美國運動醫學會（ACSM）、世界田徑協會及全國中等學校運動會田徑標準。"}),l.jsx("p",{className:"font-semibold mt-2",children:"依據："}),l.jsxs("ul",{className:"list-disc pl-5",children:[l.jsx("li",{children:"原地垂直彈跳：ACSM標準與青少年數據。"}),l.jsx("li",{children:"立定跳遠：教育部常模與ACSM衰退研究。"}),l.jsx("li",{children:"100公尺衝刺跑：世界田徑與全國運動會標準。"})]}),l.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"本測驗包含推測值：12-80歲全齡數據不全，依ACSM每10年下降10-15%、性別差異70-90%推估。"})]})]})]})]}),l.jsx("div",{className:"button-group",children:l.jsx("button",{onClick:fe,className:"submit-btn",children:"提交並返回總覽"})})]})}Ym.propTypes={onComplete:ie.func,clearTestData:ie.func};function Fm({onComplete:o}){var re,oe;const{userData:s,setUserData:u}=on(),r=xn(),{weight:d,age:f,gender:m}=s,[p,v]=A.useState(((oe=(re=s.testInputs)==null?void 0:re.muscle)==null?void 0:oe.smm)||""),[b,x]=A.useState({smmScore:null,smPercent:null,smPercentScore:null,finalScore:null});A.useEffect(()=>{var G;if(p){const H={...s.testInputs,muscle:{...(G=s.testInputs)==null?void 0:G.muscle,smm:p}};u(le=>({...le,testInputs:H}))}},[p,u,s.testInputs]);const E=G=>{if(!G)return null;const H=parseInt(G);return H>=10&&H<=12?"10-12":H>=13&&H<=17?"13-17":H>=18&&H<=30?"18-30":H>=31&&H<=40?"31-40":H>=41&&H<=50?"41-50":H>=51&&H<=60?"51-60":H>=61&&H<=70?"61-70":H>=71&&H<=80?"71-80":null},w=(G,H)=>{if(G>=H[100])return 100;if(G<=H[0])return 0;let le=0,fe=100;for(let z=10;z<=100;z+=10)if(G<H[z]){fe=z,le=z-10;break}const te=H[le],se=H[fe];if(se===te)return fe;const ae=le+(G-te)/(se-te)*(fe-le);return Math.round(ae*100)/100},I=()=>{if(!d||!p||!f||!m){alert("請確保已在用戶信息中輸入體重、年齡和性別，並在此輸入骨骼肌肉量！");return}const G=parseFloat(d),H=parseFloat(p),le=E(f);if(!G||!H||!le){alert("請輸入有效的體重、骨骼肌肉量和年齡！");return}const fe=(H/G*100).toFixed(2),te=m==="男性"||m.toLowerCase()==="male"?"male":"female",se=te==="male"?vx:yx,ae=te==="male"?xx:bx,z=se[le],ce=ae[le];if(!z||!ce){alert("無法找到對應的評測標準，請檢查年齡和性別！");return}const he=w(H,z),V=w(parseFloat(fe),ce),U=((he+V)/2).toFixed(2);x({smmScore:he,smPercent:fe,smPercentScore:V,finalScore:U})},_=async()=>{if(!b.finalScore){alert("請先計算骨骼肌肉量分數！");return}const G=sessionStorage.getItem("guestMode")==="true";try{const H={...s.scores,muscleMass:parseFloat(b.finalScore)},le={...s,scores:H};u({...le,ladderScore:s.ladderScore||0});const fe={smm:parseFloat(p),smPercent:parseFloat(b.smPercent),finalScore:parseFloat(b.finalScore)};o&&typeof o=="function"&&o(fe),setTimeout(()=>{r("/user-info",{state:{from:"/muscle-mass"}})},100)}catch(H){console.error("提交失敗:",H),G||alert("更新用戶數據失敗，請稍後再試！"),setTimeout(()=>{r("/user-info",{state:{from:"/muscle-mass"}})},100)}},Z=[{name:"骨骼肌肉量 (SMM)",value:b.smmScore||0},{name:"肌肉量百分比 (SM%)",value:b.smPercentScore||0}],Q=[{name:"最終分數",value:b.finalScore||0}];return l.jsxs("div",{className:"muscle-container",children:[l.jsx("h1",{className:"text-2xl font-bold text-center mb-4",children:"骨骼肌肉量評測"}),l.jsxs("p",{children:["體重：",d?`${d} 公斤`:"未輸入"]}),l.jsxs("p",{children:["年齡：",f||"未輸入"]}),l.jsxs("p",{children:["性別：",m||"未選擇"]}),l.jsxs("div",{className:"exercise-section",children:[l.jsx("h2",{className:"text-lg font-semibold",children:"骨骼肌肉量 (SMM)"}),l.jsx("label",{htmlFor:"smm",className:"block text-sm font-medium text-gray-700",children:"骨骼肌肉量 (kg)"}),l.jsx("input",{id:"smm",name:"smm",type:"number",placeholder:"骨骼肌肉量 (kg)",value:p,onChange:G=>v(G.target.value),className:"input-field"}),l.jsx("button",{onClick:I,className:"calculate-btn",children:"計算"}),b.smmScore!==null&&l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:"score-text",children:["骨骼肌肉量 (SMM) 分數: ",b.smmScore]}),l.jsxs("p",{className:"score-text",children:["骨骼肌肉量百分比 (SM%): ",b.smPercent,"%"]}),l.jsxs("p",{className:"score-text",children:["骨骼肌肉量百分比 (SM%) 分數: ",b.smPercentScore]}),l.jsxs("p",{className:"score-text final-score",children:["最終分數: ",b.finalScore]})]})]}),b.finalScore&&l.jsxs("div",{className:"chart-section",children:[l.jsx("h2",{className:"text-lg font-semibold mb-4",children:"數值比較"}),l.jsx("div",{className:"chart-container",children:l.jsx(lr,{width:"100%",height:300,children:l.jsxs(wh,{data:Z,barSize:30,children:[l.jsx(Th,{strokeDasharray:"3 3"}),l.jsx(Rh,{dataKey:"name"}),l.jsx(_h,{domain:[0,100]}),l.jsx(Oh,{}),l.jsx(kp,{}),l.jsx(Ch,{dataKey:"value",fill:"#4bc0c0",name:"分數"})]})})}),l.jsx("h2",{className:"text-lg font-semibold mt-6 mb-4",children:"最終分數"}),l.jsx("div",{className:"chart-container",children:l.jsx(lr,{width:"100%",height:200,children:l.jsxs(wh,{data:Q,barSize:30,children:[l.jsx(Th,{strokeDasharray:"3 3"}),l.jsx(Rh,{dataKey:"name"}),l.jsx(_h,{domain:[0,100]}),l.jsx(Oh,{}),l.jsx(Ch,{dataKey:"value",fill:"#36a2eb",name:"分數"})]})})})]}),l.jsx("div",{className:"button-group",children:l.jsx("button",{onClick:_,className:"submit-btn",children:"提交並返回總覽"})})]})}Fm.propTypes={onComplete:ie.func,clearTestData:ie.func};function Xm({onComplete:o}){var le,fe;const{userData:s,setUserData:u}=on(),r=xn(),[d,f]=A.useState(((fe=(le=s.testInputs)==null?void 0:le.ffmi)==null?void 0:fe.bodyFat)||""),[m,p]=A.useState(null),[v,b]=A.useState(null),[x,E]=A.useState(""),[w,I]=A.useState(!1),[_,Z]=A.useState(!1);A.useEffect(()=>{var te;if(d){const se={...s.testInputs,ffmi:{...(te=s.testInputs)==null?void 0:te.ffmi,bodyFat:d}};u(ae=>({...ae,testInputs:se}))}},[d,u,s.testInputs]);const Q=()=>{if(!s.gender||!s.height||!s.weight||!s.age){alert("請先在用戶信息頁面填寫性別、身高、體重和年齡");return}if(!d){alert("請輸入體脂肪率");return}const te=s.gender==="male"||s.gender==="男性",se=parseFloat(s.height)/100,ae=parseFloat(s.weight),z=parseFloat(d)/100,he=ae*(1-z)/(se*se),V=se>1.8?he+6*(se-1.8):he;p(V.toFixed(2));let U;te?V<=0?U=0:V<=18.5?U=V/18.5*60:V<28?U=60+(V-18.5)/(28-18.5)*40:U=100:V<=0?U=0:V<=15.5?U=V/15.5*60:V<22?U=60+(V-15.5)/(22-15.5)*40:U=100,b(U.toFixed(2)),te?V<18?E("肌肉量低於平均"):V<20?E("肌肉量在平均值"):V<22?E("肌肉量高於平均值"):V<23?E("肌肉量很高"):V<26?E("肌肉量極高"):V<28?E("肌肉量已經高到可能有使用藥物"):E("不用藥不可能達到的數值"):V<15?E("肌肉量低於平均"):V<17?E("肌肉量在平均值"):V<19?E("肌肉量高於平均值"):V<22?E("肌肉量很高"):E("不用藥不可能達到的數值")},re=async()=>{if(!m||!v){alert("請先計算 FFMI 分數！");return}const te=sessionStorage.getItem("guestMode")==="true";try{const se={...s.scores,bodyFat:parseFloat(v)},ae={...s,scores:se};u({...ae,ladderScore:s.ladderScore||0});const z={bodyFat:parseFloat(d),ffmi:parseFloat(m),ffmiScore:parseFloat(v)};o&&typeof o=="function"&&o(z),setTimeout(()=>{r("/user-info",{state:{from:"/body-fat"}})},100)}catch(se){console.error("提交失敗:",se),te||alert("更新用戶數據失敗，請稍後再試！"),setTimeout(()=>{r("/user-info",{state:{from:"/body-fat"}})},100)}},oe=[{range:"16 - 17",description:"肌肉量低於平均"},{range:"18 - 19",description:"肌肉量在平均值"},{range:"20 - 21",description:"肌肉量高於平均值"},{range:"22",description:"肌肉量很高"},{range:"23 - 25",description:"肌肉量極高"},{range:"26 - 27",description:"肌肉量已經高到可能有使用藥物"},{range:"28 - 30",description:"不用藥不可能達到的數值"}],G=[{range:"13 - 14",description:"肌肉量低於平均"},{range:"15 - 16",description:"肌肉量在平均值"},{range:"17 - 18",description:"肌肉量高於平均值"},{range:"19 - 21",description:"肌肉量很高"},{range:"> 22",description:"不用藥不可能達到的數值"}],H=s.gender==="male"||s.gender==="男性"?oe:G;return l.jsxs("div",{className:"ffmi-container",children:[l.jsx("h1",{className:"ffmi-title",children:"體脂肪率與 FFMI"}),l.jsxs("div",{className:"input-section",children:[l.jsx("label",{htmlFor:"bodyFat",className:"input-label",children:"體脂肪率 (%)"}),l.jsx("input",{id:"bodyFat",name:"bodyFat",type:"number",value:d,onChange:te=>f(te.target.value),placeholder:"輸入體脂肪率 (%)",className:"input-field",required:!0}),l.jsx("button",{onClick:Q,className:"calculate-btn",children:"計算分數"})]}),m&&l.jsxs("div",{className:"result-section",children:[l.jsx("h2",{className:"result-title",children:"您的評估結果"}),l.jsxs("p",{className:"result-text",children:["FFMI：",m]}),l.jsxs("p",{className:"score-text",children:["FFMI 評分：",v," 分"]}),l.jsxs("p",{className:"category-text",children:["FFMI 等級：",x]}),l.jsx("p",{className:"result-text note-text"})]}),l.jsx("div",{className:"description-section",children:l.jsxs("div",{className:"description-card",children:[l.jsxs("div",{className:"description-header",onClick:()=>I(!w),children:[l.jsx("h2",{className:"description-title",children:"FFMI 是什麼？"}),l.jsx("span",{className:`arrow ${w?"expanded":""}`,children:w?"▲":"▼"})]}),w&&l.jsxs("div",{className:"description-content",children:[l.jsx("p",{children:"FFMI（Fat Free Mass Index 無脂肪質量指數）用來評估肌肉量多寡，考量身高與體脂，比 BMI 更準確。數值越高，代表肌肉量越多，是健身評估常用指標。在以下幾個狀況下易造成結果失真："}),l.jsxs("ol",{className:"list-decimal pl-5 mt-2",children:[l.jsx("li",{children:"受測者身高高於平均標準 (190 以上)"}),l.jsx("li",{children:"受測者體脂肪率顯著高於平均標準"}),l.jsx("li",{children:"受測者體重高於平均標準"})]})]})]})}),l.jsx("div",{className:"table-section",children:l.jsxs("div",{className:"table-card",children:[l.jsxs("div",{className:"table-header",onClick:()=>Z(!_),children:[l.jsxs("h2",{className:"table-title",children:["FFMI 對照表 (",s.gender==="male"||s.gender==="男性"?"男性":"女性",")"]}),l.jsx("span",{className:`arrow ${_?"expanded":""}`,children:_?"▲":"▼"})]}),_&&l.jsx("div",{className:"table-content",children:l.jsxs("table",{className:"ffmi-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{children:"FFMI 範圍"}),l.jsx("th",{children:"評價"})]})}),l.jsx("tbody",{children:H.map((te,se)=>l.jsxs("tr",{children:[l.jsx("td",{children:te.range}),l.jsx("td",{children:te.description})]},se))})]})})]})}),l.jsx("button",{onClick:re,className:"ffmi-submit-btn",children:"提交並返回總覽"})]})}Xm.propTypes={onComplete:ie.func,clearTestData:ie.func};function Qm({onLogin:o,onError:s}){const[u,r]=A.useState(!1),d=async()=>{r(!0);try{const f=new cm;f.setCustomParameters({prompt:"select_account"});const p=(await Cp(ue,f)).user;console.log("Google 登入成功:",p.email);const v=Je(Te,"users",p.uid);if(!(await va(v)).exists()){const x={email:p.email,userId:p.uid,nickname:p.displayName||p.email.split("@")[0],avatarUrl:p.photoURL||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),gender:"",height:0,weight:0,age:0,scores:{strength:0,explosivePower:0,cardio:0,muscleMass:0,bodyFat:0},history:[],testInputs:{},friends:[],friendRequests:[],blockedUsers:[],ladderScore:0,ladderRank:0,ladderHistory:[],isGuest:!1,lastActive:new Date().toISOString()};await Yn(v,x),console.log("新用戶資料已創建")}o(p.email,null)}catch(f){console.error("Google 登入失敗:",f);let m="登入失敗";f.code==="auth/popup-closed-by-user"?m="登入視窗被關閉，請重試":f.code==="auth/popup-blocked"?m="彈出視窗被阻擋，請允許彈出視窗後重試":f.code==="auth/account-exists-with-different-credential"?m="此電子郵件已被其他方式註冊，請使用原註冊方式登入":m=`登入失敗：${f.message}`,s(m)}finally{r(!1)}};return l.jsxs("div",{className:"social-login-container",children:[l.jsx("div",{className:"divider",children:l.jsx("span",{children:"或"})}),l.jsx("div",{className:"social-buttons",children:l.jsxs("button",{type:"button",className:"social-btn google-btn",onClick:d,disabled:u,children:[l.jsxs("svg",{className:"google-icon",viewBox:"0 0 24 24",children:[l.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),l.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),u?"處理中...":"使用 Google 登入"]})})]})}Qm.propTypes={onLogin:ie.func.isRequired,onError:ie.func.isRequired};function $m({isOpen:o,onClose:s,onAccept:u}){const[r,d]=A.useState("zh");if(!o)return null;const f=()=>{u(),s()},m=p=>{d(p)};return l.jsx("div",{className:"privacy-modal-overlay",onClick:s,children:l.jsxs("div",{className:"privacy-modal",onClick:p=>p.stopPropagation(),children:[l.jsxs("div",{className:"privacy-modal-header",children:[l.jsx("h2",{children:"隱私權政策 / Privacy Policy"}),l.jsx("button",{className:"close-btn",onClick:s,children:"×"})]}),l.jsxs("div",{className:"language-switch",children:[l.jsx("button",{className:`lang-btn ${r==="zh"?"active":""}`,onClick:()=>m("zh"),children:"中文"}),l.jsx("button",{className:`lang-btn ${r==="en"?"active":""}`,onClick:()=>m("en"),children:"English"})]}),l.jsx("div",{className:"privacy-modal-content",children:r==="zh"?l.jsxs("div",{className:"privacy-content-zh",children:[l.jsxs("div",{className:"privacy-highlight",children:[l.jsx("strong",{children:"重要提醒："}),"本隱私權政策說明我們如何收集、使用和保護您的個人資訊。使用我們的服務即表示您同意本政策的內容。"]}),l.jsxs("section",{children:[l.jsx("h3",{children:"我們收集的資訊"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"帳戶資訊："}),"電子郵件地址、暱稱、頭像"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"個人資料："}),"性別、年齡、身高、體重"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"健康數據："}),"體脂肪率、骨骼肌肉量、運動評測結果"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"社交資訊："}),"好友列表、社群互動內容"]})]})]}),l.jsxs("section",{children:[l.jsx("h3",{children:"我們如何使用您的資訊"}),l.jsxs("ul",{children:[l.jsx("li",{children:"處理您的健身評測並提供結果"}),l.jsx("li",{children:"管理您的帳戶和個人資料"}),l.jsx("li",{children:"提供天梯排行榜功能"}),l.jsx("li",{children:"支援社交功能和好友系統"}),l.jsx("li",{children:"改善服務和提供個人化建議"})]})]}),l.jsxs("section",{children:[l.jsx("h3",{children:"資料安全"}),l.jsxs("ul",{children:[l.jsx("li",{children:"使用加密技術保護資料傳輸和儲存"}),l.jsx("li",{children:"實施存取控制和身份驗證"}),l.jsx("li",{children:"定期進行安全評估和更新"}),l.jsx("li",{children:"我們不會出售您的個人資訊"})]})]}),l.jsxs("section",{children:[l.jsx("h3",{children:"您的權利"}),l.jsxs("ul",{children:[l.jsx("li",{children:"您可以隨時查看和更新您的個人資料"}),l.jsx("li",{children:"您可以隨時刪除您的帳戶"}),l.jsx("li",{children:"您可以要求我們提供您的資料副本"}),l.jsx("li",{children:"您可以反對我們處理您的個人資料"})]})]}),l.jsxs("section",{children:[l.jsx("h3",{children:"第三方服務"}),l.jsx("p",{children:"當您使用 Google 登入時，該服務將根據其隱私政策處理您的資料。"})]}),l.jsxs("div",{className:"privacy-contact",children:[l.jsx("h4",{children:"聯絡我們"}),l.jsx("p",{children:"電子郵件：topaj01@gmail.com"}),l.jsx("p",{children:"我們將在48小時內回應您的詢問"})]})]}):l.jsxs("div",{className:"privacy-content-en",children:[l.jsxs("div",{className:"privacy-highlight",children:[l.jsx("strong",{children:"Important Notice:"})," This Privacy Policy explains how we collect, use, and protect your personal information. By using our services, you agree to the terms of this policy."]}),l.jsxs("section",{children:[l.jsx("h3",{children:"Information We Collect"}),l.jsxs("ul",{children:[l.jsxs("li",{children:[l.jsx("strong",{children:"Account Information:"})," Email address, nickname, avatar"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Personal Data:"})," Gender, age, height, weight"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Health Data:"})," Body fat percentage, skeletal muscle mass, fitness assessment results"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"Social Information:"})," Friends list, community interaction content"]})]})]}),l.jsxs("section",{children:[l.jsx("h3",{children:"How We Use Your Information"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Process your fitness assessments and provide results"}),l.jsx("li",{children:"Manage your account and profile"}),l.jsx("li",{children:"Provide ladder ranking functionality"}),l.jsx("li",{children:"Support social features and friend system"}),l.jsx("li",{children:"Improve services and provide personalized recommendations"})]})]}),l.jsxs("section",{children:[l.jsx("h3",{children:"Data Security"}),l.jsxs("ul",{children:[l.jsx("li",{children:"Use encryption technology to protect data transmission and storage"}),l.jsx("li",{children:"Implement access controls and authentication"}),l.jsx("li",{children:"Conduct regular security assessments and updates"}),l.jsx("li",{children:"We do not sell your personal information"})]})]}),l.jsxs("section",{children:[l.jsx("h3",{children:"Your Rights"}),l.jsxs("ul",{children:[l.jsx("li",{children:"You can view and update your personal data at any time"}),l.jsx("li",{children:"You can delete your account at any time"}),l.jsx("li",{children:"You can request a copy of your data"}),l.jsx("li",{children:"You can object to our processing of your personal data"})]})]}),l.jsxs("section",{children:[l.jsx("h3",{children:"Third-Party Services"}),l.jsx("p",{children:"When you log in using Google, this service will process your data according to its privacy policy."})]}),l.jsxs("div",{className:"privacy-contact",children:[l.jsx("h4",{children:"Contact Us"}),l.jsx("p",{children:"Email: topaj01@gmail.com"}),l.jsx("p",{children:"We will respond to your inquiry within 48 hours"})]})]})}),l.jsxs("div",{className:"privacy-modal-footer",children:[l.jsx("button",{className:"privacy-btn secondary",onClick:s,children:"取消"}),l.jsx("button",{className:"privacy-btn primary",onClick:f,children:"我同意並繼續"})]})]})})}$m.propTypes={isOpen:ie.bool.isRequired,onClose:ie.func.isRequired,onAccept:ie.func.isRequired};function Km({onViewPrivacyPolicy:o}){return l.jsxs("div",{className:"data-security-notice",children:[l.jsxs("div",{className:"security-header",children:[l.jsx("div",{className:"security-icon",children:l.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"})})}),l.jsx("h3",{className:"security-title",children:"資料安全承諾"})]}),l.jsxs("ul",{className:"security-list",children:[l.jsx("li",{children:"您的個人資料使用 Google Firebase 安全儲存，符合國際安全標準"}),l.jsx("li",{children:"所有資料傳輸都經過 HTTPS 加密保護"}),l.jsx("li",{children:"我們絕不會將您的資料出售或分享給第三方"}),l.jsx("li",{children:"您可以隨時在會員中心查看、修改或刪除您的資料"})]}),l.jsx("button",{type:"button",className:"privacy-policy-link",onClick:o,children:"查看完整隱私權政策"})]})}Km.propTypes={onViewPrivacyPolicy:ie.func.isRequired};function Zm({onLogin:o}){const[s,u]=A.useState(""),[r,d]=A.useState(""),[f,m]=A.useState(null),[p,v]=A.useState(!1),[b,x]=A.useState(!1),[E,w]=A.useState(!1),[I,_]=A.useState(!1),Z=xn(),Q=Ha(),{height:re,weight:oe,age:G}=Q.state||{};A.useEffect(()=>{if(console.log("檢查 auth 初始化狀態:",ue),!ue){m("Firebase 未正確初始化，請檢查配置");return}const ae=ue.onAuthStateChanged(he=>{he&&(console.log("用戶已登入:",he.email),Z("/user-info"))}),z=localStorage.getItem("savedEmail"),ce=localStorage.getItem("savedPassword");return z&&ce&&(console.log("從 localStorage 恢復帳號:",z),u(z),d(ce),w(!0)),()=>ae()},[Z]);const H=async ae=>{ae.preventDefault(),m(null),await le()},le=async()=>{if(x(!0),console.log("開始處理表單提交，isRegistering:",p,"email:",s),!ue||!Te){m("Firebase 未正確初始化，請檢查配置"),console.error("auth 或 db 未初始化:",{auth:ue,db:Te}),x(!1);return}try{let ae;if(p){console.log("嘗試註冊用戶:",s),ae=await Up(ue,s,r);const ce=ae.user;console.log("註冊成功，用戶:",ce.email,"UID:",ce.uid);const he=Je(Te,"users",ce.uid),V={email:ce.email,userId:ce.uid,nickname:ce.email.split("@")[0],avatarUrl:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),gender:"",height:re?parseFloat(re):0,weight:oe?parseFloat(oe):0,age:G?parseInt(G,10):0,scores:{strength:0,explosivePower:0,cardio:0,muscleMass:0,bodyFat:0},history:[],testInputs:{},friends:[],friendRequests:[],blockedUsers:[],ladderScore:0,ladderRank:0,ladderHistory:[],isGuest:!1,lastActive:new Date().toISOString()};console.log("儲存初始用戶數據:",V),await Yn(he,V),console.log("用戶數據已儲存，文檔 ID:",ce.uid)}else console.log("嘗試登入用戶:",s),ae=await zo(ue,s,r),console.log("登入成功，用戶:",ae.user.email,"UID:",ae.user.uid);const z=ae.user;o(z.email,r),E?(console.log("儲存帳號到 localStorage:",s),localStorage.setItem("savedEmail",s),localStorage.setItem("savedPassword",r)):(console.log("清除 localStorage 中的帳號"),localStorage.removeItem("savedEmail"),localStorage.removeItem("savedPassword")),setTimeout(()=>{console.log("導航到 /user-info"),Z("/user-info")},500)}catch(ae){console.error("登入/註冊失敗:",ae.code,ae.message),m(`發生錯誤：${ae.message} (代碼: ${ae.code})`)}finally{x(!1)}},fe=()=>{console.log("社交登入成功，導航到 /user-info"),Z("/user-info")},te=ae=>{m(ae)},se=()=>{localStorage.setItem("privacyPolicyViewed","true")};return l.jsxs("div",{className:"login-container",children:[l.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:p?"註冊":"登入"}),f&&l.jsx("p",{className:"error-message",children:f}),l.jsxs("form",{onSubmit:H,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"電子郵件"}),l.jsx("input",{type:"email",value:s,onChange:ae=>u(ae.target.value),placeholder:"輸入你的電子郵件",className:"input-field",required:!0,disabled:b})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"密碼"}),l.jsx("input",{type:"password",value:r,onChange:ae=>d(ae.target.value),placeholder:"輸入你的密碼",className:"input-field",required:!0,disabled:b})]}),l.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",marginBottom:"8px"},children:l.jsxs("label",{htmlFor:"rememberMe",style:{display:"flex",alignItems:"center",cursor:"pointer",whiteSpace:"nowrap",fontSize:"14px",color:"#555"},children:[l.jsx("input",{id:"rememberMe",type:"checkbox",checked:E,onChange:ae=>w(ae.target.checked),disabled:b,style:{margin:0}}),l.jsx("span",{style:{marginLeft:"6px"},children:"記住我的帳號"})]})}),l.jsx("button",{type:"submit",className:"submit-btn",disabled:b,children:b?"處理中...":p?"註冊":"登入"})]}),l.jsx("button",{onClick:()=>v(!p),className:"toggle-btn",children:p?"已有帳號？點此登入":"沒有帳號？點此註冊"}),l.jsx(Km,{onViewPrivacyPolicy:()=>_(!0)}),l.jsx(Qm,{onLogin:fe,onError:te}),l.jsxs("div",{className:"instructions-container",children:[l.jsx("h2",{className:"instructions-title",children:"使用說明"}),l.jsxs("ul",{className:"instructions-list",children:[l.jsxs("li",{children:[l.jsx("strong",{children:"公平評測"}),"：依性別、年齡、身高、體重，結合科學統計，分數化呈現，簡單易懂。"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"全面分析"}),"：五邊形雷達圖顯示弱項，指引補強方向。"]}),l.jsxs("li",{children:[l.jsx("strong",{children:"成長追蹤"}),"：記錄進步軌跡，優化課表效率。"]})]})]}),l.jsx($m,{isOpen:I,onClose:()=>_(!1),onAccept:se})]})}Zm.propTypes={onLogin:ie.func.isRequired};function _x(){const{userData:o,setUserData:s}=on(),[u,r]=A.useState(!1),[d,f]=A.useState([]),[m,p]=A.useState(!1),[v,b]=A.useState(1),[x]=A.useState(10),[E,w]=A.useState("total"),I=A.useRef(!1),_=A.useMemo(()=>[...(o==null?void 0:o.history)||[]].sort((ge,y)=>{const N=ge.timestamp?new Date(ge.timestamp):new Date(ge.date);return(y.timestamp?new Date(y.timestamp):new Date(y.date))-N}),[o==null?void 0:o.history]),Z=Math.ceil(_.length/x),Q=(v-1)*x,re=Q+x,oe=_.slice(Q,re),G=_.length,H=50,le=G>=H*.8,fe=G>=H,te=A.useMemo(()=>{if(_.length===0)return null;const U=_.slice(0,6),ge=U.map(q=>(q.timestamp?new Date(q.timestamp):new Date(q.date)).toLocaleDateString("zh-TW",{month:"numeric",day:"numeric"})).reverse(),y=U.map(q=>{const D=q.scores||{};return q.averageScore||(Object.values(D).filter(K=>K>0).reduce((K,Ee)=>K+Ee,0)/Object.values(D).filter(K=>K>0).length).toFixed(2)}).reverse(),N=U.map(q=>{var D;return(((D=q.scores)==null?void 0:D.strength)||0).toFixed(2)}).reverse(),k=U.map(q=>{var D;return(((D=q.scores)==null?void 0:D.explosivePower)||0).toFixed(2)}).reverse(),F=U.map(q=>{var D;return(((D=q.scores)==null?void 0:D.cardio)||0).toFixed(2)}).reverse(),ee=U.map(q=>{var D;return(((D=q.scores)==null?void 0:D.muscleMass)||0).toFixed(2)}).reverse(),J=U.map(q=>{var D;return(((D=q.scores)==null?void 0:D.bodyFat)||0).toFixed(2)}).reverse();return{labels:ge,datasets:[{label:"總分",data:y,color:"#28a745",key:"total"},{label:"力量",data:N,color:"#007bff",key:"strength"},{label:"爆發力",data:k,color:"#ffc107",key:"explosive"},{label:"心肺",data:F,color:"#dc3545",key:"cardio"},{label:"肌肉量",data:ee,color:"#6f42c1",key:"muscle"},{label:"FFMI",data:J,color:"#fd7e14",key:"ffmi"}]}},[_]),se=U=>{const ge=Number(U);return ge>=80?"score-excellent":ge>=60?"score-good":ge>=40?"score-fair":ge>0?"score-poor":"score-none"};A.useEffect(()=>{o&&!I.current&&(console.log("History.js - userData:",o),console.log("History.js - sortedHistory:",_),console.log("History.js - 記錄數量:",G,"/",H),console.log("History.js - 當前頁面:",v,"/",Z),I.current=!0)},[o,_,G,v,Z]);const ae=()=>{r(!u),f([])},z=U=>{d.includes(U)?f(d.filter(ge=>ge!==U)):f([...d,U])},ce=()=>{const U=_.filter((ge,y)=>!d.includes(y));s({...o,history:U}),r(!1),f([]),b(1),console.log("History.js - 已刪除所選紀錄")},he=U=>{b(Math.max(1,Math.min(U,Z)))},V=()=>{if(!te)return null;const U=18,ge="600",y=te.datasets.find(N=>N.key===E);return l.jsxs("div",{className:"chart-container",children:[l.jsxs("div",{className:"chart-header",children:[l.jsx("h3",{children:"📈 數據趨勢圖"}),l.jsx("div",{className:"chart-note",children:"顯示最近六次數據"}),l.jsx("div",{className:"chart-selector",children:l.jsx("select",{value:E,onChange:N=>w(N.target.value),className:"chart-select",children:te.datasets.map(N=>l.jsx("option",{value:N.key,children:N.label},N.key))})})]}),l.jsx("div",{className:"chart-wrapper",children:l.jsxs("svg",{className:"chart",viewBox:"0 0 800 800",children:[[...Array(6)].map((N,k)=>{const ee=720-k*20*480/100;return l.jsx("line",{x1:"50",y1:ee,x2:"750",y2:ee,stroke:"#dee2e6",strokeWidth:"1"},`grid-y-${k}`)}),y&&l.jsxs("g",{children:[l.jsx("polyline",{points:y.data.map((N,k)=>{const F=50+k*700/(te.labels.length-1),ee=720-N*480/100;return`${F},${ee}`}).join(" "),fill:"none",stroke:y.color,strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),y.data.map((N,k)=>{const F=50+k*700/(te.labels.length-1),ee=720-N*480/100;return l.jsx("circle",{cx:F,cy:ee,r:"5",fill:y.color,stroke:"white",strokeWidth:"2"},`point-${k}`)})]},y.label),te.labels.map((N,k)=>{const F=50+k*700/(te.labels.length-1);return l.jsx("text",{x:F,y:"780",textAnchor:"middle",fontSize:U,fontWeight:ge,fill:"#495057",children:N},`label-${k}`)}),[...Array(6)].map((N,k)=>{const F=k*20,ee=720-F*480/100;return l.jsx("text",{x:"30",y:ee+6,textAnchor:"end",fontSize:U,fontWeight:ge,fill:"#495057",children:F},`y-label-${k}`)})]})})]})};return l.jsxs("div",{className:"history-container",children:[l.jsx("h1",{children:"歷史紀錄"}),l.jsx("div",{className:"history-table-section",children:_.length>0?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"score-legend",children:[l.jsx("h4",{children:"🎯 分數解讀"}),l.jsxs("div",{className:"legend-items",children:[l.jsx("span",{className:"legend-item score-excellent",children:"80+ 優秀"}),l.jsx("span",{className:"legend-item score-good",children:"60-79 良好"}),l.jsx("span",{className:"legend-item score-fair",children:"40-59 一般"}),l.jsx("span",{className:"legend-item score-poor",children:"1-39 待加強"})]})]}),l.jsxs("table",{className:"history-table",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsxs("th",{className:`date-col ${m?"mobile-hidden":""}`,children:[l.jsx("span",{className:"icon",children:"📅"}),l.jsx("span",{className:"desktop-text",children:"日期"})]}),l.jsxs("th",{className:"score-col",children:[l.jsx("span",{className:"icon",children:"💪"}),l.jsx("span",{className:"desktop-text",children:"力量"})]}),l.jsxs("th",{className:"score-col",children:[l.jsx("span",{className:"icon",children:"⚡"}),l.jsx("span",{className:"desktop-text",children:"爆發力"})]}),l.jsxs("th",{className:`score-col ${m?"":"mobile-hidden"}`,children:[l.jsx("span",{className:"icon",children:"❤️"}),l.jsx("span",{className:"desktop-text",children:"心肺"})]}),l.jsxs("th",{className:`score-col ${m?"":"mobile-hidden"}`,children:[l.jsx("span",{className:"icon",children:"🥩"}),l.jsx("span",{className:"desktop-text",children:"肌肉量"})]}),l.jsxs("th",{className:`score-col ${m?"":"mobile-hidden"}`,children:[l.jsx("span",{className:"icon",children:"📊"}),l.jsx("span",{className:"desktop-text",children:"FFMI"})]}),l.jsxs("th",{className:"average-col",children:[l.jsx("span",{className:"icon",children:"🏆"}),l.jsx("span",{className:"desktop-text",children:"總分"})]}),u&&l.jsx("th",{className:"select-col",children:"選擇"})]})}),l.jsx("tbody",{children:oe.map((U,ge)=>{const y=Q+ge,N=U.scores||{},k=U.averageScore||(Object.values(N).filter(F=>F>0).reduce((F,ee)=>F+ee,0)/Object.values(N).filter(F=>F>0).length).toFixed(2)||0;return l.jsxs("tr",{children:[l.jsx("td",{className:`date-cell ${m?"mobile-hidden":""}`,children:U.date||new Date(U.timestamp).toLocaleDateString("zh-TW")}),l.jsx("td",{className:`score-cell ${se(N.strength||0)}`,children:(N.strength||0).toFixed(2)}),l.jsx("td",{className:`score-cell ${se(N.explosivePower||0)}`,children:(N.explosivePower||0).toFixed(2)}),l.jsx("td",{className:`score-cell ${m?"":"mobile-hidden"} ${se(N.cardio||0)}`,children:(N.cardio||0).toFixed(2)}),l.jsx("td",{className:`score-cell ${m?"":"mobile-hidden"} ${se(N.muscleMass||0)}`,children:(N.muscleMass||0).toFixed(2)}),l.jsx("td",{className:`score-cell ${m?"":"mobile-hidden"} ${se(N.bodyFat||0)}`,children:(N.bodyFat||0).toFixed(2)}),l.jsx("td",{className:`average-cell ${se(k)}`,children:l.jsx("strong",{children:Number(k).toFixed(2)})}),u&&l.jsx("td",{className:"select-cell",children:l.jsx("input",{type:"checkbox",className:"history-checkbox",checked:d.includes(y),onChange:()=>z(y)})})]},U.id||y)})})]}),Z>1&&l.jsxs("div",{className:"pagination",children:[l.jsx("button",{onClick:()=>he(v-1),disabled:v===1,className:"pagination-btn",children:"← 上一頁"}),l.jsxs("span",{className:"page-info",children:[v,"/",Z]}),l.jsx("button",{onClick:()=>he(v+1),disabled:v===Z,className:"pagination-btn",children:"下一頁 →"})]}),l.jsx("div",{className:"action-buttons",children:l.jsx("button",{onClick:()=>p(!m),className:"toggle-delete-btn mobile-toggle-btn",children:m?"顯示日期 📅":"顯示所有指標 📊"})}),_.length>0&&l.jsxs("div",{className:"history-stats",children:[l.jsxs("div",{className:"stats-and-actions",children:[l.jsxs("div",{className:"record-count",children:[l.jsx("span",{className:"count-label",children:"📊 記錄數量："}),l.jsxs("span",{className:`count-value ${le?"near-limit":""} ${fe?"at-limit":""}`,children:[G," / ",H]})]}),l.jsxs("div",{className:"action-buttons",children:[l.jsx("button",{onClick:ae,className:`toggle-delete-btn ${u?"cancel-delete-btn":"edit-mode-btn"}`,children:u?"取消":"清理資料"}),u&&l.jsx("button",{onClick:ce,className:"toggle-delete-btn delete-selected-btn",children:"刪除所選"})]})]}),le&&!fe&&l.jsx("div",{className:"limit-warning",children:"⚠️ 記錄數量接近上限，建議清理舊記錄"}),fe&&l.jsx("div",{className:"limit-error",children:"🚫 記錄數量已達上限，無法新增記錄，請先清理舊記錄"})]})]}):l.jsxs("div",{className:"no-history",children:[l.jsx("h3",{children:"📋 尚無歷史紀錄"}),l.jsx("p",{children:"完成評測後，您的紀錄就會出現在這裡"}),l.jsx("p",{children:"開始您的最強肉體之旅吧！"})]})}),_.length>0&&V()]})}function Ox(){const[o,s]=A.useState("載入中...");return A.useEffect(()=>{fetch("/privacy-policy.html").then(u=>{if(!u.ok)throw new Error("無法載入隱私權政策");return u.text()}).then(u=>{s(u)}).catch(u=>{console.error("載入隱私權政策失敗:",u),s("<div>載入隱私權政策時發生錯誤，請稍後再試。</div>")})},[]),l.jsx("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto"},children:l.jsx("div",{dangerouslySetInnerHTML:{__html:o}})})}function Jm({open:o,onClose:s,onRegister:u}){return o?l.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.35)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsxs("div",{style:{background:"#fff",borderRadius:"12px",padding:"32px 24px",minWidth:"320px",maxWidth:"90vw",boxShadow:"0 8px 32px rgba(0,0,0,0.18)",textAlign:"center",position:"relative"},children:[l.jsx("h2",{style:{marginBottom:"16px",color:"#667eea"},children:"註冊帳號才能使用此功能"}),l.jsx("p",{style:{marginBottom:"24px",color:"#444"},children:"好友與天梯功能僅限註冊用戶使用，立即註冊帳號即可解鎖完整社交體驗！"}),l.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"16px"},children:[l.jsx("button",{onClick:u,style:{padding:"10px 24px",background:"#667eea",color:"#fff",border:"none",borderRadius:"6px",fontSize:"16px",cursor:"pointer",fontWeight:"bold",boxShadow:"0 2px 8px rgba(102,126,234,0.08)"},children:"前往註冊/登入"}),l.jsx("button",{onClick:s,style:{padding:"10px 24px",background:"#eee",color:"#333",border:"none",borderRadius:"6px",fontSize:"16px",cursor:"pointer",fontWeight:"bold"},children:"取消"})]})]})}):null}Jm.propTypes={open:ie.bool.isRequired,onClose:ie.func.isRequired,onRegister:ie.func.isRequired};const Cx=[{key:"community",label:"社群",icon:l.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v2"}),l.jsx("circle",{cx:"9",cy:"7",r:"4"}),l.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),l.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),path:"/community",guestBlock:!0},{key:"home",label:"首頁",icon:l.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M3 9l9-7 9 7"}),l.jsx("path",{d:"M9 22V12h6v10"})]}),path:"/user-info",guestBlock:!1},{key:"assessment",label:"開始評測",icon:l.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),l.jsx("path",{d:"M2 17l10 5 10-5"}),l.jsx("path",{d:"M2 12l10 5 10-5"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"}),l.jsx("path",{d:"M12 9v6"}),l.jsx("path",{d:"M9 12h6"})]}),path:"/user-info",guestBlock:!1},{key:"ladder",label:"天梯",icon:l.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),l.jsx("path",{d:"M7 3v18M17 3v18M3 9h18M3 15h18"})]}),path:"/ladder",guestBlock:!0},{key:"history",label:"歷史",icon:l.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("circle",{cx:"12",cy:"12",r:"10"}),l.jsx("polyline",{points:"12 6 12 12 16 14"})]}),path:"/history",guestBlock:!1}];function Ux(){const o=sessionStorage.getItem("guestMode")==="true";return ue.currentUser?!1:o}function Bx(){const o=xn(),s=Ha(),[u,r]=A.useState(!1),d=m=>{m.guestBlock&&Ux()?r(!0):m.key==="home"?o(m.path,{state:{scrollTo:"radar"}}):m.key==="assessment"?o(m.path,{state:{scrollTo:"tests"}}):o(m.path)},f=()=>{r(!1),o("/login")};return l.jsxs(l.Fragment,{children:[l.jsx("nav",{style:{position:"fixed",bottom:0,left:0,right:0,height:"64px",background:"#fff",borderTop:"1px solid #eee",display:"flex",justifyContent:"space-around",alignItems:"center",zIndex:1e3,boxShadow:"0 -2px 8px rgba(0,0,0,0.04)"},children:Cx.map(m=>l.jsx("div",{style:{position:"relative",flex:1,textAlign:"center"},children:l.jsxs("button",{onClick:()=>d(m),onMouseDown:p=>p.preventDefault(),style:{background:"none",border:"none",outline:"none",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:s.pathname===m.path?"#667eea":"#888",fontWeight:s.pathname===m.path?"bold":"normal",fontSize:"12px",width:"100%",height:"64px",cursor:"pointer",position:"relative",transition:"color 0.2s"},"aria-label":m.label,children:[m.icon,l.jsx("span",{style:{marginTop:"4px"},children:m.label})]})},m.key))}),l.jsx(Jm,{open:u,onClose:()=>r(!1),onRegister:f})]})}const Dx=()=>{var y;const{userData:o}=on(),s=Ha(),[u,r]=A.useState([]),[d,f]=A.useState(0),[m,p]=A.useState("all"),[v,b]=A.useState("total"),[x,E]=A.useState(!0),[w,I]=A.useState(!1),[_,Z]=A.useState(null),[Q,re]=A.useState({x:0,y:0});A.useRef(null);const oe=A.useRef(null),G=A.useRef(!1),H=A.useRef(!1),le=A.useRef(!1),fe=A.useMemo(()=>[{value:"all",label:"全部年齡"},{value:"under20",label:"20歲以下"},{value:"21to30",label:"21~30歲"},{value:"31to40",label:"31~40歲"},{value:"41to50",label:"41~50歲"},{value:"51to60",label:"51~60歲"},{value:"61to70",label:"61~70歲"},{value:"over70",label:"70歲以上"},{value:"unknown",label:"未知年齡"}],[]),te=A.useCallback(async()=>{var k;if(H.current){console.log("🔄 正在載入中，跳過重複請求");return}const N={selectedAgeGroup:m,selectedTab:v,userLadderScore:(o==null?void 0:o.ladderScore)||0};if(!G.current&&oe.current&&JSON.stringify(oe.current)===JSON.stringify(N)){console.log("🔄 載入參數未變化，跳過重複載入");return}G.current=!1,oe.current=N,H.current=!0,E(!0);try{console.log("🚀 開始載入天梯數據...",N);const F=pn(It(Te,"users"),Io("ladderScore","desc"),Ll(200)),ee=await vn(F);let J=[];if(console.log(`📥 從 Firebase 獲取到 ${ee.size} 個文檔`),ee.forEach(q=>{var K;const D=q.data();if(D.ladderScore>0){const Ee=D.isAnonymousInLadder===!0,Re={...D,ageGroup:D.age?Ml(Number(D.age)):D.ageGroup||""};J.push({id:q.id,...Re,displayName:Ee?"匿名用戶":D.nickname||((K=D.email)==null?void 0:K.split("@")[0])||"未命名用戶",avatarUrl:Ee?"":D.avatarUrl,isAnonymous:Ee})}}),console.log(`📊 過濾後有分數的用戶：${J.length} 名`),m!=="all"){const q=J.length;console.log(`🔍 年齡段篩選調試 - 選擇的年齡段: ${m}`),console.log("🔍 年齡段篩選調試 - 篩選前的用戶年齡段分布:",J.reduce((D,K)=>(D[K.ageGroup]=(D[K.ageGroup]||0)+1,D),{})),J=J.filter(D=>{const K=D.ageGroup===m;return K||console.log(`🔍 用戶 ${D.displayName} (年齡: ${D.age}, 年齡段: ${D.ageGroup}) 不符合篩選條件 ${m}`),K}),console.log(`👥 年齡段過濾：${q} → ${J.length} 名用戶`)}if(v==="weekly"){const q=J.length,D=new Date;D.setDate(D.getDate()-7),J=J.filter(K=>K.lastActive?new Date(K.lastActive)>=D:!1),console.log(`📅 本周新進榜過濾：${q} → ${J.length} 名用戶`)}if(J.sort((q,D)=>D.ladderScore-q.ladderScore),J=J.slice(0,50),console.log(`📊 天梯數據載入完成：共 ${J.length} 名用戶，最高分：${((k=J[0])==null?void 0:k.ladderScore)||0}`),r(J),o&&o.ladderScore>0){const q=J.findIndex(D=>{var K;return D.id===o.userId||D.id===((K=ue.currentUser)==null?void 0:K.uid)});if(q>=0){const D=q+1;console.log(`🎯 用戶排名：第 ${D} 名`),f(D)}else{console.log("📋 用戶不在前50名內，計算實際排名...");const D=ee.docs.map(Ue=>{const _e=Ue.data();return _e.ladderScore>0?{id:Ue.id,..._e,ageGroup:_e.age?Ml(Number(_e.age)):_e.ageGroup||""}:null}).filter(Boolean);let K=D;if(m!=="all"&&(K=D.filter(Ue=>Ue.ageGroup===m)),v==="weekly"){const Ue=new Date;Ue.setDate(Ue.getDate()-7),K=K.filter(_e=>_e.lastActive?new Date(_e.lastActive)>=Ue:!1)}K.sort((Ue,_e)=>_e.ladderScore-Ue.ladderScore);const Ee=K.findIndex(Ue=>{var _e;return Ue.id===o.userId||Ue.id===((_e=ue.currentUser)==null?void 0:_e.uid)}),Re=Ee>=0?Ee+1:0;console.log(`🎯 用戶實際排名：第 ${Re} 名`),f(Re)}}else f(0)}catch(F){console.error("載入天梯數據失敗:",F),console.error("錯誤詳情:",{selectedAgeGroup:m,selectedTab:v,errorCode:F.code,errorMessage:F.message})}finally{E(!1),H.current=!1,le.current=!1}},[m,v,o]);A.useEffect(()=>{var N;o&&!((N=s.state)!=null&&N.forceReload)&&te()},[o,m,v,te,(y=s.state)==null?void 0:y.forceReload]),A.useEffect(()=>{var N;(N=s.state)!=null&&N.forceReload&&o&&!le.current&&(console.log("🔄 檢測到強制重新載入標記，立即重新載入天梯數據"),le.current=!0,window.history.replaceState({},document.title),setTimeout(()=>{G.current=!0,oe.current=null,te()},0))},[s.state,o,te]);const se=A.useMemo(()=>()=>({}),[]),ae=()=>null,z=N=>N===1?"🥇":N===2?"🥈":N===3?"🥉":N<=10?"🏆":N<=50?"⭐":"",ce=A.useCallback(N=>{const k=fe.find(F=>F.value===N);return k?k.label:N},[fe]),he=A.useMemo(()=>{var F;if(`${o==null?void 0:o.ladderScore}${d}${u.length}${x}`,!o||!o.ladderScore||o.ladderScore===0||d>0&&d<=7||d===0)return null;const N=d,k=z(N);return l.jsx("div",{className:"floating-rank-display","data-rank":N,children:l.jsxs("div",{className:"floating-rank-card",children:[l.jsxs("div",{className:"ladder__rank",children:[l.jsx("span",{className:"ladder__rank-number",children:N}),l.jsx("span",{className:"ladder__rank-badge",children:k})]}),l.jsxs("div",{className:"ladder__user",children:[l.jsxs("div",{className:"ladder__avatar",children:[(()=>{const J=sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":o.avatarUrl;return J&&J.trim()!==""?l.jsx("img",{src:J,alt:"頭像",onError:q=>{console.log("頭像載入失敗，使用預設頭像"),q.target.style.display="none";const D=q.target.nextSibling;D&&(D.style.display="flex")},onLoad:()=>{console.log("頭像載入成功")}}):null})(),l.jsx("div",{className:"ladder__avatar-placeholder",style:{display:(()=>{const J=sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":o.avatarUrl;return J&&J.trim()!==""?"none":"flex"})()},children:o.nickname?o.nickname.charAt(0).toUpperCase():"U"})]}),l.jsxs("div",{className:"ladder__user-info",children:[l.jsx("div",{className:"ladder__user-name current-user-flame",children:o.nickname||((F=o.email)==null?void 0:F.split("@")[0])||"未命名用戶"}),l.jsxs("div",{className:"ladder__user-details",children:[ce(o.ageGroup)," •"," ",o.gender==="male"?"男":"女",l.jsx("br",{}),l.jsx("span",{className:"last-update",children:"我的排名"})]})]})]}),l.jsxs("div",{className:"ladder__score",children:[l.jsx("span",{className:"ladder__score-value",children:Yh(o.ladderScore)}),l.jsx("span",{className:"ladder__score-label",children:"分"})]})]})})},[o,d,u.length,x,ce]),V=(N,k)=>{if(N.isAnonymous)return;const F=k.currentTarget.getBoundingClientRect(),ee=200,J=20,q=u.findIndex(Re=>Re.id===N.id)===0;let D=F.top-10,K=-100,Ee={};q?(D=F.bottom,K=0,Ee={width:"100%",maxWidth:"none",left:"0",transform:"translateX(0) translateY(0)",borderRadius:"0 0 16px 16px",boxShadow:"0 8px 25px rgba(0, 0, 0, 0.3)",zIndex:1001}):F.top-ee-J<0&&(D=F.bottom+10,K=0),re({x:F.left+F.width/2,y:D,transformY:K,tooltipStyle:Ee}),Z(N)},U=()=>{Z(null)},ge=N=>{if(!N)return"未知";const k=N.toDate?N.toDate():new Date(N),ee=new Date-k,J=Math.floor(ee/(1e3*60)),q=Math.floor(ee/(1e3*60*60)),D=Math.floor(ee/(1e3*60*60*24));return J<1?"剛剛":J<60?`${J}分鐘前`:q<24?`${q}小時前`:D<7?`${D}天前`:k.toLocaleDateString("zh-TW")};return x?l.jsx("div",{className:"ladder",children:l.jsxs("div",{className:"ladder__loading",children:[l.jsx("div",{className:"ladder__loading-spinner"}),l.jsx("p",{children:"載入排行榜中..."})]})}):l.jsxs("div",{className:"ladder",children:[ae(),he,l.jsxs("div",{className:"ladder__header",children:[l.jsx("h2",{children:"天梯排行榜"}),l.jsxs("div",{className:"ladder__filters",children:[l.jsx("div",{className:"ladder__filter-container",children:l.jsxs("select",{value:v,onChange:N=>b(N.target.value),className:"ladder__filter-select",children:[l.jsx("option",{value:"total",children:"🏆 總排行榜"}),l.jsx("option",{value:"weekly",children:"⭐ 本周新進榜"})]})}),l.jsx("div",{className:"ladder__filter-container",children:l.jsx("select",{value:m,onChange:N=>p(N.target.value),className:"ladder__filter-select",children:fe.map(N=>l.jsx("option",{value:N.value,children:N.label},N.value))})}),d>50&&l.jsx("button",{className:"ladder__context-btn",onClick:()=>I(!w),children:w?"顯示前50名精華區":"顯示我的排名範圍"})]})]}),l.jsxs("div",{className:"ladder__list",children:[w&&d>50&&l.jsxs("div",{style:{padding:"8px 16px",background:"linear-gradient(135deg, #ff6b35 0%, #f7931e 100%)",color:"white",borderRadius:"8px 8px 0 0",fontSize:"12px",fontWeight:"600",textAlign:"center"},children:["🎯 您的排名範圍（第 ",Math.max(1,d-15)," - ",d+15," ","名）"]}),u.length===0?l.jsxs("div",{className:"ladder__empty",children:[l.jsx("p",{children:v==="weekly"?"暫無本周新進榜數據":"暫無排行榜數據"}),l.jsx("p",{children:v==="weekly"?"本周完成評測即可上榜！":"完成評測即可上榜！"})]}):u.map((N,k)=>l.jsxs("div",{className:`ladder__item ${N.id===(o==null?void 0:o.userId)?"ladder__item--current-user":""} ${N.isAnonymous?"":"clickable"}`,style:{...N.id===(o==null?void 0:o.userId)?{background:"linear-gradient(135deg, rgba(255, 107, 53, 0.1) 0%, rgba(247, 147, 30, 0.1) 100%)",borderLeft:"4px solid #ff6b35",fontWeight:"600"}:{},...se(N,k)},onClick:N.isAnonymous?void 0:F=>V(N,F),title:N.isAnonymous?"":"點擊查看訓練背景",children:[l.jsxs("div",{className:"ladder__rank",children:[l.jsx("span",{className:`ladder__rank-number ${N.id===(o==null?void 0:o.userId)?"rank-changing":""}`,children:k+1}),l.jsx("span",{className:"ladder__rank-badge",children:z(k+1)})]}),l.jsxs("div",{className:"ladder__user",children:[l.jsxs("div",{className:"ladder__avatar",children:[N.avatarUrl&&N.avatarUrl.trim()!==""&&!N.isAnonymous?l.jsx("img",{src:N.avatarUrl,alt:"頭像",onError:F=>{console.log("頭像載入失敗，使用預設頭像"),F.target.style.display="none";const ee=F.target.nextSibling;ee&&(ee.style.display="flex")},onLoad:()=>{console.log("頭像載入成功")}}):null,l.jsx("div",{className:`ladder__avatar-placeholder ${N.isAnonymous?"anonymous":""}`,style:{display:N.avatarUrl&&N.avatarUrl.trim()!==""&&!N.isAnonymous?"none":"flex"},children:N.isAnonymous?"👤":N.displayName.charAt(0).toUpperCase()})]}),l.jsxs("div",{className:"ladder__user-info",children:[l.jsxs("div",{className:`ladder__user-name ${N.isAnonymous?"anonymous":""} ${N.id===(o==null?void 0:o.userId)?"current-user-flame":""}`,children:[N.displayName,N.isAnonymous&&" 🔒"]}),l.jsx("div",{className:"ladder__user-details",children:N.isAnonymous?"匿名用戶":l.jsxs(l.Fragment,{children:[ce(N.ageGroup)," •"," ",N.gender==="male"?"男":"女",(N.lastLadderSubmission||N.lastActive)&&l.jsxs(l.Fragment,{children:[l.jsx("br",{}),l.jsxs("span",{className:"last-update",children:["更新於"," ",ge(N.lastLadderSubmission||N.lastActive)]})]})]})})]})]}),l.jsxs("div",{className:"ladder__score",children:[l.jsx("span",{className:"ladder__score-value",children:Yh(N.ladderScore)}),l.jsx("span",{className:"ladder__score-label",children:"分"})]})]},N.id))]}),l.jsxs("div",{className:"ladder__footer",children:[v==="weekly"&&l.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"8px"},children:"📅 本周新進榜：顯示過去7天內有活動的用戶"}),d>50&&l.jsxs("p",{style:{fontSize:"12px",color:"#666",marginTop:"8px",fontStyle:"italic"},children:["💡 提示：您的排名為第 ",d," ","名，可以點擊上方按鈕查看您附近的競爭對手"]})]}),_&&l.jsxs("div",{className:"training-tooltip",style:{position:"fixed",left:Q.x,top:Q.y,transform:`translateX(-50%) translateY(${Q.transformY||-100}%)`,zIndex:1e3,...Q.tooltipStyle},children:[l.jsxs("div",{className:`tooltip-content ${u.findIndex(N=>N.id===_.id)===0?"first-place-glow expanded":""}`,children:[l.jsxs("div",{className:"tooltip-header",children:[l.jsxs("h4",{children:[_.displayName," 的訓練背景"]}),l.jsx("button",{className:"tooltip-close",onClick:U,children:"×"})]}),l.jsxs("div",{className:"tooltip-body",children:[_.profession&&l.jsxs("div",{className:"tooltip-item",children:[l.jsx("span",{className:"tooltip-label",children:"💼 職業："}),l.jsx("span",{className:"tooltip-value",children:_.profession})]}),_.weeklyTrainingHours&&l.jsxs("div",{className:"tooltip-item",children:[l.jsx("span",{className:"tooltip-label",children:"⏰ 每周訓練時數："}),l.jsxs("span",{className:"tooltip-value",children:[_.weeklyTrainingHours," 小時"]})]}),_.trainingYears&&l.jsxs("div",{className:"tooltip-item",children:[l.jsx("span",{className:"tooltip-label",children:"📅 訓練年資："}),l.jsxs("span",{className:"tooltip-value",children:[_.trainingYears," 年"]})]}),!_.profession&&!_.weeklyTrainingHours&&!_.trainingYears&&l.jsxs("div",{className:"tooltip-empty",children:[l.jsx("p",{children:"該用戶尚未填寫訓練背景信息"}),l.jsx("p",{children:"💡 在個人資料頁面填寫訓練背景，激勵其他健身愛好者！"})]})]})]}),l.jsx("div",{className:`tooltip-arrow ${u.findIndex(N=>N.id===_.id)===0?"first-place-arrow expanded":""}`,style:{...Q.transformY===0?{bottom:"auto",top:"-8px",borderTop:"none",borderBottom:"8px solid white",...u.findIndex(N=>N.id===_.id)===0&&{left:"50px",transform:"translateX(-50%)"}}:{bottom:"-8px",top:"auto",borderBottom:"none",borderTop:"8px solid white"}}})]}),_&&l.jsx("div",{className:"tooltip-overlay",onClick:U,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999}})]})},Mx=()=>{var ut;const o=xn(),{userData:s,setUserData:u}=on(),[r,d]=A.useState("feed"),[f,m]=A.useState([]),[p,v]=A.useState(!0),[b,x]=A.useState(""),[E,w]=A.useState(""),[I,_]=A.useState(""),[Z,Q]=A.useState(!1),[re,oe]=A.useState([]),[G,H]=A.useState([]),[le,fe]=A.useState(""),[te,se]=A.useState([]),[ae,z]=A.useState(new Set),[ce,he]=A.useState(new Set),V=A.useRef(new Map),U=A.useRef(!1),ge=A.useRef(!1),y=A.useRef(!1),N=A.useRef(new Map),k=A.useRef(0),F=300*1e3,ee=A.useMemo(()=>{var j;return(j=ue.currentUser)==null?void 0:j.uid},[(ut=ue.currentUser)==null?void 0:ut.uid]);A.useMemo(()=>{const j=(s==null?void 0:s.friends)||[];return[ee,...j].filter(Boolean)},[ee,s==null?void 0:s.friends]),A.useMemo(()=>le.trim()?f.filter(j=>j.content.toLowerCase().includes(le.toLowerCase())||j.userNickname.toLowerCase().includes(le.toLowerCase())):f,[f,le]);const J=A.useCallback(async()=>{if(!ue.currentUser||!s){console.log("🚫 用戶未登入或資料未載入，跳過載入動態");return}const j=Date.now(),O=N.current.get("posts");if(O&&j-O.timestamp<F){console.log("📦 使用快取動態數據"),m(O.data);return}if(ge.current&&j-k.current<F){console.log("⏰ 動態數據仍在有效期限內，跳過重新載入");return}console.log("🔄 開始載入動態..."),v(!0),x("");try{const P=(s==null?void 0:s.friends)||[],ne=[ee,...P].filter(Boolean);console.log(`🔍 當前用戶ID: ${ee}`),console.log(`🔍 好友列表: ${P.join(", ")}`),console.log(`🔍 允許查看的用戶: ${ne.join(", ")}`),console.log(`🔍 總共 ${ne.length} 個用戶的動態需要載入`);const W=pn(It(Te,"communityPosts"),Io("timestamp","desc"),Ll(50)),de=await vn(W),pe=[];de.forEach(xe=>{const me=xe.data();ne.includes(me.userId)&&pe.push({id:xe.id,userId:me.userId,userNickname:me.userNickname,userAvatarUrl:me.userAvatarUrl,content:me.content,timestamp:me.timestamp,likes:me.likes||[],commentCount:(me.comments||[]).length,comments:[],type:me.type||"status"})}),pe.sort((xe,me)=>{const Ye=xe.timestamp?new Date(xe.timestamp):new Date(xe.date);return(me.timestamp?new Date(me.timestamp):new Date(me.date))-Ye});const ve=pe.slice(0,30);console.log(`📊 載入完成：共 ${ve.length} 條動態`),m(ve),ge.current=!0,k.current=j,N.current.set("posts",{data:ve,timestamp:j})}catch(P){console.error("載入動態失敗:",P),x("載入動態失敗，請稍後再試")}finally{v(!1)}},[s==null?void 0:s.friends,F]),q=async()=>{var j;if(!I.trim()){x("請輸入動態內容");return}if(!ue.currentUser){x("請先登入");return}try{Q(!0),console.log("📝 準備發布動態...");const O={userId:ue.currentUser.uid,userNickname:(s==null?void 0:s.nickname)||((j=s==null?void 0:s.email)==null?void 0:j.split("@")[0])||"匿名用戶",userAvatarUrl:sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":(s==null?void 0:s.avatarUrl)||"",content:I.trim(),type:"status",likes:[],comments:[],timestamp:new Date().toISOString(),privacy:"friends"},P=await Ro(It(Te,"communityPosts"),O);Ot.logWrite("addDoc","communityPosts",P.id),console.log("✅ 動態發布成功，ID:",P.id);const ne={id:P.id,...O};console.log("🔄 更新本地狀態，添加新動態:",ne.id),m(W=>{const de=[ne,...W];return console.log(`📊 更新後動態總數: ${de.length}`),de}),_(""),w("動態發布成功！"),setTimeout(()=>w(""),3e3)}catch(O){console.error("❌ 發布動態失敗:",O),x("發布失敗: "+O.message)}finally{Q(!1)}},D=async(j,O)=>{if(!ue.currentUser){x("請先登入");return}if(ae.has(j)){console.log("🔄 點讚操作進行中，請稍候...");return}const P=O.includes(ee),ne=P?O.filter(W=>W!==ee):[...O,ee];m(W=>W.map(de=>de.id===j?{...de,likes:ne}:de)),z(W=>new Set(W).add(j));try{const W=Je(Te,"communityPosts",j);await Yn(W,{likes:ne},{merge:!0}),Ot.logWrite("setDoc","communityPosts",j,{likes:`更新為 ${ne.length} 個點讚`}),console.log(`👍 ${P?"取消點讚":"點讚"}成功`)}catch(W){console.error("❌ 點讚操作失敗:",W),x("點讚失敗，請稍後再試"),m(de=>de.map(pe=>pe.id===j?{...pe,likes:O}:pe))}finally{z(W=>{const de=new Set(W);return de.delete(j),de})}},K=A.useCallback(async j=>{if(ue.currentUser)try{const O=Je(Te,"communityPosts",j),P=await va(O);if(P.exists()){const W=P.data().comments||[];m(de=>de.map(pe=>pe.id===j?{...pe,comments:W}:pe)),console.log(`💬 載入評論完成：${W.length} 條評論`)}}catch(O){console.error("❌ 載入評論失敗:",O)}},[]),Ee=async(j,O)=>{var W;if(!O.trim())return;if(!ue.currentUser){x("請先登入");return}if(ce.has(j)){console.log("🔄 留言提交中，請稍候...");return}const P={id:Date.now().toString(),userId:ue.currentUser.uid,userNickname:(s==null?void 0:s.nickname)||((W=s==null?void 0:s.email)==null?void 0:W.split("@")[0])||"匿名用戶",userAvatarUrl:sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":(s==null?void 0:s.avatarUrl)||"",content:O.trim(),timestamp:new Date().toISOString()};m(de=>de.map(ve=>{if(ve.id===j){const xe=[...ve.comments,P];return{...ve,comments:xe}}return ve})),he(de=>new Set(de).add(j)),V.current.has(j)&&clearTimeout(V.current.get(j));const ne=setTimeout(async()=>{try{const de=f.find(xe=>xe.id===j);if(!de){x("動態不存在");return}const pe=[...de.comments,P],ve=Je(Te,"communityPosts",j);await Yn(ve,{comments:pe},{merge:!0}),Ot.logWrite("setDoc","communityPosts",j,{comments:`新增留言，總計 ${pe.length} 條`}),console.log("💬 留言添加成功")}catch(de){console.error("❌ 添加留言失敗:",de),x("留言失敗，請稍後再試"),m(pe=>pe.map(xe=>{if(xe.id===j){const me=xe.comments.filter(Ye=>Ye.id!==P.id);return{...xe,comments:me}}return xe}))}finally{he(de=>{const pe=new Set(de);return pe.delete(j),pe}),V.current.delete(j)}},500);V.current.set(j,ne)},Re=async(j,O)=>{if(!ue.currentUser){x("請先登入");return}try{const P=f.find(Ye=>Ye.id===j);if(!P){x("動態不存在");return}const ne=P.comments.find(Ye=>Ye.id===O);if(!ne){x("留言不存在");return}const W=ue.currentUser.uid,de=P.userId===W,pe=ne.userId===W;if(!de&&!pe){x("您沒有權限刪除此留言");return}const ve=de?"確定要刪除此留言嗎？":"確定要刪除您的留言嗎？";if(!window.confirm(ve))return;const xe=P.comments.filter(Ye=>Ye.id!==O),me=Je(Te,"communityPosts",j);await Yn(me,{comments:xe},{merge:!0}),Ot.logWrite("setDoc","communityPosts",j,{comments:`刪除留言，總計 ${xe.length} 條`}),console.log("🔄 更新本地狀態，刪除留言:",O),m(Ye=>{const tt=Ye.map(mt=>mt.id===j?{...mt,comments:xe}:mt);return console.log(`📊 動態 ${j} 留言數: ${xe.length}`),tt}),w("留言已刪除"),setTimeout(()=>w(""),3e3)}catch(P){console.error("❌ 刪除留言失敗:",P),x("刪除留言失敗，請稍後再試")}},Ue=async j=>{if(!ue.currentUser){x("請先登入");return}try{const O=f.find(W=>W.id===j);if(!O){x("動態不存在");return}const P=ue.currentUser.uid;if(O.userId!==P){x("您沒有權限刪除此動態");return}if(!window.confirm("確定要刪除此動態嗎？此操作無法撤銷。"))return;const ne=Je(Te,"communityPosts",j);await _o(ne),Ot.logWrite("deleteDoc","communityPosts",j,{action:"刪除動態"}),console.log("🔄 更新本地狀態，刪除動態:",j),m(W=>{const de=W.filter(pe=>pe.id!==j);return console.log(`📊 剩餘動態數: ${de.length}`),de}),w("動態已刪除"),setTimeout(()=>w(""),3e3)}catch(O){console.error("❌ 刪除動態失敗:",O),x("刪除動態失敗，請稍後再試")}},_e=j=>{const O=new Date,P=new Date(j),ne=O-P,W=Math.floor(ne/(1e3*60)),de=Math.floor(ne/(1e3*60*60)),pe=Math.floor(ne/(1e3*60*60*24));return W<1?"剛剛":W<60?`${W}分鐘前`:de<24?`${de}小時前`:pe<7?`${pe}天前`:P.toLocaleDateString()},qe=A.useCallback(async()=>{var j;try{if(U.current)return;v(!0);const O=pn(It(Te,"friendInvitations"),cn("status","==","accepted")),P=await vn(O),ne=new Set;P.forEach(ve=>{const xe=ve.data();xe.fromUserId===ue.currentUser.uid?ne.add(xe.toUserId):xe.toUserId===ue.currentUser.uid&&ne.add(xe.fromUserId)});const W=[];for(const ve of ne)try{const xe=await va(Je(Te,"users",ve));if(xe.exists()){const me=xe.data();if(!me){console.warn(`好友 ${ve} 的用戶數據為空`);continue}console.log(`✅ 載入好友資料: ${ve} - ${me.nickname||me.email}`);let Ye=0,tt=0;if(me.scores){const mt=[];me.scores.strength&&me.scores.strength>0&&mt.push(me.scores.strength),me.scores.explosivePower&&me.scores.explosivePower>0&&mt.push(me.scores.explosivePower),me.scores.cardio&&me.scores.cardio>0&&mt.push(me.scores.cardio),me.scores.muscleMass&&me.scores.muscleMass>0&&mt.push(me.scores.muscleMass),me.scores.bodyFat&&me.scores.bodyFat>0&&mt.push(me.scores.bodyFat),console.log(`好友 ${ve} 的評分數據:`,me.scores),console.log(`好友 ${ve} 的有效分數:`,mt),mt.length>0&&(Ye=mt.reduce((qa,Ga)=>qa+Ga,0)/mt.length,tt=mt.length,console.log(`好友 ${ve} 平均分數: ${Ye}, 項目數: ${tt}`))}else console.log(`好友 ${ve} 沒有評分數據`);W.push({id:ve,nickname:me.nickname||((j=me.email)==null?void 0:j.split("@")[0])||"未命名用戶",email:me.email||"",avatarUrl:me.avatarUrl||"",averageScore:Ye>0?Number(Ye).toFixed(2):null,scoreCount:tt,lastActive:me.lastActive})}}catch(xe){console.error(`載入好友 ${ve} 數據失敗:`,xe)}const de=W.filter(ve=>ve&&ve.id&&typeof ve.nickname=="string");oe(de);const pe=Array.from(ne);u(ve=>({...ve,friends:pe})),U.current=!0}catch(O){console.error("載入好友數據失敗:",O),x("載入好友數據失敗，請稍後再試"),U.current=!0}finally{v(!1)}},[]),et=A.useCallback(async()=>{var j;try{console.log("🔍 開始載入好友邀請..."),console.log("當前用戶ID:",ue.currentUser.uid);const O=pn(It(Te,"friendInvitations"),cn("toUserId","==",ue.currentUser.uid)),P=await vn(O);console.log("📋 找到所有邀請數量:",P.docs.length),P.docs.forEach((pe,ve)=>{const xe=pe.data();console.log(`邀請 ${ve+1}:`,{id:pe.id,fromUserId:xe.fromUserId,toUserId:xe.toUserId,status:xe.status,createdAt:xe.createdAt})});const ne=pn(It(Te,"friendInvitations"),cn("toUserId","==",ue.currentUser.uid),cn("status","==","pending")),W=await vn(ne);console.log("📋 找到pending邀請數量:",W.docs.length);const de=[];for(const pe of W.docs){const ve=pe.data();try{const xe=await va(Je(Te,"users",ve.fromUserId));if(xe.exists()){const me=xe.data();de.push({id:pe.id,fromUserId:ve.fromUserId,nickname:me.nickname||((j=me.email)==null?void 0:j.split("@")[0])||"未命名用戶",email:me.email,avatarUrl:me.avatarUrl||"",createdAt:ve.createdAt})}}catch(xe){console.error("獲取邀請用戶信息失敗:",xe)}}console.log("✅ 載入完成，邀請列表:",de),H(de),y.current=!0}catch(O){console.error("載入好友邀請失敗:",O),y.current=!0}},[H]),Ct=async()=>{if(!le.trim()){se([]);return}try{v(!0);const j=pn(It(Te,"users")),O=await vn(j),P=[];O.forEach(ne=>{var xe;const W=ne.data(),de=le.toLowerCase(),pe=(W.nickname||"").toLowerCase(),ve=(W.email||"").toLowerCase();(pe.includes(de)||ve.includes(de))&&ne.id!==ue.currentUser.uid&&P.push({id:ne.id,nickname:W.nickname||((xe=W.email)==null?void 0:xe.split("@")[0])||"未命名用戶",email:W.email,avatarUrl:W.avatarUrl||"",isFriend:re.some(me=>me.id===ne.id),hasPendingRequest:!1})}),se(P)}catch(j){console.error("搜尋用戶失敗:",j),x("搜尋失敗")}finally{v(!1)}},Ht=async j=>{try{console.log("📤 開始發送好友邀請..."),console.log("發送者ID:",ue.currentUser.uid),console.log("接收者ID:",j),v(!0);const O=pn(It(Te,"friendInvitations"),cn("fromUserId","==",ue.currentUser.uid),cn("toUserId","==",j),cn("status","==","pending")),P=await vn(O);if(!P.empty){console.log("⚠️ 發現已存在的邀請:",P.docs.length,"個");const de=P.docs[0],pe=de.data();console.log("現有邀請資料:",pe);const ve=new Date(pe.createdAt);if((new Date-ve)/(1e3*60*60)>24)console.log("📅 邀請已超過24小時，允許重新發送"),await _o(Je(Te,"friendInvitations",de.id)),console.log("🗑️ 已刪除舊邀請");else{x("已經發送過好友邀請，請稍後再試或檢查邀請通知"),setTimeout(()=>{x("")},3e3);return}}const ne={fromUserId:ue.currentUser.uid,toUserId:j,status:"pending",createdAt:new Date().toISOString()};console.log("📝 邀請資料:",ne);const W=await Ro(It(Te,"friendInvitations"),ne);Ot.logWrite("addDoc","friendInvitations",W.id),console.log("✅ 邀請已發送，文檔ID:",W.id),w("好友邀請已發送");try{const de=await va(W);de.exists()?console.log("✅ 邀請驗證成功:",de.data()):console.error("❌ 邀請驗證失敗：文檔不存在")}catch(de){console.error("❌ 邀請驗證失敗:",de)}se(de=>de.map(pe=>pe.id===j?{...pe,hasPendingRequest:!0}:pe)),setTimeout(()=>{et()},1e3)}catch(O){console.error("發送好友邀請失敗:",O),x("發送邀請失敗")}finally{v(!1)}},Pe=async(j,O)=>{try{v(!0),await Vn(Je(Te,"friendInvitations",j),{status:"accepted",acceptedAt:new Date().toISOString()}),Ot.logWrite("updateDoc","friendInvitations",j);const P=Je(Te,"users",ue.currentUser.uid);await Vn(P,{friends:Dp(O)}),Ot.logWrite("updateDoc","users",ue.currentUser.uid,{friends:"arrayUnion"}),u(ne=>({...ne,friends:[...ne.friends||[],O]})),await qe(),await et(),w("已接受好友邀請")}catch(P){console.error("接受好友邀請失敗:",P),x("接受邀請失敗: "+P.message)}finally{v(!1)}},St=async j=>{try{v(!0),await Vn(Je(Te,"friendInvitations",j),{status:"declined",declinedAt:new Date().toISOString()}),Ot.logWrite("updateDoc","friendInvitations",j),await et(),w("已拒絕好友邀請")}catch(O){console.error("拒絕好友邀請失敗:",O),x("拒絕邀請失敗: "+O.message)}finally{v(!1)}},yn=j=>{if(!j){console.error("好友ID為空");return}const O=re.find(P=>P.id===j);O?(console.log("🔄 跳轉到好友個人版:",j,O.nickname),o(`/friend-feed/${j}`)):(console.error("找不到好友:",j),console.log("當前好友列表:",re))},Rt=async j=>{const O=re.find(W=>W.id===j),P=(O==null?void 0:O.nickname)||"好友";if(window.confirm(`確定要移除好友「${P}」嗎？

移除後：
• 雙方將不再是好友關係
• 無法查看對方的動態
• 此操作可以重新加好友來恢復`))try{v(!0);const W=Je(Te,"users",ue.currentUser.uid);await Vn(W,{friends:Bp(j)});const pe=(await vn(pn(It(Te,"friendInvitations"),cn("fromUserId","in",[ue.currentUser.uid,j]),cn("toUserId","in",[ue.currentUser.uid,j])))).docs.map(ve=>Vn(ve.ref,{status:"cancelled",cancelledAt:new Date().toISOString()}));await Promise.all(pe),u(ve=>{var xe;return{...ve,friends:((xe=ve.friends)==null?void 0:xe.filter(me=>me!==j))||[]}}),oe(ve=>ve.filter(xe=>xe.id!==j)),w(`已移除好友「${P}」`)}catch(W){console.error("移除好友失敗:",W),x(`移除好友失敗: ${W.message}`)}finally{v(!1)}};return A.useEffect(()=>{try{J(),qe(),et()}catch(j){console.error("初始載入失敗:",j),x("載入數據失敗，請稍後再試")}return()=>{const j=V.current;j&&(j.forEach(O=>clearTimeout(O)),j.clear())}},[J,qe,et]),A.useEffect(()=>{try{r==="friends"&&!U.current?(console.log("🔄 標籤切換時重新載入好友數據"),qe()):r==="requests"&&!y.current&&(console.log("🔄 標籤切換時重新載入邀請數據"),et())}catch(j){console.error("標籤切換載入失敗:",j),x("載入數據失敗，請稍後再試")}},[r,qe,et]),l.jsxs("div",{className:"community-page",children:[l.jsxs("div",{className:"community-header",children:[l.jsx("h1",{children:"🏠 肉體樂園"}),b&&l.jsx("div",{className:"alert alert-error",children:b}),E&&l.jsx("div",{className:"alert alert-success",children:E})]}),!re&&l.jsx("div",{className:"alert alert-error",children:"載入好友列表時出現錯誤，請刷新頁面重試"}),l.jsxs("div",{className:"tab-navigation",children:[!U.current&&l.jsx("div",{className:"loading-indicator",children:"正在載入好友數據..."}),l.jsx("div",{className:`tab-btn ${r==="feed"?"active":""}`,onClick:()=>d("feed"),children:l.jsx("span",{className:"tab-label",children:"動態牆"})}),l.jsx("div",{className:`tab-btn ${r==="friends"?"active":""}`,onClick:()=>d("friends"),children:l.jsxs("span",{className:"tab-label",children:["好友 (",U.current?re.length:"...",")"]})}),l.jsxs("div",{className:`tab-btn ${r==="requests"?"active":""}`,onClick:()=>d("requests"),children:[l.jsx("span",{className:"tab-label",children:"邀請通知"}),G.length>0&&l.jsx("span",{className:"notification-badge",children:G.length})]}),l.jsx("div",{className:`tab-btn ${r==="search"?"active":""}`,onClick:()=>d("search"),children:l.jsx("span",{className:"tab-label",children:"搜尋好友"})})]}),l.jsxs("div",{className:"tab-content",children:[p&&l.jsx("div",{className:"loading",children:"載入中..."}),b&&!p&&l.jsxs("div",{className:"alert alert-error",children:[b,l.jsx("button",{onClick:()=>{ge.current=!1,U.current=!1,y.current=!1,N.current.clear(),k.current=0,x(""),J(),qe(),et()},style:{marginLeft:"10px",padding:"5px 10px",background:"#ff6b6b",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"重試"})]}),!b&&!p&&r==="feed"&&l.jsx("div",{className:"refresh-section",children:l.jsx("button",{onClick:()=>{ge.current=!1,U.current=!1,N.current.clear(),k.current=0,qe(),J()},style:{padding:"8px 16px",background:"var(--tiffany-secondary)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",marginBottom:"10px"},children:"🔄 刷新動態"})}),r==="feed"&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"post-composer",children:l.jsxs("div",{className:"composer-header",children:[l.jsx("div",{className:"user-avatar",children:l.jsx("img",{src:sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":(s==null?void 0:s.avatarUrl)||"/default-avatar.svg",alt:"頭像",onError:j=>{j.target.src="/default-avatar.svg"}})}),l.jsxs("div",{className:"composer-input",children:[l.jsx("textarea",{placeholder:"分享你的健身成果...",value:I,onChange:j=>_(j.target.value),maxLength:500,disabled:Z}),l.jsxs("div",{className:"composer-footer",children:[l.jsxs("span",{className:"char-count",children:[I.length,"/500"]}),l.jsx("button",{onClick:q,disabled:!I.trim()||Z,className:"publish-btn",children:Z?"發布中...":"發布"})]})]})]})}),l.jsx("div",{className:"posts-container",children:f.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("p",{children:"還沒有動態"}),l.jsx("p",{children:"發布第一條動態吧！"})]}):f.map(j=>{var O;return l.jsx(Pm,{post:j,currentUserId:(O=ue.currentUser)==null?void 0:O.uid,onToggleLike:D,onAddComment:Ee,onDeleteComment:Re,onDeletePost:Ue,onLoadComments:K,formatTime:_e,likeProcessing:ae,commentProcessing:ce},j.id)})})]}),r==="friends"&&l.jsx("div",{className:"friends-tab",children:!re||re.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("p",{children:"還沒有好友"}),l.jsx("p",{children:"去搜尋好友吧！"})]}):l.jsx("div",{className:"friends-list",children:re.filter(j=>j&&j.id).map(j=>l.jsxs("div",{className:"friend-item",children:[l.jsxs("div",{className:"friend-info",children:[l.jsx("img",{src:j.avatarUrl||"/default-avatar.svg",alt:"頭像",className:"friend-avatar",onError:O=>{O.target.src="/default-avatar.svg"}}),l.jsxs("div",{className:"friend-details",children:[l.jsx("div",{className:"friend-name",children:j.nickname||"未命名用戶"}),l.jsx("div",{className:"friend-score",children:j.averageScore?l.jsx(l.Fragment,{children:l.jsxs("span",{className:"score-value",children:["🏆 ",j.averageScore,"分"]})}):l.jsx("span",{className:"no-score",children:"尚未評測"})}),l.jsx("div",{className:"friend-email",children:j.email||""})]})]}),l.jsxs("div",{className:"friend-actions",children:[l.jsx("button",{className:"btn-board",onClick:()=>j.id&&yn(j.id),title:"查看留言板",children:"💬"}),l.jsx("button",{className:"btn-remove",onClick:()=>j.id&&Rt(j.id),title:"移除好友",children:"❌"})]})]},j.id||"unknown"))})}),r==="requests"&&l.jsx("div",{className:"requests-tab",children:G.length===0?l.jsx("div",{className:"empty-state",children:l.jsx("p",{children:"沒有待處理的邀請"})}):l.jsx("div",{className:"requests-list",children:G.map(j=>l.jsxs("div",{className:"request-item",children:[l.jsxs("div",{className:"request-info",children:[l.jsx("img",{src:j.avatarUrl||"/default-avatar.svg",alt:"頭像",className:"request-avatar",onError:O=>{O.target.src="/default-avatar.svg"}}),l.jsxs("div",{className:"request-details",children:[l.jsx("div",{className:"request-name",children:j.nickname}),l.jsx("div",{className:"request-email",children:j.email})]})]}),l.jsxs("div",{className:"request-actions",children:[l.jsx("button",{className:"btn-accept",onClick:()=>Pe(j.id,j.fromUserId),title:"接受邀請",children:"✅"}),l.jsx("button",{className:"btn-decline",onClick:()=>St(j.id),title:"拒絕邀請",children:"❌"})]})]},j.id))})}),r==="search"&&l.jsxs("div",{className:"search-tab",children:[l.jsxs("div",{className:"search-container",children:[l.jsx("input",{type:"text",placeholder:"搜尋暱稱或電子郵件...",value:le,onChange:j=>fe(j.target.value),onKeyPress:j=>{j.key==="Enter"&&Ct()},className:"search-input"}),l.jsx("button",{onClick:Ct,className:"search-btn",children:"搜尋"})]}),l.jsx("div",{className:"search-results",children:te.length===0&&le.trim()?l.jsx("div",{className:"empty-state",children:l.jsx("p",{children:"沒有找到相關用戶"})}):te.map(j=>l.jsxs("div",{className:"user-item",children:[l.jsxs("div",{className:"user-info",children:[l.jsx("img",{src:j.avatarUrl||"/default-avatar.svg",alt:"頭像",className:"user-avatar",onError:O=>{O.target.src="/default-avatar.svg"}}),l.jsxs("div",{className:"user-details",children:[l.jsx("div",{className:"user-name",children:j.nickname}),l.jsx("div",{className:"user-email",children:j.email})]})]}),l.jsx("div",{className:"user-actions",children:j.isFriend?l.jsx("span",{className:"status-badge",children:"已是好友"}):j.hasPendingRequest?l.jsx("span",{className:"status-badge",children:"邀請已發送"}):l.jsx("button",{className:"btn-add",onClick:()=>Ht(j.id),disabled:p,children:"加好友"})})]},j.id))})]})]})]})},Pm=Lo.memo(({post:o,currentUserId:s,onToggleLike:u,onAddComment:r,onDeleteComment:d,onDeletePost:f,onLoadComments:m,formatTime:p,likeProcessing:v,commentProcessing:b})=>{const[x,E]=A.useState(!1),[w,I]=A.useState(""),[_,Z]=A.useState(!1),[Q,re]=A.useState(!1),oe=o.likes.includes(s),G=o.likes.length,H=o.commentCount||o.comments.length,le=()=>{const te=!x;E(te),te&&!Q&&m&&(m(o.id),re(!0))},fe=()=>{w.trim()&&(r(o.id,w),I(""))};return l.jsxs("div",{className:"post-card",children:[l.jsxs("div",{className:"post-header",children:[l.jsxs("div",{className:"post-user",children:[l.jsx("img",{src:o.userAvatarUrl||"/default-avatar.svg",alt:"頭像",className:"user-avatar",loading:"lazy",onLoad:()=>Z(!0),onError:te=>{te.target.src="/default-avatar.svg",Z(!0)},style:{opacity:_?1:.5,transition:"opacity 0.3s ease"}}),l.jsxs("div",{className:"user-info",children:[l.jsx("div",{className:"user-name",children:o.userNickname}),l.jsx("div",{className:"post-time",children:p(o.timestamp)})]})]}),o.userId===s&&l.jsx("button",{onClick:()=>f(o.id),className:"delete-post-btn",title:"刪除此動態",children:"🗑️"})]}),l.jsx("div",{className:"post-content",children:o.content}),l.jsxs("div",{className:"post-actions",children:[l.jsxs("button",{onClick:()=>u(o.id,o.likes),className:`action-btn ${oe?"liked":""}`,disabled:v.has(o.id),children:[l.jsx("span",{className:"action-icon",children:v.has(o.id)?"⏳":"👍"}),l.jsx("span",{className:"action-text",children:v.has(o.id)?"處理中...":`${G>0?G:""} 讚`})]}),l.jsxs("button",{onClick:le,className:"action-btn",children:[l.jsx("span",{className:"action-icon",children:"💬"}),l.jsxs("span",{className:"action-text",children:[H>0?H:""," 留言"]})]})]}),x&&l.jsxs("div",{className:"comments-section",children:[o.comments.length>0&&l.jsx("div",{className:"comments-list",children:o.comments.map(te=>{const se=o.userId===s,ae=te.userId===s,z=se||ae;return l.jsxs("div",{className:"comment-item",children:[l.jsxs("div",{className:"comment-header",children:[l.jsxs("div",{className:"comment-user-info",children:[l.jsx("img",{src:te.userAvatarUrl||"/guest-avatar.svg",alt:"頭像",className:"comment-avatar",onError:ce=>{ce.target.src="/guest-avatar.svg"}}),l.jsxs("div",{className:"comment-text-info",children:[l.jsx("div",{className:"comment-name",children:te.userNickname}),l.jsx("div",{className:"comment-time",children:p(te.timestamp)})]})]}),z&&l.jsx("button",{onClick:()=>d(o.id,te.id),className:"comment-delete-btn",title:se?"刪除此留言":"刪除我的留言",children:"🗑️"})]}),l.jsx("div",{className:"comment-content",children:te.content})]},te.id)})}),l.jsxs("div",{className:"comment-input",children:[l.jsx("input",{type:"text",placeholder:"寫留言...",value:w,onChange:te=>I(te.target.value),onKeyPress:te=>{te.key==="Enter"&&fe()}}),l.jsx("button",{onClick:fe,disabled:!w.trim()||b.has(o.id),className:"comment-btn",children:b.has(o.id)?"發送中...":"發送"})]})]})]})});Pm.propTypes={post:ie.shape({id:ie.string.isRequired,userId:ie.string.isRequired,userNickname:ie.string.isRequired,userAvatarUrl:ie.string,content:ie.string.isRequired,timestamp:ie.any.isRequired,likes:ie.array.isRequired,comments:ie.array.isRequired}).isRequired,currentUserId:ie.string.isRequired,onToggleLike:ie.func.isRequired,onAddComment:ie.func.isRequired,onDeleteComment:ie.func.isRequired,onDeletePost:ie.func.isRequired,onLoadComments:ie.func.isRequired,formatTime:ie.func.isRequired,likeProcessing:ie.instanceOf(Set).isRequired,commentProcessing:ie.instanceOf(Set).isRequired};const kx=()=>{const{userData:o}=on(),{userId:s}=fp(),u=xn(),[r,d]=A.useState([]),[f,m]=A.useState(!0),[p,v]=A.useState(""),[b,x]=A.useState(""),[E,w]=A.useState(""),[I,_]=A.useState(!1),[Z,Q]=A.useState(null),[re,oe]=A.useState(new Set),[G,H]=A.useState(new Set),le=A.useRef(new Map),fe=A.useRef(!1),te=A.useCallback(async()=>{var y;try{if(!s){v("用戶ID為空");return}console.log("🔄 開始載入用戶資料:",s),console.log("🔄 當前登入用戶:",(y=ue.currentUser)==null?void 0:y.uid);const N=Je(Te,"users",s);console.log("🔄 查詢文檔路徑:",N.path);const k=await va(N);if(k.exists()){const F=k.data();console.log("✅ 用戶資料:",F),Q({id:k.id,...F}),console.log("✅ 好友資料載入成功:",F.nickname||F.email)}else console.error("❌ 找不到用戶:",s),console.error("❌ 文檔路徑:",N.path),v("找不到該用戶")}catch(N){console.error("載入好友資料失敗:",N),console.error("錯誤詳情:",{code:N.code,message:N.message,userId:s}),v("載入用戶資料失敗")}},[s]),se=A.useCallback(async()=>{try{if(fe.current)return;m(!0),console.log("🔄 開始載入好友動態...");const y=pn(It(Te,"communityPosts"),cn("userId","==",s),Ll(50)),N=pn(It(Te,"communityPosts"),cn("targetUserId","==",s),Ll(50));let k,F;try{k=await vn(y),console.log("✅ 用戶動態查詢成功")}catch(q){console.warn("查詢用戶動態失敗，使用空結果:",q),k={docs:[]}}try{F=await vn(N),console.log("✅ 目標用戶動態查詢成功")}catch(q){console.warn("查詢目標用戶動態失敗，使用空結果:",q),F={docs:[]}}const ee=[];k&&k.docs&&k.docs.forEach(q=>{const D=q.data();D.comments&&D.comments.length>0&&(console.log(`🔍 處理好友動態 ${q.id} 的 ${D.comments.length} 條留言`),D.comments=D.comments.map(K=>K.userAvatarUrl?(console.log(`✅ 好友留言 ${K.id} 已有頭像: ${K.userAvatarUrl}`),K):(console.log(`📝 好友留言 ${K.id} 缺少頭像，使用預設頭像`),{...K,userAvatarUrl:"/guest-avatar.svg"}))),ee.push({id:q.id,...D})}),F&&F.docs&&F.docs.forEach(q=>{const D=q.data();ee.find(K=>K.id===q.id)||(D.comments&&D.comments.length>0&&(console.log(`🔍 處理發給好友的動態 ${q.id} 的 ${D.comments.length} 條留言`),D.comments=D.comments.map(K=>K.userAvatarUrl?(console.log(`✅ 發給好友的留言 ${K.id} 已有頭像: ${K.userAvatarUrl}`),K):(console.log(`📝 發給好友的留言 ${K.id} 缺少頭像，使用預設頭像`),{...K,userAvatarUrl:"/guest-avatar.svg"}))),ee.push({id:q.id,...D}))}),ee.sort((q,D)=>new Date(D.timestamp)-new Date(q.timestamp)),console.log(`📊 載入到 ${ee.length} 條動態`);const J=new Set;if(ee.forEach(q=>{(q.comments||[]).forEach(D=>{!D.userAvatarUrl&&D.userId&&J.add(D.userId)})}),J.size>0){const q={};await Promise.all(Array.from(J).map(async D=>{try{const K=await va(Je(Te,"users",D));if(K.exists()){const Ee=K.data();q[D]=Ee.avatarUrl||"/guest-avatar.svg"}else q[D]="/guest-avatar.svg"}catch(K){console.warn(`取得用戶 ${D} 頭像失敗`,K),q[D]="/guest-avatar.svg"}})),ee.forEach(D=>{(D.comments||[]).forEach(K=>{!K.userAvatarUrl&&K.userId===D.userId&&(K.userAvatarUrl=D.userAvatarUrl),!K.userAvatarUrl&&q[K.userId]&&(K.userAvatarUrl=q[K.userId])})})}d([...ee]),fe.current=!0}catch(y){console.error("❌ 載入動態失敗:",y),d([])}finally{m(!1)}},[s]),ae=async()=>{var y;if(!E.trim()){v("請輸入動態內容");return}if(!ue.currentUser){v("請先登入");return}try{_(!0),console.log("📝 準備發布動態...");const N={userId:ue.currentUser.uid,userNickname:(o==null?void 0:o.nickname)||((y=o==null?void 0:o.email)==null?void 0:y.split("@")[0])||"匿名用戶",userAvatarUrl:sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":(o==null?void 0:o.avatarUrl)||"",content:E.trim(),type:"status",likes:[],comments:[],timestamp:new Date().toISOString(),privacy:"friends",targetUserId:s},k=await Ro(It(Te,"communityPosts"),N);Ot.logWrite("addDoc","communityPosts",k.id),console.log("✅ 動態發布成功，ID:",k.id),w(""),x("動態發布成功！"),await se(),setTimeout(()=>x(""),3e3)}catch(N){console.error("❌ 發布動態失敗:",N),v("發布失敗: "+N.message)}finally{_(!1)}},z=async(y,N)=>{if(!ue.currentUser){v("請先登入");return}if(re.has(y)){console.log("🔄 點讚操作進行中，請稍候...");return}try{oe(q=>new Set(q).add(y));const k=ue.currentUser.uid,F=N.includes(k),ee=F?N.filter(q=>q!==k):[...N,k],J=Je(Te,"communityPosts",y);await Vn(J,{likes:ee}),Ot.logWrite("updateDoc","communityPosts",y,{likes:`更新為 ${ee.length} 個點讚`}),d(q=>q.map(D=>D.id===y?{...D,likes:ee}:D)),console.log(`👍 ${F?"取消點讚":"點讚"}成功`)}catch(k){console.error("❌ 點讚操作失敗:",k),v("操作失敗，請稍後再試")}finally{oe(k=>{const F=new Set(k);return F.delete(y),F})}},ce=async(y,N)=>{var ee;if(!N.trim())return;if(!ue.currentUser){v("請先登入");return}if(G.has(y)){console.log("🔄 留言提交中，請稍候...");return}const k={id:Date.now().toString(),userId:ue.currentUser.uid,userNickname:(o==null?void 0:o.nickname)||((ee=o==null?void 0:o.email)==null?void 0:ee.split("@")[0])||"匿名用戶",userAvatarUrl:sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":(o==null?void 0:o.avatarUrl)||"",content:N.trim(),timestamp:new Date().toISOString()};d(J=>J.map(D=>{if(D.id===y){const K=[...D.comments,k];return{...D,comments:K}}return D})),H(J=>new Set(J).add(y)),le.current.has(y)&&clearTimeout(le.current.get(y));const F=setTimeout(async()=>{try{const J=r.find(K=>K.id===y);if(!J){v("動態不存在");return}const q=[...J.comments,k],D=Je(Te,"communityPosts",y);await Vn(D,{comments:q}),Ot.logWrite("updateDoc","communityPosts",y,{comments:`新增留言，總計 ${q.length} 條`}),console.log("💬 留言添加成功")}catch(J){console.error("❌ 添加留言失敗:",J),v("留言失敗，請稍後再試"),d(q=>q.map(K=>{if(K.id===y){const Ee=K.comments.filter(Re=>Re.id!==k.id);return{...K,comments:Ee}}return K}))}finally{H(J=>{const q=new Set(J);return q.delete(y),q}),le.current.delete(y)}},500);le.current.set(y,F)},he=async(y,N)=>{if(!ue.currentUser){v("請先登入");return}try{const k=r.find(Re=>Re.id===y);if(!k){v("動態不存在");return}const F=k.comments.find(Re=>Re.id===N);if(!F){v("留言不存在");return}const ee=ue.currentUser.uid,J=k.userId===ee,q=F.userId===ee;if(!J&&!q){v("您沒有權限刪除此留言");return}const D=J?"確定要刪除此留言嗎？":"確定要刪除您的留言嗎？";if(!window.confirm(D))return;const K=k.comments.filter(Re=>Re.id!==N),Ee=Je(Te,"communityPosts",y);await Vn(Ee,{comments:K}),Ot.logWrite("updateDoc","communityPosts",y,{comments:`刪除留言，總計 ${K.length} 條`}),d(Re=>Re.map(_e=>_e.id===y?{..._e,comments:K}:_e)),x("留言已刪除"),setTimeout(()=>x(""),3e3)}catch(k){console.error("❌ 刪除留言失敗:",k),v("刪除留言失敗，請稍後再試")}},V=async y=>{if(!ue.currentUser){v("請先登入");return}try{const N=r.find(ee=>ee.id===y);if(!N){v("動態不存在");return}const k=ue.currentUser.uid;if(N.userId!==k){v("您沒有權限刪除此動態");return}if(!window.confirm("確定要刪除此動態嗎？此操作無法撤銷。"))return;const F=Je(Te,"communityPosts",y);await _o(F),Ot.logWrite("deleteDoc","communityPosts",y,{action:"刪除動態"}),console.log("🔄 更新本地狀態，刪除動態:",y),d(ee=>{const J=ee.filter(q=>q.id!==y);return console.log(`📊 剩餘動態數: ${J.length}`),J}),x("動態已刪除"),setTimeout(()=>x(""),3e3)}catch(N){console.error("❌ 刪除動態失敗:",N),v("刪除動態失敗，請稍後再試")}},U=y=>{const N=new Date,k=new Date(y),F=N-k,ee=Math.floor(F/(1e3*60)),J=Math.floor(F/(1e3*60*60)),q=Math.floor(F/(1e3*60*60*24));return ee<1?"剛剛":ee<60?`${ee}分鐘前`:J<24?`${J}小時前`:q<7?`${q}天前`:k.toLocaleDateString()},ge=Lo.memo(({post:y,currentUserId:N,onToggleLike:k,onAddComment:F,onDeleteComment:ee,onDeletePost:J,formatTime:q,likeProcessing:D,commentProcessing:K})=>{const[Ee,Re]=A.useState(!1),[Ue,_e]=A.useState(""),qe=y.likes.includes(N),et=y.likes.length,Ct=y.comments.length,Ht=()=>{Ue.trim()&&(F(y.id,Ue),_e(""))};return l.jsxs("div",{className:"post-card",children:[l.jsxs("div",{className:"post-header",children:[l.jsxs("div",{className:"post-user",children:[l.jsx("img",{src:y.userAvatarUrl||"/default-avatar.svg",alt:"頭像",className:"user-avatar",onError:Pe=>{Pe.target.src="/default-avatar.svg"}}),l.jsxs("div",{className:"user-info",children:[l.jsx("div",{className:"user-name",children:y.userNickname}),l.jsx("div",{className:"post-time",children:q(y.timestamp)})]})]}),y.userId===N&&l.jsx("button",{onClick:()=>J(y.id),className:"delete-post-btn",title:"刪除此動態",children:"🗑️"})]}),l.jsx("div",{className:"post-content",children:y.content}),l.jsxs("div",{className:"post-actions",children:[l.jsxs("button",{onClick:()=>k(y.id,y.likes),className:`action-btn ${qe?"liked":""}`,disabled:D.has(y.id),children:[l.jsx("span",{className:"action-icon",children:D.has(y.id)?"⏳":"👍"}),l.jsx("span",{className:"action-text",children:D.has(y.id)?"處理中...":`${et>0?et:""} 讚`})]}),l.jsxs("button",{onClick:()=>Re(!Ee),className:"action-btn",children:[l.jsx("span",{className:"action-icon",children:"💬"}),l.jsxs("span",{className:"action-text",children:[Ct>0?Ct:""," 留言"]})]})]}),Ee&&l.jsxs("div",{className:"comments-section",children:[y.comments.length>0&&l.jsx("div",{className:"comments-list",children:y.comments.map(Pe=>{const St=y.userId===N,yn=Pe.userId===N,Rt=St||yn;return l.jsxs("div",{className:"comment-item",children:[l.jsxs("div",{className:"comment-header",children:[l.jsxs("div",{className:"comment-user-info",children:[l.jsx("img",{src:Pe.userAvatarUrl||"/guest-avatar.svg",alt:"頭像",className:"comment-avatar",onError:ut=>{ut.target.src="/guest-avatar.svg"}}),l.jsxs("div",{className:"comment-text-info",children:[l.jsx("div",{className:"comment-name",children:Pe.userNickname}),l.jsx("div",{className:"comment-time",children:q(Pe.timestamp)})]})]}),Rt&&l.jsx("button",{onClick:()=>ee(y.id,Pe.id),className:"comment-delete-btn",title:St?"刪除此留言":"刪除我的留言",children:"🗑️"})]}),l.jsx("div",{className:"comment-content",children:Pe.content})]},Pe.id)})}),l.jsxs("div",{className:"comment-input",children:[l.jsx("input",{type:"text",placeholder:"寫留言...",value:Ue,onChange:Pe=>_e(Pe.target.value),onKeyPress:Pe=>{Pe.key==="Enter"&&Ht()}}),l.jsx("button",{onClick:Ht,disabled:!Ue.trim()||K.has(y.id),className:"comment-btn",children:K.has(y.id)?"發送中...":"發送"})]})]})]})});return ge.propTypes={post:ie.shape({id:ie.string.isRequired,userId:ie.string.isRequired,userNickname:ie.string.isRequired,userAvatarUrl:ie.string,content:ie.string.isRequired,timestamp:ie.any.isRequired,likes:ie.array.isRequired,comments:ie.array.isRequired}).isRequired,currentUserId:ie.string.isRequired,onToggleLike:ie.func.isRequired,onAddComment:ie.func.isRequired,onDeleteComment:ie.func.isRequired,onDeletePost:ie.func.isRequired,formatTime:ie.func.isRequired,likeProcessing:ie.instanceOf(Set).isRequired,commentProcessing:ie.instanceOf(Set).isRequired},A.useEffect(()=>{if(!ue.currentUser){console.error("❌ 用戶未登入"),v("請先登入");return}return console.log("🔄 開始載入好友頁面數據..."),console.log("🔄 目標用戶ID:",s),fe.current=!1,te(),se(),()=>{const y=le.current;y&&(y.forEach(N=>clearTimeout(N)),y.clear())}},[te,se,s]),f?l.jsx("div",{className:"friend-feed-page",children:l.jsx("div",{className:"loading",children:"載入中..."})}):p&&!ue.currentUser?l.jsxs("div",{className:"friend-feed-page",children:[l.jsxs("div",{className:"error-message",children:[l.jsx("p",{children:"請先登入後再訪問此頁面"}),l.jsx("button",{onClick:()=>u("/login"),className:"login-btn",children:"前往登入"})]}),l.jsx("button",{onClick:()=>u("/community"),className:"back-btn",children:"返回社群"})]}):p&&!Z?l.jsxs("div",{className:"friend-feed-page",children:[l.jsxs("div",{className:"friend-feed-header",children:[l.jsx("button",{onClick:()=>u("/community"),className:"back-btn",children:"← 返回社群"}),l.jsxs("div",{className:"friend-info",children:[l.jsx("img",{src:"/default-avatar.svg",alt:"頭像",className:"friend-avatar",onError:y=>{y.target.src="/default-avatar.svg"}}),l.jsxs("div",{className:"friend-details",children:[l.jsxs("h1",{children:["用戶 ",s==null?void 0:s.substring(0,8),"..."]}),l.jsx("p",{children:"無法載入用戶資料，但您仍可以留言"})]})]})]}),l.jsxs("div",{className:"alert alert-error",children:[l.jsx("p",{children:p}),l.jsx("p",{children:"用戶資料載入失敗，但您仍可以發送留言"})]}),l.jsx("div",{className:"post-composer",children:l.jsxs("div",{className:"composer-header",children:[l.jsx("div",{className:"user-avatar",children:l.jsx("img",{src:sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":(o==null?void 0:o.avatarUrl)||"/default-avatar.svg",alt:"頭像",onError:y=>{y.target.src="/default-avatar.svg"}})}),l.jsxs("div",{className:"composer-input",children:[l.jsx("textarea",{placeholder:"給用戶留言...",value:E,onChange:y=>w(y.target.value),maxLength:500,disabled:I}),l.jsxs("div",{className:"composer-footer",children:[l.jsxs("span",{className:"char-count",children:[E.length,"/500"]}),l.jsx("button",{onClick:ae,disabled:!E.trim()||I,className:"publish-btn",children:I?"發布中...":"發布"})]})]})]})}),l.jsx("div",{className:"posts-container",children:r.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("p",{children:"還沒有動態"}),l.jsx("p",{children:"來寫下第一條留言吧！"})]}):r.map(y=>{var N;return l.jsx(ge,{post:y,currentUserId:(N=ue.currentUser)==null?void 0:N.uid,onToggleLike:z,onAddComment:ce,onDeleteComment:he,onDeletePost:V,formatTime:U,likeProcessing:re,commentProcessing:G},y.id)})})]}):l.jsxs("div",{className:"friend-feed-page",children:[l.jsxs("div",{className:"friend-feed-header",children:[l.jsx("button",{onClick:()=>u("/community"),className:"back-btn",children:"← 返回社群"}),l.jsxs("div",{className:"friend-info",children:[l.jsx("img",{src:(Z==null?void 0:Z.avatarUrl)||"/default-avatar.svg",alt:"頭像",className:"friend-avatar",onError:y=>{y.target.src="/default-avatar.png"}}),l.jsxs("div",{className:"friend-details",children:[l.jsxs("h1",{children:[(Z==null?void 0:Z.nickname)||"用戶"," 的個人版"]}),l.jsxs("p",{children:["在這裡給 ",(Z==null?void 0:Z.nickname)||"用戶"," 留言吧！"]})]})]})]}),p&&l.jsx("div",{className:"alert alert-error",children:p}),b&&l.jsx("div",{className:"alert alert-success",children:b}),l.jsx("div",{className:"post-composer",children:l.jsxs("div",{className:"composer-header",children:[l.jsx("div",{className:"user-avatar",children:l.jsx("img",{src:sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":(o==null?void 0:o.avatarUrl)||"/default-avatar.svg",alt:"頭像",onError:y=>{y.target.src="/default-avatar.svg"}})}),l.jsxs("div",{className:"composer-input",children:[l.jsx("textarea",{placeholder:`給 ${(Z==null?void 0:Z.nickname)||"用戶"} 留言...`,value:E,onChange:y=>w(y.target.value),maxLength:500,disabled:I}),l.jsxs("div",{className:"composer-footer",children:[l.jsxs("span",{className:"char-count",children:[E.length,"/500"]}),l.jsx("button",{onClick:ae,disabled:!E.trim()||I,className:"publish-btn",children:I?"發布中...":"發布"})]})]})]})}),l.jsx("div",{className:"posts-container",children:r.length===0?l.jsxs("div",{className:"empty-state",children:[l.jsx("p",{children:"還沒有動態"}),l.jsx("p",{children:"來寫下第一條留言吧！"})]}):r.map(y=>{var N;return l.jsx(ge,{post:y,currentUserId:(N=ue.currentUser)==null?void 0:N.uid,onToggleLike:z,onAddComment:ce,onDeleteComment:he,onDeletePost:V,formatTime:U,likeProcessing:re,commentProcessing:G},y.id)})})]})},Wm=({position:o="bottom",className:s="",showAd:u=!0,isFixed:r=!0})=>u?l.jsx("div",{className:`ad-banner ad-banner--${o} ${r?"ad-banner--fixed":""} ${s}`,children:l.jsx("div",{className:"ad-banner__test",children:l.jsxs("div",{className:"ad-banner__test-content",children:[l.jsx("span",{className:"ad-banner__test-label",children:"🎯 廣告空間預留 🎯"}),l.jsx("span",{className:"ad-banner__test-size",children:"點擊體驗優化版設計"})]})})}):null;Wm.propTypes={position:ie.oneOf(["top","bottom","inline"]),className:ie.string,showAd:ie.bool,isFixed:ie.bool};const Lx=()=>{const o=Ha(),s=["/user-info","/friends","/ladder","/history","/strength","/cardio","/explosive-power","/muscle-mass","/body-fat"],u=["/login","/privacy-policy","/test","/strength-instructions"];return(()=>{const d=o.pathname;return u.some(f=>d.startsWith(f))?!1:!!s.some(f=>d.startsWith(f))})()?l.jsx(Wm,{position:"bottom",isFixed:!0,showAd:!0,className:"global-ad-banner"}):null},zx=()=>{const[o,s]=A.useState(null),[u,r]=A.useState(!1),[d,f]=A.useState(!1),[m,p]=A.useState(!1);A.useEffect(()=>{const w=()=>window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches?(f(!0),!0):!1,I=re=>{console.log("PWA安裝提示觸發"),re.preventDefault(),s(re),r(!0)},_=()=>{console.log("PWA安裝完成"),f(!0),r(!1),s(null)},Z=async re=>{try{await re.update(),console.log("主動檢查更新完成")}catch(oe){console.log("檢查更新失敗:",oe)}},Q=re=>{setInterval(()=>{Z(re)},36e5);const oe=()=>{Z(re)};return window.addEventListener("focus",oe),()=>{window.removeEventListener("focus",oe)}};return"serviceWorker"in navigator&&"PushManager"in window&&(navigator.serviceWorker.register("/sw.js").then(re=>{console.log("Service Worker註冊成功:",re),Z(re);const oe=Q(re);return re.addEventListener("updatefound",()=>{const G=re.installing;G.addEventListener("statechange",()=>{G.state==="installed"&&navigator.serviceWorker.controller&&(console.log("檢測到新版本可用"),p(!0))})}),oe}).catch(re=>{console.log("Service Worker註冊失敗:",re)}),w()||(window.addEventListener("beforeinstallprompt",I),window.addEventListener("appinstalled",_))),()=>{window.removeEventListener("beforeinstallprompt",I),window.removeEventListener("appinstalled",_)}},[]);const v=async()=>{if(!o)return;o.prompt();const{outcome:w}=await o.userChoice;console.log("用戶選擇:",w),s(null),r(!1)},b=()=>{r(!1),s(null)},x=()=>{window.location.reload()},E=async()=>{if("serviceWorker"in navigator){const w=await navigator.serviceWorker.getRegistration();if(w)try{await w.update(),console.log("手動檢查更新完成")}catch(I){console.log("手動檢查更新失敗:",I)}}};return m?l.jsx("div",{className:"pwa-install-prompt",children:l.jsxs("div",{className:"pwa-install-prompt__content",children:[l.jsx("div",{className:"pwa-install-prompt__icon",children:"🔄"}),l.jsxs("div",{className:"pwa-install-prompt__text",children:[l.jsx("h3",{children:"有新版本可用"}),l.jsx("p",{children:"點擊更新以獲取最新功能"})]}),l.jsxs("div",{className:"pwa-install-prompt__actions",children:[l.jsx("button",{className:"pwa-install-prompt__btn pwa-install-prompt__btn--primary",onClick:x,children:"立即更新"}),l.jsx("button",{className:"pwa-install-prompt__btn pwa-install-prompt__btn--dismiss",onClick:()=>p(!1),children:"稍後再說"}),l.jsx("button",{className:"pwa-install-prompt__btn pwa-install-prompt__btn--secondary",onClick:E,style:{fontSize:"12px",padding:"4px 8px"},children:"檢查更新"})]})]})}):d||!u?null:l.jsx("div",{className:"pwa-install-prompt",children:l.jsxs("div",{className:"pwa-install-prompt__content",children:[l.jsx("div",{className:"pwa-install-prompt__icon",children:"📱"}),l.jsxs("div",{className:"pwa-install-prompt__text",children:[l.jsx("h3",{children:"安裝最強肉體"}),l.jsx("p",{children:"將應用程式安裝到主畫面，享受更快的載入速度和離線使用體驗！"})]}),l.jsxs("div",{className:"pwa-install-prompt__actions",children:[l.jsx("button",{className:"pwa-install-prompt__btn pwa-install-prompt__btn--install",onClick:v,children:"安裝"}),l.jsx("button",{className:"pwa-install-prompt__btn pwa-install-prompt__btn--dismiss",onClick:b,children:"稍後再說"})]})]})})},Ix=()=>{const[o,s]=A.useState(!1),[u,r]=A.useState(!1),[d,f]=A.useState(!1);A.useEffect(()=>{(()=>{const b=window.navigator.userAgent.toLowerCase(),x=/iphone|ipad|ipod/.test(b);r(x);const E=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches;f(E),x&&!E&&s(!0)})()},[]);const m=()=>{s(!1),localStorage.setItem("ios-install-prompt-dismissed","true")},p=()=>{s(!1)};return d||!u||!o||localStorage.getItem("ios-install-prompt-dismissed")==="true"?null:l.jsx("div",{className:"ios-install-prompt",children:l.jsxs("div",{className:"ios-install-prompt__content",children:[l.jsx("div",{className:"ios-install-prompt__icon",children:"📱"}),l.jsxs("div",{className:"ios-install-prompt__text",children:[l.jsx("h3",{children:"安裝到主畫面"}),l.jsx("p",{children:"點擊分享按鈕，選擇「添加到主畫面」即可安裝應用程式"})]}),l.jsxs("div",{className:"ios-install-prompt__steps",children:[l.jsxs("div",{className:"ios-install-prompt__step",children:[l.jsx("span",{className:"ios-install-prompt__step-number",children:"1"}),l.jsx("span",{children:"點擊底部的分享按鈕"})]}),l.jsxs("div",{className:"ios-install-prompt__step",children:[l.jsx("span",{className:"ios-install-prompt__step-number",children:"2"}),l.jsx("span",{children:"選擇「添加到主畫面」"})]}),l.jsxs("div",{className:"ios-install-prompt__step",children:[l.jsx("span",{className:"ios-install-prompt__step-number",children:"3"}),l.jsx("span",{children:"點擊「添加」完成安裝"})]})]}),l.jsxs("div",{className:"ios-install-prompt__actions",children:[l.jsx("button",{className:"ios-install-prompt__btn ios-install-prompt__btn--primary",onClick:p,children:"我知道了"}),l.jsx("button",{className:"ios-install-prompt__btn ios-install-prompt__btn--dismiss",onClick:m,children:"稍後再說"})]})]})})};class Hx{constructor(){this.isMonitoring=!1,this.metrics={pageLoadTimes:{},componentRenderTimes:{},apiCallTimes:{},memoryUsage:[],errors:[]},this.pageStartTimes=new Map}start(){this.isMonitoring||(this.isMonitoring=!0,console.log("📊 性能監控已啟動"))}stop(){this.isMonitoring=!1,console.log("🛑 性能監控已停止")}startPageLoad(s){this.isMonitoring&&(this.pageStartTimes.set(s,Date.now()),console.log(`📄 開始載入頁面: ${s}`))}measurePageLoad(s){if(!this.isMonitoring)return;const u=this.pageStartTimes.get(s);if(!u){console.warn(`⚠️ 頁面 ${s} 沒有開始時間記錄`);return}const r=Date.now()-u;this.metrics.pageLoadTimes[s]=r,this.pageStartTimes.delete(s),console.log(`📄 頁面載入完成 - ${s}: ${r}ms`),r>3e3&&console.warn(`⚠️ 頁面載入時間過長: ${s} (${r}ms)`)}measureComponentRender(s,u){this.isMonitoring&&(this.metrics.componentRenderTimes[s]||(this.metrics.componentRenderTimes[s]=[]),this.metrics.componentRenderTimes[s].push(u),this.metrics.componentRenderTimes[s].length>10&&this.metrics.componentRenderTimes[s].shift(),u>100&&console.warn(`⚠️ 組件渲染時間過長: ${s} (${u}ms)`))}measureApiCall(s,u){this.isMonitoring&&(this.metrics.apiCallTimes[s]||(this.metrics.apiCallTimes[s]=[]),this.metrics.apiCallTimes[s].push(u),this.metrics.apiCallTimes[s].length>10&&this.metrics.apiCallTimes[s].shift(),u>5e3&&console.warn(`⚠️ API 調用時間過長: ${s} (${u}ms)`))}measureMemoryUsage(){if(!this.isMonitoring||!performance.memory)return;const s=performance.memory,u={timestamp:Date.now(),used:s.usedJSHeapSize,total:s.totalJSHeapSize,limit:s.jsHeapSizeLimit};this.metrics.memoryUsage.push(u),this.metrics.memoryUsage.length>20&&this.metrics.memoryUsage.shift();const r=u.used/u.limit*100;r>80&&console.warn(`⚠️ 內存使用率過高: ${r.toFixed(2)}%`)}logError(s,u=""){if(!this.isMonitoring)return;const r={timestamp:Date.now(),message:s.message,stack:s.stack,context:u};this.metrics.errors.push(r),this.metrics.errors.length>50&&this.metrics.errors.shift()}getStats(){const s={pageLoadTimes:{...this.metrics.pageLoadTimes},componentRenderTimes:{},apiCallTimes:{},memoryUsage:this.metrics.memoryUsage.length,errorCount:this.metrics.errors.length};return Object.keys(this.metrics.componentRenderTimes).forEach(u=>{const r=this.metrics.componentRenderTimes[u];if(r.length>0){const d=r.reduce((f,m)=>f+m,0)/r.length;s.componentRenderTimes[u]={average:Math.round(d),count:r.length,max:Math.max(...r)}}}),Object.keys(this.metrics.apiCallTimes).forEach(u=>{const r=this.metrics.apiCallTimes[u];if(r.length>0){const d=r.reduce((f,m)=>f+m,0)/r.length;s.apiCallTimes[u]={average:Math.round(d),count:r.length,max:Math.max(...r)}}}),s}detectPerformanceIssues(){const s=[],u=this.getStats();if(Object.keys(u.pageLoadTimes).forEach(r=>{const d=u.pageLoadTimes[r];d>3e3&&s.push({type:"slow_page_load",message:`頁面載入時間過長: ${r} (${d}ms)`,severity:"warning"})}),Object.keys(u.componentRenderTimes).forEach(r=>{const d=u.componentRenderTimes[r];d.average>100&&s.push({type:"slow_component_render",message:`組件渲染時間過長: ${r} (平均 ${d.average}ms)`,severity:"warning"})}),Object.keys(u.apiCallTimes).forEach(r=>{const d=u.apiCallTimes[r];d.average>5e3&&s.push({type:"slow_api_call",message:`API 調用時間過長: ${r} (平均 ${d.average}ms)`,severity:"warning"})}),this.metrics.memoryUsage.length>0){const r=this.metrics.memoryUsage[this.metrics.memoryUsage.length-1],d=r.used/r.limit*100;d>80&&s.push({type:"high_memory_usage",message:`內存使用率過高: ${d.toFixed(2)}%`,severity:"error"})}return u.errorCount>10&&s.push({type:"high_error_rate",message:`錯誤數量過多: ${u.errorCount} 個錯誤`,severity:"error"}),s}generateOptimizationSuggestions(){const s=this.detectPerformanceIssues(),u=[];return s.length>0&&(u.push("🚨 檢測到性能問題，建議檢查以下方面："),s.forEach(r=>{u.push(`- ${r.message}`)})),u.push("💡 通用優化建議："),u.push("- 使用 React.memo 優化組件渲染"),u.push("- 實現虛擬滾動處理大量數據"),u.push("- 使用圖片懶加載減少初始載入時間"),u.push("- 實現數據快取減少重複請求"),u.push("- 使用 React.lazy 實現代碼分割"),u.push("- 優化 Firebase 查詢減少數據傳輸"),u}reset(){this.metrics={pageLoadTimes:{},componentRenderTimes:{},apiCallTimes:{},memoryUsage:[],errors:[]},this.pageStartTimes.clear(),console.log("🔄 性能統計已重置")}}const or=new Hx;class e0 extends A.Component{constructor(){super(...arguments);Ah(this,"state",{hasError:!1,error:null,errorInfo:null})}static getDerivedStateFromError(u){return{hasError:!0}}componentDidCatch(u,r){console.error("ErrorBoundary 捕獲錯誤:",u,r),or&&or.logError(u,"ErrorBoundary"),this.setState({error:u,errorInfo:r})}render(){return this.state.hasError?l.jsxs("div",{style:{padding:"20px",textAlign:"center",backgroundColor:"#f8f9fa",minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[l.jsx("h2",{style:{color:"#dc3545",marginBottom:"20px"},children:"🚨 發生錯誤"}),l.jsx("p",{style:{marginBottom:"20px",color:"#6c757d"},children:"應用程序遇到了一個問題，請稍後再試或聯繫支持團隊。"}),l.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"重新載入頁面"}),!1]}):this.props.children}}e0.propTypes={children:ie.node.isRequired};function qx(){const[o,s]=A.useState(null),u=Ha(),r=["/user-info","/history","/ladder","/community","/friend-feed","/strength","/explosive-power","/cardio","/muscle-mass","/body-fat"].some(E=>u.pathname.startsWith(E)),d=["/user-info","/ladder","/community","/friend-feed","/history","/strength","/cardio","/explosive-power","/muscle-mass","/body-fat"].some(E=>u.pathname.startsWith(E));A.useEffect(()=>{const E=u.pathname||"/";or.startPageLoad(E);const w=setTimeout(()=>{or.measurePageLoad(E)},100);return()=>clearTimeout(w)},[u.pathname]);const f=async(E,w)=>{try{if(!w||w.trim()==="")throw new Error("密碼不能為空");await zo(ue,E,w),sessionStorage.removeItem("guestMode"),s(null)}catch(I){throw console.error("登入失敗:",I),I}},m=()=>{ue.currentUser&&Mp(ue).then(()=>{s(null)}).catch(E=>{console.error("登出失敗:",E)})},p=E=>{s(E)},v=()=>{s(null)},b=()=>{sessionStorage.setItem("guestMode","true"),window.location.href="/user-info"},x=({element:E})=>{const{userData:w}=on(),I=window.location.pathname;if(sessionStorage.getItem("guestMode")==="true"&&!ue.currentUser&&["/user-info","/strength","/cardio","/explosive-power","/muscle-mass","/body-fat"].some(Q=>I.startsWith(Q)))return E;if(!ue.currentUser)return l.jsx(bo,{to:"/login"});if(I!=="/user-info"&&I!=="/login"){const Q=typeof(w==null?void 0:w.height)=="number"&&w.height>0,re=typeof(w==null?void 0:w.weight)=="number"&&w.weight>0,oe=typeof(w==null?void 0:w.age)=="number"&&w.age>0,G=(w==null?void 0:w.gender)==="male"||(w==null?void 0:w.gender)==="female";if(!Q||!re||!oe||!G)return l.jsx(bo,{to:"/user-info"})}return E};return x.propTypes={element:ie.element.isRequired},l.jsxs("div",{className:`app-container ${d?"page-with-fixed-ad":""}`,children:[l.jsx(uv,{}),l.jsx(e0,{children:l.jsx("div",{className:"main-content",children:l.jsxs(mp,{children:[l.jsx(zt,{path:"/",element:ue.currentUser?l.jsx(bo,{to:"/user-info"}):l.jsx(Im,{onLogin:f,onGuestMode:b})}),l.jsx(zt,{path:"/user-info",element:l.jsx(x,{element:l.jsx(qm,{testData:o,onLogout:m,clearTestData:v})})}),l.jsx(zt,{path:"/strength",element:l.jsx(x,{element:l.jsx(Gm,{onComplete:p,clearTestData:v})})}),l.jsx(zt,{path:"/cardio",element:l.jsx(x,{element:l.jsx(Vm,{onComplete:p,clearTestData:v})})}),l.jsx(zt,{path:"/explosive-power",element:l.jsx(x,{element:l.jsx(Ym,{onComplete:p,clearTestData:v})})}),l.jsx(zt,{path:"/muscle-mass",element:l.jsx(x,{element:l.jsx(Fm,{onComplete:p,clearTestData:v})})}),l.jsx(zt,{path:"/body-fat",element:l.jsx(x,{element:l.jsx(Xm,{onComplete:p,clearTestData:v})})}),l.jsx(zt,{path:"/login",element:l.jsx(Zm,{onLogin:f})}),l.jsx(zt,{path:"/history",element:l.jsx(x,{element:l.jsx(_x,{})})}),l.jsx(zt,{path:"/ladder",element:l.jsx(x,{element:l.jsx(Dx,{})})}),l.jsx(zt,{path:"/community",element:l.jsx(x,{element:l.jsx(Mx,{})})}),l.jsx(zt,{path:"/friend-feed/:userId",element:l.jsx(x,{element:l.jsx(kx,{})})}),l.jsx(zt,{path:"/privacy-policy",element:l.jsx(Ox,{})}),l.jsx(zt,{path:"*",element:l.jsx("div",{children:"404 - 頁面未找到"})})]})})}),l.jsx("footer",{className:"app-footer",children:l.jsx(gp,{to:"/privacy-policy",children:"隱私權政策"})}),u.pathname!=="/ladder"&&l.jsx(Lx,{}),r&&l.jsx(Bx,{}),l.jsx(zx,{}),l.jsx(Ix,{})]})}function Gx(){return l.jsx(Um,{children:l.jsx(hp,{children:l.jsx(qx,{})})})}const Vx=Yp.createRoot(document.getElementById("root"));Vx.render(l.jsx(Lo.StrictMode,{children:l.jsx(Gx,{})}));
