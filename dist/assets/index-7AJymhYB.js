var n1=Object.defineProperty;var a1=(r,i,u)=>i in r?n1(r,i,{enumerable:!0,configurable:!0,writable:!0,value:u}):r[i]=u;var Sh=(r,i,u)=>a1(r,typeof i!="symbol"?i+"":i,u);import{a as s1,b as l1,g as i1,r as A,u as Va,d as pn,e as r1,B as c1,f as o1,h as Ht,N as No,L as u1,R as d1}from"./react-vendor-tf4g78s5.js";import{_ as f1,C as h1,r as jh,S as m1,a as g1,F as p1,g as v1,b as mr,c as x1,d as y1,i as im,p as b1,u as N1,e as S1,f as j1,h as A1,j as E1,G as rm,k as w1,l as We,m as ba,s as Yn,n as Lo,o as Dt,q as rn,w as Zt,t as Ro,v as Hl,x as cn,y as Vn,z as T1,A as _1,B as Uo,D as Oo,E as R1,H as U1,I as O1}from"./firebase-DwPSQ8VP.js";import{P as Oe,R as ur,a as cm,b as om,c as um,d as dm,e as fm,B as Ah,C as Eh,X as wh,Y as Th,T as _h,L as B1,f as Rh}from"./charts-LW-YqZy6.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))c(d);new MutationObserver(d=>{for(const f of d)if(f.type==="childList")for(const m of f.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function u(d){const f={};return d.integrity&&(f.integrity=d.integrity),d.referrerPolicy&&(f.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?f.credentials="include":d.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function c(d){if(d.ep)return;d.ep=!0;const f=u(d);fetch(d.href,f)}})();var So={exports:{}},Dl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uh;function D1(){if(Uh)return Dl;Uh=1;var r=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function u(c,d,f){var m=null;if(f!==void 0&&(m=""+f),d.key!==void 0&&(m=""+d.key),"key"in d){f={};for(var g in d)g!=="key"&&(f[g]=d[g])}else f=d;return d=f.ref,{$$typeof:r,type:c,key:m,ref:d!==void 0?d:null,props:f}}return Dl.Fragment=i,Dl.jsx=u,Dl.jsxs=u,Dl}var Oh;function C1(){return Oh||(Oh=1,So.exports=D1()),So.exports}var s=C1(),jo={exports:{}},Cl={},Ao={exports:{}},Eo={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bh;function M1(){return Bh||(Bh=1,function(r){function i(x,b){var k=x.length;x.push(b);e:for(;0<k;){var F=k-1>>>1,le=x[F];if(0<d(le,b))x[F]=b,x[k]=le,k=F;else break e}}function u(x){return x.length===0?null:x[0]}function c(x){if(x.length===0)return null;var b=x[0],k=x.pop();if(k!==b){x[0]=k;e:for(var F=0,le=x.length,ne=le>>>1;F<ne;){var G=2*(F+1)-1,D=x[G],ie=G+1,Ne=x[ie];if(0>d(D,k))ie<le&&0>d(Ne,D)?(x[F]=Ne,x[ie]=k,F=ie):(x[F]=D,x[G]=k,F=G);else if(ie<le&&0>d(Ne,k))x[F]=Ne,x[ie]=k,F=ie;else break e}}return b}function d(x,b){var k=x.sortIndex-b.sortIndex;return k!==0?k:x.id-b.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;r.unstable_now=function(){return f.now()}}else{var m=Date,g=m.now();r.unstable_now=function(){return m.now()-g}}var v=[],y=[],S=1,j=null,T=3,_=!1,B=!1,z=!1,ae=!1,K=typeof setTimeout=="function"?setTimeout:null,ue=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function W(x){for(var b=u(y);b!==null;){if(b.callback===null)c(y);else if(b.startTime<=x)c(y),b.sortIndex=b.expirationTime,i(v,b);else break;b=u(y)}}function X(x){if(z=!1,W(x),!B)if(u(v)!==null)B=!0,q||(q=!0,be());else{var b=u(y);b!==null&&$(X,b.startTime-x)}}var q=!1,Z=-1,se=5,P=-1;function re(){return ae?!0:!(r.unstable_now()-P<se)}function ce(){if(ae=!1,q){var x=r.unstable_now();P=x;var b=!0;try{e:{B=!1,z&&(z=!1,ue(Z),Z=-1),_=!0;var k=T;try{t:{for(W(x),j=u(v);j!==null&&!(j.expirationTime>x&&re());){var F=j.callback;if(typeof F=="function"){j.callback=null,T=j.priorityLevel;var le=F(j.expirationTime<=x);if(x=r.unstable_now(),typeof le=="function"){j.callback=le,W(x),b=!0;break t}j===u(v)&&c(v),W(x)}else c(v);j=u(v)}if(j!==null)b=!0;else{var ne=u(y);ne!==null&&$(X,ne.startTime-x),b=!1}}break e}finally{j=null,T=k,_=!1}b=void 0}}finally{b?be():q=!1}}}var be;if(typeof H=="function")be=function(){H(ce)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,fe=ye.port2;ye.port1.onmessage=ce,be=function(){fe.postMessage(null)}}else be=function(){K(ce,0)};function $(x,b){Z=K(function(){x(r.unstable_now())},b)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(x){x.callback=null},r.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):se=0<x?Math.floor(1e3/x):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_next=function(x){switch(T){case 1:case 2:case 3:var b=3;break;default:b=T}var k=T;T=b;try{return x()}finally{T=k}},r.unstable_requestPaint=function(){ae=!0},r.unstable_runWithPriority=function(x,b){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var k=T;T=x;try{return b()}finally{T=k}},r.unstable_scheduleCallback=function(x,b,k){var F=r.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?F+k:F):k=F,x){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=k+le,x={id:S++,callback:b,priorityLevel:x,startTime:k,expirationTime:le,sortIndex:-1},k>F?(x.sortIndex=k,i(y,x),u(v)===null&&x===u(y)&&(z?(ue(Z),Z=-1):z=!0,$(X,k-F))):(x.sortIndex=le,i(v,x),B||_||(B=!0,q||(q=!0,be()))),x},r.unstable_shouldYield=re,r.unstable_wrapCallback=function(x){var b=T;return function(){var k=T;T=b;try{return x.apply(this,arguments)}finally{T=k}}}}(Eo)),Eo}var Dh;function k1(){return Dh||(Dh=1,Ao.exports=M1()),Ao.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ch;function z1(){if(Ch)return Cl;Ch=1;var r=k1(),i=s1(),u=l1();function c(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function m(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(f(e)!==e)throw Error(c(188))}function v(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(c(188));return t!==e?null:e}for(var n=e,a=t;;){var l=n.return;if(l===null)break;var o=l.alternate;if(o===null){if(a=l.return,a!==null){n=a;continue}break}if(l.child===o.child){for(o=l.child;o;){if(o===n)return g(l),e;if(o===a)return g(l),t;o=o.sibling}throw Error(c(188))}if(n.return!==a.return)n=l,a=o;else{for(var h=!1,p=l.child;p;){if(p===n){h=!0,n=l,a=o;break}if(p===a){h=!0,a=l,n=o;break}p=p.sibling}if(!h){for(p=o.child;p;){if(p===n){h=!0,n=o,a=l;break}if(p===a){h=!0,a=o,n=l;break}p=p.sibling}if(!h)throw Error(c(189))}}if(n.alternate!==a)throw Error(c(190))}if(n.tag!==3)throw Error(c(188));return n.stateNode.current===n?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var S=Object.assign,j=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),ae=Symbol.for("react.profiler"),K=Symbol.for("react.provider"),ue=Symbol.for("react.consumer"),H=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),re=Symbol.for("react.memo_cache_sentinel"),ce=Symbol.iterator;function be(e){return e===null||typeof e!="object"?null:(e=ce&&e[ce]||e["@@iterator"],typeof e=="function"?e:null)}var ye=Symbol.for("react.client.reference");function fe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ye?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case B:return"Fragment";case ae:return"Profiler";case z:return"StrictMode";case X:return"Suspense";case q:return"SuspenseList";case P:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case _:return"Portal";case H:return(e.displayName||"Context")+".Provider";case ue:return(e._context.displayName||"Context")+".Consumer";case W:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Z:return t=e.displayName||null,t!==null?t:fe(e.type)||"Memo";case se:t=e._payload,e=e._init;try{return fe(e(t))}catch{}}return null}var $=Array.isArray,x=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,b=u.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k={pending:!1,data:null,method:null,action:null},F=[],le=-1;function ne(e){return{current:e}}function G(e){0>le||(e.current=F[le],F[le]=null,le--)}function D(e,t){le++,F[le]=e.current,e.current=t}var ie=ne(null),Ne=ne(null),Re=ne(null),Ie=ne(null);function De(e,t){switch(D(Re,t),D(Ne,e),D(ie,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?$f(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=$f(t),e=Jf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}G(ie),D(ie,e)}function Le(){G(ie),G(Ne),G(Re)}function rt(e){e.memoizedState!==null&&D(Ie,e);var t=ie.current,n=Jf(t,e.type);t!==n&&(D(Ne,e),D(ie,n))}function mt(e){Ne.current===e&&(G(ie),G(Ne)),Ie.current===e&&(G(Ie),_l._currentValue=k)}var Rt=Object.prototype.hasOwnProperty,et=r.unstable_scheduleCallback,qt=r.unstable_cancelCallback,L=r.unstable_shouldYield,he=r.unstable_requestPaint,me=r.unstable_now,_e=r.unstable_getCurrentPriorityLevel,I=r.unstable_ImmediatePriority,U=r.unstable_UserBlockingPriority,J=r.unstable_NormalPriority,te=r.unstable_LowPriority,ee=r.unstable_IdlePriority,oe=r.log,je=r.unstable_setDisableYieldValue,Ce=null,ve=null;function dt(e){if(typeof oe=="function"&&je(e),ve&&typeof ve.setStrictMode=="function")try{ve.setStrictMode(Ce,e)}catch{}}var Pe=Math.clz32?Math.clz32:Fl,Vl=Math.log,Yl=Math.LN2;function Fl(e){return e>>>=0,e===0?32:31-(Vl(e)/Yl|0)|0}var Na=256,Sa=4194304;function vn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ja(e,t,n){var a=e.pendingLanes;if(a===0)return 0;var l=0,o=e.suspendedLanes,h=e.pingedLanes;e=e.warmLanes;var p=a&134217727;return p!==0?(a=p&~o,a!==0?l=vn(a):(h&=p,h!==0?l=vn(h):n||(n=p&~e,n!==0&&(l=vn(n))))):(p=a&~o,p!==0?l=vn(p):h!==0?l=vn(h):n||(n=a&~e,n!==0&&(l=vn(n)))),l===0?0:t!==0&&t!==l&&(t&o)===0&&(o=l&-l,n=t&-t,o>=n||o===32&&(n&4194048)!==0)?t:l}function Fn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Xl(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bs(){var e=Na;return Na<<=1,(Na&4194048)===0&&(Na=256),e}function Ds(){var e=Sa;return Sa<<=1,(Sa&62914560)===0&&(Sa=4194304),e}function Ya(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Xn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ql(e,t,n,a,l,o){var h=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var p=e.entanglements,N=e.expirationTimes,O=e.hiddenUpdates;for(n=h&~n;0<n;){var V=31-Pe(n),Q=1<<V;p[V]=0,N[V]=-1;var C=O[V];if(C!==null)for(O[V]=null,V=0;V<C.length;V++){var M=C[V];M!==null&&(M.lane&=-536870913)}n&=~Q}a!==0&&Cs(e,a,0),o!==0&&l===0&&e.tag!==0&&(e.suspendedLanes|=o&~(h&~t))}function Cs(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-Pe(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|n&4194090}function Ms(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-Pe(n),l=1<<a;l&t|e[a]&t&&(e[a]|=t),n&=~l}}function Fa(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Xa(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ks(){var e=b.p;return e!==0?e:(e=window.event,e===void 0?32:ph(e.type))}function Kl(e,t){var n=b.p;try{return b.p=e,t()}finally{b.p=n}}var un=Math.random().toString(36).slice(2),gt="__reactFiber$"+un,St="__reactProps$"+un,wn="__reactContainer$"+un,Qa="__reactEvents$"+un,Zl="__reactListeners$"+un,$l="__reactHandles$"+un,zs="__reactResources$"+un,Qn="__reactMarker$"+un;function Ka(e){delete e[gt],delete e[St],delete e[Qa],delete e[Zl],delete e[$l]}function Tn(e){var t=e[gt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[wn]||n[gt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=th(e);e!==null;){if(n=e[gt])return n;e=th(e)}return t}e=n,n=e.parentNode}return null}function _n(e){if(e=e[gt]||e[wn]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Kn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(c(33))}function ge(e){var t=e[zs];return t||(t=e[zs]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ae(e){e[Qn]=!0}var Ge=new Set,Ut={};function Xe(e,t){ct(e,t),ct(e+"Capture",t)}function ct(e,t){for(Ut[e]=t,e=0;e<t.length;e++)Ge.add(t[e])}var Ct=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dn={},Zn={};function Mt(e){return Rt.call(Zn,e)?!0:Rt.call(dn,e)?!1:Ct.test(e)?Zn[e]=!0:(dn[e]=!0,!1)}function xn(e,t,n){if(Mt(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Za(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function fn(e,t,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+a)}}var Ls,Jl;function $n(e){if(Ls===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ls=t&&t[1]||"",Jl=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ls+e+Jl}var Is=!1;function Hs(e,t){if(!e||Is)return"";Is=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(M){var C=M}Reflect.construct(e,[],Q)}else{try{Q.call()}catch(M){C=M}e.call(Q.prototype)}}else{try{throw Error()}catch(M){C=M}(Q=e())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(M){if(M&&C&&typeof M.stack=="string")return[M.stack,C.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=a.DetermineComponentFrameRoot(),h=o[0],p=o[1];if(h&&p){var N=h.split(`
`),O=p.split(`
`);for(l=a=0;a<N.length&&!N[a].includes("DetermineComponentFrameRoot");)a++;for(;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;if(a===N.length||l===O.length)for(a=N.length-1,l=O.length-1;1<=a&&0<=l&&N[a]!==O[l];)l--;for(;1<=a&&0<=l;a--,l--)if(N[a]!==O[l]){if(a!==1||l!==1)do if(a--,l--,0>l||N[a]!==O[l]){var V=`
`+N[a].replace(" at new "," at ");return e.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",e.displayName)),V}while(1<=a&&0<=l);break}}}finally{Is=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?$n(n):""}function pr(e){switch(e.tag){case 26:case 27:case 5:return $n(e.type);case 16:return $n("Lazy");case 13:return $n("Suspense");case 19:return $n("SuspenseList");case 0:case 15:return Hs(e.type,!1);case 11:return Hs(e.type.render,!1);case 1:return Hs(e.type,!0);case 31:return $n("Activity");default:return""}}function Jt(e){try{var t="";do t+=pr(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function xt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Yo(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Jm(e){var t=Yo(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(h){a=""+h,o.call(this,h)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(h){a=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pl(e){e._valueTracker||(e._valueTracker=Jm(e))}function Fo(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=Yo(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function Wl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Pm=/[\n"\\]/g;function Pt(e){return e.replace(Pm,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function vr(e,t,n,a,l,o,h,p){e.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.type=h:e.removeAttribute("type"),t!=null?h==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+xt(t)):e.value!==""+xt(t)&&(e.value=""+xt(t)):h!=="submit"&&h!=="reset"||e.removeAttribute("value"),t!=null?xr(e,h,xt(t)):n!=null?xr(e,h,xt(n)):a!=null&&e.removeAttribute("value"),l==null&&o!=null&&(e.defaultChecked=!!o),l!=null&&(e.checked=l&&typeof l!="function"&&typeof l!="symbol"),p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.name=""+xt(p):e.removeAttribute("name")}function Xo(e,t,n,a,l,o,h,p){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),t!=null||n!=null){if(!(o!=="submit"&&o!=="reset"||t!=null))return;n=n!=null?""+xt(n):"",t=t!=null?""+xt(t):n,p||t===e.value||(e.value=t),e.defaultValue=t}a=a??l,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=p?e.checked:!!a,e.defaultChecked=!!a,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.name=h)}function xr(e,t,n){t==="number"&&Wl(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function $a(e,t,n,a){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&a&&(e[n].defaultSelected=!0)}else{for(n=""+xt(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,a&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function Qo(e,t,n){if(t!=null&&(t=""+xt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+xt(n):""}function Ko(e,t,n,a){if(t==null){if(a!=null){if(n!=null)throw Error(c(92));if($(a)){if(1<a.length)throw Error(c(93));a=a[0]}n=a}n==null&&(n=""),t=n}n=xt(t),e.defaultValue=n,a=e.textContent,a===n&&a!==""&&a!==null&&(e.value=a)}function Ja(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Wm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zo(e,t,n){var a=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,n):typeof n!="number"||n===0||Wm.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function $o(e,t,n){if(t!=null&&typeof t!="object")throw Error(c(62));if(e=e.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var l in t)a=t[l],t.hasOwnProperty(l)&&n[l]!==a&&Zo(e,l,a)}else for(var o in t)t.hasOwnProperty(o)&&Zo(e,o,t[o])}function yr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var e0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),t0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ei(e){return t0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var br=null;function Nr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Pa=null,Wa=null;function Jo(e){var t=_n(e);if(t&&(e=t.stateNode)){var n=e[St]||null;e:switch(e=t.stateNode,t.type){case"input":if(vr(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Pt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var l=a[St]||null;if(!l)throw Error(c(90));vr(a,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(t=0;t<n.length;t++)a=n[t],a.form===e.form&&Fo(a)}break e;case"textarea":Qo(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&$a(e,!!n.multiple,t,!1)}}}var Sr=!1;function Po(e,t,n){if(Sr)return e(t,n);Sr=!0;try{var a=e(t);return a}finally{if(Sr=!1,(Pa!==null||Wa!==null)&&(Ii(),Pa&&(t=Pa,e=Wa,Wa=Pa=null,Jo(t),e)))for(t=0;t<e.length;t++)Jo(e[t])}}function qs(e,t){var n=e.stateNode;if(n===null)return null;var a=n[St]||null;if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(c(231,t,typeof n));return n}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jr=!1;if(Rn)try{var Gs={};Object.defineProperty(Gs,"passive",{get:function(){jr=!0}}),window.addEventListener("test",Gs,Gs),window.removeEventListener("test",Gs,Gs)}catch{jr=!1}var Jn=null,Ar=null,ti=null;function Wo(){if(ti)return ti;var e,t=Ar,n=t.length,a,l="value"in Jn?Jn.value:Jn.textContent,o=l.length;for(e=0;e<n&&t[e]===l[e];e++);var h=n-e;for(a=1;a<=h&&t[n-a]===l[o-a];a++);return ti=l.slice(e,1<a?1-a:void 0)}function ni(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ai(){return!0}function eu(){return!1}function kt(e){function t(n,a,l,o,h){this._reactName=n,this._targetInst=l,this.type=a,this.nativeEvent=o,this.target=h,this.currentTarget=null;for(var p in e)e.hasOwnProperty(p)&&(n=e[p],this[p]=n?n(o):o[p]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ai:eu,this.isPropagationStopped=eu,this}return S(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ai)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ai)},persist:function(){},isPersistent:ai}),t}var Aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},si=kt(Aa),Vs=S({},Aa,{view:0,detail:0}),n0=kt(Vs),Er,wr,Ys,li=S({},Vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_r,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ys&&(Ys&&e.type==="mousemove"?(Er=e.screenX-Ys.screenX,wr=e.screenY-Ys.screenY):wr=Er=0,Ys=e),Er)},movementY:function(e){return"movementY"in e?e.movementY:wr}}),tu=kt(li),a0=S({},li,{dataTransfer:0}),s0=kt(a0),l0=S({},Vs,{relatedTarget:0}),Tr=kt(l0),i0=S({},Aa,{animationName:0,elapsedTime:0,pseudoElement:0}),r0=kt(i0),c0=S({},Aa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),o0=kt(c0),u0=S({},Aa,{data:0}),nu=kt(u0),d0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},f0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},h0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function m0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=h0[e])?!!t[e]:!1}function _r(){return m0}var g0=S({},Vs,{key:function(e){if(e.key){var t=d0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ni(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?f0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_r,charCode:function(e){return e.type==="keypress"?ni(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ni(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),p0=kt(g0),v0=S({},li,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),au=kt(v0),x0=S({},Vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_r}),y0=kt(x0),b0=S({},Aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),N0=kt(b0),S0=S({},li,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),j0=kt(S0),A0=S({},Aa,{newState:0,oldState:0}),E0=kt(A0),w0=[9,13,27,32],Rr=Rn&&"CompositionEvent"in window,Fs=null;Rn&&"documentMode"in document&&(Fs=document.documentMode);var T0=Rn&&"TextEvent"in window&&!Fs,su=Rn&&(!Rr||Fs&&8<Fs&&11>=Fs),lu=" ",iu=!1;function ru(e,t){switch(e){case"keyup":return w0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var es=!1;function _0(e,t){switch(e){case"compositionend":return cu(t);case"keypress":return t.which!==32?null:(iu=!0,lu);case"textInput":return e=t.data,e===lu&&iu?null:e;default:return null}}function R0(e,t){if(es)return e==="compositionend"||!Rr&&ru(e,t)?(e=Wo(),ti=Ar=Jn=null,es=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return su&&t.locale!=="ko"?null:t.data;default:return null}}var U0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ou(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!U0[e.type]:t==="textarea"}function uu(e,t,n,a){Pa?Wa?Wa.push(a):Wa=[a]:Pa=a,t=Fi(t,"onChange"),0<t.length&&(n=new si("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Xs=null,Qs=null;function O0(e){Ff(e,0)}function ii(e){var t=Kn(e);if(Fo(t))return e}function du(e,t){if(e==="change")return t}var fu=!1;if(Rn){var Ur;if(Rn){var Or="oninput"in document;if(!Or){var hu=document.createElement("div");hu.setAttribute("oninput","return;"),Or=typeof hu.oninput=="function"}Ur=Or}else Ur=!1;fu=Ur&&(!document.documentMode||9<document.documentMode)}function mu(){Xs&&(Xs.detachEvent("onpropertychange",gu),Qs=Xs=null)}function gu(e){if(e.propertyName==="value"&&ii(Qs)){var t=[];uu(t,Qs,e,Nr(e)),Po(O0,t)}}function B0(e,t,n){e==="focusin"?(mu(),Xs=t,Qs=n,Xs.attachEvent("onpropertychange",gu)):e==="focusout"&&mu()}function D0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ii(Qs)}function C0(e,t){if(e==="click")return ii(t)}function M0(e,t){if(e==="input"||e==="change")return ii(t)}function k0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gt=typeof Object.is=="function"?Object.is:k0;function Ks(e,t){if(Gt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var l=n[a];if(!Rt.call(t,l)||!Gt(e[l],t[l]))return!1}return!0}function pu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vu(e,t){var n=pu(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pu(n)}}function xu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function yu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Wl(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Wl(e.document)}return t}function Br(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var z0=Rn&&"documentMode"in document&&11>=document.documentMode,ts=null,Dr=null,Zs=null,Cr=!1;function bu(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Cr||ts==null||ts!==Wl(a)||(a=ts,"selectionStart"in a&&Br(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Zs&&Ks(Zs,a)||(Zs=a,a=Fi(Dr,"onSelect"),0<a.length&&(t=new si("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=ts)))}function Ea(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ns={animationend:Ea("Animation","AnimationEnd"),animationiteration:Ea("Animation","AnimationIteration"),animationstart:Ea("Animation","AnimationStart"),transitionrun:Ea("Transition","TransitionRun"),transitionstart:Ea("Transition","TransitionStart"),transitioncancel:Ea("Transition","TransitionCancel"),transitionend:Ea("Transition","TransitionEnd")},Mr={},Nu={};Rn&&(Nu=document.createElement("div").style,"AnimationEvent"in window||(delete ns.animationend.animation,delete ns.animationiteration.animation,delete ns.animationstart.animation),"TransitionEvent"in window||delete ns.transitionend.transition);function wa(e){if(Mr[e])return Mr[e];if(!ns[e])return e;var t=ns[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Nu)return Mr[e]=t[n];return e}var Su=wa("animationend"),ju=wa("animationiteration"),Au=wa("animationstart"),L0=wa("transitionrun"),I0=wa("transitionstart"),H0=wa("transitioncancel"),Eu=wa("transitionend"),wu=new Map,kr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kr.push("scrollEnd");function hn(e,t){wu.set(e,t),Xe(t,[e])}var Tu=new WeakMap;function Wt(e,t){if(typeof e=="object"&&e!==null){var n=Tu.get(e);return n!==void 0?n:(t={value:e,source:t,stack:Jt(t)},Tu.set(e,t),t)}return{value:e,source:t,stack:Jt(t)}}var en=[],as=0,zr=0;function ri(){for(var e=as,t=zr=as=0;t<e;){var n=en[t];en[t++]=null;var a=en[t];en[t++]=null;var l=en[t];en[t++]=null;var o=en[t];if(en[t++]=null,a!==null&&l!==null){var h=a.pending;h===null?l.next=l:(l.next=h.next,h.next=l),a.pending=l}o!==0&&_u(n,l,o)}}function ci(e,t,n,a){en[as++]=e,en[as++]=t,en[as++]=n,en[as++]=a,zr|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function Lr(e,t,n,a){return ci(e,t,n,a),oi(e)}function ss(e,t){return ci(e,null,null,t),oi(e)}function _u(e,t,n){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n);for(var l=!1,o=e.return;o!==null;)o.childLanes|=n,a=o.alternate,a!==null&&(a.childLanes|=n),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(l=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,l&&t!==null&&(l=31-Pe(n),e=o.hiddenUpdates,a=e[l],a===null?e[l]=[t]:a.push(t),t.lane=n|536870912),o):null}function oi(e){if(50<bl)throw bl=0,Yc=null,Error(c(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ls={};function q0(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(e,t,n,a){return new q0(e,t,n,a)}function Ir(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Un(e,t){var n=e.alternate;return n===null?(n=Vt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ru(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ui(e,t,n,a,l,o){var h=0;if(a=e,typeof e=="function")Ir(e)&&(h=1);else if(typeof e=="string")h=Vg(e,n,ie.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case P:return e=Vt(31,n,t,l),e.elementType=P,e.lanes=o,e;case B:return Ta(n.children,l,o,t);case z:h=8,l|=24;break;case ae:return e=Vt(12,n,t,l|2),e.elementType=ae,e.lanes=o,e;case X:return e=Vt(13,n,t,l),e.elementType=X,e.lanes=o,e;case q:return e=Vt(19,n,t,l),e.elementType=q,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case K:case H:h=10;break e;case ue:h=9;break e;case W:h=11;break e;case Z:h=14;break e;case se:h=16,a=null;break e}h=29,n=Error(c(130,e===null?"null":typeof e,"")),a=null}return t=Vt(h,n,t,l),t.elementType=e,t.type=a,t.lanes=o,t}function Ta(e,t,n,a){return e=Vt(7,e,a,t),e.lanes=n,e}function Hr(e,t,n){return e=Vt(6,e,null,t),e.lanes=n,e}function qr(e,t,n){return t=Vt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var is=[],rs=0,di=null,fi=0,tn=[],nn=0,_a=null,On=1,Bn="";function Ra(e,t){is[rs++]=fi,is[rs++]=di,di=e,fi=t}function Uu(e,t,n){tn[nn++]=On,tn[nn++]=Bn,tn[nn++]=_a,_a=e;var a=On;e=Bn;var l=32-Pe(a)-1;a&=~(1<<l),n+=1;var o=32-Pe(t)+l;if(30<o){var h=l-l%5;o=(a&(1<<h)-1).toString(32),a>>=h,l-=h,On=1<<32-Pe(t)+l|n<<l|a,Bn=o+e}else On=1<<o|n<<l|a,Bn=e}function Gr(e){e.return!==null&&(Ra(e,1),Uu(e,1,0))}function Vr(e){for(;e===di;)di=is[--rs],is[rs]=null,fi=is[--rs],is[rs]=null;for(;e===_a;)_a=tn[--nn],tn[nn]=null,Bn=tn[--nn],tn[nn]=null,On=tn[--nn],tn[nn]=null}var Ot=null,at=null,Ve=!1,Ua=null,yn=!1,Yr=Error(c(519));function Oa(e){var t=Error(c(418,""));throw Ps(Wt(t,e)),Yr}function Ou(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[gt]=e,t[St]=a,n){case"dialog":ze("cancel",t),ze("close",t);break;case"iframe":case"object":case"embed":ze("load",t);break;case"video":case"audio":for(n=0;n<Sl.length;n++)ze(Sl[n],t);break;case"source":ze("error",t);break;case"img":case"image":case"link":ze("error",t),ze("load",t);break;case"details":ze("toggle",t);break;case"input":ze("invalid",t),Xo(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0),Pl(t);break;case"select":ze("invalid",t);break;case"textarea":ze("invalid",t),Ko(t,a.value,a.defaultValue,a.children),Pl(t)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||a.suppressHydrationWarning===!0||Zf(t.textContent,n)?(a.popover!=null&&(ze("beforetoggle",t),ze("toggle",t)),a.onScroll!=null&&ze("scroll",t),a.onScrollEnd!=null&&ze("scrollend",t),a.onClick!=null&&(t.onclick=Xi),t=!0):t=!1,t||Oa(e)}function Bu(e){for(Ot=e.return;Ot;)switch(Ot.tag){case 5:case 13:yn=!1;return;case 27:case 3:yn=!0;return;default:Ot=Ot.return}}function $s(e){if(e!==Ot)return!1;if(!Ve)return Bu(e),Ve=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||io(e.type,e.memoizedProps)),n=!n),n&&at&&Oa(e),Bu(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){at=gn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}at=null}}else t===27?(t=at,ha(e.type)?(e=uo,uo=null,at=e):at=t):at=Ot?gn(e.stateNode.nextSibling):null;return!0}function Js(){at=Ot=null,Ve=!1}function Du(){var e=Ua;return e!==null&&(It===null?It=e:It.push.apply(It,e),Ua=null),e}function Ps(e){Ua===null?Ua=[e]:Ua.push(e)}var Fr=ne(null),Ba=null,Dn=null;function Pn(e,t,n){D(Fr,t._currentValue),t._currentValue=n}function Cn(e){e._currentValue=Fr.current,G(Fr)}function Xr(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Qr(e,t,n,a){var l=e.child;for(l!==null&&(l.return=e);l!==null;){var o=l.dependencies;if(o!==null){var h=l.child;o=o.firstContext;e:for(;o!==null;){var p=o;o=l;for(var N=0;N<t.length;N++)if(p.context===t[N]){o.lanes|=n,p=o.alternate,p!==null&&(p.lanes|=n),Xr(o.return,n,e),a||(h=null);break e}o=p.next}}else if(l.tag===18){if(h=l.return,h===null)throw Error(c(341));h.lanes|=n,o=h.alternate,o!==null&&(o.lanes|=n),Xr(h,n,e),h=null}else h=l.child;if(h!==null)h.return=l;else for(h=l;h!==null;){if(h===e){h=null;break}if(l=h.sibling,l!==null){l.return=h.return,h=l;break}h=h.return}l=h}}function Ws(e,t,n,a){e=null;for(var l=t,o=!1;l!==null;){if(!o){if((l.flags&524288)!==0)o=!0;else if((l.flags&262144)!==0)break}if(l.tag===10){var h=l.alternate;if(h===null)throw Error(c(387));if(h=h.memoizedProps,h!==null){var p=l.type;Gt(l.pendingProps.value,h.value)||(e!==null?e.push(p):e=[p])}}else if(l===Ie.current){if(h=l.alternate,h===null)throw Error(c(387));h.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(e!==null?e.push(_l):e=[_l])}l=l.return}e!==null&&Qr(t,e,n,a),t.flags|=262144}function hi(e){for(e=e.firstContext;e!==null;){if(!Gt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Da(e){Ba=e,Dn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Tt(e){return Cu(Ba,e)}function mi(e,t){return Ba===null&&Da(e),Cu(e,t)}function Cu(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Dn===null){if(e===null)throw Error(c(308));Dn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Dn=Dn.next=t;return n}var G0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},V0=r.unstable_scheduleCallback,Y0=r.unstable_NormalPriority,pt={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Kr(){return{controller:new G0,data:new Map,refCount:0}}function el(e){e.refCount--,e.refCount===0&&V0(Y0,function(){e.controller.abort()})}var tl=null,Zr=0,cs=0,os=null;function F0(e,t){if(tl===null){var n=tl=[];Zr=0,cs=Jc(),os={status:"pending",value:void 0,then:function(a){n.push(a)}}}return Zr++,t.then(Mu,Mu),t}function Mu(){if(--Zr===0&&tl!==null){os!==null&&(os.status="fulfilled");var e=tl;tl=null,cs=0,os=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function X0(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(l){n.push(l)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var l=0;l<n.length;l++)(0,n[l])(t)},function(l){for(a.status="rejected",a.reason=l,l=0;l<n.length;l++)(0,n[l])(void 0)}),a}var ku=x.S;x.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&F0(e,t),ku!==null&&ku(e,t)};var Ca=ne(null);function $r(){var e=Ca.current;return e!==null?e:Je.pooledCache}function gi(e,t){t===null?D(Ca,Ca.current):D(Ca,t.pool)}function zu(){var e=$r();return e===null?null:{parent:pt._currentValue,pool:e}}var nl=Error(c(460)),Lu=Error(c(474)),pi=Error(c(542)),Jr={then:function(){}};function Iu(e){return e=e.status,e==="fulfilled"||e==="rejected"}function vi(){}function Hu(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(vi,vi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Gu(e),e;default:if(typeof t.status=="string")t.then(vi,vi);else{if(e=Je,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var l=t;l.status="fulfilled",l.value=a}},function(a){if(t.status==="pending"){var l=t;l.status="rejected",l.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Gu(e),e}throw al=t,nl}}var al=null;function qu(){if(al===null)throw Error(c(459));var e=al;return al=null,e}function Gu(e){if(e===nl||e===pi)throw Error(c(483))}var Wn=!1;function Pr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ea(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ta(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Ye&2)!==0){var l=a.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),a.pending=t,t=oi(e),_u(e,null,n),t}return ci(e,a,t,n),oi(e)}function sl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Ms(e,n)}}function ec(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var l=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var h={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};o===null?l=o=h:o=o.next=h,n=n.next}while(n!==null);o===null?l=o=t:o=o.next=t}else l=o=t;n={baseState:a.baseState,firstBaseUpdate:l,lastBaseUpdate:o,shared:a.shared,callbacks:a.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var tc=!1;function ll(){if(tc){var e=os;if(e!==null)throw e}}function il(e,t,n,a){tc=!1;var l=e.updateQueue;Wn=!1;var o=l.firstBaseUpdate,h=l.lastBaseUpdate,p=l.shared.pending;if(p!==null){l.shared.pending=null;var N=p,O=N.next;N.next=null,h===null?o=O:h.next=O,h=N;var V=e.alternate;V!==null&&(V=V.updateQueue,p=V.lastBaseUpdate,p!==h&&(p===null?V.firstBaseUpdate=O:p.next=O,V.lastBaseUpdate=N))}if(o!==null){var Q=l.baseState;h=0,V=O=N=null,p=o;do{var C=p.lane&-536870913,M=C!==p.lane;if(M?(He&C)===C:(a&C)===C){C!==0&&C===cs&&(tc=!0),V!==null&&(V=V.next={lane:0,tag:p.tag,payload:p.payload,callback:null,next:null});e:{var we=e,Se=p;C=t;var Ze=n;switch(Se.tag){case 1:if(we=Se.payload,typeof we=="function"){Q=we.call(Ze,Q,C);break e}Q=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Se.payload,C=typeof we=="function"?we.call(Ze,Q,C):we,C==null)break e;Q=S({},Q,C);break e;case 2:Wn=!0}}C=p.callback,C!==null&&(e.flags|=64,M&&(e.flags|=8192),M=l.callbacks,M===null?l.callbacks=[C]:M.push(C))}else M={lane:C,tag:p.tag,payload:p.payload,callback:p.callback,next:null},V===null?(O=V=M,N=Q):V=V.next=M,h|=C;if(p=p.next,p===null){if(p=l.shared.pending,p===null)break;M=p,p=M.next,M.next=null,l.lastBaseUpdate=M,l.shared.pending=null}}while(!0);V===null&&(N=Q),l.baseState=N,l.firstBaseUpdate=O,l.lastBaseUpdate=V,o===null&&(l.shared.lanes=0),oa|=h,e.lanes=h,e.memoizedState=Q}}function Vu(e,t){if(typeof e!="function")throw Error(c(191,e));e.call(t)}function Yu(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Vu(n[e],t)}var us=ne(null),xi=ne(0);function Fu(e,t){e=qn,D(xi,e),D(us,t),qn=e|t.baseLanes}function nc(){D(xi,qn),D(us,us.current)}function ac(){qn=xi.current,G(us),G(xi)}var na=0,Be=null,Qe=null,ft=null,yi=!1,ds=!1,Ma=!1,bi=0,rl=0,fs=null,Q0=0;function ot(){throw Error(c(321))}function sc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Gt(e[n],t[n]))return!1;return!0}function lc(e,t,n,a,l,o){return na=o,Be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,x.H=e===null||e.memoizedState===null?_d:Rd,Ma=!1,o=n(a,l),Ma=!1,ds&&(o=Qu(t,n,a,l)),Xu(e),o}function Xu(e){x.H=wi;var t=Qe!==null&&Qe.next!==null;if(na=0,ft=Qe=Be=null,yi=!1,rl=0,fs=null,t)throw Error(c(300));e===null||yt||(e=e.dependencies,e!==null&&hi(e)&&(yt=!0))}function Qu(e,t,n,a){Be=e;var l=0;do{if(ds&&(fs=null),rl=0,ds=!1,25<=l)throw Error(c(301));if(l+=1,ft=Qe=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}x.H=eg,o=t(n,a)}while(ds);return o}function K0(){var e=x.H,t=e.useState()[0];return t=typeof t.then=="function"?cl(t):t,e=e.useState()[0],(Qe!==null?Qe.memoizedState:null)!==e&&(Be.flags|=1024),t}function ic(){var e=bi!==0;return bi=0,e}function rc(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function cc(e){if(yi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}yi=!1}na=0,ft=Qe=Be=null,ds=!1,rl=bi=0,fs=null}function zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Be.memoizedState=ft=e:ft=ft.next=e,ft}function ht(){if(Qe===null){var e=Be.alternate;e=e!==null?e.memoizedState:null}else e=Qe.next;var t=ft===null?Be.memoizedState:ft.next;if(t!==null)ft=t,Qe=e;else{if(e===null)throw Be.alternate===null?Error(c(467)):Error(c(310));Qe=e,e={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},ft===null?Be.memoizedState=ft=e:ft=ft.next=e}return ft}function oc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cl(e){var t=rl;return rl+=1,fs===null&&(fs=[]),e=Hu(fs,e,t),t=Be,(ft===null?t.memoizedState:ft.next)===null&&(t=t.alternate,x.H=t===null||t.memoizedState===null?_d:Rd),e}function Ni(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return cl(e);if(e.$$typeof===H)return Tt(e)}throw Error(c(438,String(e)))}function uc(e){var t=null,n=Be.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var a=Be.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(l){return l.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=oc(),Be.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=re;return t.index++,n}function Mn(e,t){return typeof t=="function"?t(e):t}function Si(e){var t=ht();return dc(t,Qe,e)}function dc(e,t,n){var a=e.queue;if(a===null)throw Error(c(311));a.lastRenderedReducer=n;var l=e.baseQueue,o=a.pending;if(o!==null){if(l!==null){var h=l.next;l.next=o.next,o.next=h}t.baseQueue=l=o,a.pending=null}if(o=e.baseState,l===null)e.memoizedState=o;else{t=l.next;var p=h=null,N=null,O=t,V=!1;do{var Q=O.lane&-536870913;if(Q!==O.lane?(He&Q)===Q:(na&Q)===Q){var C=O.revertLane;if(C===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null}),Q===cs&&(V=!0);else if((na&C)===C){O=O.next,C===cs&&(V=!0);continue}else Q={lane:0,revertLane:O.revertLane,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},N===null?(p=N=Q,h=o):N=N.next=Q,Be.lanes|=C,oa|=C;Q=O.action,Ma&&n(o,Q),o=O.hasEagerState?O.eagerState:n(o,Q)}else C={lane:Q,revertLane:O.revertLane,action:O.action,hasEagerState:O.hasEagerState,eagerState:O.eagerState,next:null},N===null?(p=N=C,h=o):N=N.next=C,Be.lanes|=Q,oa|=Q;O=O.next}while(O!==null&&O!==t);if(N===null?h=o:N.next=p,!Gt(o,e.memoizedState)&&(yt=!0,V&&(n=os,n!==null)))throw n;e.memoizedState=o,e.baseState=h,e.baseQueue=N,a.lastRenderedState=o}return l===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function fc(e){var t=ht(),n=t.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=e;var a=n.dispatch,l=n.pending,o=t.memoizedState;if(l!==null){n.pending=null;var h=l=l.next;do o=e(o,h.action),h=h.next;while(h!==l);Gt(o,t.memoizedState)||(yt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,a]}function Ku(e,t,n){var a=Be,l=ht(),o=Ve;if(o){if(n===void 0)throw Error(c(407));n=n()}else n=t();var h=!Gt((Qe||l).memoizedState,n);h&&(l.memoizedState=n,yt=!0),l=l.queue;var p=Ju.bind(null,a,l,e);if(ol(2048,8,p,[e]),l.getSnapshot!==t||h||ft!==null&&ft.memoizedState.tag&1){if(a.flags|=2048,hs(9,ji(),$u.bind(null,a,l,n,t),null),Je===null)throw Error(c(349));o||(na&124)!==0||Zu(a,t,n)}return n}function Zu(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Be.updateQueue,t===null?(t=oc(),Be.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function $u(e,t,n,a){t.value=n,t.getSnapshot=a,Pu(t)&&Wu(e)}function Ju(e,t,n){return n(function(){Pu(t)&&Wu(e)})}function Pu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gt(e,n)}catch{return!0}}function Wu(e){var t=ss(e,2);t!==null&&Kt(t,e,2)}function hc(e){var t=zt();if(typeof e=="function"){var n=e;if(e=n(),Ma){dt(!0);try{n()}finally{dt(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:e},t}function ed(e,t,n,a){return e.baseState=n,dc(e,Qe,typeof a=="function"?a:Mn)}function Z0(e,t,n,a,l){if(Ei(e))throw Error(c(485));if(e=t.action,e!==null){var o={payload:l,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){o.listeners.push(h)}};x.T!==null?n(!0):o.isTransition=!1,a(o),n=t.pending,n===null?(o.next=t.pending=o,td(t,o)):(o.next=n.next,t.pending=n.next=o)}}function td(e,t){var n=t.action,a=t.payload,l=e.state;if(t.isTransition){var o=x.T,h={};x.T=h;try{var p=n(l,a),N=x.S;N!==null&&N(h,p),nd(e,t,p)}catch(O){mc(e,t,O)}finally{x.T=o}}else try{o=n(l,a),nd(e,t,o)}catch(O){mc(e,t,O)}}function nd(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){ad(e,t,a)},function(a){return mc(e,t,a)}):ad(e,t,n)}function ad(e,t,n){t.status="fulfilled",t.value=n,sd(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,td(e,n)))}function mc(e,t,n){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=n,sd(t),t=t.next;while(t!==a)}e.action=null}function sd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ld(e,t){return t}function id(e,t){if(Ve){var n=Je.formState;if(n!==null){e:{var a=Be;if(Ve){if(at){t:{for(var l=at,o=yn;l.nodeType!==8;){if(!o){l=null;break t}if(l=gn(l.nextSibling),l===null){l=null;break t}}o=l.data,l=o==="F!"||o==="F"?l:null}if(l){at=gn(l.nextSibling),a=l.data==="F!";break e}}Oa(a)}a=!1}a&&(t=n[0])}}return n=zt(),n.memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ld,lastRenderedState:t},n.queue=a,n=Ed.bind(null,Be,a),a.dispatch=n,a=hc(!1),o=yc.bind(null,Be,!1,a.queue),a=zt(),l={state:t,dispatch:null,action:e,pending:null},a.queue=l,n=Z0.bind(null,Be,l,o,n),l.dispatch=n,a.memoizedState=e,[t,n,!1]}function rd(e){var t=ht();return cd(t,Qe,e)}function cd(e,t,n){if(t=dc(e,t,ld)[0],e=Si(Mn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=cl(t)}catch(h){throw h===nl?pi:h}else a=t;t=ht();var l=t.queue,o=l.dispatch;return n!==t.memoizedState&&(Be.flags|=2048,hs(9,ji(),$0.bind(null,l,n),null)),[a,o,e]}function $0(e,t){e.action=t}function od(e){var t=ht(),n=Qe;if(n!==null)return cd(t,n,e);ht(),t=t.memoizedState,n=ht();var a=n.queue.dispatch;return n.memoizedState=e,[t,a,!1]}function hs(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},t=Be.updateQueue,t===null&&(t=oc(),Be.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function ji(){return{destroy:void 0,resource:void 0}}function ud(){return ht().memoizedState}function Ai(e,t,n,a){var l=zt();a=a===void 0?null:a,Be.flags|=e,l.memoizedState=hs(1|t,ji(),n,a)}function ol(e,t,n,a){var l=ht();a=a===void 0?null:a;var o=l.memoizedState.inst;Qe!==null&&a!==null&&sc(a,Qe.memoizedState.deps)?l.memoizedState=hs(t,o,n,a):(Be.flags|=e,l.memoizedState=hs(1|t,o,n,a))}function dd(e,t){Ai(8390656,8,e,t)}function fd(e,t){ol(2048,8,e,t)}function hd(e,t){return ol(4,2,e,t)}function md(e,t){return ol(4,4,e,t)}function gd(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pd(e,t,n){n=n!=null?n.concat([e]):null,ol(4,4,gd.bind(null,t,e),n)}function gc(){}function vd(e,t){var n=ht();t=t===void 0?null:t;var a=n.memoizedState;return t!==null&&sc(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function xd(e,t){var n=ht();t=t===void 0?null:t;var a=n.memoizedState;if(t!==null&&sc(t,a[1]))return a[0];if(a=e(),Ma){dt(!0);try{e()}finally{dt(!1)}}return n.memoizedState=[a,t],a}function pc(e,t,n){return n===void 0||(na&1073741824)!==0?e.memoizedState=t:(e.memoizedState=n,e=Sf(),Be.lanes|=e,oa|=e,n)}function yd(e,t,n,a){return Gt(n,t)?n:us.current!==null?(e=pc(e,n,a),Gt(e,t)||(yt=!0),e):(na&42)===0?(yt=!0,e.memoizedState=n):(e=Sf(),Be.lanes|=e,oa|=e,t)}function bd(e,t,n,a,l){var o=b.p;b.p=o!==0&&8>o?o:8;var h=x.T,p={};x.T=p,yc(e,!1,t,n);try{var N=l(),O=x.S;if(O!==null&&O(p,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var V=X0(N,a);ul(e,t,V,Qt(e))}else ul(e,t,a,Qt(e))}catch(Q){ul(e,t,{then:function(){},status:"rejected",reason:Q},Qt())}finally{b.p=o,x.T=h}}function J0(){}function vc(e,t,n,a){if(e.tag!==5)throw Error(c(476));var l=Nd(e).queue;bd(e,l,t,k,n===null?J0:function(){return Sd(e),n(a)})}function Nd(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:k,baseState:k,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:k},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Sd(e){var t=Nd(e).next.queue;ul(e,t,{},Qt())}function xc(){return Tt(_l)}function jd(){return ht().memoizedState}function Ad(){return ht().memoizedState}function P0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Qt();e=ea(n);var a=ta(t,e,n);a!==null&&(Kt(a,t,n),sl(a,t,n)),t={cache:Kr()},e.payload=t;return}t=t.return}}function W0(e,t,n){var a=Qt();n={lane:a,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ei(e)?wd(t,n):(n=Lr(e,t,n,a),n!==null&&(Kt(n,e,a),Td(n,t,a)))}function Ed(e,t,n){var a=Qt();ul(e,t,n,a)}function ul(e,t,n,a){var l={lane:a,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ei(e))wd(t,l);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var h=t.lastRenderedState,p=o(h,n);if(l.hasEagerState=!0,l.eagerState=p,Gt(p,h))return ci(e,t,l,0),Je===null&&ri(),!1}catch{}finally{}if(n=Lr(e,t,l,a),n!==null)return Kt(n,e,a),Td(n,t,a),!0}return!1}function yc(e,t,n,a){if(a={lane:2,revertLane:Jc(),action:a,hasEagerState:!1,eagerState:null,next:null},Ei(e)){if(t)throw Error(c(479))}else t=Lr(e,n,a,2),t!==null&&Kt(t,e,2)}function Ei(e){var t=e.alternate;return e===Be||t!==null&&t===Be}function wd(e,t){ds=yi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Td(e,t,n){if((n&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Ms(e,n)}}var wi={readContext:Tt,use:Ni,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useLayoutEffect:ot,useInsertionEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useSyncExternalStore:ot,useId:ot,useHostTransitionStatus:ot,useFormState:ot,useActionState:ot,useOptimistic:ot,useMemoCache:ot,useCacheRefresh:ot},_d={readContext:Tt,use:Ni,useCallback:function(e,t){return zt().memoizedState=[e,t===void 0?null:t],e},useContext:Tt,useEffect:dd,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Ai(4194308,4,gd.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ai(4194308,4,e,t)},useInsertionEffect:function(e,t){Ai(4,2,e,t)},useMemo:function(e,t){var n=zt();t=t===void 0?null:t;var a=e();if(Ma){dt(!0);try{e()}finally{dt(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=zt();if(n!==void 0){var l=n(t);if(Ma){dt(!0);try{n(t)}finally{dt(!1)}}}else l=t;return a.memoizedState=a.baseState=l,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:l},a.queue=e,e=e.dispatch=W0.bind(null,Be,e),[a.memoizedState,e]},useRef:function(e){var t=zt();return e={current:e},t.memoizedState=e},useState:function(e){e=hc(e);var t=e.queue,n=Ed.bind(null,Be,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:gc,useDeferredValue:function(e,t){var n=zt();return pc(n,e,t)},useTransition:function(){var e=hc(!1);return e=bd.bind(null,Be,e.queue,!0,!1),zt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=Be,l=zt();if(Ve){if(n===void 0)throw Error(c(407));n=n()}else{if(n=t(),Je===null)throw Error(c(349));(He&124)!==0||Zu(a,t,n)}l.memoizedState=n;var o={value:n,getSnapshot:t};return l.queue=o,dd(Ju.bind(null,a,o,e),[e]),a.flags|=2048,hs(9,ji(),$u.bind(null,a,o,n,t),null),n},useId:function(){var e=zt(),t=Je.identifierPrefix;if(Ve){var n=Bn,a=On;n=(a&~(1<<32-Pe(a)-1)).toString(32)+n,t="«"+t+"R"+n,n=bi++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=Q0++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:xc,useFormState:id,useActionState:id,useOptimistic:function(e){var t=zt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=yc.bind(null,Be,!0,n),n.dispatch=t,[e,t]},useMemoCache:uc,useCacheRefresh:function(){return zt().memoizedState=P0.bind(null,Be)}},Rd={readContext:Tt,use:Ni,useCallback:vd,useContext:Tt,useEffect:fd,useImperativeHandle:pd,useInsertionEffect:hd,useLayoutEffect:md,useMemo:xd,useReducer:Si,useRef:ud,useState:function(){return Si(Mn)},useDebugValue:gc,useDeferredValue:function(e,t){var n=ht();return yd(n,Qe.memoizedState,e,t)},useTransition:function(){var e=Si(Mn)[0],t=ht().memoizedState;return[typeof e=="boolean"?e:cl(e),t]},useSyncExternalStore:Ku,useId:jd,useHostTransitionStatus:xc,useFormState:rd,useActionState:rd,useOptimistic:function(e,t){var n=ht();return ed(n,Qe,e,t)},useMemoCache:uc,useCacheRefresh:Ad},eg={readContext:Tt,use:Ni,useCallback:vd,useContext:Tt,useEffect:fd,useImperativeHandle:pd,useInsertionEffect:hd,useLayoutEffect:md,useMemo:xd,useReducer:fc,useRef:ud,useState:function(){return fc(Mn)},useDebugValue:gc,useDeferredValue:function(e,t){var n=ht();return Qe===null?pc(n,e,t):yd(n,Qe.memoizedState,e,t)},useTransition:function(){var e=fc(Mn)[0],t=ht().memoizedState;return[typeof e=="boolean"?e:cl(e),t]},useSyncExternalStore:Ku,useId:jd,useHostTransitionStatus:xc,useFormState:od,useActionState:od,useOptimistic:function(e,t){var n=ht();return Qe!==null?ed(n,Qe,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:uc,useCacheRefresh:Ad},ms=null,dl=0;function Ti(e){var t=dl;return dl+=1,ms===null&&(ms=[]),Hu(ms,e,t)}function fl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function _i(e,t){throw t.$$typeof===j?Error(c(525)):(e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Ud(e){var t=e._init;return t(e._payload)}function Od(e){function t(w,E){if(e){var R=w.deletions;R===null?(w.deletions=[E],w.flags|=16):R.push(E)}}function n(w,E){if(!e)return null;for(;E!==null;)t(w,E),E=E.sibling;return null}function a(w){for(var E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function l(w,E){return w=Un(w,E),w.index=0,w.sibling=null,w}function o(w,E,R){return w.index=R,e?(R=w.alternate,R!==null?(R=R.index,R<E?(w.flags|=67108866,E):R):(w.flags|=67108866,E)):(w.flags|=1048576,E)}function h(w){return e&&w.alternate===null&&(w.flags|=67108866),w}function p(w,E,R,Y){return E===null||E.tag!==6?(E=Hr(R,w.mode,Y),E.return=w,E):(E=l(E,R),E.return=w,E)}function N(w,E,R,Y){var pe=R.type;return pe===B?V(w,E,R.props.children,Y,R.key):E!==null&&(E.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===se&&Ud(pe)===E.type)?(E=l(E,R.props),fl(E,R),E.return=w,E):(E=ui(R.type,R.key,R.props,null,w.mode,Y),fl(E,R),E.return=w,E)}function O(w,E,R,Y){return E===null||E.tag!==4||E.stateNode.containerInfo!==R.containerInfo||E.stateNode.implementation!==R.implementation?(E=qr(R,w.mode,Y),E.return=w,E):(E=l(E,R.children||[]),E.return=w,E)}function V(w,E,R,Y,pe){return E===null||E.tag!==7?(E=Ta(R,w.mode,Y,pe),E.return=w,E):(E=l(E,R),E.return=w,E)}function Q(w,E,R){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=Hr(""+E,w.mode,R),E.return=w,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case T:return R=ui(E.type,E.key,E.props,null,w.mode,R),fl(R,E),R.return=w,R;case _:return E=qr(E,w.mode,R),E.return=w,E;case se:var Y=E._init;return E=Y(E._payload),Q(w,E,R)}if($(E)||be(E))return E=Ta(E,w.mode,R,null),E.return=w,E;if(typeof E.then=="function")return Q(w,Ti(E),R);if(E.$$typeof===H)return Q(w,mi(w,E),R);_i(w,E)}return null}function C(w,E,R,Y){var pe=E!==null?E.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return pe!==null?null:p(w,E,""+R,Y);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case T:return R.key===pe?N(w,E,R,Y):null;case _:return R.key===pe?O(w,E,R,Y):null;case se:return pe=R._init,R=pe(R._payload),C(w,E,R,Y)}if($(R)||be(R))return pe!==null?null:V(w,E,R,Y,null);if(typeof R.then=="function")return C(w,E,Ti(R),Y);if(R.$$typeof===H)return C(w,E,mi(w,R),Y);_i(w,R)}return null}function M(w,E,R,Y,pe){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return w=w.get(R)||null,p(E,w,""+Y,pe);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case T:return w=w.get(Y.key===null?R:Y.key)||null,N(E,w,Y,pe);case _:return w=w.get(Y.key===null?R:Y.key)||null,O(E,w,Y,pe);case se:var Me=Y._init;return Y=Me(Y._payload),M(w,E,R,Y,pe)}if($(Y)||be(Y))return w=w.get(R)||null,V(E,w,Y,pe,null);if(typeof Y.then=="function")return M(w,E,R,Ti(Y),pe);if(Y.$$typeof===H)return M(w,E,R,mi(E,Y),pe);_i(E,Y)}return null}function we(w,E,R,Y){for(var pe=null,Me=null,xe=E,Ee=E=0,Nt=null;xe!==null&&Ee<R.length;Ee++){xe.index>Ee?(Nt=xe,xe=null):Nt=xe.sibling;var qe=C(w,xe,R[Ee],Y);if(qe===null){xe===null&&(xe=Nt);break}e&&xe&&qe.alternate===null&&t(w,xe),E=o(qe,E,Ee),Me===null?pe=qe:Me.sibling=qe,Me=qe,xe=Nt}if(Ee===R.length)return n(w,xe),Ve&&Ra(w,Ee),pe;if(xe===null){for(;Ee<R.length;Ee++)xe=Q(w,R[Ee],Y),xe!==null&&(E=o(xe,E,Ee),Me===null?pe=xe:Me.sibling=xe,Me=xe);return Ve&&Ra(w,Ee),pe}for(xe=a(xe);Ee<R.length;Ee++)Nt=M(xe,w,Ee,R[Ee],Y),Nt!==null&&(e&&Nt.alternate!==null&&xe.delete(Nt.key===null?Ee:Nt.key),E=o(Nt,E,Ee),Me===null?pe=Nt:Me.sibling=Nt,Me=Nt);return e&&xe.forEach(function(xa){return t(w,xa)}),Ve&&Ra(w,Ee),pe}function Se(w,E,R,Y){if(R==null)throw Error(c(151));for(var pe=null,Me=null,xe=E,Ee=E=0,Nt=null,qe=R.next();xe!==null&&!qe.done;Ee++,qe=R.next()){xe.index>Ee?(Nt=xe,xe=null):Nt=xe.sibling;var xa=C(w,xe,qe.value,Y);if(xa===null){xe===null&&(xe=Nt);break}e&&xe&&xa.alternate===null&&t(w,xe),E=o(xa,E,Ee),Me===null?pe=xa:Me.sibling=xa,Me=xa,xe=Nt}if(qe.done)return n(w,xe),Ve&&Ra(w,Ee),pe;if(xe===null){for(;!qe.done;Ee++,qe=R.next())qe=Q(w,qe.value,Y),qe!==null&&(E=o(qe,E,Ee),Me===null?pe=qe:Me.sibling=qe,Me=qe);return Ve&&Ra(w,Ee),pe}for(xe=a(xe);!qe.done;Ee++,qe=R.next())qe=M(xe,w,Ee,qe.value,Y),qe!==null&&(e&&qe.alternate!==null&&xe.delete(qe.key===null?Ee:qe.key),E=o(qe,E,Ee),Me===null?pe=qe:Me.sibling=qe,Me=qe);return e&&xe.forEach(function(t1){return t(w,t1)}),Ve&&Ra(w,Ee),pe}function Ze(w,E,R,Y){if(typeof R=="object"&&R!==null&&R.type===B&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case T:e:{for(var pe=R.key;E!==null;){if(E.key===pe){if(pe=R.type,pe===B){if(E.tag===7){n(w,E.sibling),Y=l(E,R.props.children),Y.return=w,w=Y;break e}}else if(E.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===se&&Ud(pe)===E.type){n(w,E.sibling),Y=l(E,R.props),fl(Y,R),Y.return=w,w=Y;break e}n(w,E);break}else t(w,E);E=E.sibling}R.type===B?(Y=Ta(R.props.children,w.mode,Y,R.key),Y.return=w,w=Y):(Y=ui(R.type,R.key,R.props,null,w.mode,Y),fl(Y,R),Y.return=w,w=Y)}return h(w);case _:e:{for(pe=R.key;E!==null;){if(E.key===pe)if(E.tag===4&&E.stateNode.containerInfo===R.containerInfo&&E.stateNode.implementation===R.implementation){n(w,E.sibling),Y=l(E,R.children||[]),Y.return=w,w=Y;break e}else{n(w,E);break}else t(w,E);E=E.sibling}Y=qr(R,w.mode,Y),Y.return=w,w=Y}return h(w);case se:return pe=R._init,R=pe(R._payload),Ze(w,E,R,Y)}if($(R))return we(w,E,R,Y);if(be(R)){if(pe=be(R),typeof pe!="function")throw Error(c(150));return R=pe.call(R),Se(w,E,R,Y)}if(typeof R.then=="function")return Ze(w,E,Ti(R),Y);if(R.$$typeof===H)return Ze(w,E,mi(w,R),Y);_i(w,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,E!==null&&E.tag===6?(n(w,E.sibling),Y=l(E,R),Y.return=w,w=Y):(n(w,E),Y=Hr(R,w.mode,Y),Y.return=w,w=Y),h(w)):n(w,E)}return function(w,E,R,Y){try{dl=0;var pe=Ze(w,E,R,Y);return ms=null,pe}catch(xe){if(xe===nl||xe===pi)throw xe;var Me=Vt(29,xe,null,w.mode);return Me.lanes=Y,Me.return=w,Me}finally{}}}var gs=Od(!0),Bd=Od(!1),an=ne(null),bn=null;function aa(e){var t=e.alternate;D(vt,vt.current&1),D(an,e),bn===null&&(t===null||us.current!==null||t.memoizedState!==null)&&(bn=e)}function Dd(e){if(e.tag===22){if(D(vt,vt.current),D(an,e),bn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(bn=e)}}else sa()}function sa(){D(vt,vt.current),D(an,an.current)}function kn(e){G(an),bn===e&&(bn=null),G(vt)}var vt=ne(0);function Ri(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||oo(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function bc(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:S({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Nc={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Qt(),l=ea(a);l.payload=t,n!=null&&(l.callback=n),t=ta(e,l,a),t!==null&&(Kt(t,e,a),sl(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Qt(),l=ea(a);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=ta(e,l,a),t!==null&&(Kt(t,e,a),sl(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Qt(),a=ea(n);a.tag=2,t!=null&&(a.callback=t),t=ta(e,a,n),t!==null&&(Kt(t,e,n),sl(t,e,n))}};function Cd(e,t,n,a,l,o,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,o,h):t.prototype&&t.prototype.isPureReactComponent?!Ks(n,a)||!Ks(l,o):!0}function Md(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&Nc.enqueueReplaceState(t,t.state,null)}function ka(e,t){var n=t;if("ref"in t){n={};for(var a in t)a!=="ref"&&(n[a]=t[a])}if(e=e.defaultProps){n===t&&(n=S({},n));for(var l in e)n[l]===void 0&&(n[l]=e[l])}return n}var Ui=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function kd(e){Ui(e)}function zd(e){console.error(e)}function Ld(e){Ui(e)}function Oi(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function Id(e,t,n){try{var a=e.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function Sc(e,t,n){return n=ea(n),n.tag=3,n.payload={element:null},n.callback=function(){Oi(e,t)},n}function Hd(e){return e=ea(e),e.tag=3,e}function qd(e,t,n,a){var l=n.type.getDerivedStateFromError;if(typeof l=="function"){var o=a.value;e.payload=function(){return l(o)},e.callback=function(){Id(t,n,a)}}var h=n.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(e.callback=function(){Id(t,n,a),typeof l!="function"&&(ua===null?ua=new Set([this]):ua.add(this));var p=a.stack;this.componentDidCatch(a.value,{componentStack:p!==null?p:""})})}function tg(e,t,n,a,l){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=n.alternate,t!==null&&Ws(t,n,l,!0),n=an.current,n!==null){switch(n.tag){case 13:return bn===null?Xc():n.alternate===null&&st===0&&(st=3),n.flags&=-257,n.flags|=65536,n.lanes=l,a===Jr?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([a]):t.add(a),Kc(e,a,l)),!1;case 22:return n.flags|=65536,a===Jr?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([a]):n.add(a)),Kc(e,a,l)),!1}throw Error(c(435,n.tag))}return Kc(e,a,l),Xc(),!1}if(Ve)return t=an.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=l,a!==Yr&&(e=Error(c(422),{cause:a}),Ps(Wt(e,n)))):(a!==Yr&&(t=Error(c(423),{cause:a}),Ps(Wt(t,n))),e=e.current.alternate,e.flags|=65536,l&=-l,e.lanes|=l,a=Wt(a,n),l=Sc(e.stateNode,a,l),ec(e,l),st!==4&&(st=2)),!1;var o=Error(c(520),{cause:a});if(o=Wt(o,n),yl===null?yl=[o]:yl.push(o),st!==4&&(st=2),t===null)return!0;a=Wt(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=l&-l,n.lanes|=e,e=Sc(n.stateNode,a,e),ec(n,e),!1;case 1:if(t=n.type,o=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(ua===null||!ua.has(o))))return n.flags|=65536,l&=-l,n.lanes|=l,l=Hd(l),qd(l,e,n,a),ec(n,l),!1}n=n.return}while(n!==null);return!1}var Gd=Error(c(461)),yt=!1;function jt(e,t,n,a){t.child=e===null?Bd(t,null,n,a):gs(t,e.child,n,a)}function Vd(e,t,n,a,l){n=n.render;var o=t.ref;if("ref"in a){var h={};for(var p in a)p!=="ref"&&(h[p]=a[p])}else h=a;return Da(t),a=lc(e,t,n,h,o,l),p=ic(),e!==null&&!yt?(rc(e,t,l),zn(e,t,l)):(Ve&&p&&Gr(t),t.flags|=1,jt(e,t,a,l),t.child)}function Yd(e,t,n,a,l){if(e===null){var o=n.type;return typeof o=="function"&&!Ir(o)&&o.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=o,Fd(e,t,o,a,l)):(e=ui(n.type,null,a,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!Uc(e,l)){var h=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ks,n(h,a)&&e.ref===t.ref)return zn(e,t,l)}return t.flags|=1,e=Un(o,a),e.ref=t.ref,e.return=t,t.child=e}function Fd(e,t,n,a,l){if(e!==null){var o=e.memoizedProps;if(Ks(o,a)&&e.ref===t.ref)if(yt=!1,t.pendingProps=a=o,Uc(e,l))(e.flags&131072)!==0&&(yt=!0);else return t.lanes=e.lanes,zn(e,t,l)}return jc(e,t,n,a,l)}function Xd(e,t,n){var a=t.pendingProps,l=a.children,o=e!==null?e.memoizedState:null;if(a.mode==="hidden"){if((t.flags&128)!==0){if(a=o!==null?o.baseLanes|n:n,e!==null){for(l=t.child=e.child,o=0;l!==null;)o=o|l.lanes|l.childLanes,l=l.sibling;t.childLanes=o&~a}else t.childLanes=0,t.child=null;return Qd(e,t,a,n)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&gi(t,o!==null?o.cachePool:null),o!==null?Fu(t,o):nc(),Dd(t);else return t.lanes=t.childLanes=536870912,Qd(e,t,o!==null?o.baseLanes|n:n,n)}else o!==null?(gi(t,o.cachePool),Fu(t,o),sa(),t.memoizedState=null):(e!==null&&gi(t,null),nc(),sa());return jt(e,t,l,n),t.child}function Qd(e,t,n,a){var l=$r();return l=l===null?null:{parent:pt._currentValue,pool:l},t.memoizedState={baseLanes:n,cachePool:l},e!==null&&gi(t,null),nc(),Dd(t),e!==null&&Ws(e,t,a,!0),null}function Bi(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(c(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function jc(e,t,n,a,l){return Da(t),n=lc(e,t,n,a,void 0,l),a=ic(),e!==null&&!yt?(rc(e,t,l),zn(e,t,l)):(Ve&&a&&Gr(t),t.flags|=1,jt(e,t,n,l),t.child)}function Kd(e,t,n,a,l,o){return Da(t),t.updateQueue=null,n=Qu(t,a,n,l),Xu(e),a=ic(),e!==null&&!yt?(rc(e,t,o),zn(e,t,o)):(Ve&&a&&Gr(t),t.flags|=1,jt(e,t,n,o),t.child)}function Zd(e,t,n,a,l){if(Da(t),t.stateNode===null){var o=ls,h=n.contextType;typeof h=="object"&&h!==null&&(o=Tt(h)),o=new n(a,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Nc,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=a,o.state=t.memoizedState,o.refs={},Pr(t),h=n.contextType,o.context=typeof h=="object"&&h!==null?Tt(h):ls,o.state=t.memoizedState,h=n.getDerivedStateFromProps,typeof h=="function"&&(bc(t,n,h,a),o.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(h=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),h!==o.state&&Nc.enqueueReplaceState(o,o.state,null),il(t,a,o,l),ll(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){o=t.stateNode;var p=t.memoizedProps,N=ka(n,p);o.props=N;var O=o.context,V=n.contextType;h=ls,typeof V=="object"&&V!==null&&(h=Tt(V));var Q=n.getDerivedStateFromProps;V=typeof Q=="function"||typeof o.getSnapshotBeforeUpdate=="function",p=t.pendingProps!==p,V||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(p||O!==h)&&Md(t,o,a,h),Wn=!1;var C=t.memoizedState;o.state=C,il(t,a,o,l),ll(),O=t.memoizedState,p||C!==O||Wn?(typeof Q=="function"&&(bc(t,n,Q,a),O=t.memoizedState),(N=Wn||Cd(t,n,N,a,C,O,h))?(V||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=O),o.props=a,o.state=O,o.context=h,a=N):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{o=t.stateNode,Wr(e,t),h=t.memoizedProps,V=ka(n,h),o.props=V,Q=t.pendingProps,C=o.context,O=n.contextType,N=ls,typeof O=="object"&&O!==null&&(N=Tt(O)),p=n.getDerivedStateFromProps,(O=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(h!==Q||C!==N)&&Md(t,o,a,N),Wn=!1,C=t.memoizedState,o.state=C,il(t,a,o,l),ll();var M=t.memoizedState;h!==Q||C!==M||Wn||e!==null&&e.dependencies!==null&&hi(e.dependencies)?(typeof p=="function"&&(bc(t,n,p,a),M=t.memoizedState),(V=Wn||Cd(t,n,V,a,C,M,N)||e!==null&&e.dependencies!==null&&hi(e.dependencies))?(O||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,M,N),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,M,N)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||h===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=M),o.props=a,o.state=M,o.context=N,a=V):(typeof o.componentDidUpdate!="function"||h===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),a=!1)}return o=a,Bi(e,t),a=(t.flags&128)!==0,o||a?(o=t.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,e!==null&&a?(t.child=gs(t,e.child,null,l),t.child=gs(t,null,n,l)):jt(e,t,n,l),t.memoizedState=o.state,e=t.child):e=zn(e,t,l),e}function $d(e,t,n,a){return Js(),t.flags|=256,jt(e,t,n,a),t.child}var Ac={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ec(e){return{baseLanes:e,cachePool:zu()}}function wc(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=sn),e}function Jd(e,t,n){var a=t.pendingProps,l=!1,o=(t.flags&128)!==0,h;if((h=o)||(h=e!==null&&e.memoizedState===null?!1:(vt.current&2)!==0),h&&(l=!0,t.flags&=-129),h=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ve){if(l?aa(t):sa(),Ve){var p=at,N;if(N=p){e:{for(N=p,p=yn;N.nodeType!==8;){if(!p){p=null;break e}if(N=gn(N.nextSibling),N===null){p=null;break e}}p=N}p!==null?(t.memoizedState={dehydrated:p,treeContext:_a!==null?{id:On,overflow:Bn}:null,retryLane:536870912,hydrationErrors:null},N=Vt(18,null,null,0),N.stateNode=p,N.return=t,t.child=N,Ot=t,at=null,N=!0):N=!1}N||Oa(t)}if(p=t.memoizedState,p!==null&&(p=p.dehydrated,p!==null))return oo(p)?t.lanes=32:t.lanes=536870912,null;kn(t)}return p=a.children,a=a.fallback,l?(sa(),l=t.mode,p=Di({mode:"hidden",children:p},l),a=Ta(a,l,n,null),p.return=t,a.return=t,p.sibling=a,t.child=p,l=t.child,l.memoizedState=Ec(n),l.childLanes=wc(e,h,n),t.memoizedState=Ac,a):(aa(t),Tc(t,p))}if(N=e.memoizedState,N!==null&&(p=N.dehydrated,p!==null)){if(o)t.flags&256?(aa(t),t.flags&=-257,t=_c(e,t,n)):t.memoizedState!==null?(sa(),t.child=e.child,t.flags|=128,t=null):(sa(),l=a.fallback,p=t.mode,a=Di({mode:"visible",children:a.children},p),l=Ta(l,p,n,null),l.flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,gs(t,e.child,null,n),a=t.child,a.memoizedState=Ec(n),a.childLanes=wc(e,h,n),t.memoizedState=Ac,t=l);else if(aa(t),oo(p)){if(h=p.nextSibling&&p.nextSibling.dataset,h)var O=h.dgst;h=O,a=Error(c(419)),a.stack="",a.digest=h,Ps({value:a,source:null,stack:null}),t=_c(e,t,n)}else if(yt||Ws(e,t,n,!1),h=(n&e.childLanes)!==0,yt||h){if(h=Je,h!==null&&(a=n&-n,a=(a&42)!==0?1:Fa(a),a=(a&(h.suspendedLanes|n))!==0?0:a,a!==0&&a!==N.retryLane))throw N.retryLane=a,ss(e,a),Kt(h,e,a),Gd;p.data==="$?"||Xc(),t=_c(e,t,n)}else p.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=N.treeContext,at=gn(p.nextSibling),Ot=t,Ve=!0,Ua=null,yn=!1,e!==null&&(tn[nn++]=On,tn[nn++]=Bn,tn[nn++]=_a,On=e.id,Bn=e.overflow,_a=t),t=Tc(t,a.children),t.flags|=4096);return t}return l?(sa(),l=a.fallback,p=t.mode,N=e.child,O=N.sibling,a=Un(N,{mode:"hidden",children:a.children}),a.subtreeFlags=N.subtreeFlags&65011712,O!==null?l=Un(O,l):(l=Ta(l,p,n,null),l.flags|=2),l.return=t,a.return=t,a.sibling=l,t.child=a,a=l,l=t.child,p=e.child.memoizedState,p===null?p=Ec(n):(N=p.cachePool,N!==null?(O=pt._currentValue,N=N.parent!==O?{parent:O,pool:O}:N):N=zu(),p={baseLanes:p.baseLanes|n,cachePool:N}),l.memoizedState=p,l.childLanes=wc(e,h,n),t.memoizedState=Ac,a):(aa(t),n=e.child,e=n.sibling,n=Un(n,{mode:"visible",children:a.children}),n.return=t,n.sibling=null,e!==null&&(h=t.deletions,h===null?(t.deletions=[e],t.flags|=16):h.push(e)),t.child=n,t.memoizedState=null,n)}function Tc(e,t){return t=Di({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Di(e,t){return e=Vt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function _c(e,t,n){return gs(t,e.child,null,n),e=Tc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Pd(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Xr(e.return,t,n)}function Rc(e,t,n,a,l){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:l}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=a,o.tail=n,o.tailMode=l)}function Wd(e,t,n){var a=t.pendingProps,l=a.revealOrder,o=a.tail;if(jt(e,t,a.children,n),a=vt.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Pd(e,n,t);else if(e.tag===19)Pd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}switch(D(vt,a),l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&Ri(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),Rc(t,!1,l,n,o);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Ri(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}Rc(t,!0,n,null,o);break;case"together":Rc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),oa|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Ws(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,n=Un(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Un(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Uc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&hi(e)))}function ng(e,t,n){switch(t.tag){case 3:De(t,t.stateNode.containerInfo),Pn(t,pt,e.memoizedState.cache),Js();break;case 27:case 5:rt(t);break;case 4:De(t,t.stateNode.containerInfo);break;case 10:Pn(t,t.type,t.memoizedProps.value);break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(aa(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Jd(e,t,n):(aa(t),e=zn(e,t,n),e!==null?e.sibling:null);aa(t);break;case 19:var l=(e.flags&128)!==0;if(a=(n&t.childLanes)!==0,a||(Ws(e,t,n,!1),a=(n&t.childLanes)!==0),l){if(a)return Wd(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),D(vt,vt.current),a)break;return null;case 22:case 23:return t.lanes=0,Xd(e,t,n);case 24:Pn(t,pt,e.memoizedState.cache)}return zn(e,t,n)}function ef(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)yt=!0;else{if(!Uc(e,n)&&(t.flags&128)===0)return yt=!1,ng(e,t,n);yt=(e.flags&131072)!==0}else yt=!1,Ve&&(t.flags&1048576)!==0&&Uu(t,fi,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var a=t.elementType,l=a._init;if(a=l(a._payload),t.type=a,typeof a=="function")Ir(a)?(e=ka(a,e),t.tag=1,t=Zd(null,t,a,e,n)):(t.tag=0,t=jc(null,t,a,e,n));else{if(a!=null){if(l=a.$$typeof,l===W){t.tag=11,t=Vd(null,t,a,e,n);break e}else if(l===Z){t.tag=14,t=Yd(null,t,a,e,n);break e}}throw t=fe(a)||a,Error(c(306,t,""))}}return t;case 0:return jc(e,t,t.type,t.pendingProps,n);case 1:return a=t.type,l=ka(a,t.pendingProps),Zd(e,t,a,l,n);case 3:e:{if(De(t,t.stateNode.containerInfo),e===null)throw Error(c(387));a=t.pendingProps;var o=t.memoizedState;l=o.element,Wr(e,t),il(t,a,null,n);var h=t.memoizedState;if(a=h.cache,Pn(t,pt,a),a!==o.cache&&Qr(t,[pt],n,!0),ll(),a=h.element,o.isDehydrated)if(o={element:a,isDehydrated:!1,cache:h.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=$d(e,t,a,n);break e}else if(a!==l){l=Wt(Error(c(424)),t),Ps(l),t=$d(e,t,a,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(at=gn(e.firstChild),Ot=t,Ve=!0,Ua=null,yn=!0,n=Bd(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Js(),a===l){t=zn(e,t,n);break e}jt(e,t,a,n)}t=t.child}return t;case 26:return Bi(e,t),e===null?(n=lh(t.type,null,t.pendingProps,null))?t.memoizedState=n:Ve||(n=t.type,e=t.pendingProps,a=Qi(Re.current).createElement(n),a[gt]=t,a[St]=e,Et(a,n,e),Ae(a),t.stateNode=a):t.memoizedState=lh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return rt(t),e===null&&Ve&&(a=t.stateNode=nh(t.type,t.pendingProps,Re.current),Ot=t,yn=!0,l=at,ha(t.type)?(uo=l,at=gn(a.firstChild)):at=l),jt(e,t,t.pendingProps.children,n),Bi(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ve&&((l=a=at)&&(a=Ug(a,t.type,t.pendingProps,yn),a!==null?(t.stateNode=a,Ot=t,at=gn(a.firstChild),yn=!1,l=!0):l=!1),l||Oa(t)),rt(t),l=t.type,o=t.pendingProps,h=e!==null?e.memoizedProps:null,a=o.children,io(l,o)?a=null:h!==null&&io(l,h)&&(t.flags|=32),t.memoizedState!==null&&(l=lc(e,t,K0,null,null,n),_l._currentValue=l),Bi(e,t),jt(e,t,a,n),t.child;case 6:return e===null&&Ve&&((e=n=at)&&(n=Og(n,t.pendingProps,yn),n!==null?(t.stateNode=n,Ot=t,at=null,e=!0):e=!1),e||Oa(t)),null;case 13:return Jd(e,t,n);case 4:return De(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=gs(t,null,a,n):jt(e,t,a,n),t.child;case 11:return Vd(e,t,t.type,t.pendingProps,n);case 7:return jt(e,t,t.pendingProps,n),t.child;case 8:return jt(e,t,t.pendingProps.children,n),t.child;case 12:return jt(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,Pn(t,t.type,a.value),jt(e,t,a.children,n),t.child;case 9:return l=t.type._context,a=t.pendingProps.children,Da(t),l=Tt(l),a=a(l),t.flags|=1,jt(e,t,a,n),t.child;case 14:return Yd(e,t,t.type,t.pendingProps,n);case 15:return Fd(e,t,t.type,t.pendingProps,n);case 19:return Wd(e,t,n);case 31:return a=t.pendingProps,n=t.mode,a={mode:a.mode,children:a.children},e===null?(n=Di(a,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=Un(e.child,a),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Xd(e,t,n);case 24:return Da(t),a=Tt(pt),e===null?(l=$r(),l===null&&(l=Je,o=Kr(),l.pooledCache=o,o.refCount++,o!==null&&(l.pooledCacheLanes|=n),l=o),t.memoizedState={parent:a,cache:l},Pr(t),Pn(t,pt,l)):((e.lanes&n)!==0&&(Wr(e,t),il(t,null,null,n),ll()),l=e.memoizedState,o=t.memoizedState,l.parent!==a?(l={parent:a,cache:a},t.memoizedState=l,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=l),Pn(t,pt,a)):(a=o.cache,Pn(t,pt,a),a!==l.cache&&Qr(t,[pt],n,!0))),jt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(c(156,t.tag))}function Ln(e){e.flags|=4}function tf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!uh(t)){if(t=an.current,t!==null&&((He&4194048)===He?bn!==null:(He&62914560)!==He&&(He&536870912)===0||t!==bn))throw al=Jr,Lu;e.flags|=8192}}function Ci(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Ds():536870912,e.lanes|=t,ys|=t)}function hl(e,t){if(!Ve)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,a|=l.subtreeFlags&65011712,a|=l.flags&65011712,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,a|=l.subtreeFlags,a|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function ag(e,t,n){var a=t.pendingProps;switch(Vr(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(t),null;case 1:return nt(t),null;case 3:return n=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Cn(pt),Le(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&($s(t)?Ln(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Du())),nt(t),null;case 26:return n=t.memoizedState,e===null?(Ln(t),n!==null?(nt(t),tf(t,n)):(nt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Ln(t),nt(t),tf(t,n)):(nt(t),t.flags&=-16777217):(e.memoizedProps!==a&&Ln(t),nt(t),t.flags&=-16777217),null;case 27:mt(t),n=Re.current;var l=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==a&&Ln(t);else{if(!a){if(t.stateNode===null)throw Error(c(166));return nt(t),null}e=ie.current,$s(t)?Ou(t):(e=nh(l,a,n),t.stateNode=e,Ln(t))}return nt(t),null;case 5:if(mt(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&Ln(t);else{if(!a){if(t.stateNode===null)throw Error(c(166));return nt(t),null}if(e=ie.current,$s(t))Ou(t);else{switch(l=Qi(Re.current),e){case 1:e=l.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=l.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=l.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=l.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof a.is=="string"?l.createElement("select",{is:a.is}):l.createElement("select"),a.multiple?e.multiple=!0:a.size&&(e.size=a.size);break;default:e=typeof a.is=="string"?l.createElement(n,{is:a.is}):l.createElement(n)}}e[gt]=t,e[St]=a;e:for(l=t.child;l!==null;){if(l.tag===5||l.tag===6)e.appendChild(l.stateNode);else if(l.tag!==4&&l.tag!==27&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===t)break e;for(;l.sibling===null;){if(l.return===null||l.return===t)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}t.stateNode=e;e:switch(Et(e,n,a),n){case"button":case"input":case"select":case"textarea":e=!!a.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ln(t)}}return nt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&Ln(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(c(166));if(e=Re.current,$s(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,l=Ot,l!==null)switch(l.tag){case 27:case 5:a=l.memoizedProps}e[gt]=t,e=!!(e.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||Zf(e.nodeValue,n)),e||Oa(t)}else e=Qi(e).createTextNode(a),e[gt]=t,t.stateNode=e}return nt(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(l=$s(t),a!==null&&a.dehydrated!==null){if(e===null){if(!l)throw Error(c(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(c(317));l[gt]=t}else Js(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;nt(t),l=!1}else l=Du(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),l=!0;if(!l)return t.flags&256?(kn(t),t):(kn(t),null)}if(kn(t),(t.flags&128)!==0)return t.lanes=n,t;if(n=a!==null,e=e!==null&&e.memoizedState!==null,n){a=t.child,l=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(l=a.alternate.memoizedState.cachePool.pool);var o=null;a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==l&&(a.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Ci(t,t.updateQueue),nt(t),null;case 4:return Le(),e===null&&to(t.stateNode.containerInfo),nt(t),null;case 10:return Cn(t.type),nt(t),null;case 19:if(G(vt),l=t.memoizedState,l===null)return nt(t),null;if(a=(t.flags&128)!==0,o=l.rendering,o===null)if(a)hl(l,!1);else{if(st!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=Ri(e),o!==null){for(t.flags|=128,hl(l,!1),e=o.updateQueue,t.updateQueue=e,Ci(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Ru(n,e),n=n.sibling;return D(vt,vt.current&1|2),t.child}e=e.sibling}l.tail!==null&&me()>zi&&(t.flags|=128,a=!0,hl(l,!1),t.lanes=4194304)}else{if(!a)if(e=Ri(o),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,Ci(t,e),hl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!Ve)return nt(t),null}else 2*me()-l.renderingStartTime>zi&&n!==536870912&&(t.flags|=128,a=!0,hl(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(e=l.last,e!==null?e.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=me(),t.sibling=null,e=vt.current,D(vt,a?e&1|2:e&1),t):(nt(t),null);case 22:case 23:return kn(t),ac(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(n&536870912)!==0&&(t.flags&128)===0&&(nt(t),t.subtreeFlags&6&&(t.flags|=8192)):nt(t),n=t.updateQueue,n!==null&&Ci(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),e!==null&&G(Ca),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Cn(pt),nt(t),null;case 25:return null;case 30:return null}throw Error(c(156,t.tag))}function sg(e,t){switch(Vr(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Cn(pt),Le(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return mt(t),null;case 13:if(kn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));Js()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return G(vt),null;case 4:return Le(),null;case 10:return Cn(t.type),null;case 22:case 23:return kn(t),ac(),e!==null&&G(Ca),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Cn(pt),null;case 25:return null;default:return null}}function nf(e,t){switch(Vr(t),t.tag){case 3:Cn(pt),Le();break;case 26:case 27:case 5:mt(t);break;case 4:Le();break;case 13:kn(t);break;case 19:G(vt);break;case 10:Cn(t.type);break;case 22:case 23:kn(t),ac(),e!==null&&G(Ca);break;case 24:Cn(pt)}}function ml(e,t){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var l=a.next;n=l;do{if((n.tag&e)===e){a=void 0;var o=n.create,h=n.inst;a=o(),h.destroy=a}n=n.next}while(n!==l)}}catch(p){$e(t,t.return,p)}}function la(e,t,n){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var o=l.next;a=o;do{if((a.tag&e)===e){var h=a.inst,p=h.destroy;if(p!==void 0){h.destroy=void 0,l=t;var N=n,O=p;try{O()}catch(V){$e(l,N,V)}}}a=a.next}while(a!==o)}}catch(V){$e(t,t.return,V)}}function af(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Yu(t,n)}catch(a){$e(e,e.return,a)}}}function sf(e,t,n){n.props=ka(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){$e(e,t,a)}}function gl(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(l){$e(e,t,l)}}function Nn(e,t){var n=e.ref,a=e.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(l){$e(e,t,l)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(l){$e(e,t,l)}else n.current=null}function lf(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(l){$e(e,e.return,l)}}function Oc(e,t,n){try{var a=e.stateNode;Eg(a,e.type,n,t),a[St]=t}catch(l){$e(e,e.return,l)}}function rf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ha(e.type)||e.tag===4}function Bc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||rf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ha(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Dc(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Xi));else if(a!==4&&(a===27&&ha(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Dc(e,t,n),e=e.sibling;e!==null;)Dc(e,t,n),e=e.sibling}function Mi(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(a===27&&ha(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Mi(e,t,n),e=e.sibling;e!==null;)Mi(e,t,n),e=e.sibling}function cf(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,l=t.attributes;l.length;)t.removeAttributeNode(l[0]);Et(t,a,n),t[gt]=e,t[St]=n}catch(o){$e(e,e.return,o)}}var In=!1,ut=!1,Cc=!1,of=typeof WeakSet=="function"?WeakSet:Set,bt=null;function lg(e,t){if(e=e.containerInfo,so=Wi,e=yu(e),Br(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var l=a.anchorOffset,o=a.focusNode;a=a.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var h=0,p=-1,N=-1,O=0,V=0,Q=e,C=null;t:for(;;){for(var M;Q!==n||l!==0&&Q.nodeType!==3||(p=h+l),Q!==o||a!==0&&Q.nodeType!==3||(N=h+a),Q.nodeType===3&&(h+=Q.nodeValue.length),(M=Q.firstChild)!==null;)C=Q,Q=M;for(;;){if(Q===e)break t;if(C===n&&++O===l&&(p=h),C===o&&++V===a&&(N=h),(M=Q.nextSibling)!==null)break;Q=C,C=Q.parentNode}Q=M}n=p===-1||N===-1?null:{start:p,end:N}}else n=null}n=n||{start:0,end:0}}else n=null;for(lo={focusedElem:e,selectionRange:n},Wi=!1,bt=t;bt!==null;)if(t=bt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,bt=e;else for(;bt!==null;){switch(t=bt,o=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&o!==null){e=void 0,n=t,l=o.memoizedProps,o=o.memoizedState,a=n.stateNode;try{var we=ka(n.type,l,n.elementType===n.type);e=a.getSnapshotBeforeUpdate(we,o),a.__reactInternalSnapshotBeforeUpdate=e}catch(Se){$e(n,n.return,Se)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)co(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":co(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=t.sibling,e!==null){e.return=t.return,bt=e;break}bt=t.return}}function uf(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:ia(e,n),a&4&&ml(5,n);break;case 1:if(ia(e,n),a&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(h){$e(n,n.return,h)}else{var l=ka(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(l,t,e.__reactInternalSnapshotBeforeUpdate)}catch(h){$e(n,n.return,h)}}a&64&&af(n),a&512&&gl(n,n.return);break;case 3:if(ia(e,n),a&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Yu(e,t)}catch(h){$e(n,n.return,h)}}break;case 27:t===null&&a&4&&cf(n);case 26:case 5:ia(e,n),t===null&&a&4&&lf(n),a&512&&gl(n,n.return);break;case 12:ia(e,n);break;case 13:ia(e,n),a&4&&hf(e,n),a&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=mg.bind(null,n),Bg(e,n))));break;case 22:if(a=n.memoizedState!==null||In,!a){t=t!==null&&t.memoizedState!==null||ut,l=In;var o=ut;In=a,(ut=t)&&!o?ra(e,n,(n.subtreeFlags&8772)!==0):ia(e,n),In=l,ut=o}break;case 30:break;default:ia(e,n)}}function df(e){var t=e.alternate;t!==null&&(e.alternate=null,df(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ka(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var tt=null,Lt=!1;function Hn(e,t,n){for(n=n.child;n!==null;)ff(e,t,n),n=n.sibling}function ff(e,t,n){if(ve&&typeof ve.onCommitFiberUnmount=="function")try{ve.onCommitFiberUnmount(Ce,n)}catch{}switch(n.tag){case 26:ut||Nn(n,t),Hn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ut||Nn(n,t);var a=tt,l=Lt;ha(n.type)&&(tt=n.stateNode,Lt=!1),Hn(e,t,n),Al(n.stateNode),tt=a,Lt=l;break;case 5:ut||Nn(n,t);case 6:if(a=tt,l=Lt,tt=null,Hn(e,t,n),tt=a,Lt=l,tt!==null)if(Lt)try{(tt.nodeType===9?tt.body:tt.nodeName==="HTML"?tt.ownerDocument.body:tt).removeChild(n.stateNode)}catch(o){$e(n,t,o)}else try{tt.removeChild(n.stateNode)}catch(o){$e(n,t,o)}break;case 18:tt!==null&&(Lt?(e=tt,eh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Bl(e)):eh(tt,n.stateNode));break;case 4:a=tt,l=Lt,tt=n.stateNode.containerInfo,Lt=!0,Hn(e,t,n),tt=a,Lt=l;break;case 0:case 11:case 14:case 15:ut||la(2,n,t),ut||la(4,n,t),Hn(e,t,n);break;case 1:ut||(Nn(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"&&sf(n,t,a)),Hn(e,t,n);break;case 21:Hn(e,t,n);break;case 22:ut=(a=ut)||n.memoizedState!==null,Hn(e,t,n),ut=a;break;default:Hn(e,t,n)}}function hf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Bl(e)}catch(n){$e(t,t.return,n)}}function ig(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new of),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new of),t;default:throw Error(c(435,e.tag))}}function Mc(e,t){var n=ig(e);t.forEach(function(a){var l=gg.bind(null,e,a);n.has(a)||(n.add(a),a.then(l,l))})}function Yt(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var l=n[a],o=e,h=t,p=h;e:for(;p!==null;){switch(p.tag){case 27:if(ha(p.type)){tt=p.stateNode,Lt=!1;break e}break;case 5:tt=p.stateNode,Lt=!1;break e;case 3:case 4:tt=p.stateNode.containerInfo,Lt=!0;break e}p=p.return}if(tt===null)throw Error(c(160));ff(o,h,l),tt=null,Lt=!1,o=l.alternate,o!==null&&(o.return=null),l.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)mf(t,e),t=t.sibling}var mn=null;function mf(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Yt(t,e),Ft(e),a&4&&(la(3,e,e.return),ml(3,e),la(5,e,e.return));break;case 1:Yt(t,e),Ft(e),a&512&&(ut||n===null||Nn(n,n.return)),a&64&&In&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var l=mn;if(Yt(t,e),Ft(e),a&512&&(ut||n===null||Nn(n,n.return)),a&4){var o=n!==null?n.memoizedState:null;if(a=e.memoizedState,n===null)if(a===null)if(e.stateNode===null){e:{a=e.type,n=e.memoizedProps,l=l.ownerDocument||l;t:switch(a){case"title":o=l.getElementsByTagName("title")[0],(!o||o[Qn]||o[gt]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=l.createElement(a),l.head.insertBefore(o,l.querySelector("head > title"))),Et(o,a,n),o[gt]=e,Ae(o),a=o;break e;case"link":var h=ch("link","href",l).get(a+(n.href||""));if(h){for(var p=0;p<h.length;p++)if(o=h[p],o.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&o.getAttribute("rel")===(n.rel==null?null:n.rel)&&o.getAttribute("title")===(n.title==null?null:n.title)&&o.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){h.splice(p,1);break t}}o=l.createElement(a),Et(o,a,n),l.head.appendChild(o);break;case"meta":if(h=ch("meta","content",l).get(a+(n.content||""))){for(p=0;p<h.length;p++)if(o=h[p],o.getAttribute("content")===(n.content==null?null:""+n.content)&&o.getAttribute("name")===(n.name==null?null:n.name)&&o.getAttribute("property")===(n.property==null?null:n.property)&&o.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute("charset")===(n.charSet==null?null:n.charSet)){h.splice(p,1);break t}}o=l.createElement(a),Et(o,a,n),l.head.appendChild(o);break;default:throw Error(c(468,a))}o[gt]=e,Ae(o),a=o}e.stateNode=a}else oh(l,e.type,e.stateNode);else e.stateNode=rh(l,a,e.memoizedProps);else o!==a?(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,a===null?oh(l,e.type,e.stateNode):rh(l,a,e.memoizedProps)):a===null&&e.stateNode!==null&&Oc(e,e.memoizedProps,n.memoizedProps)}break;case 27:Yt(t,e),Ft(e),a&512&&(ut||n===null||Nn(n,n.return)),n!==null&&a&4&&Oc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Yt(t,e),Ft(e),a&512&&(ut||n===null||Nn(n,n.return)),e.flags&32){l=e.stateNode;try{Ja(l,"")}catch(M){$e(e,e.return,M)}}a&4&&e.stateNode!=null&&(l=e.memoizedProps,Oc(e,l,n!==null?n.memoizedProps:l)),a&1024&&(Cc=!0);break;case 6:if(Yt(t,e),Ft(e),a&4){if(e.stateNode===null)throw Error(c(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(M){$e(e,e.return,M)}}break;case 3:if($i=null,l=mn,mn=Ki(t.containerInfo),Yt(t,e),mn=l,Ft(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Bl(t.containerInfo)}catch(M){$e(e,e.return,M)}Cc&&(Cc=!1,gf(e));break;case 4:a=mn,mn=Ki(e.stateNode.containerInfo),Yt(t,e),Ft(e),mn=a;break;case 12:Yt(t,e),Ft(e);break;case 13:Yt(t,e),Ft(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(qc=me()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Mc(e,a)));break;case 22:l=e.memoizedState!==null;var N=n!==null&&n.memoizedState!==null,O=In,V=ut;if(In=O||l,ut=V||N,Yt(t,e),ut=V,In=O,Ft(e),a&8192)e:for(t=e.stateNode,t._visibility=l?t._visibility&-2:t._visibility|1,l&&(n===null||N||In||ut||za(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){N=n=t;try{if(o=N.stateNode,l)h=o.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{p=N.stateNode;var Q=N.memoizedProps.style,C=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;p.style.display=C==null||typeof C=="boolean"?"":(""+C).trim()}}catch(M){$e(N,N.return,M)}}}else if(t.tag===6){if(n===null){N=t;try{N.stateNode.nodeValue=l?"":N.memoizedProps}catch(M){$e(N,N.return,M)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,Mc(e,n))));break;case 19:Yt(t,e),Ft(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Mc(e,a)));break;case 30:break;case 21:break;default:Yt(t,e),Ft(e)}}function Ft(e){var t=e.flags;if(t&2){try{for(var n,a=e.return;a!==null;){if(rf(a)){n=a;break}a=a.return}if(n==null)throw Error(c(160));switch(n.tag){case 27:var l=n.stateNode,o=Bc(e);Mi(e,o,l);break;case 5:var h=n.stateNode;n.flags&32&&(Ja(h,""),n.flags&=-33);var p=Bc(e);Mi(e,p,h);break;case 3:case 4:var N=n.stateNode.containerInfo,O=Bc(e);Dc(e,O,N);break;default:throw Error(c(161))}}catch(V){$e(e,e.return,V)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;gf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ia(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)uf(e,t.alternate,t),t=t.sibling}function za(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:la(4,t,t.return),za(t);break;case 1:Nn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&sf(t,t.return,n),za(t);break;case 27:Al(t.stateNode);case 26:case 5:Nn(t,t.return),za(t);break;case 22:t.memoizedState===null&&za(t);break;case 30:za(t);break;default:za(t)}e=e.sibling}}function ra(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,l=e,o=t,h=o.flags;switch(o.tag){case 0:case 11:case 15:ra(l,o,n),ml(4,o);break;case 1:if(ra(l,o,n),a=o,l=a.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(O){$e(a,a.return,O)}if(a=o,l=a.updateQueue,l!==null){var p=a.stateNode;try{var N=l.shared.hiddenCallbacks;if(N!==null)for(l.shared.hiddenCallbacks=null,l=0;l<N.length;l++)Vu(N[l],p)}catch(O){$e(a,a.return,O)}}n&&h&64&&af(o),gl(o,o.return);break;case 27:cf(o);case 26:case 5:ra(l,o,n),n&&a===null&&h&4&&lf(o),gl(o,o.return);break;case 12:ra(l,o,n);break;case 13:ra(l,o,n),n&&h&4&&hf(l,o);break;case 22:o.memoizedState===null&&ra(l,o,n),gl(o,o.return);break;case 30:break;default:ra(l,o,n)}t=t.sibling}}function kc(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&el(n))}function zc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&el(e))}function Sn(e,t,n,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)pf(e,t,n,a),t=t.sibling}function pf(e,t,n,a){var l=t.flags;switch(t.tag){case 0:case 11:case 15:Sn(e,t,n,a),l&2048&&ml(9,t);break;case 1:Sn(e,t,n,a);break;case 3:Sn(e,t,n,a),l&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&el(e)));break;case 12:if(l&2048){Sn(e,t,n,a),e=t.stateNode;try{var o=t.memoizedProps,h=o.id,p=o.onPostCommit;typeof p=="function"&&p(h,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){$e(t,t.return,N)}}else Sn(e,t,n,a);break;case 13:Sn(e,t,n,a);break;case 23:break;case 22:o=t.stateNode,h=t.alternate,t.memoizedState!==null?o._visibility&2?Sn(e,t,n,a):pl(e,t):o._visibility&2?Sn(e,t,n,a):(o._visibility|=2,ps(e,t,n,a,(t.subtreeFlags&10256)!==0)),l&2048&&kc(h,t);break;case 24:Sn(e,t,n,a),l&2048&&zc(t.alternate,t);break;default:Sn(e,t,n,a)}}function ps(e,t,n,a,l){for(l=l&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var o=e,h=t,p=n,N=a,O=h.flags;switch(h.tag){case 0:case 11:case 15:ps(o,h,p,N,l),ml(8,h);break;case 23:break;case 22:var V=h.stateNode;h.memoizedState!==null?V._visibility&2?ps(o,h,p,N,l):pl(o,h):(V._visibility|=2,ps(o,h,p,N,l)),l&&O&2048&&kc(h.alternate,h);break;case 24:ps(o,h,p,N,l),l&&O&2048&&zc(h.alternate,h);break;default:ps(o,h,p,N,l)}t=t.sibling}}function pl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,a=t,l=a.flags;switch(a.tag){case 22:pl(n,a),l&2048&&kc(a.alternate,a);break;case 24:pl(n,a),l&2048&&zc(a.alternate,a);break;default:pl(n,a)}t=t.sibling}}var vl=8192;function vs(e){if(e.subtreeFlags&vl)for(e=e.child;e!==null;)vf(e),e=e.sibling}function vf(e){switch(e.tag){case 26:vs(e),e.flags&vl&&e.memoizedState!==null&&Fg(mn,e.memoizedState,e.memoizedProps);break;case 5:vs(e);break;case 3:case 4:var t=mn;mn=Ki(e.stateNode.containerInfo),vs(e),mn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=vl,vl=16777216,vs(e),vl=t):vs(e));break;default:vs(e)}}function xf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function xl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];bt=a,bf(a,e)}xf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)yf(e),e=e.sibling}function yf(e){switch(e.tag){case 0:case 11:case 15:xl(e),e.flags&2048&&la(9,e,e.return);break;case 3:xl(e);break;case 12:xl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ki(e)):xl(e);break;default:xl(e)}}function ki(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];bt=a,bf(a,e)}xf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:la(8,t,t.return),ki(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,ki(t));break;default:ki(t)}e=e.sibling}}function bf(e,t){for(;bt!==null;){var n=bt;switch(n.tag){case 0:case 11:case 15:la(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:el(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,bt=a;else e:for(n=e;bt!==null;){a=bt;var l=a.sibling,o=a.return;if(df(a),a===n){bt=null;break e}if(l!==null){l.return=o,bt=l;break e}bt=o}}}var rg={getCacheForType:function(e){var t=Tt(pt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},cg=typeof WeakMap=="function"?WeakMap:Map,Ye=0,Je=null,ke=null,He=0,Fe=0,Xt=null,ca=!1,xs=!1,Lc=!1,qn=0,st=0,oa=0,La=0,Ic=0,sn=0,ys=0,yl=null,It=null,Hc=!1,qc=0,zi=1/0,Li=null,ua=null,At=0,da=null,bs=null,Ns=0,Gc=0,Vc=null,Nf=null,bl=0,Yc=null;function Qt(){if((Ye&2)!==0&&He!==0)return He&-He;if(x.T!==null){var e=cs;return e!==0?e:Jc()}return ks()}function Sf(){sn===0&&(sn=(He&536870912)===0||Ve?Bs():536870912);var e=an.current;return e!==null&&(e.flags|=32),sn}function Kt(e,t,n){(e===Je&&(Fe===2||Fe===9)||e.cancelPendingCommit!==null)&&(Ss(e,0),fa(e,He,sn,!1)),Xn(e,n),((Ye&2)===0||e!==Je)&&(e===Je&&((Ye&2)===0&&(La|=n),st===4&&fa(e,He,sn,!1)),jn(e))}function jf(e,t,n){if((Ye&6)!==0)throw Error(c(327));var a=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Fn(e,t),l=a?dg(e,t):Qc(e,t,!0),o=a;do{if(l===0){xs&&!a&&fa(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!og(n)){l=Qc(e,t,!1),o=!1;continue}if(l===2){if(o=t,e.errorRecoveryDisabledLanes&o)var h=0;else h=e.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){t=h;e:{var p=e;l=yl;var N=p.current.memoizedState.isDehydrated;if(N&&(Ss(p,h).flags|=256),h=Qc(p,h,!1),h!==2){if(Lc&&!N){p.errorRecoveryDisabledLanes|=o,La|=o,l=4;break e}o=It,It=l,o!==null&&(It===null?It=o:It.push.apply(It,o))}l=h}if(o=!1,l!==2)continue}}if(l===1){Ss(e,0),fa(e,t,0,!0);break}e:{switch(a=e,o=l,o){case 0:case 1:throw Error(c(345));case 4:if((t&4194048)!==t)break;case 6:fa(a,t,sn,!ca);break e;case 2:It=null;break;case 3:case 5:break;default:throw Error(c(329))}if((t&62914560)===t&&(l=qc+300-me(),10<l)){if(fa(a,t,sn,!ca),ja(a,0,!0)!==0)break e;a.timeoutHandle=Pf(Af.bind(null,a,n,It,Li,Hc,t,sn,La,ys,ca,o,2,-0,0),l);break e}Af(a,n,It,Li,Hc,t,sn,La,ys,ca,o,0,-0,0)}}break}while(!0);jn(e)}function Af(e,t,n,a,l,o,h,p,N,O,V,Q,C,M){if(e.timeoutHandle=-1,Q=t.subtreeFlags,(Q&8192||(Q&16785408)===16785408)&&(Tl={stylesheets:null,count:0,unsuspend:Yg},vf(t),Q=Xg(),Q!==null)){e.cancelPendingCommit=Q(Of.bind(null,e,t,o,n,a,l,h,p,N,V,1,C,M)),fa(e,o,h,!O);return}Of(e,t,o,n,a,l,h,p,N)}function og(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var l=n[a],o=l.getSnapshot;l=l.value;try{if(!Gt(o(),l))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function fa(e,t,n,a){t&=~Ic,t&=~La,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var l=t;0<l;){var o=31-Pe(l),h=1<<o;a[o]=-1,l&=~h}n!==0&&Cs(e,n,t)}function Ii(){return(Ye&6)===0?(Nl(0),!1):!0}function Fc(){if(ke!==null){if(Fe===0)var e=ke.return;else e=ke,Dn=Ba=null,cc(e),ms=null,dl=0,e=ke;for(;e!==null;)nf(e.alternate,e),e=e.return;ke=null}}function Ss(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,Tg(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Fc(),Je=e,ke=n=Un(e.current,null),He=t,Fe=0,Xt=null,ca=!1,xs=Fn(e,t),Lc=!1,ys=sn=Ic=La=oa=st=0,It=yl=null,Hc=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var l=31-Pe(a),o=1<<l;t|=e[l],a&=~o}return qn=t,ri(),n}function Ef(e,t){Be=null,x.H=wi,t===nl||t===pi?(t=qu(),Fe=3):t===Lu?(t=qu(),Fe=4):Fe=t===Gd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Xt=t,ke===null&&(st=1,Oi(e,Wt(t,e.current)))}function wf(){var e=x.H;return x.H=wi,e===null?wi:e}function Tf(){var e=x.A;return x.A=rg,e}function Xc(){st=4,ca||(He&4194048)!==He&&an.current!==null||(xs=!0),(oa&134217727)===0&&(La&134217727)===0||Je===null||fa(Je,He,sn,!1)}function Qc(e,t,n){var a=Ye;Ye|=2;var l=wf(),o=Tf();(Je!==e||He!==t)&&(Li=null,Ss(e,t)),t=!1;var h=st;e:do try{if(Fe!==0&&ke!==null){var p=ke,N=Xt;switch(Fe){case 8:Fc(),h=6;break e;case 3:case 2:case 9:case 6:an.current===null&&(t=!0);var O=Fe;if(Fe=0,Xt=null,js(e,p,N,O),n&&xs){h=0;break e}break;default:O=Fe,Fe=0,Xt=null,js(e,p,N,O)}}ug(),h=st;break}catch(V){Ef(e,V)}while(!0);return t&&e.shellSuspendCounter++,Dn=Ba=null,Ye=a,x.H=l,x.A=o,ke===null&&(Je=null,He=0,ri()),h}function ug(){for(;ke!==null;)_f(ke)}function dg(e,t){var n=Ye;Ye|=2;var a=wf(),l=Tf();Je!==e||He!==t?(Li=null,zi=me()+500,Ss(e,t)):xs=Fn(e,t);e:do try{if(Fe!==0&&ke!==null){t=ke;var o=Xt;t:switch(Fe){case 1:Fe=0,Xt=null,js(e,t,o,1);break;case 2:case 9:if(Iu(o)){Fe=0,Xt=null,Rf(t);break}t=function(){Fe!==2&&Fe!==9||Je!==e||(Fe=7),jn(e)},o.then(t,t);break e;case 3:Fe=7;break e;case 4:Fe=5;break e;case 7:Iu(o)?(Fe=0,Xt=null,Rf(t)):(Fe=0,Xt=null,js(e,t,o,7));break;case 5:var h=null;switch(ke.tag){case 26:h=ke.memoizedState;case 5:case 27:var p=ke;if(!h||uh(h)){Fe=0,Xt=null;var N=p.sibling;if(N!==null)ke=N;else{var O=p.return;O!==null?(ke=O,Hi(O)):ke=null}break t}}Fe=0,Xt=null,js(e,t,o,5);break;case 6:Fe=0,Xt=null,js(e,t,o,6);break;case 8:Fc(),st=6;break e;default:throw Error(c(462))}}fg();break}catch(V){Ef(e,V)}while(!0);return Dn=Ba=null,x.H=a,x.A=l,Ye=n,ke!==null?0:(Je=null,He=0,ri(),st)}function fg(){for(;ke!==null&&!L();)_f(ke)}function _f(e){var t=ef(e.alternate,e,qn);e.memoizedProps=e.pendingProps,t===null?Hi(e):ke=t}function Rf(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Kd(n,t,t.pendingProps,t.type,void 0,He);break;case 11:t=Kd(n,t,t.pendingProps,t.type.render,t.ref,He);break;case 5:cc(t);default:nf(n,t),t=ke=Ru(t,qn),t=ef(n,t,qn)}e.memoizedProps=e.pendingProps,t===null?Hi(e):ke=t}function js(e,t,n,a){Dn=Ba=null,cc(t),ms=null,dl=0;var l=t.return;try{if(tg(e,l,t,n,He)){st=1,Oi(e,Wt(n,e.current)),ke=null;return}}catch(o){if(l!==null)throw ke=l,o;st=1,Oi(e,Wt(n,e.current)),ke=null;return}t.flags&32768?(Ve||a===1?e=!0:xs||(He&536870912)!==0?e=!1:(ca=e=!0,(a===2||a===9||a===3||a===6)&&(a=an.current,a!==null&&a.tag===13&&(a.flags|=16384))),Uf(t,e)):Hi(t)}function Hi(e){var t=e;do{if((t.flags&32768)!==0){Uf(t,ca);return}e=t.return;var n=ag(t.alternate,t,qn);if(n!==null){ke=n;return}if(t=t.sibling,t!==null){ke=t;return}ke=t=e}while(t!==null);st===0&&(st=5)}function Uf(e,t){do{var n=sg(e.alternate,e);if(n!==null){n.flags&=32767,ke=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){ke=e;return}ke=e=n}while(e!==null);st=6,ke=null}function Of(e,t,n,a,l,o,h,p,N){e.cancelPendingCommit=null;do qi();while(At!==0);if((Ye&6)!==0)throw Error(c(327));if(t!==null){if(t===e.current)throw Error(c(177));if(o=t.lanes|t.childLanes,o|=zr,Ql(e,n,o,h,p,N),e===Je&&(ke=Je=null,He=0),bs=t,da=e,Ns=n,Gc=o,Vc=l,Nf=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,pg(J,function(){return kf(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=x.T,x.T=null,l=b.p,b.p=2,h=Ye,Ye|=4;try{lg(e,t,n)}finally{Ye=h,b.p=l,x.T=a}}At=1,Bf(),Df(),Cf()}}function Bf(){if(At===1){At=0;var e=da,t=bs,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=x.T,x.T=null;var a=b.p;b.p=2;var l=Ye;Ye|=4;try{mf(t,e);var o=lo,h=yu(e.containerInfo),p=o.focusedElem,N=o.selectionRange;if(h!==p&&p&&p.ownerDocument&&xu(p.ownerDocument.documentElement,p)){if(N!==null&&Br(p)){var O=N.start,V=N.end;if(V===void 0&&(V=O),"selectionStart"in p)p.selectionStart=O,p.selectionEnd=Math.min(V,p.value.length);else{var Q=p.ownerDocument||document,C=Q&&Q.defaultView||window;if(C.getSelection){var M=C.getSelection(),we=p.textContent.length,Se=Math.min(N.start,we),Ze=N.end===void 0?Se:Math.min(N.end,we);!M.extend&&Se>Ze&&(h=Ze,Ze=Se,Se=h);var w=vu(p,Se),E=vu(p,Ze);if(w&&E&&(M.rangeCount!==1||M.anchorNode!==w.node||M.anchorOffset!==w.offset||M.focusNode!==E.node||M.focusOffset!==E.offset)){var R=Q.createRange();R.setStart(w.node,w.offset),M.removeAllRanges(),Se>Ze?(M.addRange(R),M.extend(E.node,E.offset)):(R.setEnd(E.node,E.offset),M.addRange(R))}}}}for(Q=[],M=p;M=M.parentNode;)M.nodeType===1&&Q.push({element:M,left:M.scrollLeft,top:M.scrollTop});for(typeof p.focus=="function"&&p.focus(),p=0;p<Q.length;p++){var Y=Q[p];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Wi=!!so,lo=so=null}finally{Ye=l,b.p=a,x.T=n}}e.current=t,At=2}}function Df(){if(At===2){At=0;var e=da,t=bs,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=x.T,x.T=null;var a=b.p;b.p=2;var l=Ye;Ye|=4;try{uf(e,t.alternate,t)}finally{Ye=l,b.p=a,x.T=n}}At=3}}function Cf(){if(At===4||At===3){At=0,he();var e=da,t=bs,n=Ns,a=Nf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?At=5:(At=0,bs=da=null,Mf(e,e.pendingLanes));var l=e.pendingLanes;if(l===0&&(ua=null),Xa(n),t=t.stateNode,ve&&typeof ve.onCommitFiberRoot=="function")try{ve.onCommitFiberRoot(Ce,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=x.T,l=b.p,b.p=2,x.T=null;try{for(var o=e.onRecoverableError,h=0;h<a.length;h++){var p=a[h];o(p.value,{componentStack:p.stack})}}finally{x.T=t,b.p=l}}(Ns&3)!==0&&qi(),jn(e),l=e.pendingLanes,(n&4194090)!==0&&(l&42)!==0?e===Yc?bl++:(bl=0,Yc=e):bl=0,Nl(0)}}function Mf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,el(t)))}function qi(e){return Bf(),Df(),Cf(),kf()}function kf(){if(At!==5)return!1;var e=da,t=Gc;Gc=0;var n=Xa(Ns),a=x.T,l=b.p;try{b.p=32>n?32:n,x.T=null,n=Vc,Vc=null;var o=da,h=Ns;if(At=0,bs=da=null,Ns=0,(Ye&6)!==0)throw Error(c(331));var p=Ye;if(Ye|=4,yf(o.current),pf(o,o.current,h,n),Ye=p,Nl(0,!1),ve&&typeof ve.onPostCommitFiberRoot=="function")try{ve.onPostCommitFiberRoot(Ce,o)}catch{}return!0}finally{b.p=l,x.T=a,Mf(e,t)}}function zf(e,t,n){t=Wt(n,t),t=Sc(e.stateNode,t,2),e=ta(e,t,2),e!==null&&(Xn(e,2),jn(e))}function $e(e,t,n){if(e.tag===3)zf(e,e,n);else for(;t!==null;){if(t.tag===3){zf(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(ua===null||!ua.has(a))){e=Wt(n,e),n=Hd(2),a=ta(t,n,2),a!==null&&(qd(n,a,t,e),Xn(a,2),jn(a));break}}t=t.return}}function Kc(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new cg;var l=new Set;a.set(t,l)}else l=a.get(t),l===void 0&&(l=new Set,a.set(t,l));l.has(n)||(Lc=!0,l.add(n),e=hg.bind(null,e,t,n),t.then(e,e))}function hg(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,Je===e&&(He&n)===n&&(st===4||st===3&&(He&62914560)===He&&300>me()-qc?(Ye&2)===0&&Ss(e,0):Ic|=n,ys===He&&(ys=0)),jn(e)}function Lf(e,t){t===0&&(t=Ds()),e=ss(e,t),e!==null&&(Xn(e,t),jn(e))}function mg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Lf(e,n)}function gg(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(c(314))}a!==null&&a.delete(t),Lf(e,n)}function pg(e,t){return et(e,t)}var Gi=null,As=null,Zc=!1,Vi=!1,$c=!1,Ia=0;function jn(e){e!==As&&e.next===null&&(As===null?Gi=As=e:As=As.next=e),Vi=!0,Zc||(Zc=!0,xg())}function Nl(e,t){if(!$c&&Vi){$c=!0;do for(var n=!1,a=Gi;a!==null;){if(e!==0){var l=a.pendingLanes;if(l===0)var o=0;else{var h=a.suspendedLanes,p=a.pingedLanes;o=(1<<31-Pe(42|e)+1)-1,o&=l&~(h&~p),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(n=!0,Gf(a,o))}else o=He,o=ja(a,a===Je?o:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(o&3)===0||Fn(a,o)||(n=!0,Gf(a,o));a=a.next}while(n);$c=!1}}function vg(){If()}function If(){Vi=Zc=!1;var e=0;Ia!==0&&(wg()&&(e=Ia),Ia=0);for(var t=me(),n=null,a=Gi;a!==null;){var l=a.next,o=Hf(a,t);o===0?(a.next=null,n===null?Gi=l:n.next=l,l===null&&(As=n)):(n=a,(e!==0||(o&3)!==0)&&(Vi=!0)),a=l}Nl(e)}function Hf(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,l=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var h=31-Pe(o),p=1<<h,N=l[h];N===-1?((p&n)===0||(p&a)!==0)&&(l[h]=Xl(p,t)):N<=t&&(e.expiredLanes|=p),o&=~p}if(t=Je,n=He,n=ja(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,n===0||e===t&&(Fe===2||Fe===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&qt(a),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Fn(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(a!==null&&qt(a),Xa(n)){case 2:case 8:n=U;break;case 32:n=J;break;case 268435456:n=ee;break;default:n=J}return a=qf.bind(null,e),n=et(n,a),e.callbackPriority=t,e.callbackNode=n,t}return a!==null&&a!==null&&qt(a),e.callbackPriority=2,e.callbackNode=null,2}function qf(e,t){if(At!==0&&At!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(qi()&&e.callbackNode!==n)return null;var a=He;return a=ja(e,e===Je?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(jf(e,a,t),Hf(e,me()),e.callbackNode!=null&&e.callbackNode===n?qf.bind(null,e):null)}function Gf(e,t){if(qi())return null;jf(e,t,!0)}function xg(){_g(function(){(Ye&6)!==0?et(I,vg):If()})}function Jc(){return Ia===0&&(Ia=Bs()),Ia}function Vf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ei(""+e)}function Yf(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function yg(e,t,n,a,l){if(t==="submit"&&n&&n.stateNode===l){var o=Vf((l[St]||null).action),h=a.submitter;h&&(t=(t=h[St]||null)?Vf(t.formAction):h.getAttribute("formAction"),t!==null&&(o=t,h=null));var p=new si("action","action",null,a,l);e.push({event:p,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(Ia!==0){var N=h?Yf(l,h):new FormData(l);vc(n,{pending:!0,data:N,method:l.method,action:o},null,N)}}else typeof o=="function"&&(p.preventDefault(),N=h?Yf(l,h):new FormData(l),vc(n,{pending:!0,data:N,method:l.method,action:o},o,N))},currentTarget:l}]})}}for(var Pc=0;Pc<kr.length;Pc++){var Wc=kr[Pc],bg=Wc.toLowerCase(),Ng=Wc[0].toUpperCase()+Wc.slice(1);hn(bg,"on"+Ng)}hn(Su,"onAnimationEnd"),hn(ju,"onAnimationIteration"),hn(Au,"onAnimationStart"),hn("dblclick","onDoubleClick"),hn("focusin","onFocus"),hn("focusout","onBlur"),hn(L0,"onTransitionRun"),hn(I0,"onTransitionStart"),hn(H0,"onTransitionCancel"),hn(Eu,"onTransitionEnd"),ct("onMouseEnter",["mouseout","mouseover"]),ct("onMouseLeave",["mouseout","mouseover"]),ct("onPointerEnter",["pointerout","pointerover"]),ct("onPointerLeave",["pointerout","pointerover"]),Xe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sl));function Ff(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],l=a.event;a=a.listeners;e:{var o=void 0;if(t)for(var h=a.length-1;0<=h;h--){var p=a[h],N=p.instance,O=p.currentTarget;if(p=p.listener,N!==o&&l.isPropagationStopped())break e;o=p,l.currentTarget=O;try{o(l)}catch(V){Ui(V)}l.currentTarget=null,o=N}else for(h=0;h<a.length;h++){if(p=a[h],N=p.instance,O=p.currentTarget,p=p.listener,N!==o&&l.isPropagationStopped())break e;o=p,l.currentTarget=O;try{o(l)}catch(V){Ui(V)}l.currentTarget=null,o=N}}}}function ze(e,t){var n=t[Qa];n===void 0&&(n=t[Qa]=new Set);var a=e+"__bubble";n.has(a)||(Xf(t,e,2,!1),n.add(a))}function eo(e,t,n){var a=0;t&&(a|=4),Xf(n,e,a,t)}var Yi="_reactListening"+Math.random().toString(36).slice(2);function to(e){if(!e[Yi]){e[Yi]=!0,Ge.forEach(function(n){n!=="selectionchange"&&(Sg.has(n)||eo(n,!1,e),eo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Yi]||(t[Yi]=!0,eo("selectionchange",!1,t))}}function Xf(e,t,n,a){switch(ph(t)){case 2:var l=Zg;break;case 8:l=$g;break;default:l=po}n=l.bind(null,t,n,e),l=void 0,!jr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),a?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function no(e,t,n,a,l){var o=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var h=a.tag;if(h===3||h===4){var p=a.stateNode.containerInfo;if(p===l)break;if(h===4)for(h=a.return;h!==null;){var N=h.tag;if((N===3||N===4)&&h.stateNode.containerInfo===l)return;h=h.return}for(;p!==null;){if(h=Tn(p),h===null)return;if(N=h.tag,N===5||N===6||N===26||N===27){a=o=h;continue e}p=p.parentNode}}a=a.return}Po(function(){var O=o,V=Nr(n),Q=[];e:{var C=wu.get(e);if(C!==void 0){var M=si,we=e;switch(e){case"keypress":if(ni(n)===0)break e;case"keydown":case"keyup":M=p0;break;case"focusin":we="focus",M=Tr;break;case"focusout":we="blur",M=Tr;break;case"beforeblur":case"afterblur":M=Tr;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M=tu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M=s0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M=y0;break;case Su:case ju:case Au:M=r0;break;case Eu:M=N0;break;case"scroll":case"scrollend":M=n0;break;case"wheel":M=j0;break;case"copy":case"cut":case"paste":M=o0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M=au;break;case"toggle":case"beforetoggle":M=E0}var Se=(t&4)!==0,Ze=!Se&&(e==="scroll"||e==="scrollend"),w=Se?C!==null?C+"Capture":null:C;Se=[];for(var E=O,R;E!==null;){var Y=E;if(R=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||R===null||w===null||(Y=qs(E,w),Y!=null&&Se.push(jl(E,Y,R))),Ze)break;E=E.return}0<Se.length&&(C=new M(C,we,null,n,V),Q.push({event:C,listeners:Se}))}}if((t&7)===0){e:{if(C=e==="mouseover"||e==="pointerover",M=e==="mouseout"||e==="pointerout",C&&n!==br&&(we=n.relatedTarget||n.fromElement)&&(Tn(we)||we[wn]))break e;if((M||C)&&(C=V.window===V?V:(C=V.ownerDocument)?C.defaultView||C.parentWindow:window,M?(we=n.relatedTarget||n.toElement,M=O,we=we?Tn(we):null,we!==null&&(Ze=f(we),Se=we.tag,we!==Ze||Se!==5&&Se!==27&&Se!==6)&&(we=null)):(M=null,we=O),M!==we)){if(Se=tu,Y="onMouseLeave",w="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(Se=au,Y="onPointerLeave",w="onPointerEnter",E="pointer"),Ze=M==null?C:Kn(M),R=we==null?C:Kn(we),C=new Se(Y,E+"leave",M,n,V),C.target=Ze,C.relatedTarget=R,Y=null,Tn(V)===O&&(Se=new Se(w,E+"enter",we,n,V),Se.target=R,Se.relatedTarget=Ze,Y=Se),Ze=Y,M&&we)t:{for(Se=M,w=we,E=0,R=Se;R;R=Es(R))E++;for(R=0,Y=w;Y;Y=Es(Y))R++;for(;0<E-R;)Se=Es(Se),E--;for(;0<R-E;)w=Es(w),R--;for(;E--;){if(Se===w||w!==null&&Se===w.alternate)break t;Se=Es(Se),w=Es(w)}Se=null}else Se=null;M!==null&&Qf(Q,C,M,Se,!1),we!==null&&Ze!==null&&Qf(Q,Ze,we,Se,!0)}}e:{if(C=O?Kn(O):window,M=C.nodeName&&C.nodeName.toLowerCase(),M==="select"||M==="input"&&C.type==="file")var pe=du;else if(ou(C))if(fu)pe=M0;else{pe=D0;var Me=B0}else M=C.nodeName,!M||M.toLowerCase()!=="input"||C.type!=="checkbox"&&C.type!=="radio"?O&&yr(O.elementType)&&(pe=du):pe=C0;if(pe&&(pe=pe(e,O))){uu(Q,pe,n,V);break e}Me&&Me(e,C,O),e==="focusout"&&O&&C.type==="number"&&O.memoizedProps.value!=null&&xr(C,"number",C.value)}switch(Me=O?Kn(O):window,e){case"focusin":(ou(Me)||Me.contentEditable==="true")&&(ts=Me,Dr=O,Zs=null);break;case"focusout":Zs=Dr=ts=null;break;case"mousedown":Cr=!0;break;case"contextmenu":case"mouseup":case"dragend":Cr=!1,bu(Q,n,V);break;case"selectionchange":if(z0)break;case"keydown":case"keyup":bu(Q,n,V)}var xe;if(Rr)e:{switch(e){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else es?ru(e,n)&&(Ee="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Ee="onCompositionStart");Ee&&(su&&n.locale!=="ko"&&(es||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&es&&(xe=Wo()):(Jn=V,Ar="value"in Jn?Jn.value:Jn.textContent,es=!0)),Me=Fi(O,Ee),0<Me.length&&(Ee=new nu(Ee,e,null,n,V),Q.push({event:Ee,listeners:Me}),xe?Ee.data=xe:(xe=cu(n),xe!==null&&(Ee.data=xe)))),(xe=T0?_0(e,n):R0(e,n))&&(Ee=Fi(O,"onBeforeInput"),0<Ee.length&&(Me=new nu("onBeforeInput","beforeinput",null,n,V),Q.push({event:Me,listeners:Ee}),Me.data=xe)),yg(Q,e,O,n,V)}Ff(Q,t)})}function jl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fi(e,t){for(var n=t+"Capture",a=[];e!==null;){var l=e,o=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||o===null||(l=qs(e,n),l!=null&&a.unshift(jl(e,l,o)),l=qs(e,t),l!=null&&a.push(jl(e,l,o))),e.tag===3)return a;e=e.return}return[]}function Es(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Qf(e,t,n,a,l){for(var o=t._reactName,h=[];n!==null&&n!==a;){var p=n,N=p.alternate,O=p.stateNode;if(p=p.tag,N!==null&&N===a)break;p!==5&&p!==26&&p!==27||O===null||(N=O,l?(O=qs(n,o),O!=null&&h.unshift(jl(n,O,N))):l||(O=qs(n,o),O!=null&&h.push(jl(n,O,N)))),n=n.return}h.length!==0&&e.push({event:t,listeners:h})}var jg=/\r\n?/g,Ag=/\u0000|\uFFFD/g;function Kf(e){return(typeof e=="string"?e:""+e).replace(jg,`
`).replace(Ag,"")}function Zf(e,t){return t=Kf(t),Kf(e)===t}function Xi(){}function Ke(e,t,n,a,l,o){switch(n){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||Ja(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&Ja(e,""+a);break;case"className":Za(e,"class",a);break;case"tabIndex":Za(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Za(e,n,a);break;case"style":$o(e,a,o);break;case"data":if(t!=="object"){Za(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=ei(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(n==="formAction"?(t!=="input"&&Ke(e,t,"name",l.name,l,null),Ke(e,t,"formEncType",l.formEncType,l,null),Ke(e,t,"formMethod",l.formMethod,l,null),Ke(e,t,"formTarget",l.formTarget,l,null)):(Ke(e,t,"encType",l.encType,l,null),Ke(e,t,"method",l.method,l,null),Ke(e,t,"target",l.target,l,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=ei(""+a),e.setAttribute(n,a);break;case"onClick":a!=null&&(e.onclick=Xi);break;case"onScroll":a!=null&&ze("scroll",e);break;case"onScrollEnd":a!=null&&ze("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(c(61));if(n=a.__html,n!=null){if(l.children!=null)throw Error(c(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}n=ei(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":a===!0?e.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":ze("beforetoggle",e),ze("toggle",e),xn(e,"popover",a);break;case"xlinkActuate":fn(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":fn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":fn(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":fn(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":fn(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":fn(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":fn(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":fn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":fn(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":xn(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=e0.get(n)||n,xn(e,n,a))}}function ao(e,t,n,a,l,o){switch(n){case"style":$o(e,a,o);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(c(61));if(n=a.__html,n!=null){if(l.children!=null)throw Error(c(60));e.innerHTML=n}}break;case"children":typeof a=="string"?Ja(e,a):(typeof a=="number"||typeof a=="bigint")&&Ja(e,""+a);break;case"onScroll":a!=null&&ze("scroll",e);break;case"onScrollEnd":a!=null&&ze("scrollend",e);break;case"onClick":a!=null&&(e.onclick=Xi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ut.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(l=n.endsWith("Capture"),t=n.slice(2,l?n.length-7:void 0),o=e[St]||null,o=o!=null?o[n]:null,typeof o=="function"&&e.removeEventListener(t,o,l),typeof a=="function")){typeof o!="function"&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,l);break e}n in e?e[n]=a:a===!0?e.setAttribute(n,""):xn(e,n,a)}}}function Et(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",e),ze("load",e);var a=!1,l=!1,o;for(o in n)if(n.hasOwnProperty(o)){var h=n[o];if(h!=null)switch(o){case"src":a=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:Ke(e,t,o,h,n,null)}}l&&Ke(e,t,"srcSet",n.srcSet,n,null),a&&Ke(e,t,"src",n.src,n,null);return;case"input":ze("invalid",e);var p=o=h=l=null,N=null,O=null;for(a in n)if(n.hasOwnProperty(a)){var V=n[a];if(V!=null)switch(a){case"name":l=V;break;case"type":h=V;break;case"checked":N=V;break;case"defaultChecked":O=V;break;case"value":o=V;break;case"defaultValue":p=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(c(137,t));break;default:Ke(e,t,a,V,n,null)}}Xo(e,o,p,N,O,h,l,!1),Pl(e);return;case"select":ze("invalid",e),a=h=o=null;for(l in n)if(n.hasOwnProperty(l)&&(p=n[l],p!=null))switch(l){case"value":o=p;break;case"defaultValue":h=p;break;case"multiple":a=p;default:Ke(e,t,l,p,n,null)}t=o,n=h,e.multiple=!!a,t!=null?$a(e,!!a,t,!1):n!=null&&$a(e,!!a,n,!0);return;case"textarea":ze("invalid",e),o=l=a=null;for(h in n)if(n.hasOwnProperty(h)&&(p=n[h],p!=null))switch(h){case"value":a=p;break;case"defaultValue":l=p;break;case"children":o=p;break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(c(91));break;default:Ke(e,t,h,p,n,null)}Ko(e,a,l,o),Pl(e);return;case"option":for(N in n)if(n.hasOwnProperty(N)&&(a=n[N],a!=null))switch(N){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:Ke(e,t,N,a,n,null)}return;case"dialog":ze("beforetoggle",e),ze("toggle",e),ze("cancel",e),ze("close",e);break;case"iframe":case"object":ze("load",e);break;case"video":case"audio":for(a=0;a<Sl.length;a++)ze(Sl[a],e);break;case"image":ze("error",e),ze("load",e);break;case"details":ze("toggle",e);break;case"embed":case"source":case"link":ze("error",e),ze("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(O in n)if(n.hasOwnProperty(O)&&(a=n[O],a!=null))switch(O){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:Ke(e,t,O,a,n,null)}return;default:if(yr(t)){for(V in n)n.hasOwnProperty(V)&&(a=n[V],a!==void 0&&ao(e,t,V,a,n,void 0));return}}for(p in n)n.hasOwnProperty(p)&&(a=n[p],a!=null&&Ke(e,t,p,a,n,null))}function Eg(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,o=null,h=null,p=null,N=null,O=null,V=null;for(M in n){var Q=n[M];if(n.hasOwnProperty(M)&&Q!=null)switch(M){case"checked":break;case"value":break;case"defaultValue":N=Q;default:a.hasOwnProperty(M)||Ke(e,t,M,null,a,Q)}}for(var C in a){var M=a[C];if(Q=n[C],a.hasOwnProperty(C)&&(M!=null||Q!=null))switch(C){case"type":o=M;break;case"name":l=M;break;case"checked":O=M;break;case"defaultChecked":V=M;break;case"value":h=M;break;case"defaultValue":p=M;break;case"children":case"dangerouslySetInnerHTML":if(M!=null)throw Error(c(137,t));break;default:M!==Q&&Ke(e,t,C,M,a,Q)}}vr(e,h,p,N,O,V,o,l);return;case"select":M=h=p=C=null;for(o in n)if(N=n[o],n.hasOwnProperty(o)&&N!=null)switch(o){case"value":break;case"multiple":M=N;default:a.hasOwnProperty(o)||Ke(e,t,o,null,a,N)}for(l in a)if(o=a[l],N=n[l],a.hasOwnProperty(l)&&(o!=null||N!=null))switch(l){case"value":C=o;break;case"defaultValue":p=o;break;case"multiple":h=o;default:o!==N&&Ke(e,t,l,o,a,N)}t=p,n=h,a=M,C!=null?$a(e,!!n,C,!1):!!a!=!!n&&(t!=null?$a(e,!!n,t,!0):$a(e,!!n,n?[]:"",!1));return;case"textarea":M=C=null;for(p in n)if(l=n[p],n.hasOwnProperty(p)&&l!=null&&!a.hasOwnProperty(p))switch(p){case"value":break;case"children":break;default:Ke(e,t,p,null,a,l)}for(h in a)if(l=a[h],o=n[h],a.hasOwnProperty(h)&&(l!=null||o!=null))switch(h){case"value":C=l;break;case"defaultValue":M=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(c(91));break;default:l!==o&&Ke(e,t,h,l,a,o)}Qo(e,C,M);return;case"option":for(var we in n)if(C=n[we],n.hasOwnProperty(we)&&C!=null&&!a.hasOwnProperty(we))switch(we){case"selected":e.selected=!1;break;default:Ke(e,t,we,null,a,C)}for(N in a)if(C=a[N],M=n[N],a.hasOwnProperty(N)&&C!==M&&(C!=null||M!=null))switch(N){case"selected":e.selected=C&&typeof C!="function"&&typeof C!="symbol";break;default:Ke(e,t,N,C,a,M)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in n)C=n[Se],n.hasOwnProperty(Se)&&C!=null&&!a.hasOwnProperty(Se)&&Ke(e,t,Se,null,a,C);for(O in a)if(C=a[O],M=n[O],a.hasOwnProperty(O)&&C!==M&&(C!=null||M!=null))switch(O){case"children":case"dangerouslySetInnerHTML":if(C!=null)throw Error(c(137,t));break;default:Ke(e,t,O,C,a,M)}return;default:if(yr(t)){for(var Ze in n)C=n[Ze],n.hasOwnProperty(Ze)&&C!==void 0&&!a.hasOwnProperty(Ze)&&ao(e,t,Ze,void 0,a,C);for(V in a)C=a[V],M=n[V],!a.hasOwnProperty(V)||C===M||C===void 0&&M===void 0||ao(e,t,V,C,a,M);return}}for(var w in n)C=n[w],n.hasOwnProperty(w)&&C!=null&&!a.hasOwnProperty(w)&&Ke(e,t,w,null,a,C);for(Q in a)C=a[Q],M=n[Q],!a.hasOwnProperty(Q)||C===M||C==null&&M==null||Ke(e,t,Q,C,a,M)}var so=null,lo=null;function Qi(e){return e.nodeType===9?e:e.ownerDocument}function $f(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function io(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ro=null;function wg(){var e=window.event;return e&&e.type==="popstate"?e===ro?!1:(ro=e,!0):(ro=null,!1)}var Pf=typeof setTimeout=="function"?setTimeout:void 0,Tg=typeof clearTimeout=="function"?clearTimeout:void 0,Wf=typeof Promise=="function"?Promise:void 0,_g=typeof queueMicrotask=="function"?queueMicrotask:typeof Wf<"u"?function(e){return Wf.resolve(null).then(e).catch(Rg)}:Pf;function Rg(e){setTimeout(function(){throw e})}function ha(e){return e==="head"}function eh(e,t){var n=t,a=0,l=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(0<a&&8>a){n=a;var h=e.ownerDocument;if(n&1&&Al(h.documentElement),n&2&&Al(h.body),n&4)for(n=h.head,Al(n),h=n.firstChild;h;){var p=h.nextSibling,N=h.nodeName;h[Qn]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&h.rel.toLowerCase()==="stylesheet"||n.removeChild(h),h=p}}if(l===0){e.removeChild(o),Bl(t);return}l--}else n==="$"||n==="$?"||n==="$!"?l++:a=n.charCodeAt(0)-48;else a=0;n=o}while(n);Bl(t)}function co(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":co(n),Ka(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Ug(e,t,n,a){for(;e.nodeType===1;){var l=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[Qn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==l.rel||e.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||e.getAttribute("title")!==(l.title==null?null:l.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(l.src==null?null:l.src)||e.getAttribute("type")!==(l.type==null?null:l.type)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var o=l.name==null?null:""+l.name;if(l.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=gn(e.nextSibling),e===null)break}return null}function Og(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=gn(e.nextSibling),e===null))return null;return e}function oo(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Bg(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function gn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var uo=null;function th(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function nh(e,t,n){switch(t=Qi(n),e){case"html":if(e=t.documentElement,!e)throw Error(c(452));return e;case"head":if(e=t.head,!e)throw Error(c(453));return e;case"body":if(e=t.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function Al(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ka(e)}var ln=new Map,ah=new Set;function Ki(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Gn=b.d;b.d={f:Dg,r:Cg,D:Mg,C:kg,L:zg,m:Lg,X:Hg,S:Ig,M:qg};function Dg(){var e=Gn.f(),t=Ii();return e||t}function Cg(e){var t=_n(e);t!==null&&t.tag===5&&t.type==="form"?Sd(t):Gn.r(e)}var ws=typeof document>"u"?null:document;function sh(e,t,n){var a=ws;if(a&&typeof t=="string"&&t){var l=Pt(t);l='link[rel="'+e+'"][href="'+l+'"]',typeof n=="string"&&(l+='[crossorigin="'+n+'"]'),ah.has(l)||(ah.add(l),e={rel:e,crossOrigin:n,href:t},a.querySelector(l)===null&&(t=a.createElement("link"),Et(t,"link",e),Ae(t),a.head.appendChild(t)))}}function Mg(e){Gn.D(e),sh("dns-prefetch",e,null)}function kg(e,t){Gn.C(e,t),sh("preconnect",e,t)}function zg(e,t,n){Gn.L(e,t,n);var a=ws;if(a&&e&&t){var l='link[rel="preload"][as="'+Pt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(l+='[imagesrcset="'+Pt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(l+='[imagesizes="'+Pt(n.imageSizes)+'"]')):l+='[href="'+Pt(e)+'"]';var o=l;switch(t){case"style":o=Ts(e);break;case"script":o=_s(e)}ln.has(o)||(e=S({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),ln.set(o,e),a.querySelector(l)!==null||t==="style"&&a.querySelector(El(o))||t==="script"&&a.querySelector(wl(o))||(t=a.createElement("link"),Et(t,"link",e),Ae(t),a.head.appendChild(t)))}}function Lg(e,t){Gn.m(e,t);var n=ws;if(n&&e){var a=t&&typeof t.as=="string"?t.as:"script",l='link[rel="modulepreload"][as="'+Pt(a)+'"][href="'+Pt(e)+'"]',o=l;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=_s(e)}if(!ln.has(o)&&(e=S({rel:"modulepreload",href:e},t),ln.set(o,e),n.querySelector(l)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(wl(o)))return}a=n.createElement("link"),Et(a,"link",e),Ae(a),n.head.appendChild(a)}}}function Ig(e,t,n){Gn.S(e,t,n);var a=ws;if(a&&e){var l=ge(a).hoistableStyles,o=Ts(e);t=t||"default";var h=l.get(o);if(!h){var p={loading:0,preload:null};if(h=a.querySelector(El(o)))p.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":t},n),(n=ln.get(o))&&fo(e,n);var N=h=a.createElement("link");Ae(N),Et(N,"link",e),N._p=new Promise(function(O,V){N.onload=O,N.onerror=V}),N.addEventListener("load",function(){p.loading|=1}),N.addEventListener("error",function(){p.loading|=2}),p.loading|=4,Zi(h,t,a)}h={type:"stylesheet",instance:h,count:1,state:p},l.set(o,h)}}}function Hg(e,t){Gn.X(e,t);var n=ws;if(n&&e){var a=ge(n).hoistableScripts,l=_s(e),o=a.get(l);o||(o=n.querySelector(wl(l)),o||(e=S({src:e,async:!0},t),(t=ln.get(l))&&ho(e,t),o=n.createElement("script"),Ae(o),Et(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},a.set(l,o))}}function qg(e,t){Gn.M(e,t);var n=ws;if(n&&e){var a=ge(n).hoistableScripts,l=_s(e),o=a.get(l);o||(o=n.querySelector(wl(l)),o||(e=S({src:e,async:!0,type:"module"},t),(t=ln.get(l))&&ho(e,t),o=n.createElement("script"),Ae(o),Et(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},a.set(l,o))}}function lh(e,t,n,a){var l=(l=Re.current)?Ki(l):null;if(!l)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Ts(n.href),n=ge(l).hoistableStyles,a=n.get(t),a||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Ts(n.href);var o=ge(l).hoistableStyles,h=o.get(e);if(h||(l=l.ownerDocument||l,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,h),(o=l.querySelector(El(e)))&&!o._p&&(h.instance=o,h.state.loading=5),ln.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ln.set(e,n),o||Gg(l,e,n,h.state))),t&&a===null)throw Error(c(528,""));return h}if(t&&a!==null)throw Error(c(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=_s(n),n=ge(l).hoistableScripts,a=n.get(t),a||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function Ts(e){return'href="'+Pt(e)+'"'}function El(e){return'link[rel="stylesheet"]['+e+"]"}function ih(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function Gg(e,t,n,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),Et(t,"link",n),Ae(t),e.head.appendChild(t))}function _s(e){return'[src="'+Pt(e)+'"]'}function wl(e){return"script[async]"+e}function rh(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+Pt(n.href)+'"]');if(a)return t.instance=a,Ae(a),a;var l=S({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),Ae(a),Et(a,"style",l),Zi(a,n.precedence,e),t.instance=a;case"stylesheet":l=Ts(n.href);var o=e.querySelector(El(l));if(o)return t.state.loading|=4,t.instance=o,Ae(o),o;a=ih(n),(l=ln.get(l))&&fo(a,l),o=(e.ownerDocument||e).createElement("link"),Ae(o);var h=o;return h._p=new Promise(function(p,N){h.onload=p,h.onerror=N}),Et(o,"link",a),t.state.loading|=4,Zi(o,n.precedence,e),t.instance=o;case"script":return o=_s(n.src),(l=e.querySelector(wl(o)))?(t.instance=l,Ae(l),l):(a=n,(l=ln.get(o))&&(a=S({},n),ho(a,l)),e=e.ownerDocument||e,l=e.createElement("script"),Ae(l),Et(l,"link",a),e.head.appendChild(l),t.instance=l);case"void":return null;default:throw Error(c(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,Zi(a,n.precedence,e));return t.instance}function Zi(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=a.length?a[a.length-1]:null,o=l,h=0;h<a.length;h++){var p=a[h];if(p.dataset.precedence===t)o=p;else if(o!==l)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function fo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function ho(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var $i=null;function ch(e,t,n){if($i===null){var a=new Map,l=$i=new Map;l.set(n,a)}else l=$i,a=l.get(n),a||(a=new Map,l.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),l=0;l<n.length;l++){var o=n[l];if(!(o[Qn]||o[gt]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var h=o.getAttribute(t)||"";h=e+h;var p=a.get(h);p?p.push(o):a.set(h,[o])}}return a}function oh(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Vg(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function uh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Tl=null;function Yg(){}function Fg(e,t,n){if(Tl===null)throw Error(c(475));var a=Tl;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var l=Ts(n.href),o=e.querySelector(El(l));if(o){e=o._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(a.count++,a=Ji.bind(a),e.then(a,a)),t.state.loading|=4,t.instance=o,Ae(o);return}o=e.ownerDocument||e,n=ih(n),(l=ln.get(l))&&fo(n,l),o=o.createElement("link"),Ae(o);var h=o;h._p=new Promise(function(p,N){h.onload=p,h.onerror=N}),Et(o,"link",n),t.instance=o}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(a.count++,t=Ji.bind(a),e.addEventListener("load",t),e.addEventListener("error",t))}}function Xg(){if(Tl===null)throw Error(c(475));var e=Tl;return e.stylesheets&&e.count===0&&mo(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&mo(e,e.stylesheets),e.unsuspend){var a=e.unsuspend;e.unsuspend=null,a()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Ji(){if(this.count--,this.count===0){if(this.stylesheets)mo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Pi=null;function mo(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Pi=new Map,t.forEach(Qg,e),Pi=null,Ji.call(e))}function Qg(e,t){if(!(t.state.loading&4)){var n=Pi.get(e);if(n)var a=n.get(null);else{n=new Map,Pi.set(e,n);for(var l=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<l.length;o++){var h=l[o];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(n.set(h.dataset.precedence,h),a=h)}a&&n.set(null,a)}l=t.instance,h=l.getAttribute("data-precedence"),o=n.get(h)||a,o===a&&n.set(null,l),n.set(h,l),this.count++,a=Ji.bind(this),l.addEventListener("load",a),l.addEventListener("error",a),o?o.parentNode.insertBefore(l,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(l,e.firstChild)),t.state.loading|=4}}var _l={$$typeof:H,Provider:null,Consumer:null,_currentValue:k,_currentValue2:k,_threadCount:0};function Kg(e,t,n,a,l,o,h,p){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ya(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ya(0),this.hiddenUpdates=Ya(null),this.identifierPrefix=a,this.onUncaughtError=l,this.onCaughtError=o,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=p,this.incompleteTransitions=new Map}function dh(e,t,n,a,l,o,h,p,N,O,V,Q){return e=new Kg(e,t,n,h,p,N,O,Q),t=1,o===!0&&(t|=24),o=Vt(3,null,null,t),e.current=o,o.stateNode=e,t=Kr(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:a,isDehydrated:n,cache:t},Pr(o),e}function fh(e){return e?(e=ls,e):ls}function hh(e,t,n,a,l,o){l=fh(l),a.context===null?a.context=l:a.pendingContext=l,a=ea(t),a.payload={element:n},o=o===void 0?null:o,o!==null&&(a.callback=o),n=ta(e,a,t),n!==null&&(Kt(n,e,t),sl(n,e,t))}function mh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function go(e,t){mh(e,t),(e=e.alternate)&&mh(e,t)}function gh(e){if(e.tag===13){var t=ss(e,67108864);t!==null&&Kt(t,e,67108864),go(e,67108864)}}var Wi=!0;function Zg(e,t,n,a){var l=x.T;x.T=null;var o=b.p;try{b.p=2,po(e,t,n,a)}finally{b.p=o,x.T=l}}function $g(e,t,n,a){var l=x.T;x.T=null;var o=b.p;try{b.p=8,po(e,t,n,a)}finally{b.p=o,x.T=l}}function po(e,t,n,a){if(Wi){var l=vo(a);if(l===null)no(e,t,a,er,n),vh(e,a);else if(Pg(l,e,t,n,a))a.stopPropagation();else if(vh(e,a),t&4&&-1<Jg.indexOf(e)){for(;l!==null;){var o=_n(l);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var h=vn(o.pendingLanes);if(h!==0){var p=o;for(p.pendingLanes|=2,p.entangledLanes|=2;h;){var N=1<<31-Pe(h);p.entanglements[1]|=N,h&=~N}jn(o),(Ye&6)===0&&(zi=me()+500,Nl(0))}}break;case 13:p=ss(o,2),p!==null&&Kt(p,o,2),Ii(),go(o,2)}if(o=vo(a),o===null&&no(e,t,a,er,n),o===l)break;l=o}l!==null&&a.stopPropagation()}else no(e,t,a,null,n)}}function vo(e){return e=Nr(e),xo(e)}var er=null;function xo(e){if(er=null,e=Tn(e),e!==null){var t=f(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=m(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return er=e,null}function ph(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_e()){case I:return 2;case U:return 8;case J:case te:return 32;case ee:return 268435456;default:return 32}default:return 32}}var yo=!1,ma=null,ga=null,pa=null,Rl=new Map,Ul=new Map,va=[],Jg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vh(e,t){switch(e){case"focusin":case"focusout":ma=null;break;case"dragenter":case"dragleave":ga=null;break;case"mouseover":case"mouseout":pa=null;break;case"pointerover":case"pointerout":Rl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ul.delete(t.pointerId)}}function Ol(e,t,n,a,l,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:o,targetContainers:[l]},t!==null&&(t=_n(t),t!==null&&gh(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function Pg(e,t,n,a,l){switch(t){case"focusin":return ma=Ol(ma,e,t,n,a,l),!0;case"dragenter":return ga=Ol(ga,e,t,n,a,l),!0;case"mouseover":return pa=Ol(pa,e,t,n,a,l),!0;case"pointerover":var o=l.pointerId;return Rl.set(o,Ol(Rl.get(o)||null,e,t,n,a,l)),!0;case"gotpointercapture":return o=l.pointerId,Ul.set(o,Ol(Ul.get(o)||null,e,t,n,a,l)),!0}return!1}function xh(e){var t=Tn(e.target);if(t!==null){var n=f(t);if(n!==null){if(t=n.tag,t===13){if(t=m(n),t!==null){e.blockedOn=t,Kl(e.priority,function(){if(n.tag===13){var a=Qt();a=Fa(a);var l=ss(n,a);l!==null&&Kt(l,n,a),go(n,a)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=vo(e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);br=a,n.target.dispatchEvent(a),br=null}else return t=_n(n),t!==null&&gh(t),e.blockedOn=n,!1;t.shift()}return!0}function yh(e,t,n){tr(e)&&n.delete(t)}function Wg(){yo=!1,ma!==null&&tr(ma)&&(ma=null),ga!==null&&tr(ga)&&(ga=null),pa!==null&&tr(pa)&&(pa=null),Rl.forEach(yh),Ul.forEach(yh)}function nr(e,t){e.blockedOn===t&&(e.blockedOn=null,yo||(yo=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Wg)))}var ar=null;function bh(e){ar!==e&&(ar=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){ar===e&&(ar=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],l=e[t+2];if(typeof a!="function"){if(xo(a||n)===null)continue;break}var o=_n(n);o!==null&&(e.splice(t,3),t-=3,vc(o,{pending:!0,data:l,method:n.method,action:a},a,l))}}))}function Bl(e){function t(N){return nr(N,e)}ma!==null&&nr(ma,e),ga!==null&&nr(ga,e),pa!==null&&nr(pa,e),Rl.forEach(t),Ul.forEach(t);for(var n=0;n<va.length;n++){var a=va[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<va.length&&(n=va[0],n.blockedOn===null);)xh(n),n.blockedOn===null&&va.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var l=n[a],o=n[a+1],h=l[St]||null;if(typeof o=="function")h||bh(n);else if(h){var p=null;if(o&&o.hasAttribute("formAction")){if(l=o,h=o[St]||null)p=h.formAction;else if(xo(l)!==null)continue}else p=h.action;typeof p=="function"?n[a+1]=p:(n.splice(a,3),a-=3),bh(n)}}}function bo(e){this._internalRoot=e}sr.prototype.render=bo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));var n=t.current,a=Qt();hh(n,a,e,t,null,null)},sr.prototype.unmount=bo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;hh(e.current,2,null,e,null,null),Ii(),t[wn]=null}};function sr(e){this._internalRoot=e}sr.prototype.unstable_scheduleHydration=function(e){if(e){var t=ks();e={blockedOn:null,target:e,priority:t};for(var n=0;n<va.length&&t!==0&&t<va[n].priority;n++);va.splice(n,0,e),n===0&&xh(e)}};var Nh=i.version;if(Nh!=="19.1.1")throw Error(c(527,Nh,"19.1.1"));b.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=v(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var e1={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:x,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lr.isDisabled&&lr.supportsFiber)try{Ce=lr.inject(e1),ve=lr}catch{}}return Cl.createRoot=function(e,t){if(!d(e))throw Error(c(299));var n=!1,a="",l=kd,o=zd,h=Ld,p=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(l=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(h=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(p=t.unstable_transitionCallbacks)),t=dh(e,1,!1,null,null,n,a,l,o,h,p,null),e[wn]=t.current,to(e),new bo(t)},Cl.hydrateRoot=function(e,t,n){if(!d(e))throw Error(c(299));var a=!1,l="",o=kd,h=zd,p=Ld,N=null,O=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(o=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(p=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(N=n.unstable_transitionCallbacks),n.formState!==void 0&&(O=n.formState)),t=dh(e,1,!0,t,n??null,a,l,o,h,p,N,O),t.context=fh(null),n=t.current,a=Qt(),a=Fa(a),l=ea(a),l.callback=null,ta(n,l,a),n=a,t.current.lanes=n,Xn(t,n),jn(t),e[wn]=t.current,to(e),new sr(t)},Cl.version="19.1.1",Cl}var Mh;function L1(){if(Mh)return jo.exports;Mh=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(i){console.error(i)}}return r(),jo.exports=z1(),jo.exports}var I1=L1();const H1=i1(I1);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="firebasestorage.googleapis.com",mm="storageBucket",q1=120*1e3,G1=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it extends p1{constructor(i,u,c=0){super(wo(i),`Firebase Storage: ${u} (${wo(i)})`),this.status_=c,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,it.prototype)}get status(){return this.status_}set status(i){this.status_=i}_codeEquals(i){return wo(i)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(i){this.customData.serverResponse=i,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var lt;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(lt||(lt={}));function wo(r){return"storage/"+r}function Io(){const r="An unknown error occurred, please check the error payload for server response.";return new it(lt.UNKNOWN,r)}function V1(r){return new it(lt.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function Y1(r){return new it(lt.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function F1(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new it(lt.UNAUTHENTICATED,r)}function X1(){return new it(lt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Q1(r){return new it(lt.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function K1(){return new it(lt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Z1(){return new it(lt.CANCELED,"User canceled the upload/download.")}function $1(r){return new it(lt.INVALID_URL,"Invalid URL '"+r+"'.")}function J1(r){return new it(lt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function P1(){return new it(lt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+mm+"' property when initializing the app?")}function W1(){return new it(lt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ep(){return new it(lt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function tp(r){return new it(lt.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Bo(r){return new it(lt.INVALID_ARGUMENT,r)}function gm(){return new it(lt.APP_DELETED,"The Firebase app was deleted.")}function np(r){return new it(lt.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ll(r,i){return new it(lt.INVALID_FORMAT,"String does not match format '"+r+"': "+i)}function Ml(r){throw new it(lt.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(i,u){this.bucket=i,this.path_=u}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const i=encodeURIComponent;return"/b/"+i(this.bucket)+"/o/"+i(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(i,u){let c;try{c=$t.makeFromUrl(i,u)}catch{return new $t(i,"")}if(c.path==="")return c;throw J1(i)}static makeFromUrl(i,u){let c=null;const d="([A-Za-z0-9.\\-_]+)";function f(W){W.path.charAt(W.path.length-1)==="/"&&(W.path_=W.path_.slice(0,-1))}const m="(/(.*))?$",g=new RegExp("^gs://"+d+m,"i"),v={bucket:1,path:3};function y(W){W.path_=decodeURIComponent(W.path)}const S="v[A-Za-z0-9_]+",j=u.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",_=new RegExp(`^https?://${j}/${S}/b/${d}/o${T}`,"i"),B={bucket:1,path:3},z=u===hm?"(?:storage.googleapis.com|storage.cloud.google.com)":u,ae="([^?#]*)",K=new RegExp(`^https?://${z}/${d}/${ae}`,"i"),H=[{regex:g,indices:v,postModify:f},{regex:_,indices:B,postModify:y},{regex:K,indices:{bucket:1,path:2},postModify:y}];for(let W=0;W<H.length;W++){const X=H[W],q=X.regex.exec(i);if(q){const Z=q[X.indices.bucket];let se=q[X.indices.path];se||(se=""),c=new $t(Z,se),X.postModify(c);break}}if(c==null)throw $1(i);return c}}class ap{constructor(i){this.promise_=Promise.reject(i)}getPromise(){return this.promise_}cancel(i=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(r,i,u){let c=1,d=null,f=null,m=!1,g=0;function v(){return g===2}let y=!1;function S(...ae){y||(y=!0,i.apply(null,ae))}function j(ae){d=setTimeout(()=>{d=null,r(_,v())},ae)}function T(){f&&clearTimeout(f)}function _(ae,...K){if(y){T();return}if(ae){T(),S.call(null,ae,...K);return}if(v()||m){T(),S.call(null,ae,...K);return}c<64&&(c*=2);let H;g===1?(g=2,H=0):H=(c+Math.random())*1e3,j(H)}let B=!1;function z(ae){B||(B=!0,T(),!y&&(d!==null?(ae||(g=2),clearTimeout(d),j(0)):ae||(g=1)))}return j(0),f=setTimeout(()=>{m=!0,z(!0)},u),z}function lp(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(r){return r!==void 0}function rp(r){return typeof r=="object"&&!Array.isArray(r)}function Ho(r){return typeof r=="string"||r instanceof String}function kh(r){return qo()&&r instanceof Blob}function qo(){return typeof Blob<"u"}function zh(r,i,u,c){if(c<i)throw Bo(`Invalid value for '${r}'. Expected ${i} or greater.`);if(c>u)throw Bo(`Invalid value for '${r}'. Expected ${u} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Go(r,i,u){let c=i;return u==null&&(c=`https://${i}`),`${u}://${c}/v0${r}`}function pm(r){const i=encodeURIComponent;let u="?";for(const c in r)if(r.hasOwnProperty(c)){const d=i(c)+"="+i(r[c]);u=u+d+"&"}return u=u.slice(0,-1),u}var Ha;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Ha||(Ha={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(r,i){const u=r>=500&&r<600,d=[408,429].indexOf(r)!==-1,f=i.indexOf(r)!==-1;return u||d||f}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(i,u,c,d,f,m,g,v,y,S,j,T=!0,_=!1){this.url_=i,this.method_=u,this.headers_=c,this.body_=d,this.successCodes_=f,this.additionalRetryCodes_=m,this.callback_=g,this.errorCallback_=v,this.timeout_=y,this.progressCallback_=S,this.connectionFactory_=j,this.retry=T,this.isUsingEmulator=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((B,z)=>{this.resolve_=B,this.reject_=z,this.start_()})}start_(){const i=(c,d)=>{if(d){c(!1,new ir(!1,null,!0));return}const f=this.connectionFactory_();this.pendingConnection_=f;const m=g=>{const v=g.loaded,y=g.lengthComputable?g.total:-1;this.progressCallback_!==null&&this.progressCallback_(v,y)};this.progressCallback_!==null&&f.addUploadProgressListener(m),f.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&f.removeUploadProgressListener(m),this.pendingConnection_=null;const g=f.getErrorCode()===Ha.NO_ERROR,v=f.getStatus();if(!g||cp(v,this.additionalRetryCodes_)&&this.retry){const S=f.getErrorCode()===Ha.ABORT;c(!1,new ir(!1,null,S));return}const y=this.successCodes_.indexOf(v)!==-1;c(!0,new ir(y,f))})},u=(c,d)=>{const f=this.resolve_,m=this.reject_,g=d.connection;if(d.wasSuccessCode)try{const v=this.callback_(g,g.getResponse());ip(v)?f(v):f()}catch(v){m(v)}else if(g!==null){const v=Io();v.serverResponse=g.getErrorText(),this.errorCallback_?m(this.errorCallback_(g,v)):m(v)}else if(d.canceled){const v=this.appDelete_?gm():Z1();m(v)}else{const v=K1();m(v)}};this.canceled_?u(!1,new ir(!1,null,!0)):this.backoffId_=sp(i,u,this.timeout_)}getPromise(){return this.promise_}cancel(i){this.canceled_=!0,this.appDelete_=i||!1,this.backoffId_!==null&&lp(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ir{constructor(i,u,c){this.wasSuccessCode=i,this.connection=u,this.canceled=!!c}}function up(r,i){i!==null&&i.length>0&&(r.Authorization="Firebase "+i)}function dp(r,i){r["X-Firebase-Storage-Version"]="webjs/"+(i??"AppManager")}function fp(r,i){i&&(r["X-Firebase-GMPID"]=i)}function hp(r,i){i!==null&&(r["X-Firebase-AppCheck"]=i)}function mp(r,i,u,c,d,f,m=!0,g=!1){const v=pm(r.urlParams),y=r.url+v,S=Object.assign({},r.headers);return fp(S,i),up(S,u),dp(S,f),hp(S,c),new op(y,r.method,S,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,d,m,g)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function pp(...r){const i=gp();if(i!==void 0){const u=new i;for(let c=0;c<r.length;c++)u.append(r[c]);return u.getBlob()}else{if(qo())return new Blob(r);throw new it(lt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function vp(r,i,u){return r.webkitSlice?r.webkitSlice(i,u):r.mozSlice?r.mozSlice(i,u):r.slice?r.slice(i,u):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(r){if(typeof atob>"u")throw tp("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class To{constructor(i,u){this.data=i,this.contentType=u||null}}function yp(r,i){switch(r){case An.RAW:return new To(vm(i));case An.BASE64:case An.BASE64URL:return new To(xm(r,i));case An.DATA_URL:return new To(Np(i),Sp(i))}throw Io()}function vm(r){const i=[];for(let u=0;u<r.length;u++){let c=r.charCodeAt(u);if(c<=127)i.push(c);else if(c<=2047)i.push(192|c>>6,128|c&63);else if((c&64512)===55296)if(!(u<r.length-1&&(r.charCodeAt(u+1)&64512)===56320))i.push(239,191,189);else{const f=c,m=r.charCodeAt(++u);c=65536|(f&1023)<<10|m&1023,i.push(240|c>>18,128|c>>12&63,128|c>>6&63,128|c&63)}else(c&64512)===56320?i.push(239,191,189):i.push(224|c>>12,128|c>>6&63,128|c&63)}return new Uint8Array(i)}function bp(r){let i;try{i=decodeURIComponent(r)}catch{throw Ll(An.DATA_URL,"Malformed data URL.")}return vm(i)}function xm(r,i){switch(r){case An.BASE64:{const d=i.indexOf("-")!==-1,f=i.indexOf("_")!==-1;if(d||f)throw Ll(r,"Invalid character '"+(d?"-":"_")+"' found: is it base64url encoded?");break}case An.BASE64URL:{const d=i.indexOf("+")!==-1,f=i.indexOf("/")!==-1;if(d||f)throw Ll(r,"Invalid character '"+(d?"+":"/")+"' found: is it base64 encoded?");i=i.replace(/-/g,"+").replace(/_/g,"/");break}}let u;try{u=xp(i)}catch(d){throw d.message.includes("polyfill")?d:Ll(r,"Invalid character found")}const c=new Uint8Array(u.length);for(let d=0;d<u.length;d++)c[d]=u.charCodeAt(d);return c}class ym{constructor(i){this.base64=!1,this.contentType=null;const u=i.match(/^data:([^,]+)?,/);if(u===null)throw Ll(An.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const c=u[1]||null;c!=null&&(this.base64=jp(c,";base64"),this.contentType=this.base64?c.substring(0,c.length-7):c),this.rest=i.substring(i.indexOf(",")+1)}}function Np(r){const i=new ym(r);return i.base64?xm(An.BASE64,i.rest):bp(i.rest)}function Sp(r){return new ym(r).contentType}function jp(r,i){return r.length>=i.length?r.substring(r.length-i.length)===i:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(i,u){let c=0,d="";kh(i)?(this.data_=i,c=i.size,d=i.type):i instanceof ArrayBuffer?(u?this.data_=new Uint8Array(i):(this.data_=new Uint8Array(i.byteLength),this.data_.set(new Uint8Array(i))),c=this.data_.length):i instanceof Uint8Array&&(u?this.data_=i:(this.data_=new Uint8Array(i.length),this.data_.set(i)),c=i.length),this.size_=c,this.type_=d}size(){return this.size_}type(){return this.type_}slice(i,u){if(kh(this.data_)){const c=this.data_,d=vp(c,i,u);return d===null?null:new ya(d)}else{const c=new Uint8Array(this.data_.buffer,i,u-i);return new ya(c,!0)}}static getBlob(...i){if(qo()){const u=i.map(c=>c instanceof ya?c.data_:c);return new ya(pp.apply(null,u))}else{const u=i.map(m=>Ho(m)?yp(An.RAW,m).data:m.data_);let c=0;u.forEach(m=>{c+=m.byteLength});const d=new Uint8Array(c);let f=0;return u.forEach(m=>{for(let g=0;g<m.length;g++)d[f++]=m[g]}),new ya(d,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(r){let i;try{i=JSON.parse(r)}catch{return null}return rp(i)?i:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(r){if(r.length===0)return null;const i=r.lastIndexOf("/");return i===-1?"":r.slice(0,i)}function Ep(r,i){const u=i.split("/").filter(c=>c.length>0).join("/");return r.length===0?u:r+"/"+u}function Nm(r){const i=r.lastIndexOf("/",r.length-2);return i===-1?r:r.slice(i+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(r,i){return i}class Bt{constructor(i,u,c,d){this.server=i,this.local=u||i,this.writable=!!c,this.xform=d||wp}}let rr=null;function Tp(r){return!Ho(r)||r.length<2?r:Nm(r)}function Sm(){if(rr)return rr;const r=[];r.push(new Bt("bucket")),r.push(new Bt("generation")),r.push(new Bt("metageneration")),r.push(new Bt("name","fullPath",!0));function i(f,m){return Tp(m)}const u=new Bt("name");u.xform=i,r.push(u);function c(f,m){return m!==void 0?Number(m):m}const d=new Bt("size");return d.xform=c,r.push(d),r.push(new Bt("timeCreated")),r.push(new Bt("updated")),r.push(new Bt("md5Hash",null,!0)),r.push(new Bt("cacheControl",null,!0)),r.push(new Bt("contentDisposition",null,!0)),r.push(new Bt("contentEncoding",null,!0)),r.push(new Bt("contentLanguage",null,!0)),r.push(new Bt("contentType",null,!0)),r.push(new Bt("metadata","customMetadata",!0)),rr=r,rr}function _p(r,i){function u(){const c=r.bucket,d=r.fullPath,f=new $t(c,d);return i._makeStorageReference(f)}Object.defineProperty(r,"ref",{get:u})}function Rp(r,i,u){const c={};c.type="file";const d=u.length;for(let f=0;f<d;f++){const m=u[f];c[m.local]=m.xform(c,i[m.server])}return _p(c,r),c}function jm(r,i,u){const c=bm(i);return c===null?null:Rp(r,c,u)}function Up(r,i,u,c){const d=bm(i);if(d===null||!Ho(d.downloadTokens))return null;const f=d.downloadTokens;if(f.length===0)return null;const m=encodeURIComponent;return f.split(",").map(y=>{const S=r.bucket,j=r.fullPath,T="/b/"+m(S)+"/o/"+m(j),_=Go(T,u,c),B=pm({alt:"media",token:y});return _+B})[0]}function Op(r,i){const u={},c=i.length;for(let d=0;d<c;d++){const f=i[d];f.writable&&(u[f.server]=r[f.local])}return JSON.stringify(u)}class Am{constructor(i,u,c,d){this.url=i,this.method=u,this.handler=c,this.timeout=d,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(r){if(!r)throw Io()}function Bp(r,i){function u(c,d){const f=jm(r,d,i);return Em(f!==null),f}return u}function Dp(r,i){function u(c,d){const f=jm(r,d,i);return Em(f!==null),Up(f,d,r.host,r._protocol)}return u}function wm(r){function i(u,c){let d;return u.getStatus()===401?u.getErrorText().includes("Firebase App Check token is invalid")?d=X1():d=F1():u.getStatus()===402?d=Y1(r.bucket):u.getStatus()===403?d=Q1(r.path):d=c,d.status=u.getStatus(),d.serverResponse=c.serverResponse,d}return i}function Cp(r){const i=wm(r);function u(c,d){let f=i(c,d);return c.getStatus()===404&&(f=V1(r.path)),f.serverResponse=d.serverResponse,f}return u}function Mp(r,i,u){const c=i.fullServerUrl(),d=Go(c,r.host,r._protocol),f="GET",m=r.maxOperationRetryTime,g=new Am(d,f,Dp(r,u),m);return g.errorHandler=Cp(i),g}function kp(r,i){return r&&r.contentType||i&&i.type()||"application/octet-stream"}function zp(r,i,u){const c=Object.assign({},u);return c.fullPath=r.path,c.size=i.size(),c.contentType||(c.contentType=kp(null,i)),c}function Lp(r,i,u,c,d){const f=i.bucketOnlyServerUrl(),m={"X-Goog-Upload-Protocol":"multipart"};function g(){let H="";for(let W=0;W<2;W++)H=H+Math.random().toString().slice(2);return H}const v=g();m["Content-Type"]="multipart/related; boundary="+v;const y=zp(i,c,d),S=Op(y,u),j="--"+v+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+S+`\r
--`+v+`\r
Content-Type: `+y.contentType+`\r
\r
`,T=`\r
--`+v+"--",_=ya.getBlob(j,c,T);if(_===null)throw W1();const B={name:y.fullPath},z=Go(f,r.host,r._protocol),ae="POST",K=r.maxUploadRetryTime,ue=new Am(z,ae,Bp(r,u),K);return ue.urlParams=B,ue.headers=m,ue.body=_.uploadData(),ue.errorHandler=wm(i),ue}class Ip{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ha.NO_ERROR,this.sendPromise_=new Promise(i=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ha.ABORT,i()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ha.NETWORK_ERROR,i()}),this.xhr_.addEventListener("load",()=>{i()})})}send(i,u,c,d,f){if(this.sent_)throw Ml("cannot .send() more than once");if(im(i)&&c&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(u,i,!0),f!==void 0)for(const m in f)f.hasOwnProperty(m)&&this.xhr_.setRequestHeader(m,f[m].toString());return d!==void 0?this.xhr_.send(d):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ml("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ml("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ml("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ml("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(i){return this.xhr_.getResponseHeader(i)}addUploadProgressListener(i){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",i)}removeUploadProgressListener(i){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",i)}}class Hp extends Ip{initXhr(){this.xhr_.responseType="text"}}function Tm(){return new Hp}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(i,u){this._service=i,u instanceof $t?this._location=u:this._location=$t.makeFromUrl(u,i.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(i,u){return new Ga(i,u)}get root(){const i=new $t(this._location.bucket,"");return this._newRef(this._service,i)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Nm(this._location.path)}get storage(){return this._service}get parent(){const i=Ap(this._location.path);if(i===null)return null;const u=new $t(this._location.bucket,i);return new Ga(this._service,u)}_throwIfRoot(i){if(this._location.path==="")throw np(i)}}function qp(r,i,u){r._throwIfRoot("uploadBytes");const c=Lp(r.storage,r._location,Sm(),new ya(i,!0),u);return r.storage.makeRequestWithTokens(c,Tm).then(d=>({metadata:d,ref:r}))}function Gp(r){r._throwIfRoot("getDownloadURL");const i=Mp(r.storage,r._location,Sm());return r.storage.makeRequestWithTokens(i,Tm).then(u=>{if(u===null)throw ep();return u})}function Vp(r,i){const u=Ep(r._location.path,i),c=new $t(r._location.bucket,u);return new Ga(r.storage,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(r){return/^[A-Za-z]+:\/\//.test(r)}function Fp(r,i){return new Ga(r,i)}function _m(r,i){if(r instanceof Vo){const u=r;if(u._bucket==null)throw P1();const c=new Ga(u,u._bucket);return i!=null?_m(c,i):c}else return i!==void 0?Vp(r,i):r}function Xp(r,i){if(i&&Yp(i)){if(r instanceof Vo)return Fp(r,i);throw Bo("To use ref(service, url), the first argument must be a Storage instance.")}else return _m(r,i)}function Lh(r,i){const u=i==null?void 0:i[mm];return u==null?null:$t.makeFromBucketSpec(u,r)}function Qp(r,i,u,c={}){r.host=`${i}:${u}`;const d=im(i);d&&(b1(`https://${r.host}/b`),N1("Storage",!0)),r._isUsingEmulator=!0,r._protocol=d?"https":"http";const{mockUserToken:f}=c;f&&(r._overrideAuthToken=typeof f=="string"?f:S1(f,r.app.options.projectId))}class Vo{constructor(i,u,c,d,f,m=!1){this.app=i,this._authProvider=u,this._appCheckProvider=c,this._url=d,this._firebaseVersion=f,this._isUsingEmulator=m,this._bucket=null,this._host=hm,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=q1,this._maxUploadRetryTime=G1,this._requests=new Set,d!=null?this._bucket=$t.makeFromBucketSpec(d,this._host):this._bucket=Lh(this._host,this.app.options)}get host(){return this._host}set host(i){this._host=i,this._url!=null?this._bucket=$t.makeFromBucketSpec(this._url,i):this._bucket=Lh(i,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(i){zh("time",0,Number.POSITIVE_INFINITY,i),this._maxUploadRetryTime=i}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(i){zh("time",0,Number.POSITIVE_INFINITY,i),this._maxOperationRetryTime=i}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const i=this._authProvider.getImmediate({optional:!0});if(i){const u=await i.getToken();if(u!==null)return u.accessToken}return null}async _getAppCheckToken(){if(g1(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const i=this._appCheckProvider.getImmediate({optional:!0});return i?(await i.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(i=>i.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(i){return new Ga(this,i)}_makeRequest(i,u,c,d,f=!0){if(this._deleted)return new ap(gm());{const m=mp(i,this._appId,c,d,u,this._firebaseVersion,f,this._isUsingEmulator);return this._requests.add(m),m.getPromise().then(()=>this._requests.delete(m),()=>this._requests.delete(m)),m}}async makeRequestWithTokens(i,u){const[c,d]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(i,u,c,d).getPromise()}}const Ih="@firebase/storage",Hh="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="storage";function Kp(r,i,u){return r=mr(r),qp(r,i,u)}function Zp(r){return r=mr(r),Gp(r)}function $p(r,i){return r=mr(r),Xp(r,i)}function Jp(r=v1(),i){r=mr(r);const c=x1(r,Rm).getImmediate({identifier:i}),d=y1("storage");return d&&Pp(c,...d),c}function Pp(r,i,u,c={}){Qp(r,i,u,c)}function Wp(r,{instanceIdentifier:i}){const u=r.getProvider("app").getImmediate(),c=r.getProvider("auth-internal"),d=r.getProvider("app-check-internal");return new Vo(u,c,d,i,m1)}function ev(){f1(new h1(Rm,Wp,"PUBLIC").setMultipleInstances(!0)),jh(Ih,Hh,""),jh(Ih,Hh,"esm2017")}ev();const tv={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCxl9ki92NaxmXmxB8kc-SCuN_Cmle-MwA",VITE_FIREBASE_APP_ID:"1:51448990869:web:1fd63a1fa84e89bce1af4",VITE_FIREBASE_AUTH_DOMAIN:"fitness-app-69f08.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"51448990869",VITE_FIREBASE_PROJECT_ID:"fitness-app-69f08",VITE_FIREBASE_STORAGE_BUCKET:"fitness-app-69f08.firebasestorage.app"},nv=!1;let cr,de,Ue,Do;try{let r;if(!nv){const d=["VITE_FIREBASE_API_KEY","VITE_FIREBASE_AUTH_DOMAIN","VITE_FIREBASE_PROJECT_ID","VITE_FIREBASE_STORAGE_BUCKET","VITE_FIREBASE_MESSAGING_SENDER_ID","VITE_FIREBASE_APP_ID"].filter(f=>!tv[f]);if(d.length>0)throw console.error("缺少環境變量:",d),new Error(`缺少環境變量：${d.join(", ")}`);r={apiKey:"AIzaSyCxl9ki92NaxmXmxB8kc-SCuN_Cmle-MwA",authDomain:"fitness-app-69f08.firebaseapp.com",projectId:"fitness-app-69f08",storageBucket:"fitness-app-69f08.firebasestorage.app",messagingSenderId:"51448990869",appId:"1:51448990869:web:1fd63a1fa84e89bce1af4"}}console.log("開始初始化 Firebase"),cr=j1(r),de=A1(cr),Ue=E1(cr),Do=Jp(cr);const i=new rm,u=new w1;i.setCustomParameters({prompt:"select_account"}),u.addScope("email"),u.addScope("public_profile"),console.log("Firebase 初始化成功")}catch(r){console.error("Firebase 初始化失敗:",r.message,r),de=null,Ue=null,Do=null}const Os=r=>r==null||r<0||r>150?"unknown":r<=20?"under20":r<=30?"21to30":r<=40?"31to40":r<=50?"41to50":r<=60?"51to60":r<=70?"61to70":"over70",qh=r=>{const{strength:i,explosivePower:u,cardio:c,muscleMass:d,bodyFat:f}=r,m=[i,u,c,d,f];if(m.filter(y=>y>0).length<5)return 0;const v=m.reduce((y,S)=>y+Number(S),0);return Math.round(v/5*100)/100},Gh=r=>!r&&r!==0?"0.00":Number(r).toFixed(2),av=r=>{if(!r)return"健身愛好者";const i=r.split("@")[0];return i.charAt(0).toUpperCase()+i.slice(1)};class sv{constructor(){this.writeCounts={setDoc:0,updateDoc:0,addDoc:0,writeBatch:0,arrayUnion:0,arrayRemove:0},this.writeHistory=[],this.isMonitoring=!1}start(){this.isMonitoring||(this.isMonitoring=!0,console.log("🔥 Firebase 寫入監控已啟動"))}stop(){this.isMonitoring=!1,console.log("🛑 Firebase 寫入監控已停止")}logWrite(i,u,c,d=null){if(!this.isMonitoring)return;this.writeCounts[i]++;const f={timestamp:new Date().toISOString(),operation:i,collection:u,documentId:c,data:d?JSON.stringify(d).substring(0,100)+"...":null};this.writeHistory.push(f),this.writeHistory.length>100&&this.writeHistory.shift(),console.log(`📝 Firebase 寫入: ${i} -> ${u}/${c}`)}getStats(){return{totalWrites:Object.values(this.writeCounts).reduce((u,c)=>u+c,0),writeCounts:{...this.writeCounts},recentWrites:this.writeHistory.slice(-10),averageWritesPerMinute:this.calculateAverageWritesPerMinute()}}calculateAverageWritesPerMinute(){if(this.writeHistory.length<2)return 0;const i=new Date(this.writeHistory[0].timestamp),c=(new Date(this.writeHistory[this.writeHistory.length-1].timestamp)-i)/(1e3*60);return c>0?this.writeHistory.length/c:0}reset(){this.writeCounts={setDoc:0,updateDoc:0,addDoc:0,writeBatch:0,arrayUnion:0,arrayRemove:0},this.writeHistory=[],console.log("🔄 Firebase 寫入統計已重置")}detectAnomalies(){const i=this.getStats(),u=[];i.averageWritesPerMinute>10&&u.push({type:"high_frequency",message:`檢測到高頻率寫入: ${i.averageWritesPerMinute.toFixed(2)} 次/分鐘`,severity:"warning"}),i.writeCounts.updateDoc>50&&u.push({type:"frequent_updates",message:`檢測到頻繁的 updateDoc 操作: ${i.writeCounts.updateDoc} 次`,severity:"warning"});const c=this.writeHistory.slice(-20);if(c.length>=20){const d=new Date(c[c.length-1].timestamp)-new Date(c[0].timestamp),f=c.length/(d/1e3);f>2&&u.push({type:"burst_writes",message:`檢測到寫入爆發: ${f.toFixed(2)} 次/秒`,severity:"error"})}return u}generateOptimizationSuggestions(){const i=this.getStats(),u=this.detectAnomalies(),c=[];return u.length>0&&(c.push("🚨 檢測到異常寫入模式，建議檢查以下方面："),u.forEach(d=>{c.push(`- ${d.message}`)})),i.writeCounts.updateDoc>i.writeCounts.setDoc*2&&c.push("💡 建議：考慮使用 setDoc 替代頻繁的 updateDoc 操作"),i.writeCounts.arrayUnion>10&&c.push("💡 建議：考慮批量處理 arrayUnion 操作"),i.averageWritesPerMinute>5&&c.push("💡 建議：增加防抖機制，減少寫入頻率"),c}}const _t=new sv,Um=A.createContext(),kl={gender:"",height:0,weight:0,age:0,nickname:"",avatarUrl:"",ageGroup:"",friends:[],friendRequests:[],blockedUsers:[],ladderScore:0,ladderRank:0,ladderHistory:[],isGuest:!1,isAnonymousInLadder:!1,lastActive:new Date().toISOString(),scores:{strength:0,explosivePower:0,cardio:0,muscleMass:0,bodyFat:0},history:[],testInputs:{}};function Om({children:r}){const i=A.useRef(!0),[u,c]=A.useState(!0),[d,f]=A.useState(!1),m=(H,W)=>{switch(W.type){case"UPDATE_USER_DATA":return{...H,...W.payload};case"SET_USER_DATA":return W.payload;case"RESET_USER_DATA":return kl;default:return H}},[g,v]=A.useReducer(m,kl),y=A.useCallback(async(H,W=!1)=>{if(!H||!i.current)return c(!1),!1;c(!0);try{const X=We(Ue,"users",H.uid),q=await ba(X);if(q.exists()){const Z=q.data(),se={...kl,...Z,scores:{...kl.scores,...Z.scores||{}},height:Number(Z.height)||0,weight:Number(Z.weight)||0,age:Number(Z.age)||0,ageGroup:Z.age?Os(Number(Z.age)):Z.ageGroup||"",ladderScore:Z.ladderScore||0,ladderRank:Number(Z.ladderRank)||0,lastLadderSubmission:Z.lastLadderSubmission||null,lastActive:Z.lastActive||null};return i.current&&(v({type:"SET_USER_DATA",payload:se}),localStorage.setItem("userData",JSON.stringify(se))),c(!1),!0}else{console.log("用戶文檔不存在，創建新的");const Z={...kl,userId:H.uid};return await Yn(X,Z),i.current&&(v({type:"SET_USER_DATA",payload:Z}),localStorage.setItem("userData",JSON.stringify(Z))),c(!1),!0}}catch(X){console.error("載入用戶數據失敗:",X);try{const q=localStorage.getItem("userData");if(q&&i.current){const Z=JSON.parse(q);return v({type:"SET_USER_DATA",payload:Z}),c(!1),!0}}catch(q){console.error("解析本地數據失敗:",q)}return c(!1),!1}},[]),S=A.useCallback(async H=>{if(!de.currentUser||!H)return console.warn("無法保存數據：用戶未登入或數據無效"),!1;try{const W=We(Ue,"users",de.currentUser.uid),X={...H,userId:de.currentUser.uid,updatedAt:new Date().toISOString(),height:Number(H.height)||0,weight:Number(H.weight)||0,age:Number(H.age)||0,ageGroup:H.age?Os(Number(H.age)):H.ageGroup||"",ladderScore:H.ladderScore||0,ladderRank:Number(H.ladderRank)||0,lastLadderSubmission:H.lastLadderSubmission||null,lastActive:H.lastActive||null};return await Yn(W,X,{merge:!0}),localStorage.setItem("userData",JSON.stringify(X)),_t.logWrite("setDoc","users",de.currentUser.uid,X),!0}catch(W){return console.error("保存用戶數據失敗:",W),localStorage.setItem("userData",JSON.stringify(H)),!1}},[]),j=A.useRef(null),T=A.useRef(null),_=A.useRef(0),B=A.useRef(0),z=A.useRef(Date.now()),ae=A.useCallback(H=>{let W;if(typeof H=="function"?W=H(g):W={...g,...H},W.age&&(W.ageGroup=Os(W.age)),v({type:"UPDATE_USER_DATA",payload:W}),de.currentUser&&["scores","height","weight","age","gender","nickname","avatarUrl","ladderRank","history"].some(Z=>JSON.stringify(W[Z])!==JSON.stringify(g[Z]))){const Z=JSON.stringify(W.nickname)!==JSON.stringify(g.nickname)&&JSON.stringify({...W,nickname:g.nickname})===JSON.stringify({...g,nickname:W.nickname}),se=Date.now(),P=se-_.current;se-z.current>36e5&&(B.current=0,z.current=se);const ce=Z?3e3:15e3;P<3e4?(j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{console.log("🔄 防抖後保存用戶數據（30秒頻率限制）"),_.current=Date.now(),B.current++,S(W),j.current=null},3e4-P)):(j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{console.log(`🔄 防抖後保存用戶數據（${ce/1e3}秒防抖，第${B.current+1}次寫入）`),_.current=Date.now(),B.current++,S(W),j.current=null},ce))}},[g,S]),K=A.useCallback(async H=>{if(!de.currentUser){console.warn("無法保存歷史記錄：用戶未登入");return}const W={...H,userId:de.currentUser.uid,timestamp:new Date().toISOString(),id:Date.now().toString()},X=g.history||[],q=50;if(X.length>=q){console.warn(`歷史記錄已達上限 (${q})，執行自動清理`);const P=[...X].sort((re,ce)=>{const be=re.timestamp?new Date(re.timestamp):new Date(re.date);return(ce.timestamp?new Date(ce.timestamp):new Date(ce.date))-be}).slice(0,q-10);console.log(`自動清理完成：刪除 ${X.length-P.length} 條舊記錄`),v({type:"UPDATE_USER_DATA",payload:{history:P}}),typeof window<"u"&&window.alert&&alert("歷史記錄已達上限，已自動清理最舊的記錄以騰出空間。")}const Z=[...g.history||[],W];v({type:"UPDATE_USER_DATA",payload:{history:Z}}),T.current&&clearTimeout(T.current),T.current=setTimeout(async()=>{try{const se=We(Ue,"users",de.currentUser.uid),re={...g,history:Z,updatedAt:new Date().toISOString()};await Yn(se,re,{merge:!0}),_t.logWrite("setDoc","users",de.currentUser.uid,{history:"batch_update"}),console.log(`歷史記錄保存成功 (${Z.length}/${q})`)}catch(se){console.error("保存歷史記錄失敗:",se)}finally{T.current=null}},1e4)},[g,S]),ue=A.useCallback(()=>{console.log("清除用戶資料"),localStorage.removeItem("userData"),v({type:"RESET_USER_DATA"}),c(!1)},[]);return A.useEffect(()=>{i.current=!0;const H=de.onAuthStateChanged(async W=>{W?(console.log("認證狀態變更 - 用戶已登入:",W.email),f(!0),sessionStorage.removeItem("guestMode"),await y(W)):(console.log("認證狀態變更 - 用戶未登入"),f(!1),ue())});return()=>{i.current=!1,H()}},[y,ue]),A.useEffect(()=>{if(!de.currentUser||!g||Object.keys(g).length===0)return;const H=setInterval(()=>{if(de.currentUser&&g&&g.height){if(Date.now()-_.current<6e5){console.log("⏭️ 定期同步：距離上次寫入時間太短，跳過同步");return}const q=localStorage.getItem("lastSavedUserData"),Z=JSON.stringify({scores:g.scores,height:g.height,weight:g.weight,age:g.age,gender:g.gender,nickname:g.nickname,avatarUrl:g.avatarUrl,ladderRank:g.ladderRank});q!==Z?(console.log("🔄 定期同步：檢測到數據變化，執行保存"),S(g),localStorage.setItem("lastSavedUserData",Z)):console.log("⏭️ 定期同步：無數據變化，跳過保存")}},18e5);return()=>clearInterval(H)},[g,S]),s.jsx(Um.Provider,{value:{userData:g,setUserData:ae,saveUserData:S,saveHistory:K,clearUserData:ue,loadUserData:(H=!1)=>y(de.currentUser,H),isLoading:u,isAuthenticated:d},children:r})}Om.propTypes={children:Oe.node.isRequired};function on(){const r=A.useContext(Um);if(!r)throw new Error("useUser must be used within a UserProvider");return r}function lv(){const{pathname:r}=Va(),i=A.useRef(null);return A.useLayoutEffect(()=>{const u=i.current==="/login"||i.current==="/";r==="/user-info"?u?window.scrollTo(0,0):requestAnimationFrame(()=>{const c=document.getElementById("radar-section");c&&c.scrollIntoView({behavior:"smooth",block:"start"})}):window.scrollTo(0,0),i.current=r},[r]),null}const iv=(r,i,u,c)=>{var f,m,g,v;const d=[u,{code:i,...c||{}}];if((m=(f=r==null?void 0:r.services)==null?void 0:f.logger)!=null&&m.forward)return r.services.logger.forward(d,"warn","react-i18next::",!0);qa(d[0])&&(d[0]=`react-i18next:: ${d[0]}`),(v=(g=r==null?void 0:r.services)==null?void 0:g.logger)!=null&&v.warn?r.services.logger.warn(...d):console!=null&&console.warn&&console.warn(...d)},Vh={},Co=(r,i,u,c)=>{qa(u)&&Vh[u]||(qa(u)&&(Vh[u]=new Date),iv(r,i,u,c))},Bm=(r,i)=>()=>{if(r.isInitialized)i();else{const u=()=>{setTimeout(()=>{r.off("initialized",u)},0),i()};r.on("initialized",u)}},Mo=(r,i,u)=>{r.loadNamespaces(i,Bm(r,u))},Yh=(r,i,u,c)=>{if(qa(u)&&(u=[u]),r.options.preload&&r.options.preload.indexOf(i)>-1)return Mo(r,u,c);u.forEach(d=>{r.options.ns.indexOf(d)<0&&r.options.ns.push(d)}),r.loadLanguages(i,Bm(r,c))},rv=(r,i,u={})=>!i.languages||!i.languages.length?(Co(i,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:i.languages}),!0):i.hasLoadedNamespace(r,{lng:u.lng,precheck:(c,d)=>{if(u.bindI18n&&u.bindI18n.indexOf("languageChanging")>-1&&c.services.backendConnector.backend&&c.isLanguageChangingTo&&!d(c.isLanguageChangingTo,r))return!1}}),qa=r=>typeof r=="string",cv=r=>typeof r=="object"&&r!==null,ov=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,uv={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},dv=r=>uv[r],fv=r=>r.replace(ov,dv);let ko={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:fv};const hv=(r={})=>{ko={...ko,...r}},mv=()=>ko;let Dm;const gv=r=>{Dm=r},pv=()=>Dm,vv={type:"3rdParty",init(r){hv(r.options.react),gv(r)}},xv=A.createContext();class yv{constructor(){this.usedNamespaces={}}addUsedNamespaces(i){i.forEach(u=>{this.usedNamespaces[u]||(this.usedNamespaces[u]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const bv=(r,i)=>{const u=A.useRef();return A.useEffect(()=>{u.current=r},[r,i]),u.current},Cm=(r,i,u,c)=>r.getFixedT(i,u,c),Nv=(r,i,u,c)=>A.useCallback(Cm(r,i,u,c),[r,i,u,c]),Mm=(r,i={})=>{var W,X,q,Z;const{i18n:u}=i,{i18n:c,defaultNS:d}=A.useContext(xv)||{},f=u||c||pv();if(f&&!f.reportNamespaces&&(f.reportNamespaces=new yv),!f){Co(f,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const se=(re,ce)=>qa(ce)?ce:cv(ce)&&qa(ce.defaultValue)?ce.defaultValue:Array.isArray(re)?re[re.length-1]:re,P=[se,{},!1];return P.t=se,P.i18n={},P.ready=!1,P}(W=f.options.react)!=null&&W.wait&&Co(f,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const m={...mv(),...f.options.react,...i},{useSuspense:g,keyPrefix:v}=m;let y=d||((X=f.options)==null?void 0:X.defaultNS);y=qa(y)?[y]:y||["translation"],(Z=(q=f.reportNamespaces).addUsedNamespaces)==null||Z.call(q,y);const S=(f.isInitialized||f.initializedStoreOnce)&&y.every(se=>rv(se,f,m)),j=Nv(f,i.lng||null,m.nsMode==="fallback"?y:y[0],v),T=()=>j,_=()=>Cm(f,i.lng||null,m.nsMode==="fallback"?y:y[0],v),[B,z]=A.useState(T);let ae=y.join();i.lng&&(ae=`${i.lng}${ae}`);const K=bv(ae),ue=A.useRef(!0);A.useEffect(()=>{const{bindI18n:se,bindI18nStore:P}=m;ue.current=!0,!S&&!g&&(i.lng?Yh(f,i.lng,y,()=>{ue.current&&z(_)}):Mo(f,y,()=>{ue.current&&z(_)})),S&&K&&K!==ae&&ue.current&&z(_);const re=()=>{ue.current&&z(_)};return se&&(f==null||f.on(se,re)),P&&(f==null||f.store.on(P,re)),()=>{ue.current=!1,f&&se&&(se==null||se.split(" ").forEach(ce=>f.off(ce,re))),P&&f&&P.split(" ").forEach(ce=>f.store.off(ce,re))}},[f,ae]),A.useEffect(()=>{ue.current&&S&&z(T)},[f,v,S]);const H=[B,f,S];if(H.t=B,H.i18n=f,H.ready=S,S||!S&&!g)return H;throw new Promise(se=>{i.lng?Yh(f,i.lng,y,()=>se()):Mo(f,y,()=>se())})},Sv=()=>{const{i18n:r}=Mm(),i=c=>{r.changeLanguage(c),localStorage.setItem("language",c)},u=r.language;return s.jsxs("div",{className:"language-switcher",children:[s.jsx("button",{className:`lang-btn ${u==="zh-TW"?"active":""}`,onClick:()=>i("zh-TW"),children:"中文"}),s.jsx("button",{className:`lang-btn ${u==="en-US"?"active":""}`,onClick:()=>i("en-US"),children:"English"})]})},Te=r=>typeof r=="string",zl=()=>{let r,i;const u=new Promise((c,d)=>{r=c,i=d});return u.resolve=r,u.reject=i,u},Fh=r=>r==null?"":""+r,jv=(r,i,u)=>{r.forEach(c=>{i[c]&&(u[c]=i[c])})},Av=/###/g,Xh=r=>r&&r.indexOf("###")>-1?r.replace(Av,"."):r,Qh=r=>!r||Te(r),Il=(r,i,u)=>{const c=Te(i)?i.split("."):i;let d=0;for(;d<c.length-1;){if(Qh(r))return{};const f=Xh(c[d]);!r[f]&&u&&(r[f]=new u),Object.prototype.hasOwnProperty.call(r,f)?r=r[f]:r={},++d}return Qh(r)?{}:{obj:r,k:Xh(c[d])}},Kh=(r,i,u)=>{const{obj:c,k:d}=Il(r,i,Object);if(c!==void 0||i.length===1){c[d]=u;return}let f=i[i.length-1],m=i.slice(0,i.length-1),g=Il(r,m,Object);for(;g.obj===void 0&&m.length;)f=`${m[m.length-1]}.${f}`,m=m.slice(0,m.length-1),g=Il(r,m,Object),g!=null&&g.obj&&typeof g.obj[`${g.k}.${f}`]<"u"&&(g.obj=void 0);g.obj[`${g.k}.${f}`]=u},Ev=(r,i,u,c)=>{const{obj:d,k:f}=Il(r,i,Object);d[f]=d[f]||[],d[f].push(u)},dr=(r,i)=>{const{obj:u,k:c}=Il(r,i);if(u&&Object.prototype.hasOwnProperty.call(u,c))return u[c]},wv=(r,i,u)=>{const c=dr(r,u);return c!==void 0?c:dr(i,u)},km=(r,i,u)=>{for(const c in i)c!=="__proto__"&&c!=="constructor"&&(c in r?Te(r[c])||r[c]instanceof String||Te(i[c])||i[c]instanceof String?u&&(r[c]=i[c]):km(r[c],i[c],u):r[c]=i[c]);return r},Rs=r=>r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Tv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const _v=r=>Te(r)?r.replace(/[&<>"'\/]/g,i=>Tv[i]):r;class Rv{constructor(i){this.capacity=i,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(i){const u=this.regExpMap.get(i);if(u!==void 0)return u;const c=new RegExp(i);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(i,c),this.regExpQueue.push(i),c}}const Uv=[" ",",","?","!",";"],Ov=new Rv(20),Bv=(r,i,u)=>{i=i||"",u=u||"";const c=Uv.filter(m=>i.indexOf(m)<0&&u.indexOf(m)<0);if(c.length===0)return!0;const d=Ov.getRegExp(`(${c.map(m=>m==="?"?"\\?":m).join("|")})`);let f=!d.test(r);if(!f){const m=r.indexOf(u);m>0&&!d.test(r.substring(0,m))&&(f=!0)}return f},zo=(r,i,u=".")=>{if(!r)return;if(r[i])return Object.prototype.hasOwnProperty.call(r,i)?r[i]:void 0;const c=i.split(u);let d=r;for(let f=0;f<c.length;){if(!d||typeof d!="object")return;let m,g="";for(let v=f;v<c.length;++v)if(v!==f&&(g+=u),g+=c[v],m=d[g],m!==void 0){if(["string","number","boolean"].indexOf(typeof m)>-1&&v<c.length-1)continue;f+=v-f+1;break}d=m}return d},ql=r=>r==null?void 0:r.replace("_","-"),Dv={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,i){var u,c;(c=(u=console==null?void 0:console[r])==null?void 0:u.apply)==null||c.call(u,console,i)}};class fr{constructor(i,u={}){this.init(i,u)}init(i,u={}){this.prefix=u.prefix||"i18next:",this.logger=i||Dv,this.options=u,this.debug=u.debug}log(...i){return this.forward(i,"log","",!0)}warn(...i){return this.forward(i,"warn","",!0)}error(...i){return this.forward(i,"error","")}deprecate(...i){return this.forward(i,"warn","WARNING DEPRECATED: ",!0)}forward(i,u,c,d){return d&&!this.debug?null:(Te(i[0])&&(i[0]=`${c}${this.prefix} ${i[0]}`),this.logger[u](i))}create(i){return new fr(this.logger,{prefix:`${this.prefix}:${i}:`,...this.options})}clone(i){return i=i||this.options,i.prefix=i.prefix||this.prefix,new fr(this.logger,i)}}var En=new fr;class gr{constructor(){this.observers={}}on(i,u){return i.split(" ").forEach(c=>{this.observers[c]||(this.observers[c]=new Map);const d=this.observers[c].get(u)||0;this.observers[c].set(u,d+1)}),this}off(i,u){if(this.observers[i]){if(!u){delete this.observers[i];return}this.observers[i].delete(u)}}emit(i,...u){this.observers[i]&&Array.from(this.observers[i].entries()).forEach(([d,f])=>{for(let m=0;m<f;m++)d(...u)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([d,f])=>{for(let m=0;m<f;m++)d.apply(d,[i,...u])})}}class Zh extends gr{constructor(i,u={ns:["translation"],defaultNS:"translation"}){super(),this.data=i||{},this.options=u,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(i){this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}removeNamespaces(i){const u=this.options.ns.indexOf(i);u>-1&&this.options.ns.splice(u,1)}getResource(i,u,c,d={}){var y,S;const f=d.keySeparator!==void 0?d.keySeparator:this.options.keySeparator,m=d.ignoreJSONStructure!==void 0?d.ignoreJSONStructure:this.options.ignoreJSONStructure;let g;i.indexOf(".")>-1?g=i.split("."):(g=[i,u],c&&(Array.isArray(c)?g.push(...c):Te(c)&&f?g.push(...c.split(f)):g.push(c)));const v=dr(this.data,g);return!v&&!u&&!c&&i.indexOf(".")>-1&&(i=g[0],u=g[1],c=g.slice(2).join(".")),v||!m||!Te(c)?v:zo((S=(y=this.data)==null?void 0:y[i])==null?void 0:S[u],c,f)}addResource(i,u,c,d,f={silent:!1}){const m=f.keySeparator!==void 0?f.keySeparator:this.options.keySeparator;let g=[i,u];c&&(g=g.concat(m?c.split(m):c)),i.indexOf(".")>-1&&(g=i.split("."),d=u,u=g[1]),this.addNamespaces(u),Kh(this.data,g,d),f.silent||this.emit("added",i,u,c,d)}addResources(i,u,c,d={silent:!1}){for(const f in c)(Te(c[f])||Array.isArray(c[f]))&&this.addResource(i,u,f,c[f],{silent:!0});d.silent||this.emit("added",i,u,c)}addResourceBundle(i,u,c,d,f,m={silent:!1,skipCopy:!1}){let g=[i,u];i.indexOf(".")>-1&&(g=i.split("."),d=c,c=u,u=g[1]),this.addNamespaces(u);let v=dr(this.data,g)||{};m.skipCopy||(c=JSON.parse(JSON.stringify(c))),d?km(v,c,f):v={...v,...c},Kh(this.data,g,v),m.silent||this.emit("added",i,u,c)}removeResourceBundle(i,u){this.hasResourceBundle(i,u)&&delete this.data[i][u],this.removeNamespaces(u),this.emit("removed",i,u)}hasResourceBundle(i,u){return this.getResource(i,u)!==void 0}getResourceBundle(i,u){return u||(u=this.options.defaultNS),this.getResource(i,u)}getDataByLanguage(i){return this.data[i]}hasLanguageSomeTranslations(i){const u=this.getDataByLanguage(i);return!!(u&&Object.keys(u)||[]).find(d=>u[d]&&Object.keys(u[d]).length>0)}toJSON(){return this.data}}var zm={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,i,u,c,d){return r.forEach(f=>{var m;i=((m=this.processors[f])==null?void 0:m.process(i,u,c,d))??i}),i}};const $h={},Jh=r=>!Te(r)&&typeof r!="boolean"&&typeof r!="number";class hr extends gr{constructor(i,u={}){super(),jv(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],i,this),this.options=u,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=En.create("translator")}changeLanguage(i){i&&(this.language=i)}exists(i,u={interpolation:{}}){const c={...u};if(i==null)return!1;const d=this.resolve(i,c);return(d==null?void 0:d.res)!==void 0}extractFromKey(i,u){let c=u.nsSeparator!==void 0?u.nsSeparator:this.options.nsSeparator;c===void 0&&(c=":");const d=u.keySeparator!==void 0?u.keySeparator:this.options.keySeparator;let f=u.ns||this.options.defaultNS||[];const m=c&&i.indexOf(c)>-1,g=!this.options.userDefinedKeySeparator&&!u.keySeparator&&!this.options.userDefinedNsSeparator&&!u.nsSeparator&&!Bv(i,c,d);if(m&&!g){const v=i.match(this.interpolator.nestingRegexp);if(v&&v.length>0)return{key:i,namespaces:Te(f)?[f]:f};const y=i.split(c);(c!==d||c===d&&this.options.ns.indexOf(y[0])>-1)&&(f=y.shift()),i=y.join(d)}return{key:i,namespaces:Te(f)?[f]:f}}translate(i,u,c){let d=typeof u=="object"?{...u}:u;if(typeof d!="object"&&this.options.overloadTranslationOptionHandler&&(d=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(d={...d}),d||(d={}),i==null)return"";Array.isArray(i)||(i=[String(i)]);const f=d.returnDetails!==void 0?d.returnDetails:this.options.returnDetails,m=d.keySeparator!==void 0?d.keySeparator:this.options.keySeparator,{key:g,namespaces:v}=this.extractFromKey(i[i.length-1],d),y=v[v.length-1];let S=d.nsSeparator!==void 0?d.nsSeparator:this.options.nsSeparator;S===void 0&&(S=":");const j=d.lng||this.language,T=d.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((j==null?void 0:j.toLowerCase())==="cimode")return T?f?{res:`${y}${S}${g}`,usedKey:g,exactUsedKey:g,usedLng:j,usedNS:y,usedParams:this.getUsedParamsDetails(d)}:`${y}${S}${g}`:f?{res:g,usedKey:g,exactUsedKey:g,usedLng:j,usedNS:y,usedParams:this.getUsedParamsDetails(d)}:g;const _=this.resolve(i,d);let B=_==null?void 0:_.res;const z=(_==null?void 0:_.usedKey)||g,ae=(_==null?void 0:_.exactUsedKey)||g,K=["[object Number]","[object Function]","[object RegExp]"],ue=d.joinArrays!==void 0?d.joinArrays:this.options.joinArrays,H=!this.i18nFormat||this.i18nFormat.handleAsObject,W=d.count!==void 0&&!Te(d.count),X=hr.hasDefaultValue(d),q=W?this.pluralResolver.getSuffix(j,d.count,d):"",Z=d.ordinal&&W?this.pluralResolver.getSuffix(j,d.count,{ordinal:!1}):"",se=W&&!d.ordinal&&d.count===0,P=se&&d[`defaultValue${this.options.pluralSeparator}zero`]||d[`defaultValue${q}`]||d[`defaultValue${Z}`]||d.defaultValue;let re=B;H&&!B&&X&&(re=P);const ce=Jh(re),be=Object.prototype.toString.apply(re);if(H&&re&&ce&&K.indexOf(be)<0&&!(Te(ue)&&Array.isArray(re))){if(!d.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const ye=this.options.returnedObjectHandler?this.options.returnedObjectHandler(z,re,{...d,ns:v}):`key '${g} (${this.language})' returned an object instead of string.`;return f?(_.res=ye,_.usedParams=this.getUsedParamsDetails(d),_):ye}if(m){const ye=Array.isArray(re),fe=ye?[]:{},$=ye?ae:z;for(const x in re)if(Object.prototype.hasOwnProperty.call(re,x)){const b=`${$}${m}${x}`;X&&!B?fe[x]=this.translate(b,{...d,defaultValue:Jh(P)?P[x]:void 0,joinArrays:!1,ns:v}):fe[x]=this.translate(b,{...d,joinArrays:!1,ns:v}),fe[x]===b&&(fe[x]=re[x])}B=fe}}else if(H&&Te(ue)&&Array.isArray(B))B=B.join(ue),B&&(B=this.extendTranslation(B,i,d,c));else{let ye=!1,fe=!1;!this.isValidLookup(B)&&X&&(ye=!0,B=P),this.isValidLookup(B)||(fe=!0,B=g);const x=(d.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&fe?void 0:B,b=X&&P!==B&&this.options.updateMissing;if(fe||ye||b){if(this.logger.log(b?"updateKey":"missingKey",j,y,g,b?P:B),m){const ne=this.resolve(g,{...d,keySeparator:!1});ne&&ne.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let k=[];const F=this.languageUtils.getFallbackCodes(this.options.fallbackLng,d.lng||this.language);if(this.options.saveMissingTo==="fallback"&&F&&F[0])for(let ne=0;ne<F.length;ne++)k.push(F[ne]);else this.options.saveMissingTo==="all"?k=this.languageUtils.toResolveHierarchy(d.lng||this.language):k.push(d.lng||this.language);const le=(ne,G,D)=>{var Ne;const ie=X&&D!==B?D:x;this.options.missingKeyHandler?this.options.missingKeyHandler(ne,y,G,ie,b,d):(Ne=this.backendConnector)!=null&&Ne.saveMissing&&this.backendConnector.saveMissing(ne,y,G,ie,b,d),this.emit("missingKey",ne,y,G,B)};this.options.saveMissing&&(this.options.saveMissingPlurals&&W?k.forEach(ne=>{const G=this.pluralResolver.getSuffixes(ne,d);se&&d[`defaultValue${this.options.pluralSeparator}zero`]&&G.indexOf(`${this.options.pluralSeparator}zero`)<0&&G.push(`${this.options.pluralSeparator}zero`),G.forEach(D=>{le([ne],g+D,d[`defaultValue${D}`]||P)})}):le(k,g,P))}B=this.extendTranslation(B,i,d,_,c),fe&&B===g&&this.options.appendNamespaceToMissingKey&&(B=`${y}${S}${g}`),(fe||ye)&&this.options.parseMissingKeyHandler&&(B=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${y}${S}${g}`:g,ye?B:void 0,d))}return f?(_.res=B,_.usedParams=this.getUsedParamsDetails(d),_):B}extendTranslation(i,u,c,d,f){var v,y;if((v=this.i18nFormat)!=null&&v.parse)i=this.i18nFormat.parse(i,{...this.options.interpolation.defaultVariables,...c},c.lng||this.language||d.usedLng,d.usedNS,d.usedKey,{resolved:d});else if(!c.skipInterpolation){c.interpolation&&this.interpolator.init({...c,interpolation:{...this.options.interpolation,...c.interpolation}});const S=Te(i)&&(((y=c==null?void 0:c.interpolation)==null?void 0:y.skipOnVariables)!==void 0?c.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let j;if(S){const _=i.match(this.interpolator.nestingRegexp);j=_&&_.length}let T=c.replace&&!Te(c.replace)?c.replace:c;if(this.options.interpolation.defaultVariables&&(T={...this.options.interpolation.defaultVariables,...T}),i=this.interpolator.interpolate(i,T,c.lng||this.language||d.usedLng,c),S){const _=i.match(this.interpolator.nestingRegexp),B=_&&_.length;j<B&&(c.nest=!1)}!c.lng&&d&&d.res&&(c.lng=this.language||d.usedLng),c.nest!==!1&&(i=this.interpolator.nest(i,(..._)=>(f==null?void 0:f[0])===_[0]&&!c.context?(this.logger.warn(`It seems you are nesting recursively key: ${_[0]} in key: ${u[0]}`),null):this.translate(..._,u),c)),c.interpolation&&this.interpolator.reset()}const m=c.postProcess||this.options.postProcess,g=Te(m)?[m]:m;return i!=null&&(g!=null&&g.length)&&c.applyPostProcessor!==!1&&(i=zm.handle(g,i,u,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...d,usedParams:this.getUsedParamsDetails(c)},...c}:c,this)),i}resolve(i,u={}){let c,d,f,m,g;return Te(i)&&(i=[i]),i.forEach(v=>{if(this.isValidLookup(c))return;const y=this.extractFromKey(v,u),S=y.key;d=S;let j=y.namespaces;this.options.fallbackNS&&(j=j.concat(this.options.fallbackNS));const T=u.count!==void 0&&!Te(u.count),_=T&&!u.ordinal&&u.count===0,B=u.context!==void 0&&(Te(u.context)||typeof u.context=="number")&&u.context!=="",z=u.lngs?u.lngs:this.languageUtils.toResolveHierarchy(u.lng||this.language,u.fallbackLng);j.forEach(ae=>{var K,ue;this.isValidLookup(c)||(g=ae,!$h[`${z[0]}-${ae}`]&&((K=this.utils)!=null&&K.hasLoadedNamespace)&&!((ue=this.utils)!=null&&ue.hasLoadedNamespace(g))&&($h[`${z[0]}-${ae}`]=!0,this.logger.warn(`key "${d}" for languages "${z.join(", ")}" won't get resolved as namespace "${g}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),z.forEach(H=>{var q;if(this.isValidLookup(c))return;m=H;const W=[S];if((q=this.i18nFormat)!=null&&q.addLookupKeys)this.i18nFormat.addLookupKeys(W,S,H,ae,u);else{let Z;T&&(Z=this.pluralResolver.getSuffix(H,u.count,u));const se=`${this.options.pluralSeparator}zero`,P=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(T&&(W.push(S+Z),u.ordinal&&Z.indexOf(P)===0&&W.push(S+Z.replace(P,this.options.pluralSeparator)),_&&W.push(S+se)),B){const re=`${S}${this.options.contextSeparator}${u.context}`;W.push(re),T&&(W.push(re+Z),u.ordinal&&Z.indexOf(P)===0&&W.push(re+Z.replace(P,this.options.pluralSeparator)),_&&W.push(re+se))}}let X;for(;X=W.pop();)this.isValidLookup(c)||(f=X,c=this.getResource(H,ae,X,u))}))})}),{res:c,usedKey:d,exactUsedKey:f,usedLng:m,usedNS:g}}isValidLookup(i){return i!==void 0&&!(!this.options.returnNull&&i===null)&&!(!this.options.returnEmptyString&&i==="")}getResource(i,u,c,d={}){var f;return(f=this.i18nFormat)!=null&&f.getResource?this.i18nFormat.getResource(i,u,c,d):this.resourceStore.getResource(i,u,c,d)}getUsedParamsDetails(i={}){const u=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],c=i.replace&&!Te(i.replace);let d=c?i.replace:i;if(c&&typeof i.count<"u"&&(d.count=i.count),this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),!c){d={...d};for(const f of u)delete d[f]}return d}static hasDefaultValue(i){const u="defaultValue";for(const c in i)if(Object.prototype.hasOwnProperty.call(i,c)&&u===c.substring(0,u.length)&&i[c]!==void 0)return!0;return!1}}class Ph{constructor(i){this.options=i,this.supportedLngs=this.options.supportedLngs||!1,this.logger=En.create("languageUtils")}getScriptPartFromCode(i){if(i=ql(i),!i||i.indexOf("-")<0)return null;const u=i.split("-");return u.length===2||(u.pop(),u[u.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(u.join("-"))}getLanguagePartFromCode(i){if(i=ql(i),!i||i.indexOf("-")<0)return i;const u=i.split("-");return this.formatLanguageCode(u[0])}formatLanguageCode(i){if(Te(i)&&i.indexOf("-")>-1){let u;try{u=Intl.getCanonicalLocales(i)[0]}catch{}return u&&this.options.lowerCaseLng&&(u=u.toLowerCase()),u||(this.options.lowerCaseLng?i.toLowerCase():i)}return this.options.cleanCode||this.options.lowerCaseLng?i.toLowerCase():i}isSupportedCode(i){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(i=this.getLanguagePartFromCode(i)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(i)>-1}getBestMatchFromCodes(i){if(!i)return null;let u;return i.forEach(c=>{if(u)return;const d=this.formatLanguageCode(c);(!this.options.supportedLngs||this.isSupportedCode(d))&&(u=d)}),!u&&this.options.supportedLngs&&i.forEach(c=>{if(u)return;const d=this.getScriptPartFromCode(c);if(this.isSupportedCode(d))return u=d;const f=this.getLanguagePartFromCode(c);if(this.isSupportedCode(f))return u=f;u=this.options.supportedLngs.find(m=>{if(m===f)return m;if(!(m.indexOf("-")<0&&f.indexOf("-")<0)&&(m.indexOf("-")>0&&f.indexOf("-")<0&&m.substring(0,m.indexOf("-"))===f||m.indexOf(f)===0&&f.length>1))return m})}),u||(u=this.getFallbackCodes(this.options.fallbackLng)[0]),u}getFallbackCodes(i,u){if(!i)return[];if(typeof i=="function"&&(i=i(u)),Te(i)&&(i=[i]),Array.isArray(i))return i;if(!u)return i.default||[];let c=i[u];return c||(c=i[this.getScriptPartFromCode(u)]),c||(c=i[this.formatLanguageCode(u)]),c||(c=i[this.getLanguagePartFromCode(u)]),c||(c=i.default),c||[]}toResolveHierarchy(i,u){const c=this.getFallbackCodes((u===!1?[]:u)||this.options.fallbackLng||[],i),d=[],f=m=>{m&&(this.isSupportedCode(m)?d.push(m):this.logger.warn(`rejecting language code not found in supportedLngs: ${m}`))};return Te(i)&&(i.indexOf("-")>-1||i.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&f(this.formatLanguageCode(i)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&f(this.getScriptPartFromCode(i)),this.options.load!=="currentOnly"&&f(this.getLanguagePartFromCode(i))):Te(i)&&f(this.formatLanguageCode(i)),c.forEach(m=>{d.indexOf(m)<0&&f(this.formatLanguageCode(m))}),d}}const Wh={zero:0,one:1,two:2,few:3,many:4,other:5},em={select:r=>r===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Cv{constructor(i,u={}){this.languageUtils=i,this.options=u,this.logger=En.create("pluralResolver"),this.pluralRulesCache={}}addRule(i,u){this.rules[i]=u}clearCache(){this.pluralRulesCache={}}getRule(i,u={}){const c=ql(i==="dev"?"en":i),d=u.ordinal?"ordinal":"cardinal",f=JSON.stringify({cleanedCode:c,type:d});if(f in this.pluralRulesCache)return this.pluralRulesCache[f];let m;try{m=new Intl.PluralRules(c,{type:d})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),em;if(!i.match(/-|_/))return em;const v=this.languageUtils.getLanguagePartFromCode(i);m=this.getRule(v,u)}return this.pluralRulesCache[f]=m,m}needsPlural(i,u={}){let c=this.getRule(i,u);return c||(c=this.getRule("dev",u)),(c==null?void 0:c.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(i,u,c={}){return this.getSuffixes(i,c).map(d=>`${u}${d}`)}getSuffixes(i,u={}){let c=this.getRule(i,u);return c||(c=this.getRule("dev",u)),c?c.resolvedOptions().pluralCategories.sort((d,f)=>Wh[d]-Wh[f]).map(d=>`${this.options.prepend}${u.ordinal?`ordinal${this.options.prepend}`:""}${d}`):[]}getSuffix(i,u,c={}){const d=this.getRule(i,c);return d?`${this.options.prepend}${c.ordinal?`ordinal${this.options.prepend}`:""}${d.select(u)}`:(this.logger.warn(`no plural rule found for: ${i}`),this.getSuffix("dev",u,c))}}const tm=(r,i,u,c=".",d=!0)=>{let f=wv(r,i,u);return!f&&d&&Te(u)&&(f=zo(r,u,c),f===void 0&&(f=zo(i,u,c))),f},_o=r=>r.replace(/\$/g,"$$$$");class Mv{constructor(i={}){var u;this.logger=En.create("interpolator"),this.options=i,this.format=((u=i==null?void 0:i.interpolation)==null?void 0:u.format)||(c=>c),this.init(i)}init(i={}){i.interpolation||(i.interpolation={escapeValue:!0});const{escape:u,escapeValue:c,useRawValueToEscape:d,prefix:f,prefixEscaped:m,suffix:g,suffixEscaped:v,formatSeparator:y,unescapeSuffix:S,unescapePrefix:j,nestingPrefix:T,nestingPrefixEscaped:_,nestingSuffix:B,nestingSuffixEscaped:z,nestingOptionsSeparator:ae,maxReplaces:K,alwaysFormat:ue}=i.interpolation;this.escape=u!==void 0?u:_v,this.escapeValue=c!==void 0?c:!0,this.useRawValueToEscape=d!==void 0?d:!1,this.prefix=f?Rs(f):m||"{{",this.suffix=g?Rs(g):v||"}}",this.formatSeparator=y||",",this.unescapePrefix=S?"":j||"-",this.unescapeSuffix=this.unescapePrefix?"":S||"",this.nestingPrefix=T?Rs(T):_||Rs("$t("),this.nestingSuffix=B?Rs(B):z||Rs(")"),this.nestingOptionsSeparator=ae||",",this.maxReplaces=K||1e3,this.alwaysFormat=ue!==void 0?ue:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const i=(u,c)=>(u==null?void 0:u.source)===c?(u.lastIndex=0,u):new RegExp(c,"g");this.regexp=i(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=i(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=i(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(i,u,c,d){var _;let f,m,g;const v=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},y=B=>{if(B.indexOf(this.formatSeparator)<0){const ue=tm(u,v,B,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(ue,void 0,c,{...d,...u,interpolationkey:B}):ue}const z=B.split(this.formatSeparator),ae=z.shift().trim(),K=z.join(this.formatSeparator).trim();return this.format(tm(u,v,ae,this.options.keySeparator,this.options.ignoreJSONStructure),K,c,{...d,...u,interpolationkey:ae})};this.resetRegExp();const S=(d==null?void 0:d.missingInterpolationHandler)||this.options.missingInterpolationHandler,j=((_=d==null?void 0:d.interpolation)==null?void 0:_.skipOnVariables)!==void 0?d.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:B=>_o(B)},{regex:this.regexp,safeValue:B=>this.escapeValue?_o(this.escape(B)):_o(B)}].forEach(B=>{for(g=0;f=B.regex.exec(i);){const z=f[1].trim();if(m=y(z),m===void 0)if(typeof S=="function"){const K=S(i,f,d);m=Te(K)?K:""}else if(d&&Object.prototype.hasOwnProperty.call(d,z))m="";else if(j){m=f[0];continue}else this.logger.warn(`missed to pass in variable ${z} for interpolating ${i}`),m="";else!Te(m)&&!this.useRawValueToEscape&&(m=Fh(m));const ae=B.safeValue(m);if(i=i.replace(f[0],ae),j?(B.regex.lastIndex+=m.length,B.regex.lastIndex-=f[0].length):B.regex.lastIndex=0,g++,g>=this.maxReplaces)break}}),i}nest(i,u,c={}){let d,f,m;const g=(v,y)=>{const S=this.nestingOptionsSeparator;if(v.indexOf(S)<0)return v;const j=v.split(new RegExp(`${S}[ ]*{`));let T=`{${j[1]}`;v=j[0],T=this.interpolate(T,m);const _=T.match(/'/g),B=T.match(/"/g);(((_==null?void 0:_.length)??0)%2===0&&!B||B.length%2!==0)&&(T=T.replace(/'/g,'"'));try{m=JSON.parse(T),y&&(m={...y,...m})}catch(z){return this.logger.warn(`failed parsing options string in nesting for key ${v}`,z),`${v}${S}${T}`}return m.defaultValue&&m.defaultValue.indexOf(this.prefix)>-1&&delete m.defaultValue,v};for(;d=this.nestingRegexp.exec(i);){let v=[];m={...c},m=m.replace&&!Te(m.replace)?m.replace:m,m.applyPostProcessor=!1,delete m.defaultValue;const y=/{.*}/.test(d[1])?d[1].lastIndexOf("}")+1:d[1].indexOf(this.formatSeparator);if(y!==-1&&(v=d[1].slice(y).split(this.formatSeparator).map(S=>S.trim()).filter(Boolean),d[1]=d[1].slice(0,y)),f=u(g.call(this,d[1].trim(),m),m),f&&d[0]===i&&!Te(f))return f;Te(f)||(f=Fh(f)),f||(this.logger.warn(`missed to resolve ${d[1]} for nesting ${i}`),f=""),v.length&&(f=v.reduce((S,j)=>this.format(S,j,c.lng,{...c,interpolationkey:d[1].trim()}),f.trim())),i=i.replace(d[0],f),this.regexp.lastIndex=0}return i}}const kv=r=>{let i=r.toLowerCase().trim();const u={};if(r.indexOf("(")>-1){const c=r.split("(");i=c[0].toLowerCase().trim();const d=c[1].substring(0,c[1].length-1);i==="currency"&&d.indexOf(":")<0?u.currency||(u.currency=d.trim()):i==="relativetime"&&d.indexOf(":")<0?u.range||(u.range=d.trim()):d.split(";").forEach(m=>{if(m){const[g,...v]=m.split(":"),y=v.join(":").trim().replace(/^'+|'+$/g,""),S=g.trim();u[S]||(u[S]=y),y==="false"&&(u[S]=!1),y==="true"&&(u[S]=!0),isNaN(y)||(u[S]=parseInt(y,10))}})}return{formatName:i,formatOptions:u}},nm=r=>{const i={};return(u,c,d)=>{let f=d;d&&d.interpolationkey&&d.formatParams&&d.formatParams[d.interpolationkey]&&d[d.interpolationkey]&&(f={...f,[d.interpolationkey]:void 0});const m=c+JSON.stringify(f);let g=i[m];return g||(g=r(ql(c),d),i[m]=g),g(u)}},zv=r=>(i,u,c)=>r(ql(u),c)(i);class Lv{constructor(i={}){this.logger=En.create("formatter"),this.options=i,this.init(i)}init(i,u={interpolation:{}}){this.formatSeparator=u.interpolation.formatSeparator||",";const c=u.cacheInBuiltFormats?nm:zv;this.formats={number:c((d,f)=>{const m=new Intl.NumberFormat(d,{...f});return g=>m.format(g)}),currency:c((d,f)=>{const m=new Intl.NumberFormat(d,{...f,style:"currency"});return g=>m.format(g)}),datetime:c((d,f)=>{const m=new Intl.DateTimeFormat(d,{...f});return g=>m.format(g)}),relativetime:c((d,f)=>{const m=new Intl.RelativeTimeFormat(d,{...f});return g=>m.format(g,f.range||"day")}),list:c((d,f)=>{const m=new Intl.ListFormat(d,{...f});return g=>m.format(g)})}}add(i,u){this.formats[i.toLowerCase().trim()]=u}addCached(i,u){this.formats[i.toLowerCase().trim()]=nm(u)}format(i,u,c,d={}){const f=u.split(this.formatSeparator);if(f.length>1&&f[0].indexOf("(")>1&&f[0].indexOf(")")<0&&f.find(g=>g.indexOf(")")>-1)){const g=f.findIndex(v=>v.indexOf(")")>-1);f[0]=[f[0],...f.splice(1,g)].join(this.formatSeparator)}return f.reduce((g,v)=>{var j;const{formatName:y,formatOptions:S}=kv(v);if(this.formats[y]){let T=g;try{const _=((j=d==null?void 0:d.formatParams)==null?void 0:j[d.interpolationkey])||{},B=_.locale||_.lng||d.locale||d.lng||c;T=this.formats[y](g,B,{...S,...d,..._})}catch(_){this.logger.warn(_)}return T}else this.logger.warn(`there was no format function for ${y}`);return g},i)}}const Iv=(r,i)=>{r.pending[i]!==void 0&&(delete r.pending[i],r.pendingCount--)};class Hv extends gr{constructor(i,u,c,d={}){var f,m;super(),this.backend=i,this.store=u,this.services=c,this.languageUtils=c.languageUtils,this.options=d,this.logger=En.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=d.maxParallelReads||10,this.readingCalls=0,this.maxRetries=d.maxRetries>=0?d.maxRetries:5,this.retryTimeout=d.retryTimeout>=1?d.retryTimeout:350,this.state={},this.queue=[],(m=(f=this.backend)==null?void 0:f.init)==null||m.call(f,c,d.backend,d)}queueLoad(i,u,c,d){const f={},m={},g={},v={};return i.forEach(y=>{let S=!0;u.forEach(j=>{const T=`${y}|${j}`;!c.reload&&this.store.hasResourceBundle(y,j)?this.state[T]=2:this.state[T]<0||(this.state[T]===1?m[T]===void 0&&(m[T]=!0):(this.state[T]=1,S=!1,m[T]===void 0&&(m[T]=!0),f[T]===void 0&&(f[T]=!0),v[j]===void 0&&(v[j]=!0)))}),S||(g[y]=!0)}),(Object.keys(f).length||Object.keys(m).length)&&this.queue.push({pending:m,pendingCount:Object.keys(m).length,loaded:{},errors:[],callback:d}),{toLoad:Object.keys(f),pending:Object.keys(m),toLoadLanguages:Object.keys(g),toLoadNamespaces:Object.keys(v)}}loaded(i,u,c){const d=i.split("|"),f=d[0],m=d[1];u&&this.emit("failedLoading",f,m,u),!u&&c&&this.store.addResourceBundle(f,m,c,void 0,void 0,{skipCopy:!0}),this.state[i]=u?-1:2,u&&c&&(this.state[i]=0);const g={};this.queue.forEach(v=>{Ev(v.loaded,[f],m),Iv(v,i),u&&v.errors.push(u),v.pendingCount===0&&!v.done&&(Object.keys(v.loaded).forEach(y=>{g[y]||(g[y]={});const S=v.loaded[y];S.length&&S.forEach(j=>{g[y][j]===void 0&&(g[y][j]=!0)})}),v.done=!0,v.errors.length?v.callback(v.errors):v.callback())}),this.emit("loaded",g),this.queue=this.queue.filter(v=>!v.done)}read(i,u,c,d=0,f=this.retryTimeout,m){if(!i.length)return m(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:i,ns:u,fcName:c,tried:d,wait:f,callback:m});return}this.readingCalls++;const g=(y,S)=>{if(this.readingCalls--,this.waitingReads.length>0){const j=this.waitingReads.shift();this.read(j.lng,j.ns,j.fcName,j.tried,j.wait,j.callback)}if(y&&S&&d<this.maxRetries){setTimeout(()=>{this.read.call(this,i,u,c,d+1,f*2,m)},f);return}m(y,S)},v=this.backend[c].bind(this.backend);if(v.length===2){try{const y=v(i,u);y&&typeof y.then=="function"?y.then(S=>g(null,S)).catch(g):g(null,y)}catch(y){g(y)}return}return v(i,u,g)}prepareLoading(i,u,c={},d){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),d&&d();Te(i)&&(i=this.languageUtils.toResolveHierarchy(i)),Te(u)&&(u=[u]);const f=this.queueLoad(i,u,c,d);if(!f.toLoad.length)return f.pending.length||d(),null;f.toLoad.forEach(m=>{this.loadOne(m)})}load(i,u,c){this.prepareLoading(i,u,{},c)}reload(i,u,c){this.prepareLoading(i,u,{reload:!0},c)}loadOne(i,u=""){const c=i.split("|"),d=c[0],f=c[1];this.read(d,f,"read",void 0,void 0,(m,g)=>{m&&this.logger.warn(`${u}loading namespace ${f} for language ${d} failed`,m),!m&&g&&this.logger.log(`${u}loaded namespace ${f} for language ${d}`,g),this.loaded(i,m,g)})}saveMissing(i,u,c,d,f,m={},g=()=>{}){var v,y,S,j,T;if((y=(v=this.services)==null?void 0:v.utils)!=null&&y.hasLoadedNamespace&&!((j=(S=this.services)==null?void 0:S.utils)!=null&&j.hasLoadedNamespace(u))){this.logger.warn(`did not save key "${c}" as the namespace "${u}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(c==null||c==="")){if((T=this.backend)!=null&&T.create){const _={...m,isUpdate:f},B=this.backend.create.bind(this.backend);if(B.length<6)try{let z;B.length===5?z=B(i,u,c,d,_):z=B(i,u,c,d),z&&typeof z.then=="function"?z.then(ae=>g(null,ae)).catch(g):g(null,z)}catch(z){g(z)}else B(i,u,c,d,g,_)}!i||!i[0]||this.store.addResource(i[0],u,c,d)}}}const am=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:r=>{let i={};if(typeof r[1]=="object"&&(i=r[1]),Te(r[1])&&(i.defaultValue=r[1]),Te(r[2])&&(i.tDescription=r[2]),typeof r[2]=="object"||typeof r[3]=="object"){const u=r[3]||r[2];Object.keys(u).forEach(c=>{i[c]=u[c]})}return i},interpolation:{escapeValue:!0,format:r=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),sm=r=>{var i,u;return Te(r.ns)&&(r.ns=[r.ns]),Te(r.fallbackLng)&&(r.fallbackLng=[r.fallbackLng]),Te(r.fallbackNS)&&(r.fallbackNS=[r.fallbackNS]),((u=(i=r.supportedLngs)==null?void 0:i.indexOf)==null?void 0:u.call(i,"cimode"))<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),typeof r.initImmediate=="boolean"&&(r.initAsync=r.initImmediate),r},or=()=>{},qv=r=>{Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(u=>{typeof r[u]=="function"&&(r[u]=r[u].bind(r))})};class Gl extends gr{constructor(i={},u){if(super(),this.options=sm(i),this.services={},this.logger=En,this.modules={external:[]},qv(this),u&&!this.isInitialized&&!i.isClone){if(!this.options.initAsync)return this.init(i,u),this;setTimeout(()=>{this.init(i,u)},0)}}init(i={},u){this.isInitializing=!0,typeof i=="function"&&(u=i,i={}),i.defaultNS==null&&i.ns&&(Te(i.ns)?i.defaultNS=i.ns:i.ns.indexOf("translation")<0&&(i.defaultNS=i.ns[0]));const c=am();this.options={...c,...this.options,...sm(i)},this.options.interpolation={...c.interpolation,...this.options.interpolation},i.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=i.keySeparator),i.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=i.nsSeparator);const d=y=>y?typeof y=="function"?new y:y:null;if(!this.options.isClone){this.modules.logger?En.init(d(this.modules.logger),this.options):En.init(null,this.options);let y;this.modules.formatter?y=this.modules.formatter:y=Lv;const S=new Ph(this.options);this.store=new Zh(this.options.resources,this.options);const j=this.services;j.logger=En,j.resourceStore=this.store,j.languageUtils=S,j.pluralResolver=new Cv(S,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==c.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),y&&(!this.options.interpolation.format||this.options.interpolation.format===c.interpolation.format)&&(j.formatter=d(y),j.formatter.init&&j.formatter.init(j,this.options),this.options.interpolation.format=j.formatter.format.bind(j.formatter)),j.interpolator=new Mv(this.options),j.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},j.backendConnector=new Hv(d(this.modules.backend),j.resourceStore,j,this.options),j.backendConnector.on("*",(_,...B)=>{this.emit(_,...B)}),this.modules.languageDetector&&(j.languageDetector=d(this.modules.languageDetector),j.languageDetector.init&&j.languageDetector.init(j,this.options.detection,this.options)),this.modules.i18nFormat&&(j.i18nFormat=d(this.modules.i18nFormat),j.i18nFormat.init&&j.i18nFormat.init(this)),this.translator=new hr(this.services,this.options),this.translator.on("*",(_,...B)=>{this.emit(_,...B)}),this.modules.external.forEach(_=>{_.init&&_.init(this)})}if(this.format=this.options.interpolation.format,u||(u=or),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const y=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);y.length>0&&y[0]!=="dev"&&(this.options.lng=y[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(y=>{this[y]=(...S)=>this.store[y](...S)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(y=>{this[y]=(...S)=>(this.store[y](...S),this)});const g=zl(),v=()=>{const y=(S,j)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),g.resolve(j),u(S,j)};if(this.languages&&!this.isInitialized)return y(null,this.t.bind(this));this.changeLanguage(this.options.lng,y)};return this.options.resources||!this.options.initAsync?v():setTimeout(v,0),g}loadResources(i,u=or){var f,m;let c=u;const d=Te(i)?i:this.language;if(typeof i=="function"&&(c=i),!this.options.resources||this.options.partialBundledLanguages){if((d==null?void 0:d.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return c();const g=[],v=y=>{if(!y||y==="cimode")return;this.services.languageUtils.toResolveHierarchy(y).forEach(j=>{j!=="cimode"&&g.indexOf(j)<0&&g.push(j)})};d?v(d):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(S=>v(S)),(m=(f=this.options.preload)==null?void 0:f.forEach)==null||m.call(f,y=>v(y)),this.services.backendConnector.load(g,this.options.ns,y=>{!y&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),c(y)})}else c(null)}reloadResources(i,u,c){const d=zl();return typeof i=="function"&&(c=i,i=void 0),typeof u=="function"&&(c=u,u=void 0),i||(i=this.languages),u||(u=this.options.ns),c||(c=or),this.services.backendConnector.reload(i,u,f=>{d.resolve(),c(f)}),d}use(i){if(!i)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!i.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return i.type==="backend"&&(this.modules.backend=i),(i.type==="logger"||i.log&&i.warn&&i.error)&&(this.modules.logger=i),i.type==="languageDetector"&&(this.modules.languageDetector=i),i.type==="i18nFormat"&&(this.modules.i18nFormat=i),i.type==="postProcessor"&&zm.addPostProcessor(i),i.type==="formatter"&&(this.modules.formatter=i),i.type==="3rdParty"&&this.modules.external.push(i),this}setResolvedLanguage(i){if(!(!i||!this.languages)&&!(["cimode","dev"].indexOf(i)>-1)){for(let u=0;u<this.languages.length;u++){const c=this.languages[u];if(!(["cimode","dev"].indexOf(c)>-1)&&this.store.hasLanguageSomeTranslations(c)){this.resolvedLanguage=c;break}}!this.resolvedLanguage&&this.languages.indexOf(i)<0&&this.store.hasLanguageSomeTranslations(i)&&(this.resolvedLanguage=i,this.languages.unshift(i))}}changeLanguage(i,u){this.isLanguageChangingTo=i;const c=zl();this.emit("languageChanging",i);const d=g=>{this.language=g,this.languages=this.services.languageUtils.toResolveHierarchy(g),this.resolvedLanguage=void 0,this.setResolvedLanguage(g)},f=(g,v)=>{v?this.isLanguageChangingTo===i&&(d(v),this.translator.changeLanguage(v),this.isLanguageChangingTo=void 0,this.emit("languageChanged",v),this.logger.log("languageChanged",v)):this.isLanguageChangingTo=void 0,c.resolve((...y)=>this.t(...y)),u&&u(g,(...y)=>this.t(...y))},m=g=>{var S,j;!i&&!g&&this.services.languageDetector&&(g=[]);const v=Te(g)?g:g&&g[0],y=this.store.hasLanguageSomeTranslations(v)?v:this.services.languageUtils.getBestMatchFromCodes(Te(g)?[g]:g);y&&(this.language||d(y),this.translator.language||this.translator.changeLanguage(y),(j=(S=this.services.languageDetector)==null?void 0:S.cacheUserLanguage)==null||j.call(S,y)),this.loadResources(y,T=>{f(T,y)})};return!i&&this.services.languageDetector&&!this.services.languageDetector.async?m(this.services.languageDetector.detect()):!i&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(m):this.services.languageDetector.detect(m):m(i),c}getFixedT(i,u,c){const d=(f,m,...g)=>{let v;typeof m!="object"?v=this.options.overloadTranslationOptionHandler([f,m].concat(g)):v={...m},v.lng=v.lng||d.lng,v.lngs=v.lngs||d.lngs,v.ns=v.ns||d.ns,v.keyPrefix!==""&&(v.keyPrefix=v.keyPrefix||c||d.keyPrefix);const y=this.options.keySeparator||".";let S;return v.keyPrefix&&Array.isArray(f)?S=f.map(j=>`${v.keyPrefix}${y}${j}`):S=v.keyPrefix?`${v.keyPrefix}${y}${f}`:f,this.t(S,v)};return Te(i)?d.lng=i:d.lngs=i,d.ns=u,d.keyPrefix=c,d}t(...i){var u;return(u=this.translator)==null?void 0:u.translate(...i)}exists(...i){var u;return(u=this.translator)==null?void 0:u.exists(...i)}setDefaultNamespace(i){this.options.defaultNS=i}hasLoadedNamespace(i,u={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const c=u.lng||this.resolvedLanguage||this.languages[0],d=this.options?this.options.fallbackLng:!1,f=this.languages[this.languages.length-1];if(c.toLowerCase()==="cimode")return!0;const m=(g,v)=>{const y=this.services.backendConnector.state[`${g}|${v}`];return y===-1||y===0||y===2};if(u.precheck){const g=u.precheck(this,m);if(g!==void 0)return g}return!!(this.hasResourceBundle(c,i)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||m(c,i)&&(!d||m(f,i)))}loadNamespaces(i,u){const c=zl();return this.options.ns?(Te(i)&&(i=[i]),i.forEach(d=>{this.options.ns.indexOf(d)<0&&this.options.ns.push(d)}),this.loadResources(d=>{c.resolve(),u&&u(d)}),c):(u&&u(),Promise.resolve())}loadLanguages(i,u){const c=zl();Te(i)&&(i=[i]);const d=this.options.preload||[],f=i.filter(m=>d.indexOf(m)<0&&this.services.languageUtils.isSupportedCode(m));return f.length?(this.options.preload=d.concat(f),this.loadResources(m=>{c.resolve(),u&&u(m)}),c):(u&&u(),Promise.resolve())}dir(i){var d,f;if(i||(i=this.resolvedLanguage||(((d=this.languages)==null?void 0:d.length)>0?this.languages[0]:this.language)),!i)return"rtl";try{const m=new Intl.Locale(i);if(m&&m.getTextInfo){const g=m.getTextInfo();if(g&&g.direction)return g.direction}}catch{}const u=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],c=((f=this.services)==null?void 0:f.languageUtils)||new Ph(am());return i.toLowerCase().indexOf("-latn")>1?"ltr":u.indexOf(c.getLanguagePartFromCode(i))>-1||i.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(i={},u){return new Gl(i,u)}cloneInstance(i={},u=or){const c=i.forkResourceStore;c&&delete i.forkResourceStore;const d={...this.options,...i,isClone:!0},f=new Gl(d);if((i.debug!==void 0||i.prefix!==void 0)&&(f.logger=f.logger.clone(i)),["store","services","language"].forEach(g=>{f[g]=this[g]}),f.services={...this.services},f.services.utils={hasLoadedNamespace:f.hasLoadedNamespace.bind(f)},c){const g=Object.keys(this.store.data).reduce((v,y)=>(v[y]={...this.store.data[y]},v[y]=Object.keys(v[y]).reduce((S,j)=>(S[j]={...v[y][j]},S),v[y]),v),{});f.store=new Zh(g,d),f.services.resourceStore=f.store}return f.translator=new hr(f.services,d),f.translator.on("*",(g,...v)=>{f.emit(g,...v)}),f.init(d,u),f.translator.options=d,f.translator.backendConnector.services.utils={hasLoadedNamespace:f.hasLoadedNamespace.bind(f)},f}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const wt=Gl.createInstance();wt.createInstance=Gl.createInstance;wt.createInstance;wt.dir;wt.init;wt.loadResources;wt.reloadResources;wt.use;wt.changeLanguage;wt.getFixedT;wt.t;wt.exists;wt.setDefaultNamespace;wt.hasLoadedNamespace;wt.loadNamespaces;wt.loadLanguages;const Gv={translation:{common:{loading:"載入中...",save:"儲存",cancel:"取消",confirm:"確認",back:"返回",next:"下一步",submit:"提交",edit:"編輯",delete:"刪除",search:"搜尋",filter:"篩選",all:"全部"},navigation:{home:"首頁",profile:"個人資料",history:"歷史紀錄",ladder:"天梯排行榜",friends:"好友",settings:"設定",logout:"登出"},welcome:{title:"歡迎來到最強肉體",subtitle:"留下運動數據,進步多少馬上知道",login:"登入",guestMode:"立即體驗（訪客模式）",register:"註冊帳號",guestInfo:{title:"訪客模式功能：",features:["完整體驗所有評測功能","本地儲存評測結果","隨時可註冊同步資料","無法使用好友、天梯等社交功能"]}},userInfo:{title:"身體狀態與表現總覽",nickname:"暱稱",nicknamePlaceholder:"請輸入暱稱",generateNickname:"生成暱稱",gender:"性別",selectGender:"請選擇性別",male:"男性",female:"女性",height:"身高 (cm)",weight:"體重 (kg)",age:"年齡",saveData:"儲存資料",saving:"儲存中...",dataSaved:"資料已儲存成功！",saveFailed:"儲存失敗，請稍後再試"},tests:{strength:"力量評測",explosivePower:"爆發力測試",cardio:"心肺耐力測試",muscleMass:"骨骼肌肉量",bodyFat:"體脂肪率與FFMI",startTest:"開始評測",completeTest:"完成評測",testComplete:"評測完成",score:"分數",averageScore:"平均分數"},ladder:{title:"天梯排行榜",myScore:"我的天梯分數",myRank:"我的排名",notParticipated:"未參與",notRanked:"未上榜",rank:"第 {{rank}} 名",ageGroups:{all:"全部年齡",under20:"20歲以下","21to30":"21~30歲","31to40":"31~40歲","41to50":"41~50歲","51to60":"51~60歲","61to70":"61~70歲",over70:"70歲以上",unknown:"未知年齡"},empty:{title:"暫無排行榜數據",subtitle:"完成評測即可上榜！"},footer:{scoreFormula:"完成所有評測項目即可計算天梯分數",formula:"天梯分數 = (力量 + 爆發力 + 心肺 + 肌肉量 + 體脂) ÷ 5"}},guestMode:{title:"歡迎使用最強肉體",subtitle:"您可以選擇註冊帳號或直接體驗",startGuest:"立即體驗（訪客模式）",register:"註冊帳號",or:"或",banner:"訪客模式 - 您的資料僅儲存在本地",syncData:"註冊同步",exit:"退出"},errors:{required:"此欄位為必填",invalidFormat:"格式不正確",networkError:"網路錯誤，請稍後再試",authError:"認證失敗",saveError:"儲存失敗",loadError:"載入失敗"}}},Vv={translation:{common:{loading:"Loading...",save:"Save",cancel:"Cancel",confirm:"Confirm",back:"Back",next:"Next",submit:"Submit",edit:"Edit",delete:"Delete",search:"Search",filter:"Filter",all:"All"},navigation:{home:"Home",profile:"Profile",history:"History",ladder:"Ladder",friends:"Friends",settings:"Settings",logout:"Logout"},welcome:{title:"Welcome to Fitness Assessment",subtitle:"Track your progress with detailed fitness metrics",login:"Login",guestMode:"Try Now (Guest Mode)",register:"Register",guestInfo:{title:"Guest Mode Features:",features:["Full access to all assessment features","Local storage of assessment results","Register anytime to sync data","Social features like friends and ladder not available"]}},userInfo:{title:"Body Status & Performance Overview",nickname:"Nickname",nicknamePlaceholder:"Enter nickname",generateNickname:"Generate",gender:"Gender",selectGender:"Select gender",male:"Male",female:"Female",height:"Height (cm)",weight:"Weight (kg)",age:"Age",saveData:"Save Data",saving:"Saving...",dataSaved:"Data saved successfully!",saveFailed:"Save failed, please try again"},tests:{strength:"Strength Assessment",explosivePower:"Explosive Power Test",cardio:"Cardio Endurance Test",muscleMass:"Muscle Mass",bodyFat:"Body Fat & FFMI",startTest:"Start Test",completeTest:"Complete Test",testComplete:"Test Complete",score:"Score",averageScore:"Average Score"},ladder:{title:"Ladder Rankings",myScore:"My Ladder Score",myRank:"My Rank",notParticipated:"Not Participated",notRanked:"Not Ranked",rank:"Rank {{rank}}",ageGroups:{all:"All Ages",under20:"Under 20","21to30":"21-30","31to40":"31-40","41to50":"41-50","51to60":"51-60","61to70":"61-70",over70:"Over 70",unknown:"Unknown Age"},empty:{title:"No ladder data available",subtitle:"Complete assessments to rank!"},footer:{scoreFormula:"Complete all assessment items to calculate ladder score",formula:"Ladder Score = (Strength + Explosive Power + Cardio + Muscle Mass + Body Fat) ÷ 5"}},guestMode:{title:"Welcome to Fitness Assessment",subtitle:"You can choose to register or try directly",startGuest:"Try Now (Guest Mode)",register:"Register",or:"or",banner:"Guest Mode - Your data is stored locally only",syncData:"Register to Sync",exit:"Exit"},errors:{required:"This field is required",invalidFormat:"Invalid format",networkError:"Network error, please try again later",authError:"Authentication failed",saveError:"Save failed",loadError:"Load failed"}}};wt.use(vv).init({resources:{"zh-TW":Gv,"en-US":Vv},lng:"zh-TW",fallbackLng:"zh-TW",interpolation:{escapeValue:!1},react:{useSuspense:!1}});try{localStorage.removeItem("language")}catch{}function Lm({onLogin:r,onGuestMode:i}){const u=pn(),{clearUserData:c,isAuthenticated:d,isLoading:f}=on(),{t:m}=Mm(),[g,v]=A.useState(!1);A.useEffect(()=>{console.log("i18n current language:",wt.language)},[]),A.useEffect(()=>{const j=async()=>{if(g||d)return;const _=localStorage.getItem("savedEmail"),B=localStorage.getItem("savedPassword");if(_&&B&&!g){console.log("Welcome - 嘗試自動登入:",_),v(!0);try{const z=await Lo(de,_,B);console.log("Welcome - 自動登入成功:",z.user.email),setTimeout(()=>{u("/user-info")},500)}catch(z){console.error("Welcome - 自動登入失敗:",z),localStorage.removeItem("savedEmail"),localStorage.removeItem("savedPassword")}}},T=setTimeout(()=>{j()},100);return()=>clearTimeout(T)},[g,d,u]),A.useEffect(()=>{d&&!f&&(console.log("Welcome - 用戶已認證，導航到 user-info"),u("/user-info"))},[d,f,u]);const y=()=>{u("/login")},S=()=>{i?i():u("/guest")};return s.jsxs("div",{className:"welcome-container",children:[s.jsx("div",{className:"welcome-header",children:s.jsx(Sv,{})}),s.jsxs("div",{className:"welcome-content",children:[s.jsx("h1",{className:"welcome-title",children:m("welcome.title")}),s.jsx("p",{className:"welcome-subtitle",children:m("welcome.subtitle")}),s.jsxs("div",{className:"button-group-mode",children:[s.jsxs("div",{className:"button-with-tooltip",children:[s.jsx("button",{onClick:y,className:"mode-btn login-btn",children:m("welcome.login")}),s.jsx("span",{className:"tooltip",children:"將數據保存到雲端,隨時隨地訪問"})]}),s.jsxs("div",{className:"button-with-tooltip",children:[s.jsx("button",{onClick:S,className:"mode-btn guest-btn",children:m("welcome.guestMode")}),s.jsx("span",{className:"tooltip",children:"無需註冊,立即開始評測"})]})]})]})]})}Lm.propTypes={onLogin:Oe.func,onGuestMode:Oe.func};const Us={strength:0,explosivePower:0,cardio:0,muscleMass:0,bodyFat:0},Yv=["male","female"],Fv=({isOpen:r,onClose:i,title:u,message:c,type:d="info",onAction:f=null,actionText:m=null})=>{if(!r)return null;const g=()=>{switch(d){case"warning":return"⚠️";case"success":return"✅";case"error":return"❌";default:return"ℹ️"}},v=()=>{switch(d){case"warning":return"modal-btn modal-btn-warning";case"success":return"modal-btn modal-btn-success";case"error":return"modal-btn modal-btn-error";default:return"modal-btn modal-btn-info"}},y=()=>{console.log("Modal close button clicked"),i()},S=()=>{console.log("Modal overlay clicked"),i()},j=()=>{f&&f(),i()};return s.jsx("div",{className:"modal-overlay",onClick:S,children:s.jsxs("div",{className:"modal-content",onClick:T=>T.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("span",{className:"modal-icon",children:g()}),s.jsx("h3",{className:"modal-title",children:u})]}),s.jsx("div",{className:"modal-body",children:s.jsx("p",{className:"modal-message",children:c})}),s.jsx("div",{className:"modal-footer",children:f&&m?s.jsxs("div",{className:"modal-footer-actions",children:[s.jsx("button",{className:"modal-btn modal-btn-secondary",onClick:y,children:"稍後查看"}),s.jsx("button",{className:v(),onClick:j,style:{position:"relative",zIndex:10001},children:m})]}):s.jsx("button",{className:v(),onClick:y,style:{position:"relative",zIndex:10001},children:"確定"})})]})})},lm=({isOpen:r,onConfirm:i,onCancel:u,remainingCount:c})=>{if(!r)return null;const d=f=>{f.target===f.currentTarget&&u()};return s.jsx("div",{className:"modal-overlay submit-confirm-overlay",onClick:d,children:s.jsxs("div",{className:"modal-content submit-confirm-content",onClick:f=>f.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("span",{className:"modal-icon",children:"🏆"}),s.jsx("h3",{className:"modal-title",children:"提交確認"})]}),s.jsx("div",{className:"modal-body",children:s.jsxs("div",{className:"submit-confirm-message",children:[s.jsxs("p",{className:"confirm-text",children:["為提升天梯參考價值，防止誤植，今天還剩下"," ",s.jsx("span",{className:"remaining-count",children:c})," ","次提交機會，每天凌晨12點將重置"]}),s.jsxs("div",{className:"confirm-details",children:[s.jsxs("div",{className:"detail-item",children:[s.jsx("span",{className:"detail-icon",children:"📊"}),s.jsx("span",{className:"detail-text",children:"確保數據準確性"})]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("span",{className:"detail-icon",children:"⏰"}),s.jsx("span",{className:"detail-text",children:"每日凌晨重置次數"})]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("span",{className:"detail-icon",children:"🎯"}),s.jsx("span",{className:"detail-text",children:"提升天梯參考價值"})]})]})]})}),s.jsxs("div",{className:"modal-footer submit-confirm-footer",children:[s.jsx("button",{className:"modal-btn modal-btn-secondary",onClick:u,children:"還沒填好"}),s.jsx("button",{className:"modal-btn modal-btn-success",onClick:i,children:"確定提交"})]})]})})};async function Xv(r,i=300*1024,u=192,c=192){return new Promise((d,f)=>{const m=new window.Image,g=new FileReader;g.onload=v=>{m.src=v.target.result},m.onload=()=>{const v=document.createElement("canvas");let y=m.width,S=m.height;(y>u||S>c)&&(y>S?(S=Math.round(S*u/y),y=u):(y=Math.round(y*c/S),S=c)),v.width=y,v.height=S,v.getContext("2d").drawImage(m,0,0,y,S),v.toBlob(T=>{T.size>i?v.toBlob(_=>{d(_)},"image/jpeg",.7):d(T)},"image/jpeg",.85)},m.onerror=f,g.onerror=f,g.readAsDataURL(r)})}function Im({testData:r,onLogout:i,clearTestData:u}){const{userData:c,setUserData:d,saveUserData:f,saveHistory:m,loadUserData:g,isLoading:v}=on(),[y,S]=A.useState(null),[j,T]=A.useState(!1),[_,B]=A.useState(null),[z,ae]=A.useState(!1),K=pn(),ue=Va(),H=A.useRef(null),W=A.useRef(null),X=A.useRef(null),[q,Z]=A.useState(!1),[se,P]=A.useState(null),[re,ce]=A.useState({isOpen:!1,title:"",message:"",type:"info",onAction:null,actionText:null}),[be,ye]=A.useState(null),[fe,$]=A.useState({lastSubmissionTime:null,dailySubmissionCount:0,lastSubmissionDate:null}),[x,b]=A.useState({isOpen:!1,remainingCount:3});A.useCallback(()=>{const I=new Date,U=I.toDateString();if(fe.lastSubmissionDate!==U)return $(J=>({...J,dailySubmissionCount:0,lastSubmissionDate:U})),{canSubmit:!0,reason:null};if(fe.dailySubmissionCount>=3)return{canSubmit:!1,reason:"今日已達提交上限（3次），請明天再試"};if(fe.lastSubmissionTime){const J=I-fe.lastSubmissionTime,ee=2*60*60*1e3;if(J<ee)return{canSubmit:!1,reason:`請等待 ${Math.ceil((ee-J)/6e4)} 分鐘後再提交`}}return{canSubmit:!0,reason:null}},[fe]);const k=A.useCallback(()=>{const I=3-(fe.dailySubmissionCount||0);b({isOpen:!0,remainingCount:Math.max(0,I)})},[fe.dailySubmissionCount]),F=A.useCallback(async()=>{if(b({isOpen:!1,remainingCount:0}),!j)try{T(!0);const I=c.scores||{},U=qh(I),J={...c,ladderScore:U,lastLadderSubmission:new Date().toISOString()};d(J);try{const ee=We(Ue,"users",de.currentUser.uid);await Yn(ee,{ladderScore:U,lastLadderSubmission:new Date().toISOString(),updatedAt:new Date().toISOString()},{merge:!0}),console.log("天梯分數已立即保存到 Firebase:",U)}catch(ee){throw console.error("保存天梯分數到 Firebase 失敗:",ee),ee}try{await g(de.currentUser,!0),console.log("用戶數據已重新載入，天梯分數已更新")}catch(ee){console.error("重新載入用戶數據失敗:",ee)}const te=new Date;$(ee=>({lastSubmissionTime:te,dailySubmissionCount:ee.dailySubmissionCount+1,lastSubmissionDate:te.toDateString()})),ce({isOpen:!0,title:"提交成功",message:`您的分數 ${U} 已成功提交到天梯！`,type:"success",onAction:()=>{ce(ee=>({...ee,isOpen:!1})),K("/ladder",{state:{forceReload:!0,from:"/user-info",timestamp:Date.now()}})},actionText:"立即查看天梯"}),setTimeout(()=>{ce(ee=>({...ee,isOpen:!1}))},5e3)}catch(I){console.error("提交到天梯失敗:",I),ce({isOpen:!0,title:"提交失敗",message:"提交到天梯時發生錯誤，請稍後再試",type:"error"})}finally{T(!1)}},[c.scores,d,j,K,g]),le=A.useCallback(()=>{b({isOpen:!1,remainingCount:0})},[]),ne=A.useCallback(async()=>{if(!de.currentUser){ce({isOpen:!0,title:"需要登入",message:"請先登入以提交到天梯",type:"warning"});return}const I=c.scores||{},U=Object.values(I).filter(J=>J>0).length;if(U<5){ce({isOpen:!0,title:"評測未完成",message:`請先完成全部5項評測（目前完成 ${U}/5 項）`,type:"warning"});return}k()},[c,k]),G=A.useMemo(()=>{const I=c.scores||Us;return[{name:"力量",value:I.strength?Number(I.strength).toFixed(2)*1:0,icon:"💪"},{name:"爆發力",value:I.explosivePower?Number(I.explosivePower).toFixed(2)*1:0,icon:"⚡"},{name:"心肺耐力",value:I.cardio?Number(I.cardio).toFixed(2)*1:0,icon:"❤️"},{name:"骨骼肌肉量",value:I.muscleMass?Number(I.muscleMass).toFixed(2)*1:0,icon:"🥩"},{name:"FFMI",value:I.bodyFat?Number(I.bodyFat).toFixed(2)*1:0,icon:"📊"}]},[c.scores]),D=sessionStorage.getItem("guestMode")==="true",ie=({payload:I,x:U,y:J,textAnchor:te})=>{const ee=G.find(dt=>dt.name===I.value);let oe=U,je=J;const Ce=Math.sqrt(U*U+J*J),ve=Math.atan2(J,U);return I.value==="力量"?(oe=U,je=J-Ce*.12):I.value==="爆發力"?(oe=U+Math.cos(ve)*(Ce*.03),je=J+Math.sin(ve)*(Ce*.06)):I.value==="FFMI"?(oe=U+Math.cos(ve)*(Ce*-.2),je=J+Math.sin(ve)*(Ce*.06)):I.value==="心肺耐力"?(oe=U+Math.cos(ve)*(Ce*.01),je=J+Math.sin(ve)*(Ce*.06)):I.value==="骨骼肌肉量"?(oe=U+Math.cos(ve)*(Ce*-.05),je=J+Math.sin(ve)*(Ce*.06)):(oe=U+Math.cos(ve)*(Ce*.1),je=J+Math.sin(ve)*(Ce*.1)),s.jsxs("g",{transform:`translate(${oe},${je})`,children:[s.jsx("defs",{children:s.jsxs("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[s.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),s.jsxs("feMerge",{children:[s.jsx("feMergeNode",{in:"coloredBlur"}),s.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),s.jsx("circle",{cx:0,cy:0,r:16,fill:"rgba(129, 216, 208, 0.1)",filter:"url(#glow)"}),s.jsx("circle",{cx:0,cy:0,r:14,fill:"rgba(255, 255, 255, 0.95)",stroke:"rgba(129, 216, 208, 0.4)",strokeWidth:2,filter:"drop-shadow(0 2px 4px rgba(129, 216, 208, 0.2))"}),s.jsx("text",{x:0,y:-8,textAnchor:"middle",fill:"#4a5568",fontSize:"16",fontWeight:"600",dominantBaseline:"middle",filter:"drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1))",children:ee==null?void 0:ee.icon}),s.jsx("text",{x:0,y:12,textAnchor:"middle",fill:"#2d3748",fontSize:"13",fontWeight:"700",dominantBaseline:"middle",filter:"drop-shadow(0 1px 3px rgba(255, 255, 255, 0.9))",children:I.value})]})};A.useEffect(()=>{if(!de){S("無法初始化身份驗證，請檢查 Firebase 配置並稍後再試。"),console.error("auth 未初始化");return}const I=de.onAuthStateChanged(U=>{console.log("UserInfo - 認證狀態變更:",U==null?void 0:U.email),B(U),!U&&!D&&K("/login")});return()=>I()},[]),A.useEffect(()=>{(async()=>{_&&!z&&!v&&(console.log("UserInfo - 檢查資料載入狀態"),!c.height&&!c.weight&&!c.age&&(console.log("UserInfo - 資料為空，嘗試重新載入"),await g(_,!0)),ae(!0))})()},[_,z,v,g,c.height,c.weight,c.age]),A.useEffect(()=>{var te,ee;const I=["/strength","/explosive-power","/cardio","/muscle-mass","/body-fat"],U=(te=ue.state)==null?void 0:te.from;U&&I.includes(U)&&setTimeout(()=>{H.current&&H.current.scrollIntoView({behavior:"smooth",block:"center"})},300);const J=(ee=ue.state)==null?void 0:ee.scrollTo;J&&setTimeout(()=>{J==="radar"&&H.current?H.current.scrollIntoView({behavior:"smooth",block:"center"}):J==="tests"&&W.current&&W.current.scrollIntoView({behavior:"smooth",block:"start"})},300)},[ue]),A.useEffect(()=>{(()=>{try{const U=localStorage.getItem("ladderSubmissionState");if(U){const J=JSON.parse(U),te=new Date().toDateString();J.lastSubmissionDate!==te?$({lastSubmissionTime:null,dailySubmissionCount:0,lastSubmissionDate:te}):$(J)}}catch(U){console.error("載入提交狀態失敗:",U)}})()},[]),A.useEffect(()=>{fe.lastSubmissionDate&&localStorage.setItem("ladderSubmissionState",JSON.stringify(fe))},[fe]),A.useEffect(()=>{if(r&&Object.keys(r).length>0){console.log("收到測試數據:",r);const I=setTimeout(()=>{d(U=>{const te={...U.scores||Us,...r.distance!==void 0&&{cardio:r.score||0},...r.squat!==void 0&&{strength:r.averageScore||0},...r.jumpHeight!==void 0&&{explosivePower:r.finalScore||0},...r.smm!==void 0&&{muscleMass:r.finalScore||0},...r.bodyFat!==void 0&&{bodyFat:r.ffmiScore||0}};return console.log("💾 防抖後更新測試數據分數（5秒防抖）"),{...U,scores:te,ladderScore:U.ladderScore||0}})},5e3);return u&&setTimeout(u,6e3),()=>clearTimeout(I)}},[r,u]);const Ne=A.useCallback(()=>{const{height:I,weight:U,age:J,gender:te}=c;return!I||!U||!J||!te?(S("請填寫所有欄位"),!1):I<=0||U<=0||J<=0?(S("身高、體重和年齡必須大於 0"),!1):Yv.includes(te)?!0:(S("請選擇有效的性別"),!1)},[c.height,c.weight,c.age,c.gender]),Re=A.useCallback(async I=>{if(I.preventDefault(),S(null),T(!0),!Ne()){T(!1);return}const U={...c,height:Number(c.height)||0,weight:Number(c.weight)||0,age:Number(c.age)||0,gender:c.gender,scores:c.scores||Us,ladderScore:c.ladderScore||0,lastActive:new Date().toISOString()};try{d(U),ce({isOpen:!0,title:"儲存成功",message:"資料已儲存成功！",type:"success"})}catch(J){ce(D?{isOpen:!0,title:"訪客模式",message:"訪客模式下無法保存到雲端，但您現在可以開始進行評測了！",type:"info"}:{isOpen:!0,title:"儲存失敗",message:`儲存失敗：${J.message}`,type:"error"})}finally{T(!1)}},[c.height,c.weight,c.age,c.gender,c.scores,c.ladderScore,Ne,D]),Ie=A.useMemo(()=>{const I=(c==null?void 0:c.scores)||Us,U=Object.values(I).filter(te=>te>0);return U.length?(U.reduce((te,ee)=>te+Number(ee),0)/U.length).toFixed(2):0},[c==null?void 0:c.scores]),De=A.useMemo(()=>{const I=(c==null?void 0:c.scores)||Us;return qh(I)},[c==null?void 0:c.scores]),Le=(c==null?void 0:c.ladderScore)||0,rt=A.useMemo(()=>{const I=(c==null?void 0:c.scores)||Us,U=Object.values(I).filter(te=>te>0).length;return{completedCount:U,isFullyCompleted:U===5,progress:U/5*100}},[c==null?void 0:c.scores]),mt=A.useCallback(async()=>{if(!(c!=null&&c.userId)||!Le||Le<=0){ye(null);return}try{const I=Dt(Ue,"users"),U=rn(I,Zt("ladderScore",">",0),Ro("ladderScore","desc"),Hl(100)),J=await cn(U),te=[];J.forEach(oe=>{const je=oe.data();je.ladderScore>0&&te.push({id:oe.id,...je})});const ee=te.findIndex(oe=>oe.id===c.userId);ye(ee!==-1?ee+1:null)}catch(I){console.error("獲取用戶排名失敗:",I),ye(null)}},[c==null?void 0:c.userId,Le]);A.useEffect(()=>{mt()},[mt]),A.useMemo(()=>c!=null&&c.age?Os(c.age):"",[c==null?void 0:c.age]);const Rt=A.useCallback(I=>{const U=I.target.value,J=/[\u4e00-\u9fff]/.test(U);let te=!0,ee="";if(J?U.length>8&&(te=!1,ee="暱稱不能超過8個中文字"):U.length>16&&(te=!1,ee="暱稱不能超過16個英文字元"),!te){ce({isOpen:!0,title:"字數限制",message:ee,type:"warning"});return}d(oe=>({...oe,nickname:U})),X.current&&clearTimeout(X.current),X.current=setTimeout(()=>{X.current=null},1e3)},[d]),et=()=>{var J;const I=(J=de.currentUser)==null?void 0:J.email,U=av(I);d(te=>({...te,nickname:U,ladderScore:te.ladderScore||0}))},qt=A.useCallback(()=>{if(!de.currentUser){ce({isOpen:!0,title:"需要登入",message:"請先登入以儲存結果",type:"warning"});return}const I={date:new Date().toLocaleDateString("zh-TW"),scores:c.scores,averageScore:Ie};m(I),ce({isOpen:!0,title:"儲存成功",message:"結果已儲存",type:"success"}),setTimeout(()=>{ce(U=>({...U,isOpen:!1}))},2e3)},[c.scores,Ie,m]),L=A.useCallback(async I=>{if(!c.height||!c.weight||!c.age||!c.gender){ce({isOpen:!0,title:"需要基本資料",message:"請先填寫並儲存您的身高、體重、年齡和性別，才能開始評測！",type:"warning"});return}Ne()?K(I,{state:{from:"/user-info"}}):ce({isOpen:!0,title:"資料未保存",message:"請確保資料已正確保存後再進行評測！",type:"warning"})},[c.height,c.weight,c.age,c.gender,Ne,K]),he=A.useCallback(()=>{localStorage.removeItem("savedEmail"),localStorage.removeItem("savedPassword"),de.currentUser&&de.signOut().catch(I=>console.error("登出失敗:",I)),i(),K("/login")},[i,K]),me=A.useCallback(I=>{const{name:U,value:J}=I.target;let te=J;U==="gender"||["profession"].includes(U)?te=J:["weeklyTrainingHours","trainingYears"].includes(U)?te=J===""?"":Number(J):te=J===""?0:Number(J),d(ee=>({...ee,[U]:te,ladderScore:ee.ladderScore||0}))},[d]),_e=async I=>{var J;P(null);const U=I.target.files[0];if(U){if(!U.type.startsWith("image/")){P("請選擇圖片檔案");return}if(U.size>2*1024*1024){P("圖片大小請勿超過 2MB");return}Z(!0);try{const te=await Xv(U,307200,192,192);if(te.size>350*1024){P("壓縮後圖片仍超過 350KB，請選擇更小的圖片"),Z(!1);return}const ee=(J=de.currentUser)==null?void 0:J.uid;if(!ee)throw new Error("未登入，無法上傳頭像");console.log("🔧 開始上傳頭像:",{userId:ee,fileSize:te.size});const oe=$p(Do,`avatars/${ee}/avatar.jpg`),je={contentType:"image/jpeg",customMetadata:{"uploaded-by":ee,"upload-time":new Date().toISOString()}};await Kp(oe,te,je),console.log("✅ 頭像上傳成功");const Ce=await Zp(oe);console.log("✅ 獲取下載 URL 成功:",Ce),d(ve=>({...ve,avatarUrl:Ce,ladderScore:ve.ladderScore||0}));try{const ve=We(Ue,"users",ee);await Vn(ve,{avatarUrl:Ce,updatedAt:new Date().toISOString()}),console.log("頭像已立即保存到 Firebase"),ce({isOpen:!0,title:"頭像上傳成功",message:"您的頭像已成功更新！",type:"success"}),setTimeout(()=>{ce(dt=>({...dt,isOpen:!1}))},2e3)}catch(ve){console.error("頭像保存到 Firebase 失敗:",ve),P("頭像保存失敗: "+ve.message)}}catch(te){P("頭像上傳失敗: "+te.message)}finally{Z(!1)}}};return v&&!z?s.jsx("div",{className:"user-info-container",children:s.jsx("div",{className:"loading-message",children:s.jsx("p",{children:"正在載入用戶資料..."})})}):s.jsxs("div",{className:"user-info-container",children:[s.jsx(Fv,{isOpen:re.isOpen,onClose:()=>{console.log("Modal onClose triggered, current state:",re),ce(I=>(console.log("Setting modal state to closed"),{...I,isOpen:!1}))},title:re.title,message:re.message,type:re.type,onAction:re.onAction,actionText:re.actionText}),s.jsx(lm,{isOpen:x.isOpen,onConfirm:F,onCancel:le,remainingCount:x.remainingCount}),y&&s.jsx("p",{className:"error-message",children:y}),s.jsxs("div",{className:"avatar-section",children:[s.jsx("div",{className:"avatar-container",children:s.jsx("img",{src:D?"/guest-avatar.svg":(c==null?void 0:c.avatarUrl)||"/default-avatar.svg",alt:"頭像",className:"user-avatar",onError:I=>{I.target.src="/default-avatar.svg"}})}),s.jsxs("div",{className:"avatar-actions-container",children:[!D&&s.jsxs("label",{className:"avatar-upload-label",children:[q?"上傳中...":"更換頭像",s.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:_e,disabled:q})]}),D&&s.jsx("div",{className:"guest-avatar-note",children:s.jsx("span",{children:"訪客模式"})})]}),se&&s.jsx("div",{className:"avatar-error",children:se})]}),(_||D)&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"page-header",children:[s.jsx("h1",{className:"page-title",children:"身體狀態與表現總覽"}),s.jsx("div",{className:"page-subtitle",children:"完善您的個人資料，開始健身之旅"})]}),s.jsx("div",{className:"form-card",children:s.jsxs("form",{className:"user-form",onSubmit:Re,children:[s.jsxs("div",{className:"form-section",children:[s.jsxs("div",{className:"section-header",children:[s.jsx("h3",{className:"section-title",children:"基本資料"}),_&&s.jsx("button",{type:"button",onClick:he,title:"登出",className:"user-info__logout-btn",onMouseEnter:I=>{const U=document.createElement("div");U.innerText="登出",U.style.position="absolute",U.style.bottom="44px",U.style.left="50%",U.style.transform="translateX(-50%)",U.style.background="rgba(60,60,60,0.95)",U.style.color="#fff",U.style.padding="6px 14px",U.style.borderRadius="6px",U.style.fontSize="13px",U.style.whiteSpace="nowrap",U.style.pointerEvents="none",U.style.zIndex="1001",U.className="logout-tooltip",I.currentTarget.parentNode.appendChild(U)},onMouseLeave:I=>{const U=I.currentTarget.parentNode.querySelector(".logout-tooltip");U&&U.remove()},children:s.jsx("span",{className:"user-info__logout-icon",children:"⎋"})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"nickname",className:"form-label",children:"暱稱"}),s.jsxs("div",{className:"nickname-input-group",children:[s.jsx("input",{id:"nickname",name:"nickname",type:"text",value:(c==null?void 0:c.nickname)||"",onChange:Rt,placeholder:"請輸入暱稱",className:"form-input",maxLength:"16"}),s.jsx("button",{type:"button",onClick:et,className:"generate-nickname-btn",children:"生成暱稱"})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"gender",className:"form-label",children:"性別"}),s.jsxs("select",{id:"gender",name:"gender",value:(c==null?void 0:c.gender)||"",onChange:me,className:"form-input",required:!0,children:[s.jsx("option",{value:"",children:"請選擇性別"}),s.jsx("option",{value:"male",children:"男性"}),s.jsx("option",{value:"female",children:"女性"})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"age",className:"form-label",children:"年齡"}),s.jsx("input",{id:"age",name:"age",type:"number",value:(c==null?void 0:c.age)||"",onChange:me,placeholder:"年齡",className:"form-input",required:!0,min:"0",step:"1"})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"height",className:"form-label",children:"身高 (cm)"}),s.jsx("input",{id:"height",name:"height",type:"number",value:(c==null?void 0:c.height)||"",onChange:me,placeholder:"身高 (cm)",className:"form-input",required:!0,min:"0",step:"0.1"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"weight",className:"form-label",children:"體重 (kg)"}),s.jsx("input",{id:"weight",name:"weight",type:"number",value:(c==null?void 0:c.weight)||"",onChange:me,placeholder:"體重 (kg)",className:"form-input",required:!0,min:"0",step:"0.1"})]})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{className:"section-title",children:"🏆 天梯排行榜設置"}),s.jsx("div",{className:"privacy-options",children:s.jsxs("label",{className:"privacy-option",children:[s.jsx("input",{type:"checkbox",checked:c.isAnonymousInLadder===!0,onChange:I=>d(U=>({...U,isAnonymousInLadder:I.target.checked}))}),s.jsxs("div",{className:"privacy-option-content",children:[s.jsx("span",{className:"privacy-option-title",children:"匿名參與天梯排名"}),s.jsx("span",{className:"privacy-option-desc",children:"勾選後將隱藏您的暱稱和頭像，以匿名方式顯示在排行榜中"})]})]})}),s.jsxs("div",{className:"training-info-section",children:[s.jsx("h4",{className:"training-info-title",children:"💪 訓練背景（選填）"}),s.jsx("p",{className:"training-info-desc",children:"分享您的訓練背景，激勵其他健身愛好者！"}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"profession",className:"form-label",children:"職業"}),s.jsx("input",{id:"profession",name:"profession",type:"text",value:(c==null?void 0:c.profession)||"",onChange:me,placeholder:"例如：工程師、學生、教師...",className:"form-input",maxLength:"100"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"weeklyTrainingHours",className:"form-label",children:"每周訓練時數"}),s.jsx("input",{id:"weeklyTrainingHours",name:"weeklyTrainingHours",type:"number",value:(c==null?void 0:c.weeklyTrainingHours)||"",onChange:me,placeholder:"小時",className:"form-input",min:"0",max:"168",step:"0.5"})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"trainingYears",className:"form-label",children:"訓練年資"}),s.jsx("input",{id:"trainingYears",name:"trainingYears",type:"number",value:(c==null?void 0:c.trainingYears)||"",onChange:me,placeholder:"年",className:"form-input",min:"0",max:"50",step:"0.5"})]})]})]}),s.jsx("div",{className:"form-actions",children:s.jsx("button",{type:"submit",className:"submit-btn",disabled:j,children:j?"儲存中...":"儲存資料"})})]})})]}),s.jsx("div",{id:"radar-section",className:"radar-section",ref:H,children:s.jsxs("div",{className:"radar-card",children:[s.jsx("div",{className:"corner-decoration top-left"}),s.jsx("div",{className:"corner-decoration top-right"}),s.jsx("div",{className:"corner-decoration bottom-left"}),s.jsx("div",{className:"corner-decoration bottom-right"}),s.jsx("h2",{className:"radar-title",children:"表現總覽"}),j?s.jsxs("div",{className:"loading-container",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("p",{children:"正在載入數據..."})]}):s.jsx("div",{className:"radar-chart-container",children:s.jsx(ur,{width:"100%",height:400,children:s.jsxs(cm,{data:G,children:[s.jsx(om,{gridType:"polygon",stroke:"rgba(129, 216, 208, 0.25)",strokeWidth:2,strokeDasharray:"4 4"}),s.jsx(um,{dataKey:"name",tick:s.jsx(ie,{}),axisLine:!1}),s.jsx(dm,{angle:90,domain:[0,100],tickCount:5,tick:{fontSize:12,fill:"#2d3748",fontWeight:600},axisLine:!1}),s.jsx(fm,{name:"您的表現",dataKey:"value",stroke:"#81D8D0",fill:"url(#tiffanyGradient)",fillOpacity:.8,strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("defs",{children:s.jsxs("linearGradient",{id:"tiffanyGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"#81D8D0",stopOpacity:.9}),s.jsx("stop",{offset:"50%",stopColor:"#5F9EA0",stopOpacity:.7}),s.jsx("stop",{offset:"100%",stopColor:"#81D8D0",stopOpacity:.6})]})})]})})}),!j&&s.jsxs("div",{className:"score-section",children:[Ie>0&&s.jsxs("div",{className:"average-score-display",children:[s.jsxs("p",{className:"average-score",children:["⭐ 戰鬥力"," ",s.jsx("span",{className:"score-value-large",children:Ie})]}),rt.isFullyCompleted&&s.jsxs("div",{className:"ladder-info",children:[s.jsxs("p",{className:"ladder-rank",children:["🏆 天梯排名:"," ",s.jsx("span",{className:"rank-value",children:be||"未上榜"})]}),Le>0&&s.jsxs("p",{className:"submitted-score",children:["已提交分數:"," ",s.jsx("span",{className:"score-value",children:Le})]}),De>0&&De!==Le&&s.jsxs("p",{className:"current-score",children:["當前分數:"," ",s.jsx("span",{className:"score-value",children:De}),s.jsx("span",{className:"score-note",children:"（需提交更新）"})]})]})]}),s.jsxs("div",{className:"action-buttons-section",children:[Ie>0&&s.jsxs("button",{onClick:qt,className:"action-btn save-results-btn",disabled:j,children:[s.jsx("span",{className:"btn-icon",children:"💾"}),s.jsx("span",{className:"btn-text",children:"儲存評測結果"})]}),rt.isFullyCompleted&&s.jsxs("button",{onClick:ne,className:"action-btn submit-ladder-btn",disabled:j,children:[s.jsx("span",{className:"btn-icon",children:"🏆"}),s.jsx("span",{className:"btn-text",children:Le>0?"更新天梯分數":"提交到天梯"})]})]}),s.jsx("div",{className:"ladder-info-card",children:s.jsx("p",{className:"ladder-info-text",children:rt.isFullyCompleted?"完成五項評測，可參與天梯排名":`完成 ${rt.completedCount}/5 項評測後可參與天梯排名`})})]})]})}),s.jsxs("div",{className:"test-buttons-section",ref:W,children:[s.jsx("h3",{className:"section-title",children:"開始評測"}),s.jsxs("div",{className:"test-buttons-grid",children:[s.jsxs("button",{onClick:()=>L("/strength"),className:"test-btn strength-btn",children:[s.jsx("span",{className:"test-icon",children:"💪"}),s.jsx("span",{className:"test-label",children:"力量評測"})]}),s.jsxs("button",{onClick:()=>L("/explosive-power"),className:"test-btn explosive-btn",children:[s.jsx("span",{className:"test-icon",children:"⚡"}),s.jsx("span",{className:"test-label",children:"爆發力測試"})]}),s.jsxs("button",{onClick:()=>L("/cardio"),className:"test-btn cardio-btn",children:[s.jsx("span",{className:"test-icon",children:"❤️"}),s.jsx("span",{className:"test-label",children:"心肺耐力測試"})]}),s.jsxs("button",{onClick:()=>L("/muscle-mass"),className:"test-btn muscle-btn",children:[s.jsx("span",{className:"test-icon",children:"🥩"}),s.jsx("span",{className:"test-label",children:"骨骼肌肉量"})]}),s.jsxs("button",{onClick:()=>L("/body-fat"),className:"test-btn bodyfat-btn",children:[s.jsx("span",{className:"test-icon",children:"📊"}),s.jsx("span",{className:"test-label",children:"體脂肪率與FFMI"})]})]})]}),x.isOpen&&s.jsx(lm,{isOpen:x.isOpen,onConfirm:F,onCancel:le,remainingCount:x.remainingCount})]})}Im.propTypes={testData:Oe.shape({distance:Oe.number,score:Oe.number,squat:Oe.number,averageScore:Oe.number,jumpHeight:Oe.number,finalScore:Oe.number,smm:Oe.number,bodyFat:Oe.number,ffmiScore:Oe.number}),onLogout:Oe.func.isRequired,clearTestData:Oe.func.isRequired};const Qv={50:{Beginner:24,Novice:38,Intermediate:57,Advanced:79,Elite:103},55:{Beginner:29,Novice:45,Intermediate:64,Advanced:87,Elite:113},60:{Beginner:34,Novice:51,Intermediate:72,Advanced:96,Elite:123},65:{Beginner:39,Novice:57,Intermediate:79,Advanced:104,Elite:132},70:{Beginner:44,Novice:62,Intermediate:85,Advanced:112,Elite:141},75:{Beginner:49,Novice:68,Intermediate:92,Advanced:119,Elite:149},80:{Beginner:53,Novice:74,Intermediate:98,Advanced:127,Elite:157},85:{Beginner:58,Novice:79,Intermediate:105,Advanced:134,Elite:165},90:{Beginner:62,Novice:84,Intermediate:111,Advanced:141,Elite:172},95:{Beginner:67,Novice:89,Intermediate:116,Advanced:147,Elite:180},100:{Beginner:71,Novice:94,Intermediate:122,Advanced:153,Elite:187},105:{Beginner:75,Novice:99,Intermediate:128,Advanced:160,Elite:194},110:{Beginner:80,Novice:104,Intermediate:133,Advanced:166,Elite:200},115:{Beginner:84,Novice:109,Intermediate:138,Advanced:172,Elite:207},120:{Beginner:88,Novice:113,Intermediate:143,Advanced:177,Elite:213},125:{Beginner:92,Novice:118,Intermediate:148,Advanced:183,Elite:219},130:{Beginner:95,Novice:122,Intermediate:153,Advanced:188,Elite:225},135:{Beginner:99,Novice:126,Intermediate:158,Advanced:194,Elite:231},140:{Beginner:103,Novice:130,Intermediate:163,Advanced:199,Elite:236}},Kv={40:{Beginner:8,Novice:18,Intermediate:32,Advanced:50,Elite:70},45:{Beginner:10,Novice:21,Intermediate:36,Advanced:55,Elite:76},50:{Beginner:12,Novice:24,Intermediate:40,Advanced:59,Elite:82},55:{Beginner:15,Novice:27,Intermediate:43,Advanced:64,Elite:87},60:{Beginner:17,Novice:29,Intermediate:47,Advanced:68,Elite:92},65:{Beginner:19,Novice:32,Intermediate:50,Advanced:72,Elite:96},70:{Beginner:20,Novice:34,Intermediate:53,Advanced:75,Elite:101},75:{Beginner:22,Novice:37,Intermediate:56,Advanced:79,Elite:105},80:{Beginner:24,Novice:39,Intermediate:59,Advanced:82,Elite:109},85:{Beginner:26,Novice:41,Intermediate:62,Advanced:86,Elite:112},90:{Beginner:28,Novice:44,Intermediate:64,Advanced:89,Elite:116},95:{Beginner:29,Novice:46,Intermediate:67,Advanced:92,Elite:119},100:{Beginner:31,Novice:48,Intermediate:69,Advanced:95,Elite:123},105:{Beginner:33,Novice:50,Intermediate:72,Advanced:98,Elite:126},110:{Beginner:34,Novice:52,Intermediate:74,Advanced:100,Elite:129},115:{Beginner:36,Novice:54,Intermediate:76,Advanced:103,Elite:132},120:{Beginner:37,Novice:56,Intermediate:79,Advanced:106,Elite:135}},Zv={50:{Beginner:33,Novice:52,Intermediate:76,Advanced:104,Elite:136},55:{Beginner:40,Novice:60,Intermediate:86,Advanced:116,Elite:149},60:{Beginner:47,Novice:68,Intermediate:95,Advanced:127,Elite:161},65:{Beginner:53,Novice:76,Intermediate:104,Advanced:137,Elite:173},70:{Beginner:59,Novice:83,Intermediate:113,Advanced:147,Elite:184},75:{Beginner:66,Novice:91,Intermediate:122,Advanced:157,Elite:195},80:{Beginner:72,Novice:98,Intermediate:130,Advanced:166,Elite:205},85:{Beginner:78,Novice:105,Intermediate:138,Advanced:175,Elite:215},90:{Beginner:83,Novice:112,Intermediate:146,Advanced:184,Elite:225},95:{Beginner:89,Novice:118,Intermediate:153,Advanced:192,Elite:234},100:{Beginner:95,Novice:125,Intermediate:160,Advanced:201,Elite:243},105:{Beginner:100,Novice:131,Intermediate:168,Advanced:209,Elite:252},110:{Beginner:106,Novice:137,Intermediate:174,Advanced:216,Elite:260},115:{Beginner:111,Novice:143,Intermediate:181,Advanced:224,Elite:269},120:{Beginner:116,Novice:149,Intermediate:188,Advanced:231,Elite:277},125:{Beginner:121,Novice:155,Intermediate:194,Advanced:238,Elite:284},130:{Beginner:126,Novice:160,Intermediate:201,Advanced:245,Elite:292},135:{Beginner:131,Novice:166,Intermediate:207,Advanced:252,Elite:299},140:{Beginner:136,Novice:171,Intermediate:213,Advanced:259,Elite:307}},$v={40:{Beginner:17,Novice:31,Intermediate:51,Advanced:75,Elite:101},45:{Beginner:20,Novice:36,Intermediate:56,Advanced:81,Elite:109},50:{Beginner:23,Novice:39,Intermediate:61,Advanced:87,Elite:115},55:{Beginner:26,Novice:43,Intermediate:65,Advanced:92,Elite:122},60:{Beginner:29,Novice:47,Intermediate:70,Advanced:97,Elite:128},65:{Beginner:32,Novice:50,Intermediate:74,Advanced:102,Elite:133},70:{Beginner:34,Novice:53,Intermediate:78,Advanced:106,Elite:138},75:{Beginner:37,Novice:56,Intermediate:81,Advanced:111,Elite:143},80:{Beginner:39,Novice:59,Intermediate:85,Advanced:115,Elite:148},85:{Beginner:41,Novice:62,Intermediate:88,Advanced:119,Elite:152},90:{Beginner:44,Novice:65,Intermediate:91,Advanced:123,Elite:157},95:{Beginner:46,Novice:68,Intermediate:95,Advanced:126,Elite:161},100:{Beginner:48,Novice:70,Intermediate:98,Advanced:130,Elite:165},105:{Beginner:50,Novice:73,Intermediate:101,Advanced:133,Elite:169},110:{Beginner:52,Novice:75,Intermediate:103,Advanced:136,Elite:172},115:{Beginner:54,Novice:77,Intermediate:106,Advanced:140,Elite:176},120:{Beginner:56,Novice:80,Intermediate:109,Advanced:143,Elite:179}},Jv={50:{Beginner:44,Novice:65,Intermediate:93,Advanced:125,Elite:160},55:{Beginner:51,Novice:74,Intermediate:103,Advanced:137,Elite:174},60:{Beginner:58,Novice:83,Intermediate:114,Advanced:149,Elite:187},65:{Beginner:66,Novice:92,Intermediate:124,Advanced:160,Elite:200},70:{Beginner:73,Novice:100,Intermediate:133,Advanced:171,Elite:212},75:{Beginner:79,Novice:108,Intermediate:142,Advanced:182,Elite:224},80:{Beginner:86,Novice:116,Intermediate:151,Advanced:192,Elite:235},85:{Beginner:93,Novice:123,Intermediate:160,Advanced:201,Elite:245},90:{Beginner:99,Novice:131,Intermediate:168,Advanced:211,Elite:256},95:{Beginner:105,Novice:138,Intermediate:176,Advanced:220,Elite:266},100:{Beginner:111,Novice:145,Intermediate:184,Advanced:228,Elite:275},105:{Beginner:117,Novice:151,Intermediate:192,Advanced:237,Elite:284},110:{Beginner:123,Novice:158,Intermediate:199,Advanced:245,Elite:293},115:{Beginner:129,Novice:164,Intermediate:206,Advanced:253,Elite:302},120:{Beginner:134,Novice:171,Intermediate:213,Advanced:261,Elite:311},125:{Beginner:140,Novice:177,Intermediate:220,Advanced:268,Elite:319},130:{Beginner:145,Novice:183,Intermediate:227,Advanced:276,Elite:327},135:{Beginner:150,Novice:188,Intermediate:233,Advanced:283,Elite:335},140:{Beginner:155,Novice:194,Intermediate:240,Advanced:290,Elite:342}},Pv={40:{Beginner:24,Novice:40,Intermediate:62,Advanced:89,Elite:118},45:{Beginner:27,Novice:45,Intermediate:68,Advanced:95,Elite:126},50:{Beginner:31,Novice:49,Intermediate:73,Advanced:102,Elite:133},55:{Beginner:34,Novice:53,Intermediate:78,Advanced:107,Elite:140},60:{Beginner:37,Novice:57,Intermediate:83,Advanced:113,Elite:146},65:{Beginner:40,Novice:61,Intermediate:87,Advanced:118,Elite:152},70:{Beginner:43,Novice:64,Intermediate:91,Advanced:123,Elite:157},75:{Beginner:45,Novice:67,Intermediate:95,Advanced:127,Elite:163},80:{Beginner:48,Novice:71,Intermediate:99,Advanced:132,Elite:168},85:{Beginner:51,Novice:74,Intermediate:102,Advanced:136,Elite:172},90:{Beginner:53,Novice:77,Intermediate:106,Advanced:140,Elite:177},95:{Beginner:55,Novice:79,Intermediate:109,Advanced:144,Elite:181},100:{Beginner:58,Novice:82,Intermediate:112,Advanced:147,Elite:185},105:{Beginner:60,Novice:85,Intermediate:116,Advanced:151,Elite:189},110:{Beginner:62,Novice:87,Intermediate:119,Advanced:154,Elite:193},115:{Beginner:64,Novice:90,Intermediate:121,Advanced:158,Elite:197},120:{Beginner:66,Novice:92,Intermediate:124,Advanced:161,Elite:200}},Wv={50:{Beginner:25,Novice:39,Intermediate:58,Advanced:81,Elite:105},55:{Beginner:28,Novice:43,Intermediate:63,Advanced:86,Elite:112},60:{Beginner:31,Novice:47,Intermediate:67,Advanced:92,Elite:118},65:{Beginner:34,Novice:51,Intermediate:72,Advanced:97,Elite:124},70:{Beginner:37,Novice:54,Intermediate:76,Advanced:101,Elite:129},75:{Beginner:39,Novice:57,Intermediate:80,Advanced:106,Elite:134},80:{Beginner:42,Novice:61,Intermediate:84,Advanced:110,Elite:139},85:{Beginner:45,Novice:64,Intermediate:87,Advanced:115,Elite:144},90:{Beginner:47,Novice:67,Intermediate:91,Advanced:119,Elite:149},95:{Beginner:50,Novice:70,Intermediate:94,Advanced:122,Elite:153},100:{Beginner:52,Novice:72,Intermediate:97,Advanced:126,Elite:157},105:{Beginner:54,Novice:75,Intermediate:101,Advanced:130,Elite:161},110:{Beginner:57,Novice:78,Intermediate:104,Advanced:133,Elite:165},115:{Beginner:59,Novice:80,Intermediate:107,Advanced:137,Elite:169},120:{Beginner:61,Novice:83,Intermediate:110,Advanced:140,Elite:172},125:{Beginner:63,Novice:85,Intermediate:112,Advanced:143,Elite:176},130:{Beginner:65,Novice:88,Intermediate:115,Advanced:146,Elite:179},135:{Beginner:67,Novice:90,Intermediate:118,Advanced:149,Elite:183},140:{Beginner:69,Novice:92,Intermediate:120,Advanced:152,Elite:186}},ex={40:{Beginner:14,Novice:24,Intermediate:36,Advanced:52,Elite:70},45:{Beginner:15,Novice:25,Intermediate:39,Advanced:55,Elite:72},50:{Beginner:17,Novice:27,Intermediate:41,Advanced:57,Elite:75},55:{Beginner:18,Novice:28,Intermediate:42,Advanced:59,Elite:78},60:{Beginner:19,Novice:30,Intermediate:44,Advanced:61,Elite:80},65:{Beginner:20,Novice:31,Intermediate:46,Advanced:63,Elite:82},70:{Beginner:21,Novice:32,Intermediate:47,Advanced:65,Elite:84},75:{Beginner:22,Novice:34,Intermediate:49,Advanced:66,Elite:86},80:{Beginner:23,Novice:35,Intermediate:50,Advanced:68,Elite:88},85:{Beginner:24,Novice:36,Intermediate:51,Advanced:69,Elite:89},90:{Beginner:24,Novice:37,Intermediate:52,Advanced:71,Elite:91},95:{Beginner:25,Novice:38,Intermediate:54,Advanced:72,Elite:93},100:{Beginner:26,Novice:39,Intermediate:55,Advanced:74,Elite:94},105:{Beginner:27,Novice:40,Intermediate:56,Advanced:75,Elite:95},110:{Beginner:27,Novice:40,Intermediate:57,Advanced:76,Elite:97},115:{Beginner:28,Novice:41,Intermediate:58,Advanced:77,Elite:98},120:{Beginner:29,Novice:42,Intermediate:59,Advanced:78,Elite:99}},tx={15:{Beginner:40,Novice:59,Intermediate:84,Advanced:112,Elite:144},20:{Beginner:46,Novice:68,Intermediate:96,Advanced:129,Elite:164},25:{Beginner:47,Novice:70,Intermediate:98,Advanced:132,Elite:169},30:{Beginner:47,Novice:70,Intermediate:98,Advanced:132,Elite:169},35:{Beginner:47,Novice:70,Intermediate:98,Advanced:132,Elite:169},40:{Beginner:47,Novice:70,Intermediate:98,Advanced:132,Elite:169},45:{Beginner:44,Novice:66,Intermediate:93,Advanced:125,Elite:160},50:{Beginner:42,Novice:62,Intermediate:88,Advanced:118,Elite:150},55:{Beginner:39,Novice:57,Intermediate:81,Advanced:109,Elite:139},60:{Beginner:35,Novice:52,Intermediate:74,Advanced:99,Elite:127},65:{Beginner:32,Novice:47,Intermediate:67,Advanced:90,Elite:115},70:{Beginner:29,Novice:42,Intermediate:60,Advanced:80,Elite:103},75:{Beginner:26,Novice:38,Intermediate:54,Advanced:72,Elite:92},80:{Beginner:23,Novice:34,Intermediate:48,Advanced:64,Elite:82},85:{Beginner:20,Novice:30,Intermediate:43,Advanced:58,Elite:74},90:{Beginner:18,Novice:27,Intermediate:39,Advanced:52,Elite:66}},nx={15:{Beginner:15,Novice:27,Intermediate:43,Advanced:63,Elite:86},20:{Beginner:17,Novice:31,Intermediate:49,Advanced:72,Elite:98},25:{Beginner:17,Novice:31,Intermediate:51,Advanced:74,Elite:101},30:{Beginner:17,Novice:31,Intermediate:51,Advanced:74,Elite:101},35:{Beginner:17,Novice:31,Intermediate:51,Advanced:74,Elite:101},40:{Beginner:17,Novice:31,Intermediate:51,Advanced:74,Elite:101},45:{Beginner:16,Novice:30,Intermediate:48,Advanced:70,Elite:96},50:{Beginner:15,Novice:28,Intermediate:45,Advanced:66,Elite:90},55:{Beginner:14,Novice:26,Intermediate:42,Advanced:61,Elite:83},60:{Beginner:13,Novice:24,Intermediate:38,Advanced:56,Elite:76},65:{Beginner:12,Novice:21,Intermediate:34,Advanced:50,Elite:69},70:{Beginner:11,Novice:19,Intermediate:31,Advanced:45,Elite:62},75:{Beginner:9,Novice:17,Intermediate:28,Advanced:40,Elite:55},80:{Beginner:8,Novice:15,Intermediate:25,Advanced:36,Elite:49},85:{Beginner:8,Novice:14,Intermediate:22,Advanced:32,Elite:44},90:{Beginner:7,Novice:12,Intermediate:20,Advanced:29,Elite:40}},ax={15:{Beginner:55,Novice:80,Intermediate:111,Advanced:147,Elite:187},20:{Beginner:62,Novice:91,Intermediate:127,Advanced:168,Elite:214},25:{Beginner:64,Novice:93,Intermediate:130,Advanced:173,Elite:219},30:{Beginner:64,Novice:93,Intermediate:130,Advanced:173,Elite:219},35:{Beginner:64,Novice:93,Intermediate:130,Advanced:173,Elite:219},40:{Beginner:64,Novice:93,Intermediate:130,Advanced:173,Elite:219},45:{Beginner:61,Novice:89,Intermediate:123,Advanced:164,Elite:208},50:{Beginner:57,Novice:83,Intermediate:116,Advanced:154,Elite:195},55:{Beginner:53,Novice:77,Intermediate:107,Advanced:142,Elite:180},60:{Beginner:48,Novice:70,Intermediate:98,Advanced:130,Elite:165},65:{Beginner:44,Novice:63,Intermediate:88,Advanced:117,Elite:149},70:{Beginner:39,Novice:57,Intermediate:79,Advanced:105,Elite:134},75:{Beginner:35,Novice:51,Intermediate:71,Advanced:94,Elite:119},80:{Beginner:31,Novice:46,Intermediate:63,Advanced:84,Elite:107},85:{Beginner:28,Novice:41,Intermediate:57,Advanced:75,Elite:96},90:{Beginner:25,Novice:37,Intermediate:51,Advanced:68,Elite:86}},sx={15:{Beginner:25,Novice:41,Intermediate:62,Advanced:88,Elite:116},20:{Beginner:29,Novice:47,Intermediate:71,Advanced:100,Elite:132},25:{Beginner:30,Novice:48,Intermediate:73,Advanced:103,Elite:136},30:{Beginner:30,Novice:48,Intermediate:73,Advanced:103,Elite:136},35:{Beginner:30,Novice:48,Intermediate:73,Advanced:103,Elite:136},40:{Beginner:30,Novice:48,Intermediate:73,Advanced:103,Elite:136},45:{Beginner:28,Novice:46,Intermediate:69,Advanced:97,Elite:129},50:{Beginner:26,Novice:43,Intermediate:65,Advanced:92,Elite:121},55:{Beginner:24,Novice:40,Intermediate:60,Advanced:85,Elite:112},60:{Beginner:22,Novice:36,Intermediate:55,Advanced:77,Elite:102},65:{Beginner:20,Novice:33,Intermediate:50,Advanced:70,Elite:92},70:{Beginner:18,Novice:29,Intermediate:44,Advanced:63,Elite:83},75:{Beginner:16,Novice:26,Intermediate:40,Advanced:56,Elite:74},80:{Beginner:14,Novice:24,Intermediate:36,Advanced:50,Elite:66},85:{Beginner:13,Novice:21,Intermediate:32,Advanced:45,Elite:59},90:{Beginner:12,Novice:19,Intermediate:29,Advanced:40,Elite:54}},lx={15:{Beginner:67,Novice:95,Intermediate:130,Advanced:170,Elite:213},20:{Beginner:76,Novice:109,Intermediate:148,Advanced:194,Elite:244},25:{Beginner:78,Novice:112,Intermediate:152,Advanced:200,Elite:250},30:{Beginner:78,Novice:112,Intermediate:152,Advanced:200,Elite:250},35:{Beginner:78,Novice:112,Intermediate:152,Advanced:200,Elite:250},40:{Beginner:78,Novice:112,Intermediate:152,Advanced:200,Elite:250},45:{Beginner:74,Novice:106,Intermediate:145,Advanced:189,Elite:238},50:{Beginner:70,Novice:99,Intermediate:136,Advanced:178,Elite:223},55:{Beginner:65,Novice:92,Intermediate:125,Advanced:164,Elite:206},60:{Beginner:59,Novice:84,Intermediate:115,Advanced:150,Elite:188},65:{Beginner:53,Novice:76,Intermediate:103,Advanced:135,Elite:170},70:{Beginner:48,Novice:68,Intermediate:93,Advanced:122,Elite:153},75:{Beginner:43,Novice:61,Intermediate:83,Advanced:109,Elite:136},80:{Beginner:38,Novice:54,Intermediate:74,Advanced:97,Elite:122},85:{Beginner:34,Novice:49,Intermediate:67,Advanced:87,Elite:109},90:{Beginner:31,Novice:44,Intermediate:60,Advanced:79,Elite:99}},ix={15:{Beginner:32,Novice:51,Intermediate:74,Advanced:102,Elite:133},20:{Beginner:37,Novice:58,Intermediate:85,Advanced:117,Elite:153},25:{Beginner:38,Novice:60,Intermediate:87,Advanced:120,Elite:157},30:{Beginner:38,Novice:60,Intermediate:87,Advanced:120,Elite:157},35:{Beginner:38,Novice:60,Intermediate:87,Advanced:120,Elite:157},40:{Beginner:38,Novice:60,Intermediate:87,Advanced:120,Elite:157},45:{Beginner:36,Novice:57,Intermediate:83,Advanced:114,Elite:149},50:{Beginner:34,Novice:53,Intermediate:78,Advanced:107,Elite:139},55:{Beginner:31,Novice:49,Intermediate:72,Advanced:99,Elite:129},60:{Beginner:29,Novice:45,Intermediate:66,Advanced:90,Elite:118},65:{Beginner:26,Novice:41,Intermediate:59,Advanced:82,Elite:106},70:{Beginner:23,Novice:36,Intermediate:53,Advanced:73,Elite:95},75:{Beginner:21,Novice:33,Intermediate:48,Advanced:66,Elite:85},80:{Beginner:19,Novice:29,Intermediate:43,Advanced:59,Elite:76},85:{Beginner:17,Novice:26,Intermediate:38,Advanced:53,Elite:68},90:{Beginner:15,Novice:23,Intermediate:34,Advanced:47,Elite:62}},rx={15:{Beginner:33,Novice:49,Intermediate:70,Advanced:94,Elite:120},20:{Beginner:37,Novice:56,Intermediate:80,Advanced:107,Elite:138},25:{Beginner:38,Novice:58,Intermediate:82,Advanced:110,Elite:141},30:{Beginner:38,Novice:58,Intermediate:82,Advanced:110,Elite:141},35:{Beginner:38,Novice:58,Intermediate:82,Advanced:110,Elite:141},40:{Beginner:38,Novice:58,Intermediate:82,Advanced:110,Elite:141},45:{Beginner:36,Novice:55,Intermediate:78,Advanced:105,Elite:134},50:{Beginner:34,Novice:51,Intermediate:73,Advanced:98,Elite:126},55:{Beginner:32,Novice:47,Intermediate:67,Advanced:91,Elite:117},60:{Beginner:29,Novice:43,Intermediate:61,Advanced:83,Elite:106},65:{Beginner:26,Novice:39,Intermediate:56,Advanced:75,Elite:96},70:{Beginner:23,Novice:35,Intermediate:50,Advanced:67,Elite:86},75:{Beginner:21,Novice:31,Intermediate:45,Advanced:60,Elite:77},80:{Beginner:19,Novice:28,Intermediate:40,Advanced:54,Elite:69},85:{Beginner:17,Novice:25,Intermediate:36,Advanced:48,Elite:62},90:{Beginner:15,Novice:23,Intermediate:32,Advanced:43,Elite:56}},cx={15:{Beginner:16,Novice:26,Intermediate:39,Advanced:54,Elite:71},20:{Beginner:19,Novice:30,Intermediate:45,Advanced:62,Elite:81},25:{Beginner:19,Novice:31,Intermediate:46,Advanced:64,Elite:83},30:{Beginner:19,Novice:31,Intermediate:46,Advanced:64,Elite:83},35:{Beginner:19,Novice:31,Intermediate:46,Advanced:64,Elite:83},40:{Beginner:19,Novice:31,Intermediate:46,Advanced:64,Elite:83},45:{Beginner:18,Novice:29,Intermediate:43,Advanced:60,Elite:79},50:{Beginner:17,Novice:27,Intermediate:41,Advanced:57,Elite:74},55:{Beginner:16,Novice:25,Intermediate:38,Advanced:52,Elite:69},60:{Beginner:15,Novice:23,Intermediate:34,Advanced:48,Elite:63},65:{Beginner:13,Novice:21,Intermediate:31,Advanced:43,Elite:57},70:{Beginner:12,Novice:19,Intermediate:28,Advanced:39,Elite:51},75:{Beginner:11,Novice:17,Intermediate:25,Advanced:35,Elite:45},80:{Beginner:9,Novice:15,Intermediate:22,Advanced:31,Elite:41},85:{Beginner:8,Novice:13,Intermediate:20,Advanced:28,Elite:36},90:{Beginner:8,Novice:12,Intermediate:18,Advanced:25,Elite:33}},ox={50:{Beginner:15,Novice:25,Intermediate:38,Advanced:53,Elite:71},55:{Beginner:18,Novice:29,Intermediate:42,Advanced:59,Elite:77},60:{Beginner:21,Novice:32,Intermediate:47,Advanced:64,Elite:84},65:{Beginner:24,Novice:36,Intermediate:52,Advanced:70,Elite:90},70:{Beginner:27,Novice:40,Intermediate:56,Advanced:75,Elite:95},75:{Beginner:30,Novice:43,Intermediate:60,Advanced:80,Elite:101},80:{Beginner:33,Novice:47,Intermediate:64,Advanced:84,Elite:106},85:{Beginner:36,Novice:50,Intermediate:68,Advanced:89,Elite:111},90:{Beginner:39,Novice:54,Intermediate:72,Advanced:93,Elite:116},95:{Beginner:41,Novice:57,Intermediate:76,Advanced:97,Elite:121},100:{Beginner:44,Novice:60,Intermediate:79,Advanced:102,Elite:125},105:{Beginner:47,Novice:63,Intermediate:83,Advanced:106,Elite:130},110:{Beginner:49,Novice:66,Intermediate:86,Advanced:109,Elite:134},115:{Beginner:52,Novice:69,Intermediate:90,Advanced:113,Elite:138},120:{Beginner:54,Novice:72,Intermediate:93,Advanced:117,Elite:142},125:{Beginner:57,Novice:75,Intermediate:96,Advanced:120,Elite:146},130:{Beginner:59,Novice:77,Intermediate:99,Advanced:124,Elite:150},135:{Beginner:61,Novice:80,Intermediate:102,Advanced:127,Elite:154},140:{Beginner:64,Novice:83,Intermediate:105,Advanced:131,Elite:157}},ux={15:{Beginner:25,Novice:38,Intermediate:55,Advanced:74,Elite:96},20:{Beginner:29,Novice:44,Intermediate:63,Advanced:85,Elite:109},25:{Beginner:30,Novice:45,Intermediate:64,Advanced:87,Elite:112},30:{Beginner:30,Novice:45,Intermediate:64,Advanced:87,Elite:112},35:{Beginner:30,Novice:45,Intermediate:64,Advanced:87,Elite:112},40:{Beginner:30,Novice:45,Intermediate:64,Advanced:87,Elite:112},45:{Beginner:28,Novice:43,Intermediate:61,Advanced:83,Elite:107},50:{Beginner:27,Novice:40,Intermediate:57,Advanced:78,Elite:100},55:{Beginner:25,Novice:37,Intermediate:53,Advanced:72,Elite:92},60:{Beginner:22,Novice:34,Intermediate:48,Advanced:66,Elite:84},65:{Beginner:20,Novice:31,Intermediate:44,Advanced:59,Elite:76},70:{Beginner:18,Novice:27,Intermediate:39,Advanced:53,Elite:68},75:{Beginner:16,Novice:25,Intermediate:35,Advanced:48,Elite:61},80:{Beginner:15,Novice:22,Intermediate:31,Advanced:43,Elite:55},85:{Beginner:13,Novice:20,Intermediate:28,Advanced:38,Elite:49},90:{Beginner:12,Novice:18,Intermediate:25,Advanced:34,Elite:44}},dx={40:{Beginner:7,Novice:14,Intermediate:23,Advanced:35,Elite:48},45:{Beginner:8,Novice:16,Intermediate:25,Advanced:38,Elite:52},50:{Beginner:10,Novice:17,Intermediate:28,Advanced:40,Elite:55},55:{Beginner:11,Novice:19,Intermediate:30,Advanced:43,Elite:58},60:{Beginner:12,Novice:21,Intermediate:32,Advanced:45,Elite:60},65:{Beginner:13,Novice:22,Intermediate:34,Advanced:48,Elite:63},70:{Beginner:15,Novice:24,Intermediate:35,Advanced:50,Elite:65},75:{Beginner:16,Novice:25,Intermediate:37,Advanced:52,Elite:68},80:{Beginner:17,Novice:26,Intermediate:39,Advanced:54,Elite:70},85:{Beginner:18,Novice:28,Intermediate:40,Advanced:55,Elite:72},90:{Beginner:19,Novice:29,Intermediate:42,Advanced:57,Elite:74},95:{Beginner:20,Novice:30,Intermediate:43,Advanced:59,Elite:76},100:{Beginner:21,Novice:31,Intermediate:45,Advanced:61,Elite:78},105:{Beginner:22,Novice:32,Intermediate:46,Advanced:62,Elite:80},110:{Beginner:23,Novice:34,Intermediate:47,Advanced:64,Elite:81},115:{Beginner:23,Novice:35,Intermediate:49,Advanced:65,Elite:83},120:{Beginner:24,Novice:36,Intermediate:50,Advanced:66,Elite:85}},fx={15:{Beginner:11,Novice:19,Intermediate:29,Advanced:41,Elite:55},20:{Beginner:12,Novice:21,Intermediate:33,Advanced:47,Elite:63},25:{Beginner:13,Novice:22,Intermediate:34,Advanced:48,Elite:65},30:{Beginner:13,Novice:22,Intermediate:34,Advanced:48,Elite:65},35:{Beginner:13,Novice:22,Intermediate:34,Advanced:48,Elite:65},40:{Beginner:13,Novice:22,Intermediate:34,Advanced:48,Elite:65},45:{Beginner:12,Novice:21,Intermediate:32,Advanced:46,Elite:62},50:{Beginner:11,Novice:19,Intermediate:30,Advanced:43,Elite:58},55:{Beginner:11,Novice:18,Intermediate:28,Advanced:40,Elite:53},60:{Beginner:10,Novice:16,Intermediate:25,Advanced:36,Elite:49},65:{Beginner:9,Novice:15,Intermediate:23,Advanced:33,Elite:44},70:{Beginner:8,Novice:13,Intermediate:21,Advanced:30,Elite:40},75:{Beginner:7,Novice:12,Intermediate:18,Advanced:26,Elite:35},80:{Beginner:6,Novice:11,Intermediate:16,Advanced:24,Elite:32},85:{Beginner:6,Novice:10,Intermediate:15,Advanced:21,Elite:28},90:{Beginner:5,Novice:9,Intermediate:13,Advanced:19,Elite:26}},hx={"10-12":{100:26,90:24,80:22,70:20,60:18,50:16,40:14,30:12,20:10,10:8,0:6},"13-17":{100:36,90:34,80:32,70:30,60:28,50:26,40:24,30:22,20:20,10:18,0:16},"18-30":{100:42,90:40,80:38,70:36,60:34,50:32,40:30,30:28,20:26,10:24,0:22},"31-40":{100:40,90:38,80:36,70:34,60:32,50:30,40:28,30:26,20:24,10:22,0:20},"41-50":{100:38,90:36,80:34,70:32,60:30,50:28,40:26,30:24,20:22,10:20,0:18},"51-60":{100:36,90:34,80:32,70:30,60:28,50:26,40:24,30:22,20:20,10:18,0:16},"61-70":{100:34,90:32,80:30,70:28,60:26,50:24,40:22,30:20,20:18,10:16,0:14},"71-80":{100:32,90:30,80:28,70:26,60:24,50:22,40:20,30:18,20:16,10:14,0:12}},mx={"10-12":{100:44,90:42,80:40,70:38,60:36,50:34,40:32,30:30,20:28,10:26,0:24},"13-17":{100:46,90:44,80:42,70:40,60:38,50:36,40:34,30:32,20:30,10:28,0:26},"18-30":{100:48,90:46,80:44,70:42,60:40,50:38,40:36,30:34,20:32,10:30,0:28},"31-40":{100:46,90:44,80:42,70:40,60:38,50:36,40:34,30:32,20:30,10:28,0:26},"41-50":{100:44,90:42,80:40,70:38,60:36,50:34,40:32,30:30,20:28,10:26,0:24},"51-60":{100:42,90:40,80:38,70:36,60:34,50:32,40:30,30:28,20:26,10:24,0:22},"61-70":{100:40,90:38,80:36,70:34,60:32,50:30,40:28,30:26,20:24,10:22,0:20},"71-80":{100:38,90:36,80:34,70:32,60:30,50:28,40:26,30:24,20:22,10:20,0:18}},gx={"10-12":{100:18,90:17,80:16,70:15,60:14,50:13,40:12,30:11,20:10,10:9,0:8},"13-17":{100:24,90:23,80:22,70:21,60:20,50:19,40:18,30:17,20:16,10:15,0:14},"18-30":{100:28,90:27,80:26,70:25,60:24,50:23,40:22,30:21,20:20,10:19,0:18},"31-40":{100:27,90:26,80:25,70:24,60:23,50:22,40:21,30:20,20:19,10:18,0:17},"41-50":{100:26,90:25,80:24,70:23,60:22,50:21,40:20,30:19,20:18,10:17,0:16},"51-60":{100:25,90:24,80:23,70:22,60:21,50:20,40:19,30:18,20:17,10:16,0:15},"61-70":{100:24,90:23,80:22,70:21,60:20,50:19,40:18,30:17,20:16,10:15,0:14},"71-80":{100:22,90:21,80:20,70:19,60:18,50:17,40:16,30:15,20:14,10:13,0:12}},px={"10-12":{100:38,90:36,80:34,70:32,60:30,50:28,40:26,30:24,20:22,10:20,0:18},"13-17":{100:40,90:38,80:36,70:34,60:32,50:30,40:28,30:26,20:24,10:22,0:20},"18-30":{100:42,90:40,80:38,70:36,60:34,50:32,40:30,30:28,20:26,10:24,0:22},"31-40":{100:40,90:38,80:36,70:34,60:32,50:30,40:28,30:26,20:24,10:22,0:20},"41-50":{100:38,90:36,80:34,70:32,60:30,50:28,40:26,30:24,20:22,10:20,0:18},"51-60":{100:36,90:34,80:32,70:30,60:28,50:26,40:24,30:22,20:20,10:18,0:16},"61-70":{100:34,90:32,80:30,70:28,60:26,50:24,40:22,30:20,20:18,10:16,0:14},"71-80":{100:32,90:30,80:28,70:26,60:24,50:22,40:20,30:18,20:16,10:14,0:12}},vx={"13-14":{100:2700,90:2400,80:2200,70:2100,60:2100},"15-16":{100:2800,90:2500,80:2300,70:2200,60:2200},"17-20":{100:3e3,90:2700,80:2500,70:2300,60:2300},"20-29":{100:2800,90:2400,80:2200,70:1600,60:1600},"30-39":{100:2700,90:2300,80:1900,70:1500,60:1500},"40-49":{100:2500,90:2100,80:1700,70:1400,60:1400},"50+":{100:2400,90:2e3,80:1600,70:1300,60:1300}},xx={"13-14":{100:2e3,90:1900,80:1600,70:1500,60:1500},"15-16":{100:2100,90:2e3,80:1700,70:1600,60:1600},"17-20":{100:2300,90:2100,80:1800,70:1700,60:1700},"20-29":{100:2700,90:2200,80:1800,70:1500,60:1500},"30-39":{100:2500,90:2e3,80:1700,70:1400,60:1400},"40-49":{100:2300,90:1900,80:1500,70:1200,60:1200},"50+":{100:2200,90:1700,80:1400,70:1100,60:1100}},yx={"12-15":{0:25,50:45,100:65},"16-20":{0:35,50:55,100:75},"21-30":{0:30,50:50,100:70},"31-40":{0:25,50:45,100:65},"41-50":{0:20,50:40,100:60},"51-60":{0:15,50:35,100:55},"61-70":{0:10,50:30,100:50},"71-80":{0:5,50:25,100:45}},bx={"12-15":{0:20,50:35,100:50},"16-20":{0:25,50:40,100:55},"21-30":{0:22,50:38,100:52},"31-40":{0:18,50:32,100:46},"41-50":{0:15,50:28,100:42},"51-60":{0:10,50:25,100:40},"61-70":{0:5,50:20,100:35},"71-80":{0:0,50:15,100:30}},Nx={"12-15":{0:150,50:200,100:250},"16-20":{0:180,50:230,100:280},"21-30":{0:170,50:220,100:270},"31-40":{0:150,50:200,100:250},"41-50":{0:130,50:180,100:230},"51-60":{0:110,50:160,100:210},"61-70":{0:90,50:140,100:190},"71-80":{0:70,50:120,100:170}},Sx={"12-15":{0:120,50:170,100:220},"16-20":{0:140,50:190,100:240},"21-30":{0:130,50:180,100:230},"31-40":{0:115,50:165,100:215},"41-50":{0:100,50:150,100:200},"51-60":{0:80,50:130,100:180},"61-70":{0:60,50:110,100:160},"71-80":{0:40,50:90,100:140}},jx={"12-15":{0:18,50:15,100:12},"16-20":{0:17,50:14,100:11},"21-30":{0:17,50:14,100:11},"31-40":{0:18,50:15,100:12},"41-50":{0:19,50:16,100:13},"51-60":{0:20,50:17,100:14},"61-70":{0:22,50:19,100:16},"71-80":{0:24,50:21,100:18}},Ax={"12-15":{0:19,50:16,100:13},"16-20":{0:18,50:15,100:12},"21-30":{0:18,50:15,100:12},"31-40":{0:19,50:16,100:13},"41-50":{0:20,50:17,100:14},"51-60":{0:21,50:18,100:15},"61-70":{0:23,50:20,100:17},"71-80":{0:25,50:22,100:19}};function Hm({onComplete:r,clearTestData:i}){var D,ie,Ne,Re,Ie,De,Le,rt,mt,Rt,et,qt,L,he,me,_e,I,U,J,te,ee,oe,je,Ce,ve,dt,Pe,Vl,Yl,Fl,Na,Sa,vn,ja,Fn,Xl,Bs,Ds,Ya,Xn,Ql,Cs,Ms,Fa,Xa,ks,Kl,un,gt,St,wn,Qa,Zl,$l,zs,Qn,Ka,Tn,_n,Kn;const{userData:u,setUserData:c}=on(),d=pn(),{gender:f,height:m,weight:g,age:v}=u,[y,S]=A.useState("exercises"),[j,T]=A.useState({weight:((Ne=(ie=(D=u.testInputs)==null?void 0:D.strength)==null?void 0:ie.benchPress)==null?void 0:Ne.weight)||"",reps:((De=(Ie=(Re=u.testInputs)==null?void 0:Re.strength)==null?void 0:Ie.benchPress)==null?void 0:De.reps)||"",max:((mt=(rt=(Le=u.testInputs)==null?void 0:Le.strength)==null?void 0:rt.benchPress)==null?void 0:mt.max)||null,score:((qt=(et=(Rt=u.testInputs)==null?void 0:Rt.strength)==null?void 0:et.benchPress)==null?void 0:qt.score)||null}),[_,B]=A.useState({weight:((me=(he=(L=u.testInputs)==null?void 0:L.strength)==null?void 0:he.squat)==null?void 0:me.weight)||"",reps:((U=(I=(_e=u.testInputs)==null?void 0:_e.strength)==null?void 0:I.squat)==null?void 0:U.reps)||"",max:((ee=(te=(J=u.testInputs)==null?void 0:J.strength)==null?void 0:te.squat)==null?void 0:ee.max)||null,score:((Ce=(je=(oe=u.testInputs)==null?void 0:oe.strength)==null?void 0:je.squat)==null?void 0:Ce.score)||null}),[z,ae]=A.useState({weight:((Pe=(dt=(ve=u.testInputs)==null?void 0:ve.strength)==null?void 0:dt.deadlift)==null?void 0:Pe.weight)||"",reps:((Fl=(Yl=(Vl=u.testInputs)==null?void 0:Vl.strength)==null?void 0:Yl.deadlift)==null?void 0:Fl.reps)||"",max:((vn=(Sa=(Na=u.testInputs)==null?void 0:Na.strength)==null?void 0:Sa.deadlift)==null?void 0:vn.max)||null,score:((Xl=(Fn=(ja=u.testInputs)==null?void 0:ja.strength)==null?void 0:Fn.deadlift)==null?void 0:Xl.score)||null}),[K,ue]=A.useState({weight:((Ya=(Ds=(Bs=u.testInputs)==null?void 0:Bs.strength)==null?void 0:Ds.latPulldown)==null?void 0:Ya.weight)||"",reps:((Cs=(Ql=(Xn=u.testInputs)==null?void 0:Xn.strength)==null?void 0:Ql.latPulldown)==null?void 0:Cs.reps)||"",max:((Xa=(Fa=(Ms=u.testInputs)==null?void 0:Ms.strength)==null?void 0:Fa.latPulldown)==null?void 0:Xa.max)||null,score:((un=(Kl=(ks=u.testInputs)==null?void 0:ks.strength)==null?void 0:Kl.latPulldown)==null?void 0:un.score)||null}),[H,W]=A.useState({weight:((wn=(St=(gt=u.testInputs)==null?void 0:gt.strength)==null?void 0:St.shoulderPress)==null?void 0:wn.weight)||"",reps:(($l=(Zl=(Qa=u.testInputs)==null?void 0:Qa.strength)==null?void 0:Zl.shoulderPress)==null?void 0:$l.reps)||"",max:((Ka=(Qn=(zs=u.testInputs)==null?void 0:zs.strength)==null?void 0:Qn.shoulderPress)==null?void 0:Ka.max)||null,score:((Kn=(_n=(Tn=u.testInputs)==null?void 0:Tn.strength)==null?void 0:_n.shoulderPress)==null?void 0:Kn.score)||null}),[X,q]=A.useState(!1),Z=A.useRef(null),se=A.useCallback(ge=>{const Ae=()=>{var ct,Ct;const Ge=((ct=u.testInputs)==null?void 0:ct.strength)||{},Ut=((Ct=ge.testInputs)==null?void 0:Ct.strength)||{};JSON.stringify(Ge)!==JSON.stringify(Ut)?(console.log("💾 測試輸入變化，更新用戶數據"),c(ge)):console.log("⏭️ 測試輸入無變化，跳過更新")};Z.current&&clearTimeout(Z.current),Z.current=setTimeout(Ae,3e3)},[c,u.testInputs]);A.useEffect(()=>{const ge={...u.testInputs,strength:{benchPress:{weight:j.weight,reps:j.reps,max:j.max,score:j.score},squat:{weight:_.weight,reps:_.reps,max:_.max,score:_.score},deadlift:{weight:z.weight,reps:z.reps,max:z.max,score:z.score},latPulldown:{weight:K.weight,reps:K.reps,max:K.max,score:K.score},shoulderPress:{weight:H.weight,reps:H.reps,max:H.max,score:H.score}}},Ae={...u,testInputs:ge};return se(Ae),()=>{Z.current&&clearTimeout(Z.current)}},[j,_,z,K,H,u,se]);const P=(ge,Ae)=>{const{Beginner:Ge,Novice:Ut,Intermediate:Xe,Advanced:ct,Elite:Ct}=Ae;return ge<Ge?0:ge>=Ct?100:ge>=ct?80+20*(ge-ct)/(Ct-ct):ge>=Xe?60+20*(ge-Xe)/(ct-Xe):ge>=Ut?40+20*(ge-Ut)/(Xe-Ut):ge>=Ge?20+20*(ge-Ge)/(Ut-Ge):0},re=A.useMemo(()=>{const ge=f==="male"||f==="男性";return{benchPress:{bodyweight:ge?Qv:Kv,age:ge?tx:nx},squat:{bodyweight:ge?Zv:$v,age:ge?ax:sx},deadlift:{bodyweight:ge?Jv:Pv,age:ge?lx:ix},latPulldown:{bodyweight:ge?Wv:ex,age:ge?rx:cx},shoulderPress:{bodyweight:ge?ox:dx,age:ge?ux:fx}}},[f]),ce=A.useCallback((ge,Ae,Ge,Ut)=>{if(!ge||!Ae)return alert("請輸入重量和次數！");const Xe=parseFloat(ge),ct=parseFloat(Ae),Ct=parseFloat(u.weight),dn=parseFloat(v);if(!Ct||!dn)return alert("請確保已輸入有效的體重和年齡！");if(ct>12){alert("可完成次數不得超過12次，請重新輸入！"),Ge(Jt=>({...Jt,reps:""}));return}const Zn=Xe/(1.0278-.0278*ct),Mt=re[Ut],xn=Object.keys(Mt.bodyweight).map(Number),Za=Object.keys(Mt.age).map(Number),fn=xn.reduce((Jt,xt)=>Math.abs(xt-Ct)<Math.abs(Jt-Ct)?xt:Jt),Ls=Za.reduce((Jt,xt)=>Math.abs(xt-dn)<Math.abs(Jt-dn)?xt:Jt),Jl=Mt.bodyweight[fn],$n=Mt.age[Ls],Is=P(Zn,Jl),Hs=P(Zn,$n),pr=((Is+Hs)/2).toFixed(2);Ge(Jt=>({...Jt,max:Zn.toFixed(2),score:pr}))},[re,u.weight,v]);A.useEffect(()=>{f&&u.weight&&v&&[{key:"benchPress",state:j,setState:T},{key:"squat",state:_,setState:B},{key:"deadlift",state:z,setState:ae},{key:"latPulldown",state:K,setState:ue},{key:"shoulderPress",state:H,setState:W}].forEach(({key:Ae,state:Ge,setState:Ut})=>{Ge.weight&&Ge.reps&&!Ge.score&&ce(Ge.weight,Ge.reps,Ut,Ae)})},[f,u.weight,v,j,_,z,K,H,ce]);const be=(ge,Ae)=>{const Ge=Ae==="男性"||Ae.toLowerCase()==="male"?"male":"female";return ge>=90?Ge==="male"?"頂尖表現！你已達建力、舉重專項運動員水平！接受掌聲吧！":"我願稱你為神力女超人!":ge>=80?Ge==="male"?"萬里挑一！你已達到職業運動員水平，繼續稱霸！":"太驚艷了！你應該是朋友圈裡最強的吧？超棒的！":ge>=70?Ge==="male"?"超越常人！許多國手的力量指標也落在這，相當厲害!":"真的很傑出！表現超棒，繼續保持哦！":ge>=60?Ge==="male"?"很強！業餘運動愛好者中的佼佼者，再拼一把！":"表現超棒！超越大多數人，你很厲害！":ge>=50?Ge==="male"?"不錯的水準！訓練痕跡肉眼可見！":"很棒的水準！再努力一點，你會更好！":ge>=40?Ge==="male"?"已經有基礎了，繼續進步，一切大有可為!":"有規律良好的運動習慣了!再接再厲":Ge==="male"?"兄弟，該衝了！全力以赴，突破自己！":"親愛的，還有進步空間，繼續加油哦！"},ye=A.useMemo(()=>[{name:"臥推",value:parseFloat(j.score)||0},{name:"深蹲",value:parseFloat(_.score)||0},{name:"硬舉",value:parseFloat(z.score)||0},{name:"滑輪下拉",value:parseFloat(K.score)||0},{name:"站姿肩推",value:parseFloat(H.score)||0}],[j.score,_.score,z.score,K.score,H.score]),fe=[j.score,_.score,z.score,K.score,H.score].filter(ge=>ge!==null),$=fe.length>0?(fe.reduce((ge,Ae)=>ge+parseFloat(Ae),0)/fe.length).toFixed(2):null,x=async()=>{if(!$)return alert("請至少完成一項評測！");try{const ge={...u.scores,strength:parseFloat($)};await c(Ge=>({...Ge,scores:ge,ladderScore:Ge.ladderScore||0}));const Ae={squat:_.max?{weight:_.weight,reps:_.reps,max:_.max,score:_.score}:null,benchPress:j.max?{weight:j.weight,reps:j.reps,max:j.max,score:j.score}:null,deadlift:z.max?{weight:z.weight,reps:z.reps,max:z.max,score:z.score}:null,latPulldown:K.max?{weight:K.weight,reps:K.reps,max:K.max,score:K.score}:null,shoulderPress:H.max?{weight:H.weight,reps:H.reps,max:H.max,score:H.score}:null,averageScore:parseFloat($)};r&&r(Ae),setTimeout(()=>{d("/user-info",{state:{from:"/strength"}})},500)}catch(ge){console.error("提交失敗:",ge),alert("更新用戶數據或導航失敗，請稍後再試！")}},b=[{range:"90~100",description:"專業舉重、健力專項運動員、大力士水平，如魔山、輪子哥、阿諾、John Cena"},{range:"80~90",description:"職業運動員水平；職業格鬥、橄欖球運動員，如巨石強森、GSP(UFC次中量級世界冠軍)"},{range:"70~80",description:"國手水平、球類運動員，如大谷翔平、LBJ、傑森史塔森"},{range:"60~70",description:"業餘運動愛好者中的高手，如休傑克曼、克里斯漢斯沃、亨利卡維爾"},{range:"50~60",description:"中階運動愛好者"},{range:"40~50",description:"開始步入軌道"},{range:"40分以下",description:"初學者"}],k=[{level:"初階-運動習慣培養中",score:20,color:"#FF6B6B"},{level:"入門-業餘運動愛好者",score:40,color:"#FFA726"},{level:"中等-訓練痕跡肉眼可見",score:60,color:"#FFEE58"},{level:"高階-職業運動員等級",score:80,color:"#66BB6A"},{level:"精英-舉重、健力運動員",score:100,color:"#42A5F5"}],F=[{key:"benchPress",name:"平板臥推",state:j,setState:T},{key:"squat",name:"深蹲",state:_,setState:B},{key:"deadlift",name:"硬舉",state:z,setState:ae},{key:"latPulldown",name:"滑輪下拉",state:K,setState:ue},{key:"shoulderPress",name:"站姿肩推",state:H,setState:W}],[le,ne]=A.useState(new Set),G=ge=>{const{key:Ae,name:Ge,icon:Ut,state:Xe,setState:ct}=ge,Ct=Xe.score!==null,dn=le.has(Ae),Zn=()=>{const Mt=new Set(le);dn?Mt.delete(Ae):Mt.add(Ae),ne(Mt)};return s.jsxs("div",{className:`exercise-card ${Ct?"completed":""}`,children:[s.jsxs("div",{className:"exercise-header",onClick:Zn,children:[s.jsxs("div",{className:"exercise-header-left",children:[s.jsx("span",{className:"exercise-icon",children:Ut}),s.jsx("h3",{className:"exercise-name",children:Ge})]}),s.jsxs("div",{className:"exercise-header-right",children:[Ct&&s.jsx("span",{className:"score-badge",children:Xe.score}),s.jsx("span",{className:`expand-arrow ${dn?"expanded":""}`,children:dn?"▲":"▼"})]})]}),dn&&s.jsxs("div",{className:"exercise-content",children:[s.jsxs("div",{className:"exercise-inputs",children:[s.jsxs("div",{className:"input-group",children:[s.jsx("label",{htmlFor:`${Ae}Weight`,children:"重量 (kg)"}),s.jsx("input",{id:`${Ae}Weight`,type:"number",placeholder:"重量",value:Xe.weight,onChange:Mt=>ct(xn=>({...xn,weight:Mt.target.value})),className:"input-field"})]}),s.jsxs("div",{className:"input-group",children:[s.jsx("label",{htmlFor:`${Ae}Reps`,children:"次數"}),s.jsx("input",{id:`${Ae}Reps`,type:"number",placeholder:"次數",value:Xe.reps,onChange:Mt=>ct(xn=>({...xn,reps:Mt.target.value})),className:"input-field"})]}),s.jsx("button",{onClick:()=>ce(Xe.weight,Xe.reps,ct,Ae),className:"calculate-btn",disabled:!Xe.weight||!Xe.reps,children:"計算"})]}),Xe.max&&s.jsxs("div",{className:"exercise-result",children:[s.jsxs("p",{className:"max-strength",children:["最大力量: ",Xe.max," kg"]}),Xe.score&&s.jsxs("p",{className:"score-display",children:["分數: ",Xe.score]})]})]})]},Ae)};return s.jsxs("div",{className:"strength-container",children:[s.jsxs("div",{className:"strength-header",children:[s.jsx("h1",{className:"strength-title",children:"💪 力量評測"}),s.jsx("p",{className:"strength-safety-note",children:"挑戰重量時記得綁上腰帶和手套，注意安全喔"})]}),s.jsxs("div",{className:"tab-navigation",children:[s.jsx("button",{className:`tab-btn ${y==="exercises"?"active":""}`,onClick:()=>S("exercises"),children:"🏋️ 評測項目"}),s.jsx("button",{className:`tab-btn ${y==="standards"?"active":""}`,onClick:()=>S("standards"),children:"📋 評測標準"})]}),y==="exercises"&&s.jsxs("div",{className:"exercises-tab",children:[s.jsx("div",{className:"exercises-grid",children:F.map(G)}),$&&s.jsxs("div",{className:"results-section",children:[s.jsxs("div",{className:"radar-chart-card",children:[s.jsx("div",{className:"corner-decoration top-left"}),s.jsx("div",{className:"corner-decoration top-right"}),s.jsx("div",{className:"corner-decoration bottom-left"}),s.jsx("div",{className:"corner-decoration bottom-right"}),s.jsx("h3",{children:"📈 力量分佈圖"}),s.jsx(ur,{width:"100%",height:300,children:s.jsxs(cm,{data:ye,children:[s.jsx(om,{gridType:"polygon",stroke:"rgba(129, 216, 208, 0.25)",strokeWidth:2,strokeDasharray:"4 4"}),s.jsx(um,{dataKey:"name",tick:{fontSize:13,fill:"#2d3748",fontWeight:700}}),s.jsx(dm,{angle:90,domain:[0,100],tick:{fontSize:12,fill:"#2d3748",fontWeight:600}}),s.jsx(fm,{name:"分數",dataKey:"value",stroke:"#81D8D0",fill:"url(#strengthTiffanyGradient)",fillOpacity:.8,strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("defs",{children:s.jsxs("linearGradient",{id:"strengthTiffanyGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"#81D8D0",stopOpacity:.9}),s.jsx("stop",{offset:"50%",stopColor:"#5F9EA0",stopOpacity:.7}),s.jsx("stop",{offset:"100%",stopColor:"#81D8D0",stopOpacity:.6})]})})]})})]}),s.jsxs("div",{className:"score-breakdown-card",children:[s.jsx("h3",{children:"📊 分數詳情"}),s.jsx("div",{className:"score-breakdown",children:F.map(ge=>s.jsxs("div",{className:"score-item",children:[s.jsx("span",{className:"score-label",children:ge.name}),s.jsx("span",{className:"score-value",children:ge.state.score||"未測試"})]},ge.key))}),s.jsxs("div",{className:"average-score-display",children:[s.jsxs("p",{className:"average-score",children:["平均分數: ",$]}),s.jsx("p",{className:"average-comment",children:be($,f)})]})]})]})]}),y==="standards"&&s.jsxs("div",{className:"standards-tab",children:[s.jsxs("div",{className:"standards-content",children:[s.jsx("p",{children:"我們的評測標準基於 Strength Level 用戶提供的超過 1.34 億次舉重數據，涵蓋男女標準，適用於臥推、深蹲、硬舉、肩推等多項健身動作。"}),s.jsxs("p",{className:"source-link",children:["來源：",s.jsx("a",{href:"https://strengthlevel.com/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"https://strengthlevel.com/"})]})]}),s.jsxs("div",{className:"score-levels-table",children:[s.jsx("h3",{children:"分數等級"}),s.jsx("div",{className:"levels-container",children:k.map((ge,Ae)=>s.jsxs("div",{className:"level-item",children:[s.jsxs("div",{className:"level-header",children:[s.jsx("span",{className:"level-name",children:ge.level}),s.jsx("span",{className:"level-score",children:ge.score})]}),s.jsx("div",{className:"level-bar-container",children:s.jsx("div",{className:"level-bar",style:{width:`${ge.score}%`,background:`linear-gradient(to right, ${ge.color}dd, ${ge.color})`}})})]},Ae))})]}),s.jsxs("div",{className:"score-table",children:[s.jsx("h3",{children:"分數說明"}),s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"分數範圍"}),s.jsx("th",{children:"說明"})]})}),s.jsx("tbody",{children:b.map((ge,Ae)=>s.jsxs("tr",{children:[s.jsx("td",{children:ge.range}),s.jsx("td",{children:ge.description})]},Ae))})]})]})]}),s.jsx("div",{className:"submit-section",children:s.jsx("button",{onClick:x,className:"submit-btn",disabled:!$,children:$?"✅ 提交並返回總覽":"請至少完成一項評測"})})]})}Hm.propTypes={onComplete:Oe.func,clearTestData:Oe.func};function qm({onComplete:r,clearTestData:i}){var H,W;const{userData:u,setUserData:c,saveUserData:d}=on(),f=pn(),{age:m,gender:g}=u,[v,y]=A.useState(((W=(H=u.testInputs)==null?void 0:H.cardio)==null?void 0:W.distance)||""),[S,j]=A.useState(null),[T,_]=A.useState(!1);A.useEffect(()=>{var X;if(v){const q={...u.testInputs,cardio:{...(X=u.testInputs)==null?void 0:X.cardio,distance:v}};c(Z=>({...Z,testInputs:q}))}},[v]);const B=X=>{if(!X)return null;const q=parseInt(X);return q>=13&&q<=14?"13-14":q>=15&&q<=16?"15-16":q>=17&&q<=20?"17-20":q>=20&&q<=29?"20-29":q>=30&&q<=39?"30-39":q>=40&&q<=49?"40-49":q>=50?"50+":null},z=(X,q)=>{const Z=q[60],se=q[100];return X<=0?0:X<=Z?Math.round(X/Z*60*100)/100:X>=se?100:Math.round((60+(X-Z)/(se-Z)*40)*100)/100},ae=(X,q)=>{const Z=q==="男性"||q.toLowerCase()==="male"?"male":"female",se=Math.floor(X/10)*10;return{male:{0:"兄弟，該動起來了！全力衝刺吧！",10:"還不夠熱血！再加把勁，衝上去！",20:"起步了！再加速，展現你的實力！",30:"進步中！再拼一點，突破極限吧！",40:"不錯！再猛一點，超越自己！",50:"很棒了！再衝刺，成為王者吧！",60:"強者氣勢！再加速，稱霸全場！",70:"超強！熱血沸騰，繼續衝刺！",80:"頂尖表現！再拼，成為傳說！",90:"無敵了！你是真正的王者，保持！",100:"無敵了！你是真正的王者，保持！"},female:{0:"親愛的，別氣餒，慢慢進步哦！",10:"再努力一點，你會更好的，加油！",20:"小進步了！繼續加油，你很棒！",30:"進步了呢！再努力一點，會更好哦！",40:"很棒了！再加把勁，你會更棒的！",50:"表現很好！再努力一點，超棒的！",60:"好厲害！繼續保持，你很棒哦！",70:"真的很棒！保持下去，你最棒了！",80:"太厲害了！繼續努力，你超棒的！",90:"完美表現！超棒的你，繼續保持！",100:"完美表現！超棒的你，繼續保持！"}}[Z][se]||"加油！"},K=()=>{if(!v||!m||!g){alert("請確保已在用戶信息中輸入年齡和性別，並在此輸入跑步距離！");return}const X=parseFloat(v),q=B(m);if(!X||!q){alert("請輸入有效的跑步距離和年齡！");return}const P=((g==="男性"||g.toLowerCase()==="male"?"male":"female")==="male"?vx:xx)[q];if(!P){alert("無法找到對應的評測標準，請檢查年齡和性別！");return}const re=z(X,P);j(re),console.log("Cardio.js - 計算心肺耐力分數:",re,"距離:",X,"年齡段:",q)},ue=async()=>{if(!S){alert("請先計算心肺耐力分數！");return}const X=sessionStorage.getItem("guestMode")==="true";try{const q={...u.scores,cardio:parseFloat(S)},Z={...u,scores:q};c({...Z,ladderScore:u.ladderScore||0});const se={distance:parseFloat(v),score:parseFloat(S)};r&&typeof r=="function"&&r(se),setTimeout(()=>{f("/user-info",{state:{from:"/cardio"}})},100)}catch(q){console.error("提交失敗:",q),X||alert("更新用戶數據失敗，請稍後再試！"),setTimeout(()=>{f("/user-info",{state:{from:"/cardio"}})},100)}};return s.jsxs("div",{className:"cardio-container",children:[s.jsxs("div",{className:"input-section",children:[s.jsx("h1",{className:"text-2xl font-bold text-center mb-4",children:"心肺耐力測試"}),s.jsxs("p",{children:["年齡：",m||"未輸入"]}),s.jsxs("p",{children:["性別：",g||"未選擇"]}),s.jsxs("div",{className:"exercise-section",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Cooper 12 分鐘跑步測試"}),s.jsx("label",{htmlFor:"distance",className:"block text-sm font-medium text-gray-700",children:"跑步距離 (公尺)"}),s.jsx("input",{id:"distance",name:"distance",type:"number",placeholder:"跑步距離 (公尺)",value:v,onChange:X=>y(X.target.value),className:"input-field",required:!0}),s.jsx("button",{onClick:K,className:"calculate-btn",children:"計算"}),S!==null&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"score-display",children:["心肺耐力分數: ",S]}),s.jsx("p",{className:"score-display",children:ae(S,g)})]})]}),s.jsx("div",{className:"description-section",children:s.jsxs("div",{className:"description-card",children:[s.jsxs("div",{className:"description-header",onClick:()=>_(!T),children:[s.jsx("h2",{className:"text-lg font-semibold",children:"動作說明"}),s.jsx("span",{className:`arrow ${T?"expanded":""}`,children:T?"▲":"▼"})]}),T&&s.jsxs("div",{className:"description-content",children:[s.jsx("p",{className:"font-semibold",children:"Cooper Test 簡介"}),s.jsx("p",{children:"傳統心肺耐力測試需在實驗室以極限強度測量最大攝氧量（VO₂ Max），但難以普及。Kenneth H. Cooper 博士發現 12 分鐘跑步距離與 VO₂ Max 高度相關，於 1968 年設計 Cooper Test，廣泛應用於美軍體測，簡化測量並提升效率。測試以年齡、性別和跑步距離估算 VO₂ Max。"}),s.jsx("p",{className:"font-semibold mt-2",children:"測量方式"}),s.jsxs("ul",{className:"list-disc pl-5",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"地點"}),"：選擇田徑場或安全跑步環境，方便記錄距離和配速。"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"記錄"}),"：用圈數或運動手錶記錄 12 分鐘跑步距離。"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"熱身"}),"：跑前動態熱身 10-15 分鐘，避免受傷。"]})]}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"本 Cooper 測試標準表可在 Cooper Test Chart 找到，由 Carl Magnus Swahn 設計。"})]})]})})]}),s.jsx("div",{className:"button-group",children:s.jsx("button",{onClick:ue,className:"submit-btn",children:"提交並返回總覽"})})]})}qm.propTypes={onComplete:Oe.func,clearTestData:Oe.func};function Gm({onComplete:r,clearTestData:i}){var P,re,ce,be,ye,fe;const{userData:u,setUserData:c,saveUserData:d}=on(),f=pn(),{age:m,gender:g}=u,[v,y]=A.useState(((re=(P=u.testInputs)==null?void 0:P.power)==null?void 0:re.verticalJump)||""),[S,j]=A.useState(((be=(ce=u.testInputs)==null?void 0:ce.power)==null?void 0:be.standingLongJump)||""),[T,_]=A.useState(((fe=(ye=u.testInputs)==null?void 0:ye.power)==null?void 0:fe.sprint)||""),[B,z]=A.useState({verticalJumpScore:null,standingLongJumpScore:null,sprintScore:null,finalScore:null}),[ae,K]=A.useState(!1),[ue,H]=A.useState(!1);A.useEffect(()=>{const $={...u.testInputs,power:{verticalJump:v,standingLongJump:S,sprint:T}};c(x=>({...x,testInputs:$}))},[v,S,T]);const W=$=>{if(!$)return null;const x=parseInt($);return x>=12&&x<=15?"12-15":x>=16&&x<=20?"16-20":x>=21&&x<=30?"21-30":x>=31&&x<=40?"31-40":x>=41&&x<=50?"41-50":x>=51&&x<=60?"51-60":x>=61&&x<=70?"61-70":x>=71&&x<=80?"71-80":null},X=($,x)=>$<x[0]?0:$>=x[100]?100:$<x[50]?($-x[0])/(x[50]-x[0])*50:50+($-x[50])/(x[100]-x[50])*50,q=($,x)=>$>x[0]?0:$<=x[100]?100:$>x[50]?(x[0]-$)/(x[0]-x[50])*50:50+(x[50]-$)/(x[50]-x[100])*50,Z=()=>{if(!m||!g){alert("請確保已在用戶信息中輸入年齡和性別！");return}if(!v&&!S&&!T){alert("請至少輸入一項動作數據！");return}const $=W(m);if(!$){alert("請輸入有效的年齡！");return}const x=g==="男性"||g.toLowerCase()==="male"?"male":"female",b=x==="male"?yx:bx,k=x==="male"?Nx:Sx,F=x==="male"?jx:Ax,le=b[$],ne=k[$],G=F[$];if(!le||!ne||!G){alert("無法找到對應的評測標準，請檢查年齡和性別！");return}const D=v?parseFloat(v):null,ie=S?parseFloat(S):null,Ne=T?parseFloat(T):null,Re=D!==null?X(D,le):null,Ie=ie!==null?X(ie,ne):null,De=Ne!==null?q(Ne,G):null,Le=[Re,Ie,De].filter(mt=>mt!==null);if(Le.length===0){alert("請至少完成一項動作的測量！");return}const rt=(Le.reduce((mt,Rt)=>mt+Rt,0)/Le.length).toFixed(2);z({verticalJumpScore:Re!==null?Re.toFixed(2):null,standingLongJumpScore:Ie!==null?Ie.toFixed(2):null,sprintScore:De!==null?De.toFixed(2):null,finalScore:rt})},se=async()=>{if(!B.finalScore){alert("請先計算爆發力分數！");return}const $=sessionStorage.getItem("guestMode")==="true";try{const x={...u.scores,explosivePower:parseFloat(B.finalScore)},b={...u,scores:x};c({...b,ladderScore:u.ladderScore||0});const k={verticalJump:v||null,standingLongJump:S||null,sprint:T||null,finalScore:B.finalScore};r&&typeof r=="function"&&r(k),setTimeout(()=>{f("/user-info",{state:{from:"/explosive-power"}})},100)}catch(x){console.error("Power.js - 更新 UserContext 或導航失敗:",x),$||alert("更新用戶數據失敗，請稍後再試！"),setTimeout(()=>{f("/user-info",{state:{from:"/explosive-power"}})},100)}};return s.jsxs("div",{className:"power-container",children:[s.jsxs("div",{className:"input-section",children:[s.jsx("h1",{className:"text-2xl font-bold text-center mb-4",children:"爆發力測試"}),s.jsxs("p",{children:["年齡：",m||"未輸入"]}),s.jsxs("p",{children:["性別：",g||"未選擇"]}),s.jsxs("div",{className:"exercise-section",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"爆發力動作"}),s.jsx("label",{htmlFor:"verticalJump",className:"block text-sm font-medium text-gray-700",children:"垂直彈跳 (公分)"}),s.jsx("input",{id:"verticalJump",name:"verticalJump",type:"number",placeholder:"垂直彈跳 (公分)",value:v,onChange:$=>y($.target.value),className:"input-field"}),s.jsx("label",{htmlFor:"standingLongJump",className:"block text-sm font-medium text-gray-700",children:"立定跳遠 (公分)"}),s.jsx("input",{id:"standingLongJump",name:"standingLongJump",type:"number",placeholder:"立定跳遠 (公分)",value:S,onChange:$=>j($.target.value),className:"input-field"}),s.jsx("label",{htmlFor:"sprint",className:"block text-sm font-medium text-gray-700",children:"100公尺衝刺跑 (秒)"}),s.jsx("input",{id:"sprint",name:"sprint",type:"number",placeholder:"100公尺衝刺跑 (秒)",value:T,onChange:$=>_($.target.value),className:"input-field"}),s.jsx("button",{onClick:Z,className:"calculate-btn",children:"計算"}),B.finalScore&&s.jsxs(s.Fragment,{children:[B.verticalJumpScore&&s.jsxs("p",{className:"score-display",children:["垂直彈跳分數: ",B.verticalJumpScore]}),B.standingLongJumpScore&&s.jsxs("p",{className:"score-display",children:["立定跳遠分數: ",B.standingLongJumpScore]}),B.sprintScore&&s.jsxs("p",{className:"score-display",children:["100公尺衝刺跑分數: ",B.sprintScore]}),s.jsxs("p",{className:"score-display",children:["最終分數: ",B.finalScore]})]})]}),s.jsxs("div",{className:"description-section",children:[s.jsxs("div",{className:"description-card",children:[s.jsxs("div",{className:"description-header",onClick:()=>K(!ae),children:[s.jsx("h2",{className:"text-lg font-semibold",children:"動作說明"}),s.jsx("span",{className:`arrow ${ae?"expanded":""}`,children:ae?"▲":"▼"})]}),ae&&s.jsxs("div",{className:"description-content",children:[s.jsx("p",{className:"exercise-title",children:"垂直彈跳"}),s.jsx("p",{className:"exercise-description",children:"測量垂直跳躍高度，反映下肢爆發力。站立時伸手觸及最高點，然後全力跳起觸及最高點，兩者高度差即為垂直彈跳高度（單位：公分）。"}),s.jsx("p",{className:"exercise-title mt-2",children:"立定跳遠"}),s.jsx("p",{className:"exercise-description",children:"測量站立跳躍距離，反映下肢力量和協調性。雙腳站立於起跳線，無助跑直接跳出，測量起跳線(腳尖)到著地點(腳跟)最近處的距離（單位：公分）。"}),s.jsx("p",{className:"exercise-title mt-2",children:"100公尺衝刺跑"}),s.jsx("p",{className:"exercise-description",children:"測量短距離衝刺速度，反映全身爆發力和速度。從靜止起跑，盡全力衝刺100公尺，記錄完成時間（單位：秒）。"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"建議：測量前充分熱身，避免受傷。使用專業設備或在標準場地進行測量以確保準確性。"})]})]}),s.jsxs("div",{className:"standards-card",children:[s.jsxs("div",{className:"standards-header",onClick:()=>H(!ue),children:[s.jsx("h2",{className:"text-lg font-semibold",children:"檢測標準說明"}),s.jsx("span",{className:`arrow ${ue?"expanded":""}`,children:ue?"▲":"▼"})]}),ue&&s.jsxs("div",{className:"standards-content",children:[s.jsx("p",{className:"font-semibold",children:"來源："}),s.jsx("p",{children:"參考教育部體育署體適能網站、美國運動醫學會（ACSM）、世界田徑協會及全國中等學校運動會田徑標準。"}),s.jsx("p",{className:"font-semibold mt-2",children:"依據："}),s.jsxs("ul",{className:"list-disc pl-5",children:[s.jsx("li",{children:"原地垂直彈跳：ACSM標準與青少年數據。"}),s.jsx("li",{children:"立定跳遠：教育部常模與ACSM衰退研究。"}),s.jsx("li",{children:"100公尺衝刺跑：世界田徑與全國運動會標準。"})]}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"本測驗包含推測值：12-80歲全齡數據不全，依ACSM每10年下降10-15%、性別差異70-90%推估。"})]})]})]})]}),s.jsx("div",{className:"button-group",children:s.jsx("button",{onClick:se,className:"submit-btn",children:"提交並返回總覽"})})]})}Gm.propTypes={onComplete:Oe.func,clearTestData:Oe.func};function Vm({onComplete:r,clearTestData:i}){var H,W;const{userData:u,setUserData:c,saveUserData:d}=on(),f=pn(),{weight:m,age:g,gender:v}=u,[y,S]=A.useState(((W=(H=u.testInputs)==null?void 0:H.muscle)==null?void 0:W.smm)||""),[j,T]=A.useState({smmScore:null,smPercent:null,smPercentScore:null,finalScore:null});A.useEffect(()=>{var X;if(y){const q={...u.testInputs,muscle:{...(X=u.testInputs)==null?void 0:X.muscle,smm:y}};c(Z=>({...Z,testInputs:q}))}},[y]);const _=X=>{if(!X)return null;const q=parseInt(X);return q>=10&&q<=12?"10-12":q>=13&&q<=17?"13-17":q>=18&&q<=30?"18-30":q>=31&&q<=40?"31-40":q>=41&&q<=50?"41-50":q>=51&&q<=60?"51-60":q>=61&&q<=70?"61-70":q>=71&&q<=80?"71-80":null},B=(X,q,Z)=>{if(X>=q[100])return 100;if(X<=q[0])return 0;let se=0,P=100;for(let ye=10;ye<=100;ye+=10)if(X<q[ye]){P=ye,se=ye-10;break}const re=q[se],ce=q[P];if(ce===re)return P;const be=se+(X-re)/(ce-re)*(P-se);return Math.round(be*100)/100},z=()=>{if(!m||!y||!g||!v){alert("請確保已在用戶信息中輸入體重、年齡和性別，並在此輸入骨骼肌肉量！");return}const X=parseFloat(m),q=parseFloat(y),Z=_(g);if(!X||!q||!Z){alert("請輸入有效的體重、骨骼肌肉量和年齡！");return}const se=(q/X*100).toFixed(2),P=v==="男性"||v.toLowerCase()==="male"?"male":"female",re=P==="male"?hx:gx,ce=P==="male"?mx:px,be=re[Z],ye=ce[Z];if(!be||!ye){alert("無法找到對應的評測標準，請檢查年齡和性別！");return}const fe=B(q,be),$=B(parseFloat(se),ye),x=((fe+$)/2).toFixed(2);T({smmScore:fe,smPercent:se,smPercentScore:$,finalScore:x})},ae=async()=>{if(!j.finalScore){alert("請先計算骨骼肌肉量分數！");return}const X=sessionStorage.getItem("guestMode")==="true";try{const q={...u.scores,muscleMass:parseFloat(j.finalScore)},Z={...u,scores:q};c({...Z,ladderScore:u.ladderScore||0});const se={smm:parseFloat(y),smPercent:parseFloat(j.smPercent),finalScore:parseFloat(j.finalScore)};r&&typeof r=="function"&&r(se),setTimeout(()=>{f("/user-info",{state:{from:"/muscle-mass"}})},100)}catch(q){console.error("提交失敗:",q),X||alert("更新用戶數據失敗，請稍後再試！"),setTimeout(()=>{f("/user-info",{state:{from:"/muscle-mass"}})},100)}},K=[{name:"骨骼肌肉量 (SMM)",value:j.smmScore||0},{name:"肌肉量百分比 (SM%)",value:j.smPercentScore||0}],ue=[{name:"最終分數",value:j.finalScore||0}];return s.jsxs("div",{className:"muscle-container",children:[s.jsx("h1",{className:"text-2xl font-bold text-center mb-4",children:"骨骼肌肉量評測"}),s.jsxs("p",{children:["體重：",m?`${m} 公斤`:"未輸入"]}),s.jsxs("p",{children:["年齡：",g||"未輸入"]}),s.jsxs("p",{children:["性別：",v||"未選擇"]}),s.jsxs("div",{className:"exercise-section",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"骨骼肌肉量 (SMM)"}),s.jsx("label",{htmlFor:"smm",className:"block text-sm font-medium text-gray-700",children:"骨骼肌肉量 (kg)"}),s.jsx("input",{id:"smm",name:"smm",type:"number",placeholder:"骨骼肌肉量 (kg)",value:y,onChange:X=>S(X.target.value),className:"input-field"}),s.jsx("button",{onClick:z,className:"calculate-btn",children:"計算"}),j.smmScore!==null&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"score-text",children:["骨骼肌肉量 (SMM) 分數: ",j.smmScore]}),s.jsxs("p",{className:"score-text",children:["骨骼肌肉量百分比 (SM%): ",j.smPercent,"%"]}),s.jsxs("p",{className:"score-text",children:["骨骼肌肉量百分比 (SM%) 分數: ",j.smPercentScore]}),s.jsxs("p",{className:"score-text final-score",children:["最終分數: ",j.finalScore]})]})]}),j.finalScore&&s.jsxs("div",{className:"chart-section",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"數值比較"}),s.jsx("div",{className:"chart-container",children:s.jsx(ur,{width:"100%",height:300,children:s.jsxs(Ah,{data:K,barSize:30,children:[s.jsx(Eh,{strokeDasharray:"3 3"}),s.jsx(wh,{dataKey:"name"}),s.jsx(Th,{domain:[0,100]}),s.jsx(_h,{}),s.jsx(B1,{}),s.jsx(Rh,{dataKey:"value",fill:"#4bc0c0",name:"分數"})]})})}),s.jsx("h2",{className:"text-lg font-semibold mt-6 mb-4",children:"最終分數"}),s.jsx("div",{className:"chart-container",children:s.jsx(ur,{width:"100%",height:200,children:s.jsxs(Ah,{data:ue,barSize:30,children:[s.jsx(Eh,{strokeDasharray:"3 3"}),s.jsx(wh,{dataKey:"name"}),s.jsx(Th,{domain:[0,100]}),s.jsx(_h,{}),s.jsx(Rh,{dataKey:"value",fill:"#36a2eb",name:"分數"})]})})})]}),s.jsx("div",{className:"button-group",children:s.jsx("button",{onClick:ae,className:"submit-btn",children:"提交並返回總覽"})})]})}Vm.propTypes={onComplete:Oe.func,clearTestData:Oe.func};function Ym({onComplete:r,clearTestData:i}){var Z,se;const{userData:u,setUserData:c,saveUserData:d}=on(),f=pn(),[m,g]=A.useState(((se=(Z=u.testInputs)==null?void 0:Z.ffmi)==null?void 0:se.bodyFat)||""),[v,y]=A.useState(null),[S,j]=A.useState(null),[T,_]=A.useState(""),[B,z]=A.useState(!1),[ae,K]=A.useState(!1);A.useEffect(()=>{var P;if(m){const re={...u.testInputs,ffmi:{...(P=u.testInputs)==null?void 0:P.ffmi,bodyFat:m}};c(ce=>({...ce,testInputs:re}))}},[m]);const ue=()=>{if(!u.gender||!u.height||!u.weight||!u.age){alert("請先在用戶信息頁面填寫性別、身高、體重和年齡");return}if(!m){alert("請輸入體脂肪率");return}const P=u.gender==="male"||u.gender==="男性",re=parseFloat(u.height)/100,ce=parseFloat(u.weight),be=parseFloat(m)/100,fe=ce*(1-be)/(re*re),$=re>1.8?fe+6*(re-1.8):fe;y($.toFixed(2));let x;P?$<=0?x=0:$<=18.5?x=$/18.5*60:$<28?x=60+($-18.5)/(28-18.5)*40:x=100:$<=0?x=0:$<=15.5?x=$/15.5*60:$<22?x=60+($-15.5)/(22-15.5)*40:x=100,j(x.toFixed(2)),P?$<18?_("肌肉量低於平均"):$<20?_("肌肉量在平均值"):$<22?_("肌肉量高於平均值"):$<23?_("肌肉量很高"):$<26?_("肌肉量極高"):$<28?_("肌肉量已經高到可能有使用藥物"):_("不用藥不可能達到的數值"):$<15?_("肌肉量低於平均"):$<17?_("肌肉量在平均值"):$<19?_("肌肉量高於平均值"):$<22?_("肌肉量很高"):_("不用藥不可能達到的數值")},H=async()=>{if(!v||!S){alert("請先計算 FFMI 分數！");return}const P=sessionStorage.getItem("guestMode")==="true";try{const re={...u.scores,bodyFat:parseFloat(S)},ce={...u,scores:re};c({...ce,ladderScore:u.ladderScore||0});const be={bodyFat:parseFloat(m),ffmi:parseFloat(v),ffmiScore:parseFloat(S)};r&&typeof r=="function"&&r(be),setTimeout(()=>{f("/user-info",{state:{from:"/body-fat"}})},100)}catch(re){console.error("提交失敗:",re),P||alert("更新用戶數據失敗，請稍後再試！"),setTimeout(()=>{f("/user-info",{state:{from:"/body-fat"}})},100)}},W=[{range:"16 - 17",description:"肌肉量低於平均"},{range:"18 - 19",description:"肌肉量在平均值"},{range:"20 - 21",description:"肌肉量高於平均值"},{range:"22",description:"肌肉量很高"},{range:"23 - 25",description:"肌肉量極高"},{range:"26 - 27",description:"肌肉量已經高到可能有使用藥物"},{range:"28 - 30",description:"不用藥不可能達到的數值"}],X=[{range:"13 - 14",description:"肌肉量低於平均"},{range:"15 - 16",description:"肌肉量在平均值"},{range:"17 - 18",description:"肌肉量高於平均值"},{range:"19 - 21",description:"肌肉量很高"},{range:"> 22",description:"不用藥不可能達到的數值"}],q=u.gender==="male"||u.gender==="男性"?W:X;return s.jsxs("div",{className:"ffmi-container",children:[s.jsx("h1",{className:"ffmi-title",children:"體脂肪率與 FFMI"}),s.jsxs("div",{className:"input-section",children:[s.jsx("label",{htmlFor:"bodyFat",className:"input-label",children:"體脂肪率 (%)"}),s.jsx("input",{id:"bodyFat",name:"bodyFat",type:"number",value:m,onChange:P=>g(P.target.value),placeholder:"輸入體脂肪率 (%)",className:"input-field",required:!0}),s.jsx("button",{onClick:ue,className:"calculate-btn",children:"計算分數"})]}),v&&s.jsxs("div",{className:"result-section",children:[s.jsx("h2",{className:"result-title",children:"您的評估結果"}),s.jsxs("p",{className:"result-text",children:["FFMI：",v]}),s.jsxs("p",{className:"score-text",children:["FFMI 評分：",S," 分"]}),s.jsxs("p",{className:"category-text",children:["FFMI 等級：",T]}),s.jsx("p",{className:"result-text note-text"})]}),s.jsx("div",{className:"description-section",children:s.jsxs("div",{className:"description-card",children:[s.jsxs("div",{className:"description-header",onClick:()=>z(!B),children:[s.jsx("h2",{className:"description-title",children:"FFMI 是什麼？"}),s.jsx("span",{className:`arrow ${B?"expanded":""}`,children:B?"▲":"▼"})]}),B&&s.jsxs("div",{className:"description-content",children:[s.jsx("p",{children:"FFMI（Fat Free Mass Index 無脂肪質量指數）用來評估肌肉量多寡，考量身高與體脂，比 BMI 更準確。數值越高，代表肌肉量越多，是健身評估常用指標。在以下幾個狀況下易造成結果失真："}),s.jsxs("ol",{className:"list-decimal pl-5 mt-2",children:[s.jsx("li",{children:"受測者身高高於平均標準 (190 以上)"}),s.jsx("li",{children:"受測者體脂肪率顯著高於平均標準"}),s.jsx("li",{children:"受測者體重高於平均標準"})]})]})]})}),s.jsx("div",{className:"table-section",children:s.jsxs("div",{className:"table-card",children:[s.jsxs("div",{className:"table-header",onClick:()=>K(!ae),children:[s.jsxs("h2",{className:"table-title",children:["FFMI 對照表 (",u.gender==="male"||u.gender==="男性"?"男性":"女性",")"]}),s.jsx("span",{className:`arrow ${ae?"expanded":""}`,children:ae?"▲":"▼"})]}),ae&&s.jsx("div",{className:"table-content",children:s.jsxs("table",{className:"ffmi-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"FFMI 範圍"}),s.jsx("th",{children:"評價"})]})}),s.jsx("tbody",{children:q.map((P,re)=>s.jsxs("tr",{children:[s.jsx("td",{children:P.range}),s.jsx("td",{children:P.description})]},re))})]})})]})}),s.jsx("button",{onClick:H,className:"ffmi-submit-btn",children:"提交並返回總覽"})]})}Ym.propTypes={onComplete:Oe.func,clearTestData:Oe.func};function Fm({onLogin:r,onError:i}){const[u,c]=A.useState(!1),d=async()=>{c(!0);try{const f=new rm;f.setCustomParameters({prompt:"select_account"});const g=(await T1(de,f)).user;console.log("Google 登入成功:",g.email);const v=We(Ue,"users",g.uid);if(!(await ba(v)).exists()){const S={email:g.email,userId:g.uid,nickname:g.displayName||g.email.split("@")[0],avatarUrl:g.photoURL||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),gender:"",height:0,weight:0,age:0,scores:{strength:0,explosivePower:0,cardio:0,muscleMass:0,bodyFat:0},history:[],testInputs:{},friends:[],friendRequests:[],blockedUsers:[],ladderScore:0,ladderRank:0,ladderHistory:[],isGuest:!1,lastActive:new Date().toISOString()};await Yn(v,S),console.log("新用戶資料已創建")}r(g.email,null)}catch(f){console.error("Google 登入失敗:",f);let m="登入失敗";f.code==="auth/popup-closed-by-user"?m="登入視窗被關閉，請重試":f.code==="auth/popup-blocked"?m="彈出視窗被阻擋，請允許彈出視窗後重試":f.code==="auth/account-exists-with-different-credential"?m="此電子郵件已被其他方式註冊，請使用原註冊方式登入":m=`登入失敗：${f.message}`,i(m)}finally{c(!1)}};return s.jsxs("div",{className:"social-login-container",children:[s.jsx("div",{className:"divider",children:s.jsx("span",{children:"或"})}),s.jsx("div",{className:"social-buttons",children:s.jsxs("button",{type:"button",className:"social-btn google-btn",onClick:d,disabled:u,children:[s.jsxs("svg",{className:"google-icon",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),u?"處理中...":"使用 Google 登入"]})})]})}Fm.propTypes={onLogin:Oe.func.isRequired,onError:Oe.func.isRequired};function Xm({isOpen:r,onClose:i,onAccept:u}){const[c,d]=A.useState("zh");if(!r)return null;const f=()=>{u(),i()},m=g=>{d(g)};return s.jsx("div",{className:"privacy-modal-overlay",onClick:i,children:s.jsxs("div",{className:"privacy-modal",onClick:g=>g.stopPropagation(),children:[s.jsxs("div",{className:"privacy-modal-header",children:[s.jsx("h2",{children:"隱私權政策 / Privacy Policy"}),s.jsx("button",{className:"close-btn",onClick:i,children:"×"})]}),s.jsxs("div",{className:"language-switch",children:[s.jsx("button",{className:`lang-btn ${c==="zh"?"active":""}`,onClick:()=>m("zh"),children:"中文"}),s.jsx("button",{className:`lang-btn ${c==="en"?"active":""}`,onClick:()=>m("en"),children:"English"})]}),s.jsx("div",{className:"privacy-modal-content",children:c==="zh"?s.jsxs("div",{className:"privacy-content-zh",children:[s.jsxs("div",{className:"privacy-highlight",children:[s.jsx("strong",{children:"重要提醒："}),"本隱私權政策說明我們如何收集、使用和保護您的個人資訊。使用我們的服務即表示您同意本政策的內容。"]}),s.jsxs("section",{children:[s.jsx("h3",{children:"我們收集的資訊"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"帳戶資訊："}),"電子郵件地址、暱稱、頭像"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"個人資料："}),"性別、年齡、身高、體重"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"健康數據："}),"體脂肪率、骨骼肌肉量、運動評測結果"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"社交資訊："}),"好友列表、社群互動內容"]})]})]}),s.jsxs("section",{children:[s.jsx("h3",{children:"我們如何使用您的資訊"}),s.jsxs("ul",{children:[s.jsx("li",{children:"處理您的健身評測並提供結果"}),s.jsx("li",{children:"管理您的帳戶和個人資料"}),s.jsx("li",{children:"提供天梯排行榜功能"}),s.jsx("li",{children:"支援社交功能和好友系統"}),s.jsx("li",{children:"改善服務和提供個人化建議"})]})]}),s.jsxs("section",{children:[s.jsx("h3",{children:"資料安全"}),s.jsxs("ul",{children:[s.jsx("li",{children:"使用加密技術保護資料傳輸和儲存"}),s.jsx("li",{children:"實施存取控制和身份驗證"}),s.jsx("li",{children:"定期進行安全評估和更新"}),s.jsx("li",{children:"我們不會出售您的個人資訊"})]})]}),s.jsxs("section",{children:[s.jsx("h3",{children:"您的權利"}),s.jsxs("ul",{children:[s.jsx("li",{children:"您可以隨時查看和更新您的個人資料"}),s.jsx("li",{children:"您可以隨時刪除您的帳戶"}),s.jsx("li",{children:"您可以要求我們提供您的資料副本"}),s.jsx("li",{children:"您可以反對我們處理您的個人資料"})]})]}),s.jsxs("section",{children:[s.jsx("h3",{children:"第三方服務"}),s.jsx("p",{children:"當您使用 Google 登入時，該服務將根據其隱私政策處理您的資料。"})]}),s.jsxs("div",{className:"privacy-contact",children:[s.jsx("h4",{children:"聯絡我們"}),s.jsx("p",{children:"電子郵件：topaj01@gmail.com"}),s.jsx("p",{children:"我們將在48小時內回應您的詢問"})]})]}):s.jsxs("div",{className:"privacy-content-en",children:[s.jsxs("div",{className:"privacy-highlight",children:[s.jsx("strong",{children:"Important Notice:"})," This Privacy Policy explains how we collect, use, and protect your personal information. By using our services, you agree to the terms of this policy."]}),s.jsxs("section",{children:[s.jsx("h3",{children:"Information We Collect"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Account Information:"})," Email address, nickname, avatar"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Personal Data:"})," Gender, age, height, weight"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Health Data:"})," Body fat percentage, skeletal muscle mass, fitness assessment results"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Social Information:"})," Friends list, community interaction content"]})]})]}),s.jsxs("section",{children:[s.jsx("h3",{children:"How We Use Your Information"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Process your fitness assessments and provide results"}),s.jsx("li",{children:"Manage your account and profile"}),s.jsx("li",{children:"Provide ladder ranking functionality"}),s.jsx("li",{children:"Support social features and friend system"}),s.jsx("li",{children:"Improve services and provide personalized recommendations"})]})]}),s.jsxs("section",{children:[s.jsx("h3",{children:"Data Security"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Use encryption technology to protect data transmission and storage"}),s.jsx("li",{children:"Implement access controls and authentication"}),s.jsx("li",{children:"Conduct regular security assessments and updates"}),s.jsx("li",{children:"We do not sell your personal information"})]})]}),s.jsxs("section",{children:[s.jsx("h3",{children:"Your Rights"}),s.jsxs("ul",{children:[s.jsx("li",{children:"You can view and update your personal data at any time"}),s.jsx("li",{children:"You can delete your account at any time"}),s.jsx("li",{children:"You can request a copy of your data"}),s.jsx("li",{children:"You can object to our processing of your personal data"})]})]}),s.jsxs("section",{children:[s.jsx("h3",{children:"Third-Party Services"}),s.jsx("p",{children:"When you log in using Google, this service will process your data according to its privacy policy."})]}),s.jsxs("div",{className:"privacy-contact",children:[s.jsx("h4",{children:"Contact Us"}),s.jsx("p",{children:"Email: topaj01@gmail.com"}),s.jsx("p",{children:"We will respond to your inquiry within 48 hours"})]})]})}),s.jsxs("div",{className:"privacy-modal-footer",children:[s.jsx("button",{className:"privacy-btn secondary",onClick:i,children:"取消"}),s.jsx("button",{className:"privacy-btn primary",onClick:f,children:"我同意並繼續"})]})]})})}Xm.propTypes={isOpen:Oe.bool.isRequired,onClose:Oe.func.isRequired,onAccept:Oe.func.isRequired};function Qm({onViewPrivacyPolicy:r}){return s.jsxs("div",{className:"data-security-notice",children:[s.jsxs("div",{className:"security-header",children:[s.jsx("div",{className:"security-icon",children:s.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"})})}),s.jsx("h3",{className:"security-title",children:"資料安全承諾"})]}),s.jsxs("ul",{className:"security-list",children:[s.jsx("li",{children:"您的個人資料使用 Google Firebase 安全儲存，符合國際安全標準"}),s.jsx("li",{children:"所有資料傳輸都經過 HTTPS 加密保護"}),s.jsx("li",{children:"我們絕不會將您的資料出售或分享給第三方"}),s.jsx("li",{children:"您可以隨時在會員中心查看、修改或刪除您的資料"})]}),s.jsx("button",{type:"button",className:"privacy-policy-link",onClick:r,children:"查看完整隱私權政策"})]})}Qm.propTypes={onViewPrivacyPolicy:Oe.func.isRequired};function Km({onLogin:r}){const[i,u]=A.useState(""),[c,d]=A.useState(""),[f,m]=A.useState(null),[g,v]=A.useState(!1),[y,S]=A.useState(!1),[j,T]=A.useState(!1),[_,B]=A.useState(!1),z=pn(),ae=Va(),{height:K,weight:ue,age:H}=ae.state||{};A.useEffect(()=>{if(console.log("檢查 auth 初始化狀態:",de),!de){m("Firebase 未正確初始化，請檢查配置");return}const P=de.onAuthStateChanged(be=>{be&&(console.log("用戶已登入:",be.email),z("/user-info"))}),re=localStorage.getItem("savedEmail"),ce=localStorage.getItem("savedPassword");return re&&ce&&(console.log("從 localStorage 恢復帳號:",re),u(re),d(ce),T(!0)),()=>P()},[z]);const W=async P=>{P.preventDefault(),m(null),await X()},X=async()=>{if(S(!0),console.log("開始處理表單提交，isRegistering:",g,"email:",i),!de||!Ue){m("Firebase 未正確初始化，請檢查配置"),console.error("auth 或 db 未初始化:",{auth:de,db:Ue}),S(!1);return}try{let P;if(g){console.log("嘗試註冊用戶:",i),P=await _1(de,i,c);const ce=P.user;console.log("註冊成功，用戶:",ce.email,"UID:",ce.uid);const be=We(Ue,"users",ce.uid),ye={email:ce.email,userId:ce.uid,nickname:ce.email.split("@")[0],avatarUrl:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),gender:"",height:K?parseFloat(K):0,weight:ue?parseFloat(ue):0,age:H?parseInt(H,10):0,scores:{strength:0,explosivePower:0,cardio:0,muscleMass:0,bodyFat:0},history:[],testInputs:{},friends:[],friendRequests:[],blockedUsers:[],ladderScore:0,ladderRank:0,ladderHistory:[],isGuest:!1,lastActive:new Date().toISOString()};console.log("儲存初始用戶數據:",ye),await Yn(be,ye),console.log("用戶數據已儲存，文檔 ID:",ce.uid)}else console.log("嘗試登入用戶:",i),P=await Lo(de,i,c),console.log("登入成功，用戶:",P.user.email,"UID:",P.user.uid);const re=P.user;r(re.email,c),j?(console.log("儲存帳號到 localStorage:",i),localStorage.setItem("savedEmail",i),localStorage.setItem("savedPassword",c)):(console.log("清除 localStorage 中的帳號"),localStorage.removeItem("savedEmail"),localStorage.removeItem("savedPassword")),setTimeout(()=>{console.log("導航到 /user-info"),z("/user-info")},500)}catch(P){console.error("登入/註冊失敗:",P.code,P.message),m(`發生錯誤：${P.message} (代碼: ${P.code})`)}finally{S(!1)}},q=(P,re)=>{console.log("社交登入成功，導航到 /user-info"),z("/user-info")},Z=P=>{m(P)},se=()=>{localStorage.setItem("privacyPolicyViewed","true")};return s.jsxs("div",{className:"login-container",children:[s.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:g?"註冊":"登入"}),f&&s.jsx("p",{className:"error-message",children:f}),s.jsxs("form",{onSubmit:W,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"電子郵件"}),s.jsx("input",{type:"email",value:i,onChange:P=>u(P.target.value),placeholder:"輸入你的電子郵件",className:"input-field",required:!0,disabled:y})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"密碼"}),s.jsx("input",{type:"password",value:c,onChange:P=>d(P.target.value),placeholder:"輸入你的密碼",className:"input-field",required:!0,disabled:y})]}),s.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",marginBottom:"8px"},children:s.jsxs("label",{htmlFor:"rememberMe",style:{display:"flex",alignItems:"center",cursor:"pointer",whiteSpace:"nowrap",fontSize:"14px",color:"#555"},children:[s.jsx("input",{id:"rememberMe",type:"checkbox",checked:j,onChange:P=>T(P.target.checked),disabled:y,style:{margin:0}}),s.jsx("span",{style:{marginLeft:"6px"},children:"記住我的帳號"})]})}),s.jsx("button",{type:"submit",className:"submit-btn",disabled:y,children:y?"處理中...":g?"註冊":"登入"})]}),s.jsx("button",{onClick:()=>v(!g),className:"toggle-btn",children:g?"已有帳號？點此登入":"沒有帳號？點此註冊"}),s.jsx(Qm,{onViewPrivacyPolicy:()=>B(!0)}),s.jsx(Fm,{onLogin:q,onError:Z}),s.jsxs("div",{className:"instructions-container",children:[s.jsx("h2",{className:"instructions-title",children:"使用說明"}),s.jsxs("ul",{className:"instructions-list",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"公平評測"}),"：依性別、年齡、身高、體重，結合科學統計，分數化呈現，簡單易懂。"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"全面分析"}),"：五邊形雷達圖顯示弱項，指引補強方向。"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"成長追蹤"}),"：記錄進步軌跡，優化課表效率。"]})]})]}),s.jsx(Xm,{isOpen:_,onClose:()=>B(!1),onAccept:se})]})}Km.propTypes={onLogin:Oe.func.isRequired};function Ex(){const{userData:r,setUserData:i}=on(),[u,c]=A.useState(!1),[d,f]=A.useState([]),[m,g]=A.useState(!1),[v,y]=A.useState(1),[S]=A.useState(10),[j,T]=A.useState("total"),_=A.useRef(!1),B=A.useMemo(()=>[...(r==null?void 0:r.history)||[]].sort(($,x)=>{const b=$.timestamp?new Date($.timestamp):new Date($.date);return(x.timestamp?new Date(x.timestamp):new Date(x.date))-b}),[r==null?void 0:r.history]),z=Math.ceil(B.length/S),ae=(v-1)*S,K=ae+S,ue=B.slice(ae,K),H=B.length,W=50,X=H>=W*.8,q=H>=W,Z=A.useMemo(()=>{if(B.length===0)return null;const fe=B.slice(0,6),$=fe.map(G=>(G.timestamp?new Date(G.timestamp):new Date(G.date)).toLocaleDateString("zh-TW",{month:"numeric",day:"numeric"})).reverse(),x=fe.map(G=>{const D=G.scores||{};return G.averageScore||(Object.values(D).filter(ie=>ie>0).reduce((ie,Ne)=>ie+Ne,0)/Object.values(D).filter(ie=>ie>0).length).toFixed(2)}).reverse(),b=fe.map(G=>{var D;return(((D=G.scores)==null?void 0:D.strength)||0).toFixed(2)}).reverse(),k=fe.map(G=>{var D;return(((D=G.scores)==null?void 0:D.explosivePower)||0).toFixed(2)}).reverse(),F=fe.map(G=>{var D;return(((D=G.scores)==null?void 0:D.cardio)||0).toFixed(2)}).reverse(),le=fe.map(G=>{var D;return(((D=G.scores)==null?void 0:D.muscleMass)||0).toFixed(2)}).reverse(),ne=fe.map(G=>{var D;return(((D=G.scores)==null?void 0:D.bodyFat)||0).toFixed(2)}).reverse();return{labels:$,datasets:[{label:"總分",data:x,color:"#28a745",key:"total"},{label:"力量",data:b,color:"#007bff",key:"strength"},{label:"爆發力",data:k,color:"#ffc107",key:"explosive"},{label:"心肺",data:F,color:"#dc3545",key:"cardio"},{label:"肌肉量",data:le,color:"#6f42c1",key:"muscle"},{label:"FFMI",data:ne,color:"#fd7e14",key:"ffmi"}]}},[B]),se=fe=>{const $=Number(fe);return $>=80?"score-excellent":$>=60?"score-good":$>=40?"score-fair":$>0?"score-poor":"score-none"};A.useEffect(()=>{r&&!_.current&&(console.log("History.js - userData:",r),console.log("History.js - sortedHistory:",B),console.log("History.js - 記錄數量:",H,"/",W),console.log("History.js - 當前頁面:",v,"/",z),_.current=!0)},[r]);const P=()=>{c(!u),f([])},re=fe=>{d.includes(fe)?f(d.filter($=>$!==fe)):f([...d,fe])},ce=()=>{const fe=B.filter(($,x)=>!d.includes(x));i({...r,history:fe}),c(!1),f([]),y(1),console.log("History.js - 已刪除所選紀錄")},be=fe=>{y(Math.max(1,Math.min(fe,z)))},ye=()=>{if(!Z)return null;const fe=18,$="600",x=Z.datasets.find(b=>b.key===j);return s.jsxs("div",{className:"chart-container",children:[s.jsxs("div",{className:"chart-header",children:[s.jsx("h3",{children:"📈 數據趨勢圖"}),s.jsx("div",{className:"chart-note",children:"顯示最近六次數據"}),s.jsx("div",{className:"chart-selector",children:s.jsx("select",{value:j,onChange:b=>T(b.target.value),className:"chart-select",children:Z.datasets.map(b=>s.jsx("option",{value:b.key,children:b.label},b.key))})})]}),s.jsx("div",{className:"chart-wrapper",children:s.jsxs("svg",{className:"chart",viewBox:"0 0 800 800",children:[[...Array(6)].map((b,k)=>{const le=720-k*20*480/100;return s.jsx("line",{x1:"50",y1:le,x2:"750",y2:le,stroke:"#dee2e6",strokeWidth:"1"},`grid-y-${k}`)}),x&&s.jsxs("g",{children:[s.jsx("polyline",{points:x.data.map((b,k)=>{const F=50+k*700/(Z.labels.length-1),le=720-b*480/100;return`${F},${le}`}).join(" "),fill:"none",stroke:x.color,strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),x.data.map((b,k)=>{const F=50+k*700/(Z.labels.length-1),le=720-b*480/100;return s.jsx("circle",{cx:F,cy:le,r:"5",fill:x.color,stroke:"white",strokeWidth:"2"},`point-${k}`)})]},x.label),Z.labels.map((b,k)=>{const F=50+k*700/(Z.labels.length-1);return s.jsx("text",{x:F,y:"780",textAnchor:"middle",fontSize:fe,fontWeight:$,fill:"#495057",children:b},`label-${k}`)}),[...Array(6)].map((b,k)=>{const F=k*20,le=720-F*480/100;return s.jsx("text",{x:"30",y:le+6,textAnchor:"end",fontSize:fe,fontWeight:$,fill:"#495057",children:F},`y-label-${k}`)})]})})]})};return s.jsxs("div",{className:"history-container",children:[s.jsx("h1",{children:"歷史紀錄"}),s.jsx("div",{className:"history-table-section",children:B.length>0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"score-legend",children:[s.jsx("h4",{children:"🎯 分數解讀"}),s.jsxs("div",{className:"legend-items",children:[s.jsx("span",{className:"legend-item score-excellent",children:"80+ 優秀"}),s.jsx("span",{className:"legend-item score-good",children:"60-79 良好"}),s.jsx("span",{className:"legend-item score-fair",children:"40-59 一般"}),s.jsx("span",{className:"legend-item score-poor",children:"1-39 待加強"})]})]}),s.jsxs("table",{className:"history-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsxs("th",{className:`date-col ${m?"mobile-hidden":""}`,children:[s.jsx("span",{className:"icon",children:"📅"}),s.jsx("span",{className:"desktop-text",children:"日期"})]}),s.jsxs("th",{className:"score-col",children:[s.jsx("span",{className:"icon",children:"💪"}),s.jsx("span",{className:"desktop-text",children:"力量"})]}),s.jsxs("th",{className:"score-col",children:[s.jsx("span",{className:"icon",children:"⚡"}),s.jsx("span",{className:"desktop-text",children:"爆發力"})]}),s.jsxs("th",{className:`score-col ${m?"":"mobile-hidden"}`,children:[s.jsx("span",{className:"icon",children:"❤️"}),s.jsx("span",{className:"desktop-text",children:"心肺"})]}),s.jsxs("th",{className:`score-col ${m?"":"mobile-hidden"}`,children:[s.jsx("span",{className:"icon",children:"🥩"}),s.jsx("span",{className:"desktop-text",children:"肌肉量"})]}),s.jsxs("th",{className:`score-col ${m?"":"mobile-hidden"}`,children:[s.jsx("span",{className:"icon",children:"📊"}),s.jsx("span",{className:"desktop-text",children:"FFMI"})]}),s.jsxs("th",{className:"average-col",children:[s.jsx("span",{className:"icon",children:"🏆"}),s.jsx("span",{className:"desktop-text",children:"總分"})]}),u&&s.jsx("th",{className:"select-col",children:"選擇"})]})}),s.jsx("tbody",{children:ue.map((fe,$)=>{const x=ae+$,b=fe.scores||{},k=fe.averageScore||(Object.values(b).filter(F=>F>0).reduce((F,le)=>F+le,0)/Object.values(b).filter(F=>F>0).length).toFixed(2)||0;return s.jsxs("tr",{children:[s.jsx("td",{className:`date-cell ${m?"mobile-hidden":""}`,children:fe.date||new Date(fe.timestamp).toLocaleDateString("zh-TW")}),s.jsx("td",{className:`score-cell ${se(b.strength||0)}`,children:(b.strength||0).toFixed(2)}),s.jsx("td",{className:`score-cell ${se(b.explosivePower||0)}`,children:(b.explosivePower||0).toFixed(2)}),s.jsx("td",{className:`score-cell ${m?"":"mobile-hidden"} ${se(b.cardio||0)}`,children:(b.cardio||0).toFixed(2)}),s.jsx("td",{className:`score-cell ${m?"":"mobile-hidden"} ${se(b.muscleMass||0)}`,children:(b.muscleMass||0).toFixed(2)}),s.jsx("td",{className:`score-cell ${m?"":"mobile-hidden"} ${se(b.bodyFat||0)}`,children:(b.bodyFat||0).toFixed(2)}),s.jsx("td",{className:`average-cell ${se(k)}`,children:s.jsx("strong",{children:Number(k).toFixed(2)})}),u&&s.jsx("td",{className:"select-cell",children:s.jsx("input",{type:"checkbox",className:"history-checkbox",checked:d.includes(x),onChange:()=>re(x)})})]},fe.id||x)})})]}),z>1&&s.jsxs("div",{className:"pagination",children:[s.jsx("button",{onClick:()=>be(v-1),disabled:v===1,className:"pagination-btn",children:"← 上一頁"}),s.jsxs("span",{className:"page-info",children:[v,"/",z]}),s.jsx("button",{onClick:()=>be(v+1),disabled:v===z,className:"pagination-btn",children:"下一頁 →"})]}),s.jsx("div",{className:"action-buttons",children:s.jsx("button",{onClick:()=>g(!m),className:"toggle-delete-btn mobile-toggle-btn",children:m?"顯示日期 📅":"顯示所有指標 📊"})}),B.length>0&&s.jsxs("div",{className:"history-stats",children:[s.jsxs("div",{className:"stats-and-actions",children:[s.jsxs("div",{className:"record-count",children:[s.jsx("span",{className:"count-label",children:"📊 記錄數量："}),s.jsxs("span",{className:`count-value ${X?"near-limit":""} ${q?"at-limit":""}`,children:[H," / ",W]})]}),s.jsxs("div",{className:"action-buttons",children:[s.jsx("button",{onClick:P,className:`toggle-delete-btn ${u?"cancel-delete-btn":"edit-mode-btn"}`,children:u?"取消":"清理資料"}),u&&s.jsx("button",{onClick:ce,className:"toggle-delete-btn delete-selected-btn",children:"刪除所選"})]})]}),X&&!q&&s.jsx("div",{className:"limit-warning",children:"⚠️ 記錄數量接近上限，建議清理舊記錄"}),q&&s.jsx("div",{className:"limit-error",children:"🚫 記錄數量已達上限，無法新增記錄，請先清理舊記錄"})]})]}):s.jsxs("div",{className:"no-history",children:[s.jsx("h3",{children:"📋 尚無歷史紀錄"}),s.jsx("p",{children:"完成評測後，您的紀錄就會出現在這裡"}),s.jsx("p",{children:"開始您的最強肉體之旅吧！"})]})}),B.length>0&&ye()]})}function wx(){const[r,i]=A.useState("載入中...");return A.useEffect(()=>{fetch("/privacy-policy.html").then(u=>{if(!u.ok)throw new Error("無法載入隱私權政策");return u.text()}).then(u=>{i(u)}).catch(u=>{console.error("載入隱私權政策失敗:",u),i("<div>載入隱私權政策時發生錯誤，請稍後再試。</div>")})},[]),s.jsx("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto"},children:s.jsx("div",{dangerouslySetInnerHTML:{__html:r}})})}function Zm({open:r,onClose:i,onRegister:u}){return r?s.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.35)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsxs("div",{style:{background:"#fff",borderRadius:"12px",padding:"32px 24px",minWidth:"320px",maxWidth:"90vw",boxShadow:"0 8px 32px rgba(0,0,0,0.18)",textAlign:"center",position:"relative"},children:[s.jsx("h2",{style:{marginBottom:"16px",color:"#667eea"},children:"註冊帳號才能使用此功能"}),s.jsx("p",{style:{marginBottom:"24px",color:"#444"},children:"好友與天梯功能僅限註冊用戶使用，立即註冊帳號即可解鎖完整社交體驗！"}),s.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"16px"},children:[s.jsx("button",{onClick:u,style:{padding:"10px 24px",background:"#667eea",color:"#fff",border:"none",borderRadius:"6px",fontSize:"16px",cursor:"pointer",fontWeight:"bold",boxShadow:"0 2px 8px rgba(102,126,234,0.08)"},children:"前往註冊/登入"}),s.jsx("button",{onClick:i,style:{padding:"10px 24px",background:"#eee",color:"#333",border:"none",borderRadius:"6px",fontSize:"16px",cursor:"pointer",fontWeight:"bold"},children:"取消"})]})]})}):null}Zm.propTypes={open:Oe.bool.isRequired,onClose:Oe.func.isRequired,onRegister:Oe.func.isRequired};const Tx=[{key:"community",label:"社群",icon:s.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"9",cy:"7",r:"4"}),s.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),s.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),path:"/community",guestBlock:!0},{key:"home",label:"首頁",icon:s.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M3 9l9-7 9 7"}),s.jsx("path",{d:"M9 22V12h6v10"})]}),path:"/user-info",guestBlock:!1},{key:"assessment",label:"開始評測",icon:s.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),s.jsx("path",{d:"M2 17l10 5 10-5"}),s.jsx("path",{d:"M2 12l10 5 10-5"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"}),s.jsx("path",{d:"M12 9v6"}),s.jsx("path",{d:"M9 12h6"})]}),path:"/user-info",guestBlock:!1},{key:"ladder",label:"天梯",icon:s.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),s.jsx("path",{d:"M7 3v18M17 3v18M3 9h18M3 15h18"})]}),path:"/ladder",guestBlock:!0},{key:"history",label:"歷史",icon:s.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("polyline",{points:"12 6 12 12 16 14"})]}),path:"/history",guestBlock:!1}];function _x(){const r=sessionStorage.getItem("guestMode")==="true";return de.currentUser?!1:r}function Rx(){const r=pn(),i=Va(),[u,c]=A.useState(!1),[d,f]=A.useState(""),m=v=>{v.guestBlock&&_x()?(f(v.path),c(!0)):v.key==="home"?r(v.path,{state:{scrollTo:"radar"}}):v.key==="assessment"?r(v.path,{state:{scrollTo:"tests"}}):r(v.path)},g=()=>{c(!1),r("/login")};return s.jsxs(s.Fragment,{children:[s.jsx("nav",{style:{position:"fixed",bottom:0,left:0,right:0,height:"64px",background:"#fff",borderTop:"1px solid #eee",display:"flex",justifyContent:"space-around",alignItems:"center",zIndex:1e3,boxShadow:"0 -2px 8px rgba(0,0,0,0.04)"},children:Tx.map(v=>s.jsx("div",{style:{position:"relative",flex:1,textAlign:"center"},children:s.jsxs("button",{onClick:()=>m(v),onMouseDown:y=>y.preventDefault(),style:{background:"none",border:"none",outline:"none",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:i.pathname===v.path?"#667eea":"#888",fontWeight:i.pathname===v.path?"bold":"normal",fontSize:"12px",width:"100%",height:"64px",cursor:"pointer",position:"relative",transition:"color 0.2s"},"aria-label":v.label,children:[v.icon,s.jsx("span",{style:{marginTop:"4px"},children:v.label})]})},v.key))}),s.jsx(Zm,{open:u,onClose:()=>c(!1),onRegister:g})]})}const Ux=()=>{const{userData:r,loadUserData:i}=on(),u=Va(),[c,d]=A.useState([]),[f,m]=A.useState(0),[g,v]=A.useState("all"),[y,S]=A.useState("total"),[j,T]=A.useState(!0),[_,B]=A.useState(!1),[z,ae]=A.useState(null),[K,ue]=A.useState({x:0,y:0});A.useRef(null),A.useRef(null);const H=A.useRef(null),W=A.useRef(!1),X=A.useRef(!1),q=A.useRef(!1),Z=[{value:"all",label:"全部年齡"},{value:"under20",label:"20歲以下"},{value:"21to30",label:"21~30歲"},{value:"31to40",label:"31~40歲"},{value:"41to50",label:"41~50歲"},{value:"51to60",label:"51~60歲"},{value:"61to70",label:"61~70歲"},{value:"over70",label:"70歲以上"},{value:"unknown",label:"未知年齡"}],se=A.useCallback(async()=>{var k;if(X.current){console.log("🔄 正在載入中，跳過重複請求");return}const b={selectedAgeGroup:g,selectedTab:y,userLadderScore:(r==null?void 0:r.ladderScore)||0};if(!W.current&&H.current&&JSON.stringify(H.current)===JSON.stringify(b)){console.log("🔄 載入參數未變化，跳過重複載入");return}W.current=!1,H.current=b,X.current=!0,T(!0);try{console.log("🚀 開始載入天梯數據...",b);const F=rn(Dt(Ue,"users"),Ro("ladderScore","desc"),Hl(100)),le=await cn(F);let ne=[];if(console.log(`📥 從 Firebase 獲取到 ${le.size} 個文檔`),le.forEach(G=>{var ie;const D=G.data();if(D.ladderScore>0){const Ne=D.isAnonymousInLadder===!0,Re={...D,ageGroup:D.age?Os(Number(D.age)):D.ageGroup||""};ne.push({id:G.id,...Re,displayName:Ne?"匿名用戶":D.nickname||((ie=D.email)==null?void 0:ie.split("@")[0])||"未命名用戶",avatarUrl:Ne?"":D.avatarUrl,isAnonymous:Ne})}}),console.log(`📊 過濾後有分數的用戶：${ne.length} 名`),g!=="all"){const G=ne.length;ne=ne.filter(D=>D.ageGroup===g),console.log(`👥 年齡段過濾：${G} → ${ne.length} 名用戶`)}if(y==="weekly"){const G=ne.length,D=new Date;D.setDate(D.getDate()-7),ne=ne.filter(ie=>ie.lastActive?new Date(ie.lastActive)>=D:!1),console.log(`📅 本周新進榜過濾：${G} → ${ne.length} 名用戶`)}if(ne.sort((G,D)=>D.ladderScore-G.ladderScore),ne=ne.slice(0,50),console.log(`📊 天梯數據載入完成：共 ${ne.length} 名用戶，最高分：${((k=ne[0])==null?void 0:k.ladderScore)||0}`),d(ne),r&&r.ladderScore>0){const G=ne.findIndex(D=>D.id===r.userId);if(G>=0){const D=G+1;console.log(`🎯 用戶排名：第 ${D} 名`),m(D)}else{console.log("📋 用戶不在前50名內，計算實際排名...");try{const D=rn(Dt(Ue,"users"),Ro("ladderScore","desc")),ie=await cn(D);let Ne=[];if(ie.forEach(De=>{const Le=De.data();if(Le.ladderScore>0){const rt={...Le,id:De.id,ageGroup:Le.age?Os(Number(Le.age)):Le.ageGroup||""};Ne.push(rt)}}),g!=="all"&&(Ne=Ne.filter(De=>De.ageGroup===g)),y==="weekly"){const De=new Date;De.setDate(De.getDate()-7),Ne=Ne.filter(Le=>Le.lastActive?new Date(Le.lastActive)>=De:!1)}Ne.sort((De,Le)=>Le.ladderScore-De.ladderScore);const Re=Ne.findIndex(De=>De.id===r.userId),Ie=Re>=0?Re+1:0;console.log(`🎯 用戶實際排名：第 ${Ie} 名`),m(Ie)}catch(D){console.error("計算用戶實際排名失敗:",D),m(0)}}}else m(0)}catch(F){console.error("載入天梯數據失敗:",F),console.error("錯誤詳情:",{selectedAgeGroup:g,selectedTab:y,errorCode:F.code,errorMessage:F.message})}finally{T(!1),X.current=!1,q.current=!1}},[g,y,r==null?void 0:r.ladderScore,r==null?void 0:r.userId,r]);A.useEffect(()=>{var b;r&&!((b=u.state)!=null&&b.forceReload)&&se()},[r,g,y,r==null?void 0:r.ladderScore,r==null?void 0:r.userId]),A.useEffect(()=>{var b;(b=u.state)!=null&&b.forceReload&&r&&!q.current&&(console.log("🔄 檢測到強制重新載入標記，立即重新載入天梯數據"),q.current=!0,window.history.replaceState({},document.title),setTimeout(()=>{W.current=!0,H.current=null,se()},0))},[u.state,r]);const P=A.useMemo(()=>(b,k)=>({}),[]),re=()=>null,ce=b=>b===1?"🥇":b===2?"🥈":b===3?"🥉":b<=10?"🏆":b<=50?"⭐":"",be=b=>{const k=Z.find(F=>F.value===b);return k?k.label:b},ye=A.useMemo(()=>{var F;if(`${r==null?void 0:r.ladderScore}${f}${c.length}${j}`,!r||!r.ladderScore||r.ladderScore===0||f>0&&f<=7||f===0)return null;const b=f,k=ce(b);return s.jsx("div",{className:"floating-rank-display","data-rank":b,children:s.jsxs("div",{className:"floating-rank-card",children:[s.jsxs("div",{className:"ladder__rank",children:[s.jsx("span",{className:"ladder__rank-number",children:b}),s.jsx("span",{className:"ladder__rank-badge",children:k})]}),s.jsxs("div",{className:"ladder__user",children:[s.jsxs("div",{className:"ladder__avatar",children:[(()=>{const ne=sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":r.avatarUrl;return ne&&ne.trim()!==""?s.jsx("img",{src:ne,alt:"頭像",onError:G=>{console.log("頭像載入失敗，使用預設頭像"),G.target.style.display="none";const D=G.target.nextSibling;D&&(D.style.display="flex")},onLoad:()=>{console.log("頭像載入成功")}}):null})(),s.jsx("div",{className:"ladder__avatar-placeholder",style:{display:(()=>{const ne=sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":r.avatarUrl;return ne&&ne.trim()!==""?"none":"flex"})()},children:r.nickname?r.nickname.charAt(0).toUpperCase():"U"})]}),s.jsxs("div",{className:"ladder__user-info",children:[s.jsx("div",{className:"ladder__user-name current-user-flame",children:r.nickname||((F=r.email)==null?void 0:F.split("@")[0])||"未命名用戶"}),s.jsxs("div",{className:"ladder__user-details",children:[be(r.ageGroup)," •"," ",r.gender==="male"?"男":"女",s.jsx("br",{}),s.jsx("span",{className:"last-update",children:"我的排名"})]})]})]}),s.jsxs("div",{className:"ladder__score",children:[s.jsx("span",{className:"ladder__score-value",children:Gh(r.ladderScore)}),s.jsx("span",{className:"ladder__score-label",children:"分"})]})]})})},[r==null?void 0:r.ladderScore,r==null?void 0:r.nickname,r==null?void 0:r.email,r==null?void 0:r.avatarUrl,r==null?void 0:r.ageGroup,r==null?void 0:r.gender,f,c.length,j]),fe=(b,k)=>{if(b.isAnonymous)return;const F=k.currentTarget.getBoundingClientRect(),le=200,ne=20,G=c.findIndex(Re=>Re.id===b.id)===0;let D=F.top-10,ie=-100,Ne={};G?(D=F.bottom,ie=0,Ne={width:"100%",maxWidth:"none",left:"0",transform:"translateX(0) translateY(0)",borderRadius:"0 0 16px 16px",boxShadow:"0 8px 25px rgba(0, 0, 0, 0.3)",zIndex:1001}):F.top-le-ne<0&&(D=F.bottom+10,ie=0),ue({x:F.left+F.width/2,y:D,transformY:ie,tooltipStyle:Ne}),ae(b)},$=()=>{ae(null)},x=b=>{if(!b)return"未知";const k=b.toDate?b.toDate():new Date(b),le=new Date-k,ne=Math.floor(le/(1e3*60)),G=Math.floor(le/(1e3*60*60)),D=Math.floor(le/(1e3*60*60*24));return ne<1?"剛剛":ne<60?`${ne}分鐘前`:G<24?`${G}小時前`:D<7?`${D}天前`:k.toLocaleDateString("zh-TW")};return j?s.jsx("div",{className:"ladder",children:s.jsxs("div",{className:"ladder__loading",children:[s.jsx("div",{className:"ladder__loading-spinner"}),s.jsx("p",{children:"載入排行榜中..."})]})}):s.jsxs("div",{className:"ladder",children:[re(),ye,s.jsxs("div",{className:"ladder__header",children:[s.jsx("h2",{children:"天梯排行榜"}),s.jsxs("div",{className:"ladder__filters",children:[s.jsx("div",{className:"ladder__filter-container",children:s.jsxs("select",{value:y,onChange:b=>S(b.target.value),className:"ladder__filter-select",children:[s.jsx("option",{value:"total",children:"🏆 總排行榜"}),s.jsx("option",{value:"weekly",children:"⭐ 本周新進榜"})]})}),s.jsx("div",{className:"ladder__filter-container",children:s.jsx("select",{value:g,onChange:b=>v(b.target.value),className:"ladder__filter-select",children:Z.map(b=>s.jsx("option",{value:b.value,children:b.label},b.value))})}),f>50&&s.jsx("button",{className:"ladder__context-btn",onClick:()=>B(!_),children:_?"顯示前50名精華區":"顯示我的排名範圍"})]})]}),s.jsxs("div",{className:"ladder__list",children:[_&&f>50&&s.jsxs("div",{style:{padding:"8px 16px",background:"linear-gradient(135deg, #ff6b35 0%, #f7931e 100%)",color:"white",borderRadius:"8px 8px 0 0",fontSize:"12px",fontWeight:"600",textAlign:"center"},children:["🎯 您的排名範圍（第 ",Math.max(1,f-15)," - ",f+15," ","名）"]}),c.length===0?s.jsxs("div",{className:"ladder__empty",children:[s.jsx("p",{children:y==="weekly"?"暫無本周新進榜數據":"暫無排行榜數據"}),s.jsx("p",{children:y==="weekly"?"本周完成評測即可上榜！":"完成評測即可上榜！"})]}):c.map((b,k)=>s.jsxs("div",{className:`ladder__item ${b.id===(r==null?void 0:r.userId)?"ladder__item--current-user":""} ${b.isAnonymous?"":"clickable"}`,style:{...b.id===(r==null?void 0:r.userId)?{background:"linear-gradient(135deg, rgba(255, 107, 53, 0.1) 0%, rgba(247, 147, 30, 0.1) 100%)",borderLeft:"4px solid #ff6b35",fontWeight:"600"}:{},...P(b,k)},onClick:b.isAnonymous?void 0:F=>fe(b,F),title:b.isAnonymous?"":"點擊查看訓練背景",children:[s.jsxs("div",{className:"ladder__rank",children:[s.jsx("span",{className:`ladder__rank-number ${b.id===(r==null?void 0:r.userId)?"rank-changing":""}`,children:k+1}),s.jsx("span",{className:"ladder__rank-badge",children:ce(k+1)})]}),s.jsxs("div",{className:"ladder__user",children:[s.jsxs("div",{className:"ladder__avatar",children:[b.avatarUrl&&b.avatarUrl.trim()!==""&&!b.isAnonymous?s.jsx("img",{src:b.avatarUrl,alt:"頭像",onError:F=>{console.log("頭像載入失敗，使用預設頭像"),F.target.style.display="none";const le=F.target.nextSibling;le&&(le.style.display="flex")},onLoad:()=>{console.log("頭像載入成功")}}):null,s.jsx("div",{className:`ladder__avatar-placeholder ${b.isAnonymous?"anonymous":""}`,style:{display:b.avatarUrl&&b.avatarUrl.trim()!==""&&!b.isAnonymous?"none":"flex"},children:b.isAnonymous?"👤":b.displayName.charAt(0).toUpperCase()})]}),s.jsxs("div",{className:"ladder__user-info",children:[s.jsxs("div",{className:`ladder__user-name ${b.isAnonymous?"anonymous":""} ${b.id===(r==null?void 0:r.userId)?"current-user-flame":""}`,children:[b.displayName,b.isAnonymous&&" 🔒"]}),s.jsx("div",{className:"ladder__user-details",children:b.isAnonymous?"匿名用戶":s.jsxs(s.Fragment,{children:[be(b.ageGroup)," •"," ",b.gender==="male"?"男":"女",(b.lastLadderSubmission||b.lastActive)&&s.jsxs(s.Fragment,{children:[s.jsx("br",{}),s.jsxs("span",{className:"last-update",children:["更新於"," ",x(b.lastLadderSubmission||b.lastActive)]})]})]})})]})]}),s.jsxs("div",{className:"ladder__score",children:[s.jsx("span",{className:"ladder__score-value",children:Gh(b.ladderScore)}),s.jsx("span",{className:"ladder__score-label",children:"分"})]})]},b.id))]}),s.jsxs("div",{className:"ladder__footer",children:[y==="weekly"&&s.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"8px"},children:"📅 本周新進榜：顯示過去7天內有活動的用戶"}),f>50&&s.jsxs("p",{style:{fontSize:"12px",color:"#666",marginTop:"8px",fontStyle:"italic"},children:["💡 提示：您的排名為第 ",f," ","名，可以點擊上方按鈕查看您附近的競爭對手"]})]}),z&&s.jsxs("div",{className:"training-tooltip",style:{position:"fixed",left:K.x,top:K.y,transform:`translateX(-50%) translateY(${K.transformY||-100}%)`,zIndex:1e3,...K.tooltipStyle},children:[s.jsxs("div",{className:`tooltip-content ${c.findIndex(b=>b.id===z.id)===0?"first-place-glow expanded":""}`,children:[s.jsxs("div",{className:"tooltip-header",children:[s.jsxs("h4",{children:[z.displayName," 的訓練背景"]}),s.jsx("button",{className:"tooltip-close",onClick:$,children:"×"})]}),s.jsxs("div",{className:"tooltip-body",children:[z.profession&&s.jsxs("div",{className:"tooltip-item",children:[s.jsx("span",{className:"tooltip-label",children:"💼 職業："}),s.jsx("span",{className:"tooltip-value",children:z.profession})]}),z.weeklyTrainingHours&&s.jsxs("div",{className:"tooltip-item",children:[s.jsx("span",{className:"tooltip-label",children:"⏰ 每周訓練時數："}),s.jsxs("span",{className:"tooltip-value",children:[z.weeklyTrainingHours," 小時"]})]}),z.trainingYears&&s.jsxs("div",{className:"tooltip-item",children:[s.jsx("span",{className:"tooltip-label",children:"📅 訓練年資："}),s.jsxs("span",{className:"tooltip-value",children:[z.trainingYears," 年"]})]}),!z.profession&&!z.weeklyTrainingHours&&!z.trainingYears&&s.jsxs("div",{className:"tooltip-empty",children:[s.jsx("p",{children:"該用戶尚未填寫訓練背景信息"}),s.jsx("p",{children:"💡 在個人資料頁面填寫訓練背景，激勵其他健身愛好者！"})]})]})]}),s.jsx("div",{className:`tooltip-arrow ${c.findIndex(b=>b.id===z.id)===0?"first-place-arrow expanded":""}`,style:{...K.transformY===0?{bottom:"auto",top:"-8px",borderTop:"none",borderBottom:"8px solid white",...c.findIndex(b=>b.id===z.id)===0&&{left:"50px",transform:"translateX(-50%)"}}:{bottom:"-8px",top:"auto",borderBottom:"none",borderTop:"8px solid white"}}})]}),z&&s.jsx("div",{className:"tooltip-overlay",onClick:$,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999}})]})},Ox=()=>{const{userData:r,setUserData:i}=on(),[u,c]=A.useState("feed"),[d,f]=A.useState([]),[m,g]=A.useState(!0),[v,y]=A.useState(""),[S,j]=A.useState(""),[T,_]=A.useState(""),[B,z]=A.useState(!1),[ae,K]=A.useState([]),[ue,H]=A.useState([]),[W,X]=A.useState(""),[q,Z]=A.useState([]),[se,P]=A.useState(new Set),[re,ce]=A.useState(new Set),be=A.useRef(new Map);A.useRef(new Map);const ye=A.useRef(!1),fe=A.useRef(!1),$=A.useRef(!1),x=A.useRef(new Map),b=A.useRef(0),k=300*1e3,F=A.useCallback(async()=>{var L;try{const he=Date.now();if(fe.current&&he-b.current<k){console.log("📦 使用快取的動態數據");return}g(!0),console.log("🔄 開始載入社群動態...");const me=(L=de.currentUser)==null?void 0:L.uid;if(!me){console.log("❌ 用戶未登入"),f([]);return}ye.current||(console.log("⏳ 等待好友數據載入完成..."),await new Promise(ee=>setTimeout(ee,1e3)));const _e=(r==null?void 0:r.friends)||[],I=[me,..._e].filter(Boolean);console.log(`🔍 當前用戶ID: ${me}`),console.log(`🔍 好友列表: ${_e.join(", ")}`),console.log(`🔍 允許查看的用戶: ${I.join(", ")}`),console.log(`🔍 總共 ${I.length} 個用戶的動態需要載入`);const U=[];for(const ee of I)try{console.log(`🔍 查詢用戶 ${ee} 的動態`);const oe=rn(Dt(Ue,"communityPosts"),Zt("userId","==",ee),Hl(10)),je=await cn(oe);console.log(`📊 用戶 ${ee} 有 ${je.size} 條動態`),je.forEach(Ce=>{var dt;const ve=Ce.data();console.log(`📝 載入動態: ${Ce.id} - ${(dt=ve.content)==null?void 0:dt.substring(0,30)}...`),ve.comments&&ve.comments.length>0&&(console.log(`🔍 處理動態 ${Ce.id} 的 ${ve.comments.length} 條留言`),ve.comments=ve.comments.map(Pe=>Pe.userAvatarUrl?(console.log(`✅ 留言 ${Pe.id} 已有頭像: ${Pe.userAvatarUrl}`),Pe):(console.log(`📝 留言 ${Pe.id} 缺少頭像，使用預設頭像`),{...Pe,userAvatarUrl:"/guest-avatar.svg"}))),U.push({id:Ce.id,...ve})})}catch(oe){console.warn(`查詢用戶 ${ee} 動態失敗:`,oe)}console.log(`📊 載入到 ${U.length} 條動態`);const J=U.sort((ee,oe)=>new Date(oe.timestamp)-new Date(ee.timestamp));console.log(`📊 過濾後剩餘 ${J.length} 條動態`),J.length;const te=new Set;if(J.forEach(ee=>{(ee.comments||[]).forEach(oe=>{!oe.userAvatarUrl&&oe.userId&&te.add(oe.userId)})}),te.size>0){const ee={};await Promise.all(Array.from(te).map(async oe=>{try{const je=await ba(We(Ue,"users",oe));if(je.exists()){const Ce=je.data();ee[oe]=Ce.avatarUrl||"/guest-avatar.svg"}else ee[oe]="/guest-avatar.svg"}catch(je){console.warn(`取得用戶 ${oe} 頭像失敗`,je),ee[oe]="/guest-avatar.svg"}})),J.forEach(oe=>{(oe.comments||[]).forEach(je=>{!je.userAvatarUrl&&je.userId===oe.userId&&(je.userAvatarUrl=oe.userAvatarUrl),!je.userAvatarUrl&&ee[je.userId]&&(je.userAvatarUrl=ee[je.userId])})})}f([...J]),x.current.set("posts",J),b.current=he,fe.current=!0,v.includes("載入動態失敗")&&y("")}catch(he){console.error("❌ 載入動態失敗:",he),he.code==="permission-denied"?y("權限不足，請檢查登入狀態"):he.code==="unavailable"?y("網路連線問題，請檢查網路連線"):y("載入動態失敗，請稍後再試"),fe.current=!1}finally{g(!1)}},[r==null?void 0:r.friends]),le=async()=>{var L;if(!T.trim()){y("請輸入動態內容");return}if(!de.currentUser){y("請先登入");return}try{z(!0),console.log("📝 準備發布動態...");const he={userId:de.currentUser.uid,userNickname:(r==null?void 0:r.nickname)||((L=r==null?void 0:r.email)==null?void 0:L.split("@")[0])||"匿名用戶",userAvatarUrl:sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":(r==null?void 0:r.avatarUrl)||"",content:T.trim(),type:"status",likes:[],comments:[],timestamp:new Date().toISOString(),privacy:"friends"},me=await Uo(Dt(Ue,"communityPosts"),he);_t.logWrite("addDoc","communityPosts",me.id),console.log("✅ 動態發布成功，ID:",me.id);const _e={id:me.id,...he};console.log("🔄 更新本地狀態，添加新動態:",_e.id),f(I=>{const U=[_e,...I];return console.log(`📊 更新後動態總數: ${U.length}`),U}),_(""),j("動態發布成功！"),setTimeout(()=>j(""),3e3)}catch(he){console.error("❌ 發布動態失敗:",he),y("發布失敗: "+he.message)}finally{z(!1)}},ne=async(L,he)=>{if(!de.currentUser){y("請先登入");return}if(se.has(L)){console.log("🔄 點讚操作進行中，請稍候...");return}const me=de.currentUser.uid,_e=he.includes(me),I=_e?he.filter(U=>U!==me):[...he,me];f(U=>U.map(J=>J.id===L?{...J,likes:I}:J)),P(U=>new Set(U).add(L));try{const U=We(Ue,"communityPosts",L);await Yn(U,{likes:I},{merge:!0}),_t.logWrite("setDoc","communityPosts",L,{likes:`更新為 ${I.length} 個點讚`}),console.log(`👍 ${_e?"取消點讚":"點讚"}成功`)}catch(U){console.error("❌ 點讚操作失敗:",U),y("點讚失敗，請稍後再試"),f(J=>J.map(te=>te.id===L?{...te,likes:he}:te))}finally{P(U=>{const J=new Set(U);return J.delete(L),J})}},G=async(L,he)=>{var I;if(!he.trim())return;if(!de.currentUser){y("請先登入");return}if(re.has(L)){console.log("🔄 留言提交中，請稍候...");return}const me={id:Date.now().toString(),userId:de.currentUser.uid,userNickname:(r==null?void 0:r.nickname)||((I=r==null?void 0:r.email)==null?void 0:I.split("@")[0])||"匿名用戶",userAvatarUrl:sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":(r==null?void 0:r.avatarUrl)||"",content:he.trim(),timestamp:new Date().toISOString()};f(U=>U.map(te=>{if(te.id===L){const ee=[...te.comments,me];return{...te,comments:ee}}return te})),ce(U=>new Set(U).add(L)),be.current.has(L)&&clearTimeout(be.current.get(L));const _e=setTimeout(async()=>{try{const U=d.find(ee=>ee.id===L);if(!U){y("動態不存在");return}const J=[...U.comments,me],te=We(Ue,"communityPosts",L);await Yn(te,{comments:J},{merge:!0}),_t.logWrite("setDoc","communityPosts",L,{comments:`新增留言，總計 ${J.length} 條`}),console.log("💬 留言添加成功")}catch(U){console.error("❌ 添加留言失敗:",U),y("留言失敗，請稍後再試"),f(J=>J.map(ee=>{if(ee.id===L){const oe=ee.comments.filter(je=>je.id!==me.id);return{...ee,comments:oe}}return ee}))}finally{ce(U=>{const J=new Set(U);return J.delete(L),J}),be.current.delete(L)}},500);be.current.set(L,_e)},D=async(L,he)=>{if(!de.currentUser){y("請先登入");return}try{const me=d.find(je=>je.id===L);if(!me){y("動態不存在");return}const _e=me.comments.find(je=>je.id===he);if(!_e){y("留言不存在");return}const I=de.currentUser.uid,U=me.userId===I,J=_e.userId===I;if(!U&&!J){y("您沒有權限刪除此留言");return}const te=U?"確定要刪除此留言嗎？":"確定要刪除您的留言嗎？";if(!window.confirm(te))return;const ee=me.comments.filter(je=>je.id!==he),oe=We(Ue,"communityPosts",L);await Yn(oe,{comments:ee},{merge:!0}),_t.logWrite("setDoc","communityPosts",L,{comments:`刪除留言，總計 ${ee.length} 條`}),console.log("🔄 更新本地狀態，刪除留言:",he),f(je=>{const Ce=je.map(ve=>ve.id===L?{...ve,comments:ee}:ve);return console.log(`📊 動態 ${L} 留言數: ${ee.length}`),Ce}),j("留言已刪除"),setTimeout(()=>j(""),3e3)}catch(me){console.error("❌ 刪除留言失敗:",me),y("刪除留言失敗，請稍後再試")}},ie=async L=>{if(!de.currentUser){y("請先登入");return}try{const he=d.find(I=>I.id===L);if(!he){y("動態不存在");return}const me=de.currentUser.uid;if(he.userId!==me){y("您沒有權限刪除此動態");return}if(!window.confirm("確定要刪除此動態嗎？此操作無法撤銷。"))return;const _e=We(Ue,"communityPosts",L);await Oo(_e),_t.logWrite("deleteDoc","communityPosts",L,{action:"刪除動態"}),console.log("🔄 更新本地狀態，刪除動態:",L),f(I=>{const U=I.filter(J=>J.id!==L);return console.log(`📊 剩餘動態數: ${U.length}`),U}),j("動態已刪除"),setTimeout(()=>j(""),3e3)}catch(he){console.error("❌ 刪除動態失敗:",he),y("刪除動態失敗，請稍後再試")}},Ne=L=>{const he=new Date,me=new Date(L),_e=he-me,I=Math.floor(_e/(1e3*60)),U=Math.floor(_e/(1e3*60*60)),J=Math.floor(_e/(1e3*60*60*24));return I<1?"剛剛":I<60?`${I}分鐘前`:U<24?`${U}小時前`:J<7?`${J}天前`:me.toLocaleDateString()},Re=A.useCallback(async()=>{var L;try{if(ye.current)return;g(!0);const he=rn(Dt(Ue,"friendInvitations"),Zt("status","==","accepted")),me=await cn(he),_e=new Set;me.forEach(te=>{const ee=te.data();ee.fromUserId===de.currentUser.uid?_e.add(ee.toUserId):ee.toUserId===de.currentUser.uid&&_e.add(ee.fromUserId)});const I=[];for(const te of _e)try{const ee=await ba(We(Ue,"users",te));if(ee.exists()){const oe=ee.data();if(!oe){console.warn(`好友 ${te} 的用戶數據為空`);continue}console.log(`✅ 載入好友資料: ${te} - ${oe.nickname||oe.email}`);let je=0,Ce=0;if(oe.scores){const ve=[];oe.scores.strength&&oe.scores.strength>0&&ve.push(oe.scores.strength),oe.scores.explosivePower&&oe.scores.explosivePower>0&&ve.push(oe.scores.explosivePower),oe.scores.cardio&&oe.scores.cardio>0&&ve.push(oe.scores.cardio),oe.scores.muscleMass&&oe.scores.muscleMass>0&&ve.push(oe.scores.muscleMass),oe.scores.bodyFat&&oe.scores.bodyFat>0&&ve.push(oe.scores.bodyFat),console.log(`好友 ${te} 的評分數據:`,oe.scores),console.log(`好友 ${te} 的有效分數:`,ve),ve.length>0&&(je=ve.reduce((dt,Pe)=>dt+Pe,0)/ve.length,Ce=ve.length,console.log(`好友 ${te} 平均分數: ${je}, 項目數: ${Ce}`))}else console.log(`好友 ${te} 沒有評分數據`);I.push({id:te,nickname:oe.nickname||((L=oe.email)==null?void 0:L.split("@")[0])||"未命名用戶",email:oe.email||"",avatarUrl:oe.avatarUrl||"",averageScore:je>0?Number(je).toFixed(2):null,scoreCount:Ce,lastActive:oe.lastActive})}}catch(ee){console.error(`載入好友 ${te} 數據失敗:`,ee)}const U=I.filter(te=>te&&te.id&&typeof te.nickname=="string");K(U);const J=Array.from(_e);i(te=>({...te,friends:J})),ye.current=!0}catch(he){console.error("載入好友數據失敗:",he),y("載入好友數據失敗，請稍後再試"),ye.current=!0}finally{g(!1)}},[]),Ie=A.useCallback(async()=>{var L;try{console.log("🔍 開始載入好友邀請..."),console.log("當前用戶ID:",de.currentUser.uid);const he=rn(Dt(Ue,"friendInvitations"),Zt("toUserId","==",de.currentUser.uid)),me=await cn(he);console.log("📋 找到所有邀請數量:",me.docs.length),me.docs.forEach((J,te)=>{const ee=J.data();console.log(`邀請 ${te+1}:`,{id:J.id,fromUserId:ee.fromUserId,toUserId:ee.toUserId,status:ee.status,createdAt:ee.createdAt})});const _e=rn(Dt(Ue,"friendInvitations"),Zt("toUserId","==",de.currentUser.uid),Zt("status","==","pending")),I=await cn(_e);console.log("📋 找到pending邀請數量:",I.docs.length);const U=[];for(const J of I.docs){const te=J.data();try{const ee=await ba(We(Ue,"users",te.fromUserId));if(ee.exists()){const oe=ee.data();U.push({id:J.id,fromUserId:te.fromUserId,nickname:oe.nickname||((L=oe.email)==null?void 0:L.split("@")[0])||"未命名用戶",email:oe.email,avatarUrl:oe.avatarUrl||"",createdAt:te.createdAt})}}catch(ee){console.error("獲取邀請用戶信息失敗:",ee)}}console.log("✅ 載入完成，邀請列表:",U),H(U),$.current=!0}catch(he){console.error("載入好友邀請失敗:",he),$.current=!0}},[]),De=async()=>{if(!W.trim()){Z([]);return}try{g(!0);const L=rn(Dt(Ue,"users")),he=await cn(L),me=[];he.forEach(_e=>{var ee;const I=_e.data(),U=W.toLowerCase(),J=(I.nickname||"").toLowerCase(),te=(I.email||"").toLowerCase();(J.includes(U)||te.includes(U))&&_e.id!==de.currentUser.uid&&me.push({id:_e.id,nickname:I.nickname||((ee=I.email)==null?void 0:ee.split("@")[0])||"未命名用戶",email:I.email,avatarUrl:I.avatarUrl||"",isFriend:ae.some(oe=>oe.id===_e.id),hasPendingRequest:!1})}),Z(me)}catch(L){console.error("搜尋用戶失敗:",L),y("搜尋失敗")}finally{g(!1)}},Le=async L=>{try{console.log("📤 開始發送好友邀請..."),console.log("發送者ID:",de.currentUser.uid),console.log("接收者ID:",L),g(!0);const he=rn(Dt(Ue,"friendInvitations"),Zt("fromUserId","==",de.currentUser.uid),Zt("toUserId","==",L),Zt("status","==","pending")),me=await cn(he);if(!me.empty){console.log("⚠️ 發現已存在的邀請:",me.docs.length,"個");const U=me.docs[0],J=U.data();console.log("現有邀請資料:",J);const te=new Date(J.createdAt);if((new Date-te)/(1e3*60*60)>24)console.log("📅 邀請已超過24小時，允許重新發送"),await Oo(We(Ue,"friendInvitations",U.id)),console.log("🗑️ 已刪除舊邀請");else{y("已經發送過好友邀請，請稍後再試或檢查邀請通知"),setTimeout(()=>{y("")},3e3);return}}const _e={fromUserId:de.currentUser.uid,toUserId:L,status:"pending",createdAt:new Date().toISOString()};console.log("📝 邀請資料:",_e);const I=await Uo(Dt(Ue,"friendInvitations"),_e);_t.logWrite("addDoc","friendInvitations",I.id),console.log("✅ 邀請已發送，文檔ID:",I.id),j("好友邀請已發送");try{const U=await ba(I);U.exists()?console.log("✅ 邀請驗證成功:",U.data()):console.error("❌ 邀請驗證失敗：文檔不存在")}catch(U){console.error("❌ 邀請驗證失敗:",U)}Z(U=>U.map(J=>J.id===L?{...J,hasPendingRequest:!0}:J)),setTimeout(()=>{Ie()},1e3)}catch(he){console.error("發送好友邀請失敗:",he),y("發送邀請失敗")}finally{g(!1)}},rt=async(L,he)=>{try{g(!0),await Vn(We(Ue,"friendInvitations",L),{status:"accepted",acceptedAt:new Date().toISOString()}),_t.logWrite("updateDoc","friendInvitations",L);const me=We(Ue,"users",de.currentUser.uid);await Vn(me,{friends:U1(he)}),_t.logWrite("updateDoc","users",de.currentUser.uid,{friends:"arrayUnion"}),i(_e=>({..._e,friends:[..._e.friends||[],he]})),await Re(),await Ie(),j("已接受好友邀請")}catch(me){console.error("接受好友邀請失敗:",me),y("接受邀請失敗: "+me.message)}finally{g(!1)}},mt=async L=>{try{g(!0),await Vn(We(Ue,"friendInvitations",L),{status:"declined",declinedAt:new Date().toISOString()}),_t.logWrite("updateDoc","friendInvitations",L),await Ie(),j("已拒絕好友邀請")}catch(he){console.error("拒絕好友邀請失敗:",he),y("拒絕邀請失敗: "+he.message)}finally{g(!1)}},Rt=pn(),et=L=>{if(!L){console.error("好友ID為空");return}const he=ae.find(me=>me.id===L);he?(console.log("🔄 跳轉到好友個人版:",L,he.nickname),Rt(`/friend-feed/${L}`)):(console.error("找不到好友:",L),console.log("當前好友列表:",ae))},qt=async L=>{const he=ae.find(I=>I.id===L),me=(he==null?void 0:he.nickname)||"好友";if(window.confirm(`確定要移除好友「${me}」嗎？

移除後：
• 雙方將不再是好友關係
• 無法查看對方的動態
• 此操作可以重新加好友來恢復`))try{g(!0);const I=We(Ue,"users",de.currentUser.uid);await Vn(I,{friends:R1(L)});const J=(await cn(rn(Dt(Ue,"friendInvitations"),Zt("fromUserId","in",[de.currentUser.uid,L]),Zt("toUserId","in",[de.currentUser.uid,L])))).docs.map(te=>Vn(te.ref,{status:"cancelled",cancelledAt:new Date().toISOString()}));await Promise.all(J),i(te=>{var ee;return{...te,friends:((ee=te.friends)==null?void 0:ee.filter(oe=>oe!==L))||[]}}),K(te=>te.filter(ee=>ee.id!==L)),j(`已移除好友「${me}」`)}catch(I){console.error("移除好友失敗:",I),y(`移除好友失敗: ${I.message}`)}finally{g(!1)}};return A.useEffect(()=>{try{F(),Re(),Ie()}catch(L){console.error("初始載入失敗:",L),y("載入數據失敗，請稍後再試")}return()=>{be.current.forEach(L=>clearTimeout(L)),be.current.clear()}},[F,Re,Ie]),A.useEffect(()=>{try{u==="friends"&&!ye.current?(console.log("🔄 標籤切換時重新載入好友數據"),Re()):u==="requests"&&!$.current&&(console.log("🔄 標籤切換時重新載入邀請數據"),Ie())}catch(L){console.error("標籤切換載入失敗:",L),y("載入數據失敗，請稍後再試")}},[u,Re,Ie]),s.jsxs("div",{className:"community-page",children:[s.jsxs("div",{className:"community-header",children:[s.jsx("h1",{children:"🏠 肉體樂園"}),v&&s.jsx("div",{className:"alert alert-error",children:v}),S&&s.jsx("div",{className:"alert alert-success",children:S})]}),!ae&&s.jsx("div",{className:"alert alert-error",children:"載入好友列表時出現錯誤，請刷新頁面重試"}),s.jsxs("div",{className:"tab-navigation",children:[!ye.current&&s.jsx("div",{className:"loading-indicator",children:"正在載入好友數據..."}),s.jsx("div",{className:`tab-btn ${u==="feed"?"active":""}`,onClick:()=>c("feed"),children:s.jsx("span",{className:"tab-label",children:"動態牆"})}),s.jsx("div",{className:`tab-btn ${u==="friends"?"active":""}`,onClick:()=>c("friends"),children:s.jsxs("span",{className:"tab-label",children:["好友 (",ye.current?ae.length:"...",")"]})}),s.jsxs("div",{className:`tab-btn ${u==="requests"?"active":""}`,onClick:()=>c("requests"),children:[s.jsx("span",{className:"tab-label",children:"邀請通知"}),ue.length>0&&s.jsx("span",{className:"notification-badge",children:ue.length})]}),s.jsx("div",{className:`tab-btn ${u==="search"?"active":""}`,onClick:()=>c("search"),children:s.jsx("span",{className:"tab-label",children:"搜尋好友"})})]}),s.jsxs("div",{className:"tab-content",children:[m&&s.jsx("div",{className:"loading",children:"載入中..."}),v&&!m&&s.jsxs("div",{className:"alert alert-error",children:[v,s.jsx("button",{onClick:()=>{fe.current=!1,ye.current=!1,$.current=!1,x.current.clear(),b.current=0,y(""),F(),Re(),Ie()},style:{marginLeft:"10px",padding:"5px 10px",background:"#ff6b6b",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"重試"})]}),!v&&!m&&u==="feed"&&s.jsx("div",{className:"refresh-section",children:s.jsx("button",{onClick:()=>{fe.current=!1,ye.current=!1,x.current.clear(),b.current=0,Re(),F()},style:{padding:"8px 16px",background:"var(--tiffany-secondary)",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"14px",marginBottom:"10px"},children:"🔄 刷新動態"})}),u==="feed"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"post-composer",children:s.jsxs("div",{className:"composer-header",children:[s.jsx("div",{className:"user-avatar",children:s.jsx("img",{src:sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":(r==null?void 0:r.avatarUrl)||"/default-avatar.svg",alt:"頭像",onError:L=>{L.target.src="/default-avatar.svg"}})}),s.jsxs("div",{className:"composer-input",children:[s.jsx("textarea",{placeholder:"分享你的健身成果...",value:T,onChange:L=>_(L.target.value),maxLength:500,disabled:B}),s.jsxs("div",{className:"composer-footer",children:[s.jsxs("span",{className:"char-count",children:[T.length,"/500"]}),s.jsx("button",{onClick:le,disabled:!T.trim()||B,className:"publish-btn",children:B?"發布中...":"發布"})]})]})]})}),s.jsx("div",{className:"posts-container",children:d.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("p",{children:"還沒有動態"}),s.jsx("p",{children:"發布第一條動態吧！"})]}):d.map(L=>{var he;return s.jsx(Bx,{post:L,currentUserId:(he=de.currentUser)==null?void 0:he.uid,onToggleLike:ne,onAddComment:G,onDeleteComment:D,onDeletePost:ie,formatTime:Ne,likeProcessing:se,commentProcessing:re},L.id)})})]}),u==="friends"&&s.jsx("div",{className:"friends-tab",children:!ae||ae.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("p",{children:"還沒有好友"}),s.jsx("p",{children:"去搜尋好友吧！"})]}):s.jsx("div",{className:"friends-list",children:ae.filter(L=>L&&L.id).map(L=>s.jsxs("div",{className:"friend-item",children:[s.jsxs("div",{className:"friend-info",children:[s.jsx("img",{src:L.avatarUrl||"/default-avatar.svg",alt:"頭像",className:"friend-avatar",onError:he=>{he.target.src="/default-avatar.svg"}}),s.jsxs("div",{className:"friend-details",children:[s.jsx("div",{className:"friend-name",children:L.nickname||"未命名用戶"}),s.jsx("div",{className:"friend-score",children:L.averageScore?s.jsx(s.Fragment,{children:s.jsxs("span",{className:"score-value",children:["🏆 ",L.averageScore,"分"]})}):s.jsx("span",{className:"no-score",children:"尚未評測"})}),s.jsx("div",{className:"friend-email",children:L.email||""})]})]}),s.jsxs("div",{className:"friend-actions",children:[s.jsx("button",{className:"btn-board",onClick:()=>L.id&&et(L.id),title:"查看留言板",children:"💬"}),s.jsx("button",{className:"btn-remove",onClick:()=>L.id&&qt(L.id),title:"移除好友",children:"❌"})]})]},L.id||"unknown"))})}),u==="requests"&&s.jsx("div",{className:"requests-tab",children:ue.length===0?s.jsx("div",{className:"empty-state",children:s.jsx("p",{children:"沒有待處理的邀請"})}):s.jsx("div",{className:"requests-list",children:ue.map(L=>s.jsxs("div",{className:"request-item",children:[s.jsxs("div",{className:"request-info",children:[s.jsx("img",{src:L.avatarUrl||"/default-avatar.svg",alt:"頭像",className:"request-avatar",onError:he=>{he.target.src="/default-avatar.svg"}}),s.jsxs("div",{className:"request-details",children:[s.jsx("div",{className:"request-name",children:L.nickname}),s.jsx("div",{className:"request-email",children:L.email})]})]}),s.jsxs("div",{className:"request-actions",children:[s.jsx("button",{className:"btn-accept",onClick:()=>rt(L.id,L.fromUserId),title:"接受邀請",children:"✅"}),s.jsx("button",{className:"btn-decline",onClick:()=>mt(L.id),title:"拒絕邀請",children:"❌"})]})]},L.id))})}),u==="search"&&s.jsxs("div",{className:"search-tab",children:[s.jsxs("div",{className:"search-container",children:[s.jsx("input",{type:"text",placeholder:"搜尋暱稱或電子郵件...",value:W,onChange:L=>X(L.target.value),onKeyPress:L=>{L.key==="Enter"&&De()},className:"search-input"}),s.jsx("button",{onClick:De,className:"search-btn",children:"搜尋"})]}),s.jsx("div",{className:"search-results",children:q.length===0&&W.trim()?s.jsx("div",{className:"empty-state",children:s.jsx("p",{children:"沒有找到相關用戶"})}):q.map(L=>s.jsxs("div",{className:"user-item",children:[s.jsxs("div",{className:"user-info",children:[s.jsx("img",{src:L.avatarUrl||"/default-avatar.svg",alt:"頭像",className:"user-avatar",onError:he=>{he.target.src="/default-avatar.svg"}}),s.jsxs("div",{className:"user-details",children:[s.jsx("div",{className:"user-name",children:L.nickname}),s.jsx("div",{className:"user-email",children:L.email})]})]}),s.jsx("div",{className:"user-actions",children:L.isFriend?s.jsx("span",{className:"status-badge",children:"已是好友"}):L.hasPendingRequest?s.jsx("span",{className:"status-badge",children:"邀請已發送"}):s.jsx("button",{className:"btn-add",onClick:()=>Le(L.id),disabled:m,children:"加好友"})})]},L.id))})]})]})]})},Bx=({post:r,currentUserId:i,onToggleLike:u,onAddComment:c,onDeleteComment:d,onDeletePost:f,formatTime:m,likeProcessing:g,commentProcessing:v})=>{const[y,S]=A.useState(!1),[j,T]=A.useState(""),_=r.likes.includes(i),B=r.likes.length,z=r.comments.length,ae=()=>{j.trim()&&(c(r.id,j),T(""))};return s.jsxs("div",{className:"post-card",children:[s.jsxs("div",{className:"post-header",children:[s.jsxs("div",{className:"post-user",children:[s.jsx("img",{src:r.userAvatarUrl||"/default-avatar.svg",alt:"頭像",className:"user-avatar",onError:K=>{K.target.src="/default-avatar.svg"}}),s.jsxs("div",{className:"user-info",children:[s.jsx("div",{className:"user-name",children:r.userNickname}),s.jsx("div",{className:"post-time",children:m(r.timestamp)})]})]}),r.userId===i&&s.jsx("button",{onClick:()=>f(r.id),className:"delete-post-btn",title:"刪除此動態",children:"🗑️"})]}),s.jsx("div",{className:"post-content",children:r.content}),s.jsxs("div",{className:"post-actions",children:[s.jsxs("button",{onClick:()=>u(r.id,r.likes),className:`action-btn ${_?"liked":""}`,disabled:g.has(r.id),children:[s.jsx("span",{className:"action-icon",children:g.has(r.id)?"⏳":"👍"}),s.jsx("span",{className:"action-text",children:g.has(r.id)?"處理中...":`${B>0?B:""} 讚`})]}),s.jsxs("button",{onClick:()=>S(!y),className:"action-btn",children:[s.jsx("span",{className:"action-icon",children:"💬"}),s.jsxs("span",{className:"action-text",children:[z>0?z:""," 留言"]})]})]}),y&&s.jsxs("div",{className:"comments-section",children:[r.comments.length>0&&s.jsx("div",{className:"comments-list",children:r.comments.map(K=>{const ue=r.userId===i,H=K.userId===i,W=ue||H;return s.jsxs("div",{className:"comment-item",children:[s.jsxs("div",{className:"comment-header",children:[s.jsxs("div",{className:"comment-user-info",children:[s.jsx("img",{src:K.userAvatarUrl||"/guest-avatar.svg",alt:"頭像",className:"comment-avatar",onError:X=>{X.target.src="/guest-avatar.svg"}}),s.jsxs("div",{className:"comment-text-info",children:[s.jsx("div",{className:"comment-name",children:K.userNickname}),s.jsx("div",{className:"comment-time",children:m(K.timestamp)})]})]}),W&&s.jsx("button",{onClick:()=>d(r.id,K.id),className:"comment-delete-btn",title:ue?"刪除此留言":"刪除我的留言",children:"🗑️"})]}),s.jsx("div",{className:"comment-content",children:K.content})]},K.id)})}),s.jsxs("div",{className:"comment-input",children:[s.jsx("input",{type:"text",placeholder:"寫留言...",value:j,onChange:K=>T(K.target.value),onKeyPress:K=>{K.key==="Enter"&&ae()}}),s.jsx("button",{onClick:ae,disabled:!j.trim()||v.has(r.id),className:"comment-btn",children:v.has(r.id)?"發送中...":"發送"})]})]})]})},Dx=()=>{const{userData:r}=on(),{userId:i}=r1(),u=pn(),[c,d]=A.useState([]),[f,m]=A.useState(!0),[g,v]=A.useState(""),[y,S]=A.useState(""),[j,T]=A.useState(""),[_,B]=A.useState(!1),[z,ae]=A.useState(null),[K,ue]=A.useState(new Set),[H,W]=A.useState(new Set),X=A.useRef(new Map),q=A.useRef(!1),Z=A.useCallback(async()=>{var x;try{if(!i){v("用戶ID為空");return}console.log("🔄 開始載入用戶資料:",i),console.log("🔄 當前登入用戶:",(x=de.currentUser)==null?void 0:x.uid);const b=We(Ue,"users",i);console.log("🔄 查詢文檔路徑:",b.path);const k=await ba(b);if(k.exists()){const F=k.data();console.log("✅ 用戶資料:",F),ae({id:k.id,...F}),console.log("✅ 好友資料載入成功:",F.nickname||F.email)}else console.error("❌ 找不到用戶:",i),console.error("❌ 文檔路徑:",b.path),v("找不到該用戶")}catch(b){console.error("載入好友資料失敗:",b),console.error("錯誤詳情:",{code:b.code,message:b.message,userId:i}),v("載入用戶資料失敗")}},[i]),se=A.useCallback(async()=>{try{if(q.current)return;m(!0),console.log("🔄 開始載入好友動態...");const x=rn(Dt(Ue,"communityPosts"),Zt("userId","==",i),Hl(50)),b=rn(Dt(Ue,"communityPosts"),Zt("targetUserId","==",i),Hl(50));let k,F;try{k=await cn(x),console.log("✅ 用戶動態查詢成功")}catch(G){console.warn("查詢用戶動態失敗，使用空結果:",G),k={docs:[]}}try{F=await cn(b),console.log("✅ 目標用戶動態查詢成功")}catch(G){console.warn("查詢目標用戶動態失敗，使用空結果:",G),F={docs:[]}}const le=[];k&&k.docs&&k.docs.forEach(G=>{const D=G.data();D.comments&&D.comments.length>0&&(console.log(`🔍 處理好友動態 ${G.id} 的 ${D.comments.length} 條留言`),D.comments=D.comments.map(ie=>ie.userAvatarUrl?(console.log(`✅ 好友留言 ${ie.id} 已有頭像: ${ie.userAvatarUrl}`),ie):(console.log(`📝 好友留言 ${ie.id} 缺少頭像，使用預設頭像`),{...ie,userAvatarUrl:"/guest-avatar.svg"}))),le.push({id:G.id,...D})}),F&&F.docs&&F.docs.forEach(G=>{const D=G.data();le.find(ie=>ie.id===G.id)||(D.comments&&D.comments.length>0&&(console.log(`🔍 處理發給好友的動態 ${G.id} 的 ${D.comments.length} 條留言`),D.comments=D.comments.map(ie=>ie.userAvatarUrl?(console.log(`✅ 發給好友的留言 ${ie.id} 已有頭像: ${ie.userAvatarUrl}`),ie):(console.log(`📝 發給好友的留言 ${ie.id} 缺少頭像，使用預設頭像`),{...ie,userAvatarUrl:"/guest-avatar.svg"}))),le.push({id:G.id,...D}))}),le.sort((G,D)=>new Date(D.timestamp)-new Date(G.timestamp)),console.log(`📊 載入到 ${le.length} 條動態`);const ne=new Set;if(le.forEach(G=>{(G.comments||[]).forEach(D=>{!D.userAvatarUrl&&D.userId&&ne.add(D.userId)})}),ne.size>0){const G={};await Promise.all(Array.from(ne).map(async D=>{try{const ie=await ba(We(Ue,"users",D));if(ie.exists()){const Ne=ie.data();G[D]=Ne.avatarUrl||"/guest-avatar.svg"}else G[D]="/guest-avatar.svg"}catch(ie){console.warn(`取得用戶 ${D} 頭像失敗`,ie),G[D]="/guest-avatar.svg"}})),le.forEach(D=>{(D.comments||[]).forEach(ie=>{!ie.userAvatarUrl&&ie.userId===D.userId&&(ie.userAvatarUrl=D.userAvatarUrl),!ie.userAvatarUrl&&G[ie.userId]&&(ie.userAvatarUrl=G[ie.userId])})})}d([...le]),q.current=!0}catch(x){console.error("❌ 載入動態失敗:",x),d([])}finally{m(!1)}},[i]),P=async()=>{var x;if(!j.trim()){v("請輸入動態內容");return}if(!de.currentUser){v("請先登入");return}try{B(!0),console.log("📝 準備發布動態...");const b={userId:de.currentUser.uid,userNickname:(r==null?void 0:r.nickname)||((x=r==null?void 0:r.email)==null?void 0:x.split("@")[0])||"匿名用戶",userAvatarUrl:sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":(r==null?void 0:r.avatarUrl)||"",content:j.trim(),type:"status",likes:[],comments:[],timestamp:new Date().toISOString(),privacy:"friends",targetUserId:i},k=await Uo(Dt(Ue,"communityPosts"),b);_t.logWrite("addDoc","communityPosts",k.id),console.log("✅ 動態發布成功，ID:",k.id),T(""),S("動態發布成功！"),await se(),setTimeout(()=>S(""),3e3)}catch(b){console.error("❌ 發布動態失敗:",b),v("發布失敗: "+b.message)}finally{B(!1)}},re=async(x,b)=>{if(!de.currentUser){v("請先登入");return}if(K.has(x)){console.log("🔄 點讚操作進行中，請稍候...");return}try{ue(G=>new Set(G).add(x));const k=de.currentUser.uid,F=b.includes(k),le=F?b.filter(G=>G!==k):[...b,k],ne=We(Ue,"communityPosts",x);await Vn(ne,{likes:le}),_t.logWrite("updateDoc","communityPosts",x,{likes:`更新為 ${le.length} 個點讚`}),d(G=>G.map(D=>D.id===x?{...D,likes:le}:D)),console.log(`👍 ${F?"取消點讚":"點讚"}成功`)}catch(k){console.error("❌ 點讚操作失敗:",k),v("操作失敗，請稍後再試")}finally{ue(k=>{const F=new Set(k);return F.delete(x),F})}},ce=async(x,b)=>{var le;if(!b.trim())return;if(!de.currentUser){v("請先登入");return}if(H.has(x)){console.log("🔄 留言提交中，請稍候...");return}const k={id:Date.now().toString(),userId:de.currentUser.uid,userNickname:(r==null?void 0:r.nickname)||((le=r==null?void 0:r.email)==null?void 0:le.split("@")[0])||"匿名用戶",userAvatarUrl:sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":(r==null?void 0:r.avatarUrl)||"",content:b.trim(),timestamp:new Date().toISOString()};d(ne=>ne.map(D=>{if(D.id===x){const ie=[...D.comments,k];return{...D,comments:ie}}return D})),W(ne=>new Set(ne).add(x)),X.current.has(x)&&clearTimeout(X.current.get(x));const F=setTimeout(async()=>{try{const ne=c.find(ie=>ie.id===x);if(!ne){v("動態不存在");return}const G=[...ne.comments,k],D=We(Ue,"communityPosts",x);await Vn(D,{comments:G}),_t.logWrite("updateDoc","communityPosts",x,{comments:`新增留言，總計 ${G.length} 條`}),console.log("💬 留言添加成功")}catch(ne){console.error("❌ 添加留言失敗:",ne),v("留言失敗，請稍後再試"),d(G=>G.map(ie=>{if(ie.id===x){const Ne=ie.comments.filter(Re=>Re.id!==k.id);return{...ie,comments:Ne}}return ie}))}finally{W(ne=>{const G=new Set(ne);return G.delete(x),G}),X.current.delete(x)}},500);X.current.set(x,F)},be=async(x,b)=>{if(!de.currentUser){v("請先登入");return}try{const k=c.find(Re=>Re.id===x);if(!k){v("動態不存在");return}const F=k.comments.find(Re=>Re.id===b);if(!F){v("留言不存在");return}const le=de.currentUser.uid,ne=k.userId===le,G=F.userId===le;if(!ne&&!G){v("您沒有權限刪除此留言");return}const D=ne?"確定要刪除此留言嗎？":"確定要刪除您的留言嗎？";if(!window.confirm(D))return;const ie=k.comments.filter(Re=>Re.id!==b),Ne=We(Ue,"communityPosts",x);await Vn(Ne,{comments:ie}),_t.logWrite("updateDoc","communityPosts",x,{comments:`刪除留言，總計 ${ie.length} 條`}),d(Re=>Re.map(De=>De.id===x?{...De,comments:ie}:De)),S("留言已刪除"),setTimeout(()=>S(""),3e3)}catch(k){console.error("❌ 刪除留言失敗:",k),v("刪除留言失敗，請稍後再試")}},ye=async x=>{if(!de.currentUser){v("請先登入");return}try{const b=c.find(le=>le.id===x);if(!b){v("動態不存在");return}const k=de.currentUser.uid;if(b.userId!==k){v("您沒有權限刪除此動態");return}if(!window.confirm("確定要刪除此動態嗎？此操作無法撤銷。"))return;const F=We(Ue,"communityPosts",x);await Oo(F),_t.logWrite("deleteDoc","communityPosts",x,{action:"刪除動態"}),console.log("🔄 更新本地狀態，刪除動態:",x),d(le=>{const ne=le.filter(G=>G.id!==x);return console.log(`📊 剩餘動態數: ${ne.length}`),ne}),S("動態已刪除"),setTimeout(()=>S(""),3e3)}catch(b){console.error("❌ 刪除動態失敗:",b),v("刪除動態失敗，請稍後再試")}},fe=x=>{const b=new Date,k=new Date(x),F=b-k,le=Math.floor(F/(1e3*60)),ne=Math.floor(F/(1e3*60*60)),G=Math.floor(F/(1e3*60*60*24));return le<1?"剛剛":le<60?`${le}分鐘前`:ne<24?`${ne}小時前`:G<7?`${G}天前`:k.toLocaleDateString()},$=({post:x,currentUserId:b,onToggleLike:k,onAddComment:F,onDeleteComment:le,onDeletePost:ne,formatTime:G,likeProcessing:D,commentProcessing:ie})=>{const[Ne,Re]=A.useState(!1),[Ie,De]=A.useState(""),Le=x.likes.includes(b),rt=x.likes.length,mt=x.comments.length,Rt=()=>{Ie.trim()&&(F(x.id,Ie),De(""))};return s.jsxs("div",{className:"post-card",children:[s.jsxs("div",{className:"post-header",children:[s.jsxs("div",{className:"post-user",children:[s.jsx("img",{src:x.userAvatarUrl||"/default-avatar.svg",alt:"頭像",className:"user-avatar",onError:et=>{et.target.src="/default-avatar.svg"}}),s.jsxs("div",{className:"user-info",children:[s.jsx("div",{className:"user-name",children:x.userNickname}),s.jsx("div",{className:"post-time",children:G(x.timestamp)})]})]}),x.userId===b&&s.jsx("button",{onClick:()=>ne(x.id),className:"delete-post-btn",title:"刪除此動態",children:"🗑️"})]}),s.jsx("div",{className:"post-content",children:x.content}),s.jsxs("div",{className:"post-actions",children:[s.jsxs("button",{onClick:()=>k(x.id,x.likes),className:`action-btn ${Le?"liked":""}`,disabled:D.has(x.id),children:[s.jsx("span",{className:"action-icon",children:D.has(x.id)?"⏳":"👍"}),s.jsx("span",{className:"action-text",children:D.has(x.id)?"處理中...":`${rt>0?rt:""} 讚`})]}),s.jsxs("button",{onClick:()=>Re(!Ne),className:"action-btn",children:[s.jsx("span",{className:"action-icon",children:"💬"}),s.jsxs("span",{className:"action-text",children:[mt>0?mt:""," 留言"]})]})]}),Ne&&s.jsxs("div",{className:"comments-section",children:[x.comments.length>0&&s.jsx("div",{className:"comments-list",children:x.comments.map(et=>{const qt=x.userId===b,L=et.userId===b,he=qt||L;return s.jsxs("div",{className:"comment-item",children:[s.jsxs("div",{className:"comment-header",children:[s.jsxs("div",{className:"comment-user-info",children:[s.jsx("img",{src:et.userAvatarUrl||"/guest-avatar.svg",alt:"頭像",className:"comment-avatar",onError:me=>{me.target.src="/guest-avatar.svg"}}),s.jsxs("div",{className:"comment-text-info",children:[s.jsx("div",{className:"comment-name",children:et.userNickname}),s.jsx("div",{className:"comment-time",children:G(et.timestamp)})]})]}),he&&s.jsx("button",{onClick:()=>le(x.id,et.id),className:"comment-delete-btn",title:qt?"刪除此留言":"刪除我的留言",children:"🗑️"})]}),s.jsx("div",{className:"comment-content",children:et.content})]},et.id)})}),s.jsxs("div",{className:"comment-input",children:[s.jsx("input",{type:"text",placeholder:"寫留言...",value:Ie,onChange:et=>De(et.target.value),onKeyPress:et=>{et.key==="Enter"&&Rt()}}),s.jsx("button",{onClick:Rt,disabled:!Ie.trim()||ie.has(x.id),className:"comment-btn",children:ie.has(x.id)?"發送中...":"發送"})]})]})]})};return A.useEffect(()=>{if(!de.currentUser){console.error("❌ 用戶未登入"),v("請先登入");return}return console.log("🔄 開始載入好友頁面數據..."),console.log("🔄 目標用戶ID:",i),q.current=!1,Z(),se(),()=>{X.current.forEach(x=>clearTimeout(x)),X.current.clear()}},[Z,se,i]),f?s.jsx("div",{className:"friend-feed-page",children:s.jsx("div",{className:"loading",children:"載入中..."})}):g&&!de.currentUser?s.jsxs("div",{className:"friend-feed-page",children:[s.jsxs("div",{className:"error-message",children:[s.jsx("p",{children:"請先登入後再訪問此頁面"}),s.jsx("button",{onClick:()=>u("/login"),className:"login-btn",children:"前往登入"})]}),s.jsx("button",{onClick:()=>u("/community"),className:"back-btn",children:"返回社群"})]}):g&&!z?s.jsxs("div",{className:"friend-feed-page",children:[s.jsxs("div",{className:"friend-feed-header",children:[s.jsx("button",{onClick:()=>u("/community"),className:"back-btn",children:"← 返回社群"}),s.jsxs("div",{className:"friend-info",children:[s.jsx("img",{src:"/default-avatar.svg",alt:"頭像",className:"friend-avatar",onError:x=>{x.target.src="/default-avatar.svg"}}),s.jsxs("div",{className:"friend-details",children:[s.jsxs("h1",{children:["用戶 ",i==null?void 0:i.substring(0,8),"..."]}),s.jsx("p",{children:"無法載入用戶資料，但您仍可以留言"})]})]})]}),s.jsxs("div",{className:"alert alert-error",children:[s.jsx("p",{children:g}),s.jsx("p",{children:"用戶資料載入失敗，但您仍可以發送留言"})]}),s.jsx("div",{className:"post-composer",children:s.jsxs("div",{className:"composer-header",children:[s.jsx("div",{className:"user-avatar",children:s.jsx("img",{src:sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":(r==null?void 0:r.avatarUrl)||"/default-avatar.svg",alt:"頭像",onError:x=>{x.target.src="/default-avatar.svg"}})}),s.jsxs("div",{className:"composer-input",children:[s.jsx("textarea",{placeholder:"給用戶留言...",value:j,onChange:x=>T(x.target.value),maxLength:500,disabled:_}),s.jsxs("div",{className:"composer-footer",children:[s.jsxs("span",{className:"char-count",children:[j.length,"/500"]}),s.jsx("button",{onClick:P,disabled:!j.trim()||_,className:"publish-btn",children:_?"發布中...":"發布"})]})]})]})}),s.jsx("div",{className:"posts-container",children:c.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("p",{children:"還沒有動態"}),s.jsx("p",{children:"來寫下第一條留言吧！"})]}):c.map(x=>{var b;return s.jsx($,{post:x,currentUserId:(b=de.currentUser)==null?void 0:b.uid,onToggleLike:re,onAddComment:ce,onDeleteComment:be,onDeletePost:ye,formatTime:fe,likeProcessing:K,commentProcessing:H},x.id)})})]}):s.jsxs("div",{className:"friend-feed-page",children:[s.jsxs("div",{className:"friend-feed-header",children:[s.jsx("button",{onClick:()=>u("/community"),className:"back-btn",children:"← 返回社群"}),s.jsxs("div",{className:"friend-info",children:[s.jsx("img",{src:(z==null?void 0:z.avatarUrl)||"/default-avatar.svg",alt:"頭像",className:"friend-avatar",onError:x=>{x.target.src="/default-avatar.png"}}),s.jsxs("div",{className:"friend-details",children:[s.jsxs("h1",{children:[(z==null?void 0:z.nickname)||"用戶"," 的個人版"]}),s.jsxs("p",{children:["在這裡給 ",(z==null?void 0:z.nickname)||"用戶"," 留言吧！"]})]})]})]}),g&&s.jsx("div",{className:"alert alert-error",children:g}),y&&s.jsx("div",{className:"alert alert-success",children:y}),s.jsx("div",{className:"post-composer",children:s.jsxs("div",{className:"composer-header",children:[s.jsx("div",{className:"user-avatar",children:s.jsx("img",{src:sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":(r==null?void 0:r.avatarUrl)||"/default-avatar.svg",alt:"頭像",onError:x=>{x.target.src="/default-avatar.svg"}})}),s.jsxs("div",{className:"composer-input",children:[s.jsx("textarea",{placeholder:`給 ${(z==null?void 0:z.nickname)||"用戶"} 留言...`,value:j,onChange:x=>T(x.target.value),maxLength:500,disabled:_}),s.jsxs("div",{className:"composer-footer",children:[s.jsxs("span",{className:"char-count",children:[j.length,"/500"]}),s.jsx("button",{onClick:P,disabled:!j.trim()||_,className:"publish-btn",children:_?"發布中...":"發布"})]})]})]})}),s.jsx("div",{className:"posts-container",children:c.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("p",{children:"還沒有動態"}),s.jsx("p",{children:"來寫下第一條留言吧！"})]}):c.map(x=>{var b;return s.jsx($,{post:x,currentUserId:(b=de.currentUser)==null?void 0:b.uid,onToggleLike:re,onAddComment:ce,onDeleteComment:be,onDeletePost:ye,formatTime:fe,likeProcessing:K,commentProcessing:H},x.id)})})]})},$m=({position:r="bottom",className:i="",showAd:u=!0,isFixed:c=!0})=>u?s.jsx("div",{className:`ad-banner ad-banner--${r} ${c?"ad-banner--fixed":""} ${i}`,children:s.jsx("div",{className:"ad-banner__test",children:s.jsxs("div",{className:"ad-banner__test-content",children:[s.jsx("span",{className:"ad-banner__test-label",children:"🎯 廣告空間預留 🎯"}),s.jsx("span",{className:"ad-banner__test-size",children:"點擊體驗優化版設計"})]})})}):null;$m.propTypes={position:Oe.oneOf(["top","bottom","inline"]),className:Oe.string,showAd:Oe.bool,isFixed:Oe.bool};const Cx=()=>{const r=Va(),i=["/user-info","/friends","/ladder","/history","/strength","/cardio","/explosive-power","/muscle-mass","/body-fat"],u=["/login","/privacy-policy","/test","/strength-instructions"];return(()=>{const d=r.pathname;return u.some(f=>d.startsWith(f))?!1:!!i.some(f=>d.startsWith(f))})()?s.jsx($m,{position:"bottom",isFixed:!0,showAd:!0,className:"global-ad-banner"}):null},Mx=()=>{const[r,i]=A.useState(null),[u,c]=A.useState(!1),[d,f]=A.useState(!1),[m,g]=A.useState(!1);A.useEffect(()=>{const T=()=>window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches?(f(!0),!0):!1,_=K=>{console.log("PWA安裝提示觸發"),K.preventDefault(),i(K),c(!0)},B=()=>{console.log("PWA安裝完成"),f(!0),c(!1),i(null)},z=async K=>{try{await K.update(),console.log("主動檢查更新完成")}catch(ue){console.log("檢查更新失敗:",ue)}},ae=K=>{setInterval(()=>{z(K)},36e5);const ue=()=>{z(K)};return window.addEventListener("focus",ue),()=>{window.removeEventListener("focus",ue)}};return"serviceWorker"in navigator&&"PushManager"in window&&(navigator.serviceWorker.register("/sw.js").then(K=>{console.log("Service Worker註冊成功:",K),z(K);const ue=ae(K);return K.addEventListener("updatefound",()=>{const H=K.installing;H.addEventListener("statechange",()=>{H.state==="installed"&&navigator.serviceWorker.controller&&(console.log("檢測到新版本可用"),g(!0))})}),ue}).catch(K=>{console.log("Service Worker註冊失敗:",K)}),T()||(window.addEventListener("beforeinstallprompt",_),window.addEventListener("appinstalled",B))),()=>{window.removeEventListener("beforeinstallprompt",_),window.removeEventListener("appinstalled",B)}},[]);const v=async()=>{if(!r)return;r.prompt();const{outcome:T}=await r.userChoice;console.log("用戶選擇:",T),i(null),c(!1)},y=()=>{c(!1),i(null)},S=()=>{window.location.reload()},j=async()=>{if("serviceWorker"in navigator){const T=await navigator.serviceWorker.getRegistration();if(T)try{await T.update(),console.log("手動檢查更新完成")}catch(_){console.log("手動檢查更新失敗:",_)}}};return m?s.jsx("div",{className:"pwa-install-prompt",children:s.jsxs("div",{className:"pwa-install-prompt__content",children:[s.jsx("div",{className:"pwa-install-prompt__icon",children:"🔄"}),s.jsxs("div",{className:"pwa-install-prompt__text",children:[s.jsx("h3",{children:"有新版本可用"}),s.jsx("p",{children:"點擊更新以獲取最新功能"})]}),s.jsxs("div",{className:"pwa-install-prompt__actions",children:[s.jsx("button",{className:"pwa-install-prompt__btn pwa-install-prompt__btn--primary",onClick:S,children:"立即更新"}),s.jsx("button",{className:"pwa-install-prompt__btn pwa-install-prompt__btn--dismiss",onClick:()=>g(!1),children:"稍後再說"}),s.jsx("button",{className:"pwa-install-prompt__btn pwa-install-prompt__btn--secondary",onClick:j,style:{fontSize:"12px",padding:"4px 8px"},children:"檢查更新"})]})]})}):d||!u?null:s.jsx("div",{className:"pwa-install-prompt",children:s.jsxs("div",{className:"pwa-install-prompt__content",children:[s.jsx("div",{className:"pwa-install-prompt__icon",children:"📱"}),s.jsxs("div",{className:"pwa-install-prompt__text",children:[s.jsx("h3",{children:"安裝最強肉體"}),s.jsx("p",{children:"將應用程式安裝到主畫面，享受更快的載入速度和離線使用體驗！"})]}),s.jsxs("div",{className:"pwa-install-prompt__actions",children:[s.jsx("button",{className:"pwa-install-prompt__btn pwa-install-prompt__btn--install",onClick:v,children:"安裝"}),s.jsx("button",{className:"pwa-install-prompt__btn pwa-install-prompt__btn--dismiss",onClick:y,children:"稍後再說"})]})]})})},kx=()=>{const[r,i]=A.useState(!1),[u,c]=A.useState(!1),[d,f]=A.useState(!1);A.useEffect(()=>{(()=>{const y=window.navigator.userAgent.toLowerCase(),S=/iphone|ipad|ipod/.test(y);c(S);const j=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches;f(j),S&&!j&&i(!0)})()},[]);const m=()=>{i(!1),localStorage.setItem("ios-install-prompt-dismissed","true")},g=()=>{i(!1)};return d||!u||!r||localStorage.getItem("ios-install-prompt-dismissed")==="true"?null:s.jsx("div",{className:"ios-install-prompt",children:s.jsxs("div",{className:"ios-install-prompt__content",children:[s.jsx("div",{className:"ios-install-prompt__icon",children:"📱"}),s.jsxs("div",{className:"ios-install-prompt__text",children:[s.jsx("h3",{children:"安裝到主畫面"}),s.jsx("p",{children:"點擊分享按鈕，選擇「添加到主畫面」即可安裝應用程式"})]}),s.jsxs("div",{className:"ios-install-prompt__steps",children:[s.jsxs("div",{className:"ios-install-prompt__step",children:[s.jsx("span",{className:"ios-install-prompt__step-number",children:"1"}),s.jsx("span",{children:"點擊底部的分享按鈕"})]}),s.jsxs("div",{className:"ios-install-prompt__step",children:[s.jsx("span",{className:"ios-install-prompt__step-number",children:"2"}),s.jsx("span",{children:"選擇「添加到主畫面」"})]}),s.jsxs("div",{className:"ios-install-prompt__step",children:[s.jsx("span",{className:"ios-install-prompt__step-number",children:"3"}),s.jsx("span",{children:"點擊「添加」完成安裝"})]})]}),s.jsxs("div",{className:"ios-install-prompt__actions",children:[s.jsx("button",{className:"ios-install-prompt__btn ios-install-prompt__btn--primary",onClick:g,children:"我知道了"}),s.jsx("button",{className:"ios-install-prompt__btn ios-install-prompt__btn--dismiss",onClick:m,children:"稍後再說"})]})]})})};class zx extends A.Component{constructor(){super(...arguments);Sh(this,"state",{hasError:!1})}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(u,c){console.error("ErrorBoundary 捕獲錯誤:",u,c)}render(){return this.state.hasError?s.jsx("div",{children:"發生錯誤，請稍後再試或聯繫支持團隊。"}):this.props.children}}function Lx(){const[r,i]=A.useState(null),u=Va(),c=["/user-info","/history","/ladder","/community","/friend-feed","/strength","/explosive-power","/cardio","/muscle-mass","/body-fat"].some(j=>u.pathname.startsWith(j)),d=["/user-info","/ladder","/community","/friend-feed","/history","/strength","/cardio","/explosive-power","/muscle-mass","/body-fat"].some(j=>u.pathname.startsWith(j)),f=async(j,T)=>{try{if(!T||T.trim()==="")throw new Error("密碼不能為空");await Lo(de,j,T),sessionStorage.removeItem("guestMode"),i(null)}catch(_){throw console.error("登入失敗:",_),_}},m=()=>{de.currentUser&&O1(de).then(()=>{i(null)}).catch(j=>{console.error("登出失敗:",j)})},g=j=>{i(j)},v=()=>{i(null)},y=()=>{sessionStorage.setItem("guestMode","true"),window.location.href="/user-info"},S=({element:j})=>{const{userData:T}=on(),_=window.location.pathname;if(sessionStorage.getItem("guestMode")==="true"&&!de.currentUser&&["/user-info","/strength","/cardio","/explosive-power","/muscle-mass","/body-fat"].some(ae=>_.startsWith(ae)))return j;if(!de.currentUser)return s.jsx(No,{to:"/login"});if(_!=="/user-info"&&_!=="/login"){const ae=typeof(T==null?void 0:T.height)=="number"&&T.height>0,K=typeof(T==null?void 0:T.weight)=="number"&&T.weight>0,ue=typeof(T==null?void 0:T.age)=="number"&&T.age>0,H=(T==null?void 0:T.gender)==="male"||(T==null?void 0:T.gender)==="female";if(!ae||!K||!ue||!H)return s.jsx(No,{to:"/user-info"})}return j};return S.propTypes={element:Oe.element.isRequired},s.jsxs("div",{className:`app-container ${d?"page-with-fixed-ad":""}`,children:[s.jsx(lv,{}),s.jsx(zx,{children:s.jsx("div",{className:"main-content",children:s.jsxs(o1,{children:[s.jsx(Ht,{path:"/",element:de.currentUser?s.jsx(No,{to:"/user-info"}):s.jsx(Lm,{onLogin:f,onGuestMode:y})}),s.jsx(Ht,{path:"/user-info",element:s.jsx(S,{element:s.jsx(Im,{testData:r,onLogout:m,clearTestData:v})})}),s.jsx(Ht,{path:"/strength",element:s.jsx(S,{element:s.jsx(Hm,{onComplete:g,clearTestData:v})})}),s.jsx(Ht,{path:"/cardio",element:s.jsx(S,{element:s.jsx(qm,{onComplete:g,clearTestData:v})})}),s.jsx(Ht,{path:"/explosive-power",element:s.jsx(S,{element:s.jsx(Gm,{onComplete:g,clearTestData:v})})}),s.jsx(Ht,{path:"/muscle-mass",element:s.jsx(S,{element:s.jsx(Vm,{onComplete:g,clearTestData:v})})}),s.jsx(Ht,{path:"/body-fat",element:s.jsx(S,{element:s.jsx(Ym,{onComplete:g,clearTestData:v})})}),s.jsx(Ht,{path:"/login",element:s.jsx(Km,{onLogin:f})}),s.jsx(Ht,{path:"/history",element:s.jsx(S,{element:s.jsx(Ex,{})})}),s.jsx(Ht,{path:"/ladder",element:s.jsx(S,{element:s.jsx(Ux,{})})}),s.jsx(Ht,{path:"/community",element:s.jsx(S,{element:s.jsx(Ox,{})})}),s.jsx(Ht,{path:"/friend-feed/:userId",element:s.jsx(S,{element:s.jsx(Dx,{})})}),s.jsx(Ht,{path:"/privacy-policy",element:s.jsx(wx,{})}),s.jsx(Ht,{path:"*",element:s.jsx("div",{children:"404 - 頁面未找到"})})]})})}),s.jsx("footer",{className:"app-footer",children:s.jsx(u1,{to:"/privacy-policy",children:"隱私權政策"})}),u.pathname!=="/ladder"&&s.jsx(Cx,{}),c&&s.jsx(Rx,{}),s.jsx(Mx,{}),s.jsx(kx,{})]})}function Ix(){return s.jsx(Om,{children:s.jsx(c1,{children:s.jsx(Lx,{})})})}const Hx=H1.createRoot(document.getElementById("root"));Hx.render(s.jsx(d1.StrictMode,{children:s.jsx(Ix,{})}));
