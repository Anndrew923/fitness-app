var t1=Object.defineProperty;var n1=(r,i,u)=>i in r?t1(r,i,{enumerable:!0,configurable:!0,writable:!0,value:u}):r[i]=u;var Nh=(r,i,u)=>n1(r,typeof i!="symbol"?i+"":i,u);import{a as a1,b as l1,g as s1,r as E,u as Ga,d as hn,e as i1,B as r1,f as c1,h as It,N as So,L as o1,R as u1}from"./react-vendor-DhRZxw0J.js";import{_ as d1,C as f1,r as Sh,S as h1,a as m1,F as g1,g as p1,b as mr,c as v1,d as x1,i as sm,p as y1,u as b1,e as N1,f as S1,h as j1,j as A1,G as im,k as rm,l as tt,m as zs,s as Yn,n as zo,o as Kt,q as Sn,w as Nn,t as Hs,v as gr,x as jn,y as Vn,z as E1,A as w1,B as Oo,D as cm,E as T1,H as _1,I as R1}from"./firebase-CzuYT2dx.js";import{P as ze,R as ur,a as om,b as um,c as dm,d as fm,e as hm,B as jh,C as Ah,X as Eh,Y as wh,T as Th,L as O1,f as _h}from"./charts-CHoSrU6p.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))c(d);new MutationObserver(d=>{for(const f of d)if(f.type==="childList")for(const m of f.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function u(d){const f={};return d.integrity&&(f.integrity=d.integrity),d.referrerPolicy&&(f.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?f.credentials="include":d.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function c(d){if(d.ep)return;d.ep=!0;const f=u(d);fetch(d.href,f)}})();var jo={exports:{}},Us={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rh;function B1(){if(Rh)return Us;Rh=1;var r=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function u(c,d,f){var m=null;if(f!==void 0&&(m=""+f),d.key!==void 0&&(m=""+d.key),"key"in d){f={};for(var p in d)p!=="key"&&(f[p]=d[p])}else f=d;return d=f.ref,{$$typeof:r,type:c,key:m,ref:d!==void 0?d:null,props:f}}return Us.Fragment=i,Us.jsx=u,Us.jsxs=u,Us}var Oh;function U1(){return Oh||(Oh=1,jo.exports=B1()),jo.exports}var s=U1(),Ao={exports:{}},Cs={},Eo={exports:{}},wo={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bh;function C1(){return Bh||(Bh=1,function(r){function i(x,b){var D=x.length;x.push(b);e:for(;0<D;){var J=D-1>>>1,W=x[J];if(0<d(W,b))x[J]=b,x[D]=W,D=J;else break e}}function u(x){return x.length===0?null:x[0]}function c(x){if(x.length===0)return null;var b=x[0],D=x.pop();if(D!==b){x[0]=D;e:for(var J=0,W=x.length,Y=W>>>1;J<Y;){var G=2*(J+1)-1,I=x[G],he=G+1,Ne=x[he];if(0>d(I,D))he<W&&0>d(Ne,I)?(x[J]=Ne,x[he]=D,J=he):(x[J]=I,x[G]=D,J=G);else if(he<W&&0>d(Ne,D))x[J]=Ne,x[he]=D,J=he;else break e}}return b}function d(x,b){var D=x.sortIndex-b.sortIndex;return D!==0?D:x.id-b.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;r.unstable_now=function(){return f.now()}}else{var m=Date,p=m.now();r.unstable_now=function(){return m.now()-p}}var v=[],y=[],S=1,j=null,T=3,O=!1,_=!1,z=!1,te=!1,ee=typeof setTimeout=="function"?setTimeout:null,ue=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function $(x){for(var b=u(y);b!==null;){if(b.callback===null)c(y);else if(b.startTime<=x)c(y),b.sortIndex=b.expirationTime,i(v,b);else break;b=u(y)}}function H(x){if(z=!1,$(x),!_)if(u(v)!==null)_=!0,k||(k=!0,Te());else{var b=u(y);b!==null&&Z(H,b.startTime-x)}}var k=!1,X=-1,P=5,ne=-1;function se(){return te?!0:!(r.unstable_now()-ne<P)}function de(){if(te=!1,k){var x=r.unstable_now();ne=x;var b=!0;try{e:{_=!1,z&&(z=!1,ue(X),X=-1),O=!0;var D=T;try{t:{for($(x),j=u(v);j!==null&&!(j.expirationTime>x&&se());){var J=j.callback;if(typeof J=="function"){j.callback=null,T=j.priorityLevel;var W=J(j.expirationTime<=x);if(x=r.unstable_now(),typeof W=="function"){j.callback=W,$(x),b=!0;break t}j===u(v)&&c(v),$(x)}else c(v);j=u(v)}if(j!==null)b=!0;else{var Y=u(y);Y!==null&&Z(H,Y.startTime-x),b=!1}}break e}finally{j=null,T=D,O=!1}b=void 0}}finally{b?Te():k=!1}}}var Te;if(typeof q=="function")Te=function(){q(de)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,ce=be.port2;be.port1.onmessage=de,Te=function(){ce.postMessage(null)}}else Te=function(){ee(de,0)};function Z(x,b){X=ee(function(){x(r.unstable_now())},b)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(x){x.callback=null},r.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<x?Math.floor(1e3/x):5},r.unstable_getCurrentPriorityLevel=function(){return T},r.unstable_next=function(x){switch(T){case 1:case 2:case 3:var b=3;break;default:b=T}var D=T;T=b;try{return x()}finally{T=D}},r.unstable_requestPaint=function(){te=!0},r.unstable_runWithPriority=function(x,b){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var D=T;T=x;try{return b()}finally{T=D}},r.unstable_scheduleCallback=function(x,b,D){var J=r.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?J+D:J):D=J,x){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=D+W,x={id:S++,callback:b,priorityLevel:x,startTime:D,expirationTime:W,sortIndex:-1},D>J?(x.sortIndex=D,i(y,x),u(v)===null&&x===u(y)&&(z?(ue(X),X=-1):z=!0,Z(H,D-J))):(x.sortIndex=W,i(v,x),_||O||(_=!0,k||(k=!0,Te()))),x},r.unstable_shouldYield=se,r.unstable_wrapCallback=function(x){var b=T;return function(){var D=T;T=b;try{return x.apply(this,arguments)}finally{T=D}}}}(wo)),wo}var Uh;function M1(){return Uh||(Uh=1,Eo.exports=C1()),Eo.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ch;function D1(){if(Ch)return Cs;Ch=1;var r=M1(),i=a1(),u=l1();function c(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function m(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(f(e)!==e)throw Error(c(188))}function v(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(c(188));return t!==e?null:e}for(var n=e,a=t;;){var l=n.return;if(l===null)break;var o=l.alternate;if(o===null){if(a=l.return,a!==null){n=a;continue}break}if(l.child===o.child){for(o=l.child;o;){if(o===n)return p(l),e;if(o===a)return p(l),t;o=o.sibling}throw Error(c(188))}if(n.return!==a.return)n=l,a=o;else{for(var h=!1,g=l.child;g;){if(g===n){h=!0,n=l,a=o;break}if(g===a){h=!0,a=l,n=o;break}g=g.sibling}if(!h){for(g=o.child;g;){if(g===n){h=!0,n=o,a=l;break}if(g===a){h=!0,a=o,n=l;break}g=g.sibling}if(!h)throw Error(c(189))}}if(n.alternate!==a)throw Error(c(190))}if(n.tag!==3)throw Error(c(188));return n.stateNode.current===n?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var S=Object.assign,j=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),ee=Symbol.for("react.provider"),ue=Symbol.for("react.consumer"),q=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),ne=Symbol.for("react.activity"),se=Symbol.for("react.memo_cache_sentinel"),de=Symbol.iterator;function Te(e){return e===null||typeof e!="object"?null:(e=de&&e[de]||e["@@iterator"],typeof e=="function"?e:null)}var be=Symbol.for("react.client.reference");function ce(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===be?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _:return"Fragment";case te:return"Profiler";case z:return"StrictMode";case H:return"Suspense";case k:return"SuspenseList";case ne:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case O:return"Portal";case q:return(e.displayName||"Context")+".Provider";case ue:return(e._context.displayName||"Context")+".Consumer";case $:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case X:return t=e.displayName||null,t!==null?t:ce(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return ce(e(t))}catch{}}return null}var Z=Array.isArray,x=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,b=u.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D={pending:!1,data:null,method:null,action:null},J=[],W=-1;function Y(e){return{current:e}}function G(e){0>W||(e.current=J[W],J[W]=null,W--)}function I(e,t){W++,J[W]=e.current,e.current=t}var he=Y(null),Ne=Y(null),Be=Y(null),Xe=Y(null);function Ce(e,t){switch(I(Be,t),I(Ne,e),I(he,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Zf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Zf(t),e=$f(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}G(he),I(he,e)}function ke(){G(he),G(Ne),G(Be)}function rt(e){e.memoizedState!==null&&I(Xe,e);var t=he.current,n=$f(t,e.type);t!==n&&(I(Ne,e),I(he,n))}function mt(e){Ne.current===e&&(G(he),G(Ne)),Xe.current===e&&(G(Xe),Ts._currentValue=D)}var L=Object.prototype.hasOwnProperty,ae=r.unstable_scheduleCallback,ye=r.unstable_cancelCallback,je=r.unstable_shouldYield,xe=r.unstable_requestPaint,re=r.unstable_now,pe=r.unstable_getCurrentPriorityLevel,Q=r.unstable_ImmediatePriority,M=r.unstable_UserBlockingPriority,le=r.unstable_NormalPriority,ie=r.unstable_LowPriority,fe=r.unstable_IdlePriority,He=r.log,dt=r.unstable_setDisableYieldValue,Qe=null,Ve=null;function Ht(e){if(typeof He=="function"&&dt(e),Ve&&typeof Ve.setStrictMode=="function")try{Ve.setStrictMode(Qe,e)}catch{}}var Tt=Math.clz32?Math.clz32:Fs,Vs=Math.log,Ys=Math.LN2;function Fs(e){return e>>>=0,e===0?32:31-(Vs(e)/Ys|0)|0}var ba=256,Na=4194304;function mn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Sa(e,t,n){var a=e.pendingLanes;if(a===0)return 0;var l=0,o=e.suspendedLanes,h=e.pingedLanes;e=e.warmLanes;var g=a&134217727;return g!==0?(a=g&~o,a!==0?l=mn(a):(h&=g,h!==0?l=mn(h):n||(n=g&~e,n!==0&&(l=mn(n))))):(g=a&~o,g!==0?l=mn(g):h!==0?l=mn(h):n||(n=a&~e,n!==0&&(l=mn(n)))),l===0?0:t!==0&&t!==l&&(t&o)===0&&(o=l&-l,n=t&-t,o>=n||o===32&&(n&4194048)!==0)?t:l}function Fn(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Xs(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bl(){var e=ba;return ba<<=1,(ba&4194048)===0&&(ba=256),e}function Ul(){var e=Na;return Na<<=1,(Na&62914560)===0&&(Na=4194304),e}function Va(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Xn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Qs(e,t,n,a,l,o){var h=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var g=e.entanglements,N=e.expirationTimes,B=e.hiddenUpdates;for(n=h&~n;0<n;){var V=31-Tt(n),K=1<<V;g[V]=0,N[V]=-1;var U=B[V];if(U!==null)for(B[V]=null,V=0;V<U.length;V++){var C=U[V];C!==null&&(C.lane&=-536870913)}n&=~K}a!==0&&Cl(e,a,0),o!==0&&l===0&&e.tag!==0&&(e.suspendedLanes|=o&~(h&~t))}function Cl(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-Tt(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|n&4194090}function Ml(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-Tt(n),l=1<<a;l&t|e[a]&t&&(e[a]|=t),n&=~l}}function Ya(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fa(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Dl(){var e=b.p;return e!==0?e:(e=window.event,e===void 0?32:gh(e.type))}function Ks(e,t){var n=b.p;try{return b.p=e,t()}finally{b.p=n}}var rn=Math.random().toString(36).slice(2),gt="__reactFiber$"+rn,St="__reactProps$"+rn,wn="__reactContainer$"+rn,Xa="__reactEvents$"+rn,Zs="__reactListeners$"+rn,$s="__reactHandles$"+rn,kl="__reactResources$"+rn,Qn="__reactMarker$"+rn;function Qa(e){delete e[gt],delete e[St],delete e[Xa],delete e[Zs],delete e[$s]}function Tn(e){var t=e[gt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[wn]||n[gt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=eh(e);e!==null;){if(n=e[gt])return n;e=eh(e)}return t}e=n,n=e.parentNode}return null}function _n(e){if(e=e[gt]||e[wn]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Kn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(c(33))}function me(e){var t=e[kl];return t||(t=e[kl]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ae(e){e[Qn]=!0}var qe=new Set,Ot={};function Ke(e,t){ct(e,t),ct(e+"Capture",t)}function ct(e,t){for(Ot[e]=t,e=0;e<t.length;e++)qe.add(t[e])}var Ct=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cn={},Zn={};function Mt(e){return L.call(Zn,e)?!0:L.call(cn,e)?!1:Ct.test(e)?Zn[e]=!0:(cn[e]=!0,!1)}function gn(e,t,n){if(Mt(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function Ka(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function on(e,t,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+a)}}var zl,Js;function $n(e){if(zl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);zl=t&&t[1]||"",Js=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zl+e+Js}var Ll=!1;function Il(e,t){if(!e||Ll)return"";Ll=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(C){var U=C}Reflect.construct(e,[],K)}else{try{K.call()}catch(C){U=C}e.call(K.prototype)}}else{try{throw Error()}catch(C){U=C}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(C){if(C&&U&&typeof C.stack=="string")return[C.stack,U.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=a.DetermineComponentFrameRoot(),h=o[0],g=o[1];if(h&&g){var N=h.split(`
`),B=g.split(`
`);for(l=a=0;a<N.length&&!N[a].includes("DetermineComponentFrameRoot");)a++;for(;l<B.length&&!B[l].includes("DetermineComponentFrameRoot");)l++;if(a===N.length||l===B.length)for(a=N.length-1,l=B.length-1;1<=a&&0<=l&&N[a]!==B[l];)l--;for(;1<=a&&0<=l;a--,l--)if(N[a]!==B[l]){if(a!==1||l!==1)do if(a--,l--,0>l||N[a]!==B[l]){var V=`
`+N[a].replace(" at new "," at ");return e.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",e.displayName)),V}while(1<=a&&0<=l);break}}}finally{Ll=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?$n(n):""}function vr(e){switch(e.tag){case 26:case 27:case 5:return $n(e.type);case 16:return $n("Lazy");case 13:return $n("Suspense");case 19:return $n("SuspenseList");case 0:case 15:return Il(e.type,!1);case 11:return Il(e.type.render,!1);case 1:return Il(e.type,!0);case 31:return $n("Activity");default:return""}}function $t(e){try{var t="";do t+=vr(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function xt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Vo(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $m(e){var t=Vo(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(h){a=""+h,o.call(this,h)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(h){a=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ps(e){e._valueTracker||(e._valueTracker=$m(e))}function Yo(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=Vo(e)?e.checked?"true":"false":e.value),e=a,e!==n?(t.setValue(e),!0):!1}function Ws(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Jm=/[\n"\\]/g;function Jt(e){return e.replace(Jm,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function xr(e,t,n,a,l,o,h,g){e.name="",h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.type=h:e.removeAttribute("type"),t!=null?h==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+xt(t)):e.value!==""+xt(t)&&(e.value=""+xt(t)):h!=="submit"&&h!=="reset"||e.removeAttribute("value"),t!=null?yr(e,h,xt(t)):n!=null?yr(e,h,xt(n)):a!=null&&e.removeAttribute("value"),l==null&&o!=null&&(e.defaultChecked=!!o),l!=null&&(e.checked=l&&typeof l!="function"&&typeof l!="symbol"),g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"?e.name=""+xt(g):e.removeAttribute("name")}function Fo(e,t,n,a,l,o,h,g){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),t!=null||n!=null){if(!(o!=="submit"&&o!=="reset"||t!=null))return;n=n!=null?""+xt(n):"",t=t!=null?""+xt(t):n,g||t===e.value||(e.value=t),e.defaultValue=t}a=a??l,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=g?e.checked:!!a,e.defaultChecked=!!a,h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.name=h)}function yr(e,t,n){t==="number"&&Ws(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Za(e,t,n,a){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&a&&(e[n].defaultSelected=!0)}else{for(n=""+xt(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,a&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function Xo(e,t,n){if(t!=null&&(t=""+xt(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+xt(n):""}function Qo(e,t,n,a){if(t==null){if(a!=null){if(n!=null)throw Error(c(92));if(Z(a)){if(1<a.length)throw Error(c(93));a=a[0]}n=a}n==null&&(n=""),t=n}n=xt(t),e.defaultValue=n,a=e.textContent,a===n&&a!==""&&a!==null&&(e.value=a)}function $a(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Pm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ko(e,t,n){var a=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,n):typeof n!="number"||n===0||Pm.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Zo(e,t,n){if(t!=null&&typeof t!="object")throw Error(c(62));if(e=e.style,n!=null){for(var a in n)!n.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var l in t)a=t[l],t.hasOwnProperty(l)&&n[l]!==a&&Ko(e,l,a)}else for(var o in t)t.hasOwnProperty(o)&&Ko(e,o,t[o])}function br(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),e0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ei(e){return e0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Nr=null;function Sr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ja=null,Pa=null;function $o(e){var t=_n(e);if(t&&(e=t.stateNode)){var n=e[St]||null;e:switch(e=t.stateNode,t.type){case"input":if(xr(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Jt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var l=a[St]||null;if(!l)throw Error(c(90));xr(a,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(t=0;t<n.length;t++)a=n[t],a.form===e.form&&Yo(a)}break e;case"textarea":Xo(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Za(e,!!n.multiple,t,!1)}}}var jr=!1;function Jo(e,t,n){if(jr)return e(t,n);jr=!0;try{var a=e(t);return a}finally{if(jr=!1,(Ja!==null||Pa!==null)&&(Ii(),Ja&&(t=Ja,e=Pa,Pa=Ja=null,$o(t),e)))for(t=0;t<e.length;t++)$o(e[t])}}function Hl(e,t){var n=e.stateNode;if(n===null)return null;var a=n[St]||null;if(a===null)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(c(231,t,typeof n));return n}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ar=!1;if(Rn)try{var ql={};Object.defineProperty(ql,"passive",{get:function(){Ar=!0}}),window.addEventListener("test",ql,ql),window.removeEventListener("test",ql,ql)}catch{Ar=!1}var Jn=null,Er=null,ti=null;function Po(){if(ti)return ti;var e,t=Er,n=t.length,a,l="value"in Jn?Jn.value:Jn.textContent,o=l.length;for(e=0;e<n&&t[e]===l[e];e++);var h=n-e;for(a=1;a<=h&&t[n-a]===l[o-a];a++);return ti=l.slice(e,1<a?1-a:void 0)}function ni(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ai(){return!0}function Wo(){return!1}function Dt(e){function t(n,a,l,o,h){this._reactName=n,this._targetInst=l,this.type=a,this.nativeEvent=o,this.target=h,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(n=e[g],this[g]=n?n(o):o[g]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ai:Wo,this.isPropagationStopped=Wo,this}return S(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ai)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ai)},persist:function(){},isPersistent:ai}),t}var ja={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},li=Dt(ja),Gl=S({},ja,{view:0,detail:0}),t0=Dt(Gl),wr,Tr,Vl,si=S({},Gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vl&&(Vl&&e.type==="mousemove"?(wr=e.screenX-Vl.screenX,Tr=e.screenY-Vl.screenY):Tr=wr=0,Vl=e),wr)},movementY:function(e){return"movementY"in e?e.movementY:Tr}}),eu=Dt(si),n0=S({},si,{dataTransfer:0}),a0=Dt(n0),l0=S({},Gl,{relatedTarget:0}),_r=Dt(l0),s0=S({},ja,{animationName:0,elapsedTime:0,pseudoElement:0}),i0=Dt(s0),r0=S({},ja,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),c0=Dt(r0),o0=S({},ja,{data:0}),tu=Dt(o0),u0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},d0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},f0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=f0[e])?!!t[e]:!1}function Rr(){return h0}var m0=S({},Gl,{key:function(e){if(e.key){var t=u0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ni(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?d0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rr,charCode:function(e){return e.type==="keypress"?ni(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ni(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),g0=Dt(m0),p0=S({},si,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nu=Dt(p0),v0=S({},Gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rr}),x0=Dt(v0),y0=S({},ja,{propertyName:0,elapsedTime:0,pseudoElement:0}),b0=Dt(y0),N0=S({},si,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),S0=Dt(N0),j0=S({},ja,{newState:0,oldState:0}),A0=Dt(j0),E0=[9,13,27,32],Or=Rn&&"CompositionEvent"in window,Yl=null;Rn&&"documentMode"in document&&(Yl=document.documentMode);var w0=Rn&&"TextEvent"in window&&!Yl,au=Rn&&(!Or||Yl&&8<Yl&&11>=Yl),lu=" ",su=!1;function iu(e,t){switch(e){case"keyup":return E0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ru(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Wa=!1;function T0(e,t){switch(e){case"compositionend":return ru(t);case"keypress":return t.which!==32?null:(su=!0,lu);case"textInput":return e=t.data,e===lu&&su?null:e;default:return null}}function _0(e,t){if(Wa)return e==="compositionend"||!Or&&iu(e,t)?(e=Po(),ti=Er=Jn=null,Wa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return au&&t.locale!=="ko"?null:t.data;default:return null}}var R0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!R0[e.type]:t==="textarea"}function ou(e,t,n,a){Ja?Pa?Pa.push(a):Pa=[a]:Ja=a,t=Fi(t,"onChange"),0<t.length&&(n=new li("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Fl=null,Xl=null;function O0(e){Yf(e,0)}function ii(e){var t=Kn(e);if(Yo(t))return e}function uu(e,t){if(e==="change")return t}var du=!1;if(Rn){var Br;if(Rn){var Ur="oninput"in document;if(!Ur){var fu=document.createElement("div");fu.setAttribute("oninput","return;"),Ur=typeof fu.oninput=="function"}Br=Ur}else Br=!1;du=Br&&(!document.documentMode||9<document.documentMode)}function hu(){Fl&&(Fl.detachEvent("onpropertychange",mu),Xl=Fl=null)}function mu(e){if(e.propertyName==="value"&&ii(Xl)){var t=[];ou(t,Xl,e,Sr(e)),Jo(O0,t)}}function B0(e,t,n){e==="focusin"?(hu(),Fl=t,Xl=n,Fl.attachEvent("onpropertychange",mu)):e==="focusout"&&hu()}function U0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ii(Xl)}function C0(e,t){if(e==="click")return ii(t)}function M0(e,t){if(e==="input"||e==="change")return ii(t)}function D0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qt=typeof Object.is=="function"?Object.is:D0;function Ql(e,t){if(qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var l=n[a];if(!L.call(t,l)||!qt(e[l],t[l]))return!1}return!0}function gu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pu(e,t){var n=gu(e);e=0;for(var a;n;){if(n.nodeType===3){if(a=e+n.textContent.length,e<=t&&a>=t)return{node:n,offset:t-e};e=a}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gu(n)}}function vu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function xu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ws(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ws(e.document)}return t}function Cr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var k0=Rn&&"documentMode"in document&&11>=document.documentMode,el=null,Mr=null,Kl=null,Dr=!1;function yu(e,t,n){var a=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Dr||el==null||el!==Ws(a)||(a=el,"selectionStart"in a&&Cr(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Kl&&Ql(Kl,a)||(Kl=a,a=Fi(Mr,"onSelect"),0<a.length&&(t=new li("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=el)))}function Aa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var tl={animationend:Aa("Animation","AnimationEnd"),animationiteration:Aa("Animation","AnimationIteration"),animationstart:Aa("Animation","AnimationStart"),transitionrun:Aa("Transition","TransitionRun"),transitionstart:Aa("Transition","TransitionStart"),transitioncancel:Aa("Transition","TransitionCancel"),transitionend:Aa("Transition","TransitionEnd")},kr={},bu={};Rn&&(bu=document.createElement("div").style,"AnimationEvent"in window||(delete tl.animationend.animation,delete tl.animationiteration.animation,delete tl.animationstart.animation),"TransitionEvent"in window||delete tl.transitionend.transition);function Ea(e){if(kr[e])return kr[e];if(!tl[e])return e;var t=tl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in bu)return kr[e]=t[n];return e}var Nu=Ea("animationend"),Su=Ea("animationiteration"),ju=Ea("animationstart"),z0=Ea("transitionrun"),L0=Ea("transitionstart"),I0=Ea("transitioncancel"),Au=Ea("transitionend"),Eu=new Map,zr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zr.push("scrollEnd");function un(e,t){Eu.set(e,t),Ke(t,[e])}var wu=new WeakMap;function Pt(e,t){if(typeof e=="object"&&e!==null){var n=wu.get(e);return n!==void 0?n:(t={value:e,source:t,stack:$t(t)},wu.set(e,t),t)}return{value:e,source:t,stack:$t(t)}}var Wt=[],nl=0,Lr=0;function ri(){for(var e=nl,t=Lr=nl=0;t<e;){var n=Wt[t];Wt[t++]=null;var a=Wt[t];Wt[t++]=null;var l=Wt[t];Wt[t++]=null;var o=Wt[t];if(Wt[t++]=null,a!==null&&l!==null){var h=a.pending;h===null?l.next=l:(l.next=h.next,h.next=l),a.pending=l}o!==0&&Tu(n,l,o)}}function ci(e,t,n,a){Wt[nl++]=e,Wt[nl++]=t,Wt[nl++]=n,Wt[nl++]=a,Lr|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function Ir(e,t,n,a){return ci(e,t,n,a),oi(e)}function al(e,t){return ci(e,null,null,t),oi(e)}function Tu(e,t,n){e.lanes|=n;var a=e.alternate;a!==null&&(a.lanes|=n);for(var l=!1,o=e.return;o!==null;)o.childLanes|=n,a=o.alternate,a!==null&&(a.childLanes|=n),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(l=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,l&&t!==null&&(l=31-Tt(n),e=o.hiddenUpdates,a=e[l],a===null?e[l]=[t]:a.push(t),t.lane=n|536870912),o):null}function oi(e){if(50<ys)throw ys=0,Fc=null,Error(c(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ll={};function H0(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(e,t,n,a){return new H0(e,t,n,a)}function Hr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function On(e,t){var n=e.alternate;return n===null?(n=Gt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function _u(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ui(e,t,n,a,l,o){var h=0;if(a=e,typeof e=="function")Hr(e)&&(h=1);else if(typeof e=="string")h=Gg(e,n,he.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ne:return e=Gt(31,n,t,l),e.elementType=ne,e.lanes=o,e;case _:return wa(n.children,l,o,t);case z:h=8,l|=24;break;case te:return e=Gt(12,n,t,l|2),e.elementType=te,e.lanes=o,e;case H:return e=Gt(13,n,t,l),e.elementType=H,e.lanes=o,e;case k:return e=Gt(19,n,t,l),e.elementType=k,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ee:case q:h=10;break e;case ue:h=9;break e;case $:h=11;break e;case X:h=14;break e;case P:h=16,a=null;break e}h=29,n=Error(c(130,e===null?"null":typeof e,"")),a=null}return t=Gt(h,n,t,l),t.elementType=e,t.type=a,t.lanes=o,t}function wa(e,t,n,a){return e=Gt(7,e,a,t),e.lanes=n,e}function qr(e,t,n){return e=Gt(6,e,null,t),e.lanes=n,e}function Gr(e,t,n){return t=Gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var sl=[],il=0,di=null,fi=0,en=[],tn=0,Ta=null,Bn=1,Un="";function _a(e,t){sl[il++]=fi,sl[il++]=di,di=e,fi=t}function Ru(e,t,n){en[tn++]=Bn,en[tn++]=Un,en[tn++]=Ta,Ta=e;var a=Bn;e=Un;var l=32-Tt(a)-1;a&=~(1<<l),n+=1;var o=32-Tt(t)+l;if(30<o){var h=l-l%5;o=(a&(1<<h)-1).toString(32),a>>=h,l-=h,Bn=1<<32-Tt(t)+l|n<<l|a,Un=o+e}else Bn=1<<o|n<<l|a,Un=e}function Vr(e){e.return!==null&&(_a(e,1),Ru(e,1,0))}function Yr(e){for(;e===di;)di=sl[--il],sl[il]=null,fi=sl[--il],sl[il]=null;for(;e===Ta;)Ta=en[--tn],en[tn]=null,Un=en[--tn],en[tn]=null,Bn=en[--tn],en[tn]=null}var Bt=null,at=null,Ge=!1,Ra=null,pn=!1,Fr=Error(c(519));function Oa(e){var t=Error(c(418,""));throw Jl(Pt(t,e)),Fr}function Ou(e){var t=e.stateNode,n=e.type,a=e.memoizedProps;switch(t[gt]=e,t[St]=a,n){case"dialog":De("cancel",t),De("close",t);break;case"iframe":case"object":case"embed":De("load",t);break;case"video":case"audio":for(n=0;n<Ns.length;n++)De(Ns[n],t);break;case"source":De("error",t);break;case"img":case"image":case"link":De("error",t),De("load",t);break;case"details":De("toggle",t);break;case"input":De("invalid",t),Fo(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0),Ps(t);break;case"select":De("invalid",t);break;case"textarea":De("invalid",t),Qo(t,a.value,a.defaultValue,a.children),Ps(t)}n=a.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||a.suppressHydrationWarning===!0||Kf(t.textContent,n)?(a.popover!=null&&(De("beforetoggle",t),De("toggle",t)),a.onScroll!=null&&De("scroll",t),a.onScrollEnd!=null&&De("scrollend",t),a.onClick!=null&&(t.onclick=Xi),t=!0):t=!1,t||Oa(e)}function Bu(e){for(Bt=e.return;Bt;)switch(Bt.tag){case 5:case 13:pn=!1;return;case 27:case 3:pn=!0;return;default:Bt=Bt.return}}function Zl(e){if(e!==Bt)return!1;if(!Ge)return Bu(e),Ge=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||ro(e.type,e.memoizedProps)),n=!n),n&&at&&Oa(e),Bu(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){at=fn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}at=null}}else t===27?(t=at,ha(e.type)?(e=fo,fo=null,at=e):at=t):at=Bt?fn(e.stateNode.nextSibling):null;return!0}function $l(){at=Bt=null,Ge=!1}function Uu(){var e=Ra;return e!==null&&(Lt===null?Lt=e:Lt.push.apply(Lt,e),Ra=null),e}function Jl(e){Ra===null?Ra=[e]:Ra.push(e)}var Xr=Y(null),Ba=null,Cn=null;function Pn(e,t,n){I(Xr,t._currentValue),t._currentValue=n}function Mn(e){e._currentValue=Xr.current,G(Xr)}function Qr(e,t,n){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Kr(e,t,n,a){var l=e.child;for(l!==null&&(l.return=e);l!==null;){var o=l.dependencies;if(o!==null){var h=l.child;o=o.firstContext;e:for(;o!==null;){var g=o;o=l;for(var N=0;N<t.length;N++)if(g.context===t[N]){o.lanes|=n,g=o.alternate,g!==null&&(g.lanes|=n),Qr(o.return,n,e),a||(h=null);break e}o=g.next}}else if(l.tag===18){if(h=l.return,h===null)throw Error(c(341));h.lanes|=n,o=h.alternate,o!==null&&(o.lanes|=n),Qr(h,n,e),h=null}else h=l.child;if(h!==null)h.return=l;else for(h=l;h!==null;){if(h===e){h=null;break}if(l=h.sibling,l!==null){l.return=h.return,h=l;break}h=h.return}l=h}}function Pl(e,t,n,a){e=null;for(var l=t,o=!1;l!==null;){if(!o){if((l.flags&524288)!==0)o=!0;else if((l.flags&262144)!==0)break}if(l.tag===10){var h=l.alternate;if(h===null)throw Error(c(387));if(h=h.memoizedProps,h!==null){var g=l.type;qt(l.pendingProps.value,h.value)||(e!==null?e.push(g):e=[g])}}else if(l===Xe.current){if(h=l.alternate,h===null)throw Error(c(387));h.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(e!==null?e.push(Ts):e=[Ts])}l=l.return}e!==null&&Kr(t,e,n,a),t.flags|=262144}function hi(e){for(e=e.firstContext;e!==null;){if(!qt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ua(e){Ba=e,Cn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function _t(e){return Cu(Ba,e)}function mi(e,t){return Ba===null&&Ua(e),Cu(e,t)}function Cu(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Cn===null){if(e===null)throw Error(c(308));Cn=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Cn=Cn.next=t;return n}var q0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},G0=r.unstable_scheduleCallback,V0=r.unstable_NormalPriority,pt={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zr(){return{controller:new q0,data:new Map,refCount:0}}function Wl(e){e.refCount--,e.refCount===0&&G0(V0,function(){e.controller.abort()})}var es=null,$r=0,rl=0,cl=null;function Y0(e,t){if(es===null){var n=es=[];$r=0,rl=Pc(),cl={status:"pending",value:void 0,then:function(a){n.push(a)}}}return $r++,t.then(Mu,Mu),t}function Mu(){if(--$r===0&&es!==null){cl!==null&&(cl.status="fulfilled");var e=es;es=null,rl=0,cl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function F0(e,t){var n=[],a={status:"pending",value:null,reason:null,then:function(l){n.push(l)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var l=0;l<n.length;l++)(0,n[l])(t)},function(l){for(a.status="rejected",a.reason=l,l=0;l<n.length;l++)(0,n[l])(void 0)}),a}var Du=x.S;x.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Y0(e,t),Du!==null&&Du(e,t)};var Ca=Y(null);function Jr(){var e=Ca.current;return e!==null?e:We.pooledCache}function gi(e,t){t===null?I(Ca,Ca.current):I(Ca,t.pool)}function ku(){var e=Jr();return e===null?null:{parent:pt._currentValue,pool:e}}var ts=Error(c(460)),zu=Error(c(474)),pi=Error(c(542)),Pr={then:function(){}};function Lu(e){return e=e.status,e==="fulfilled"||e==="rejected"}function vi(){}function Iu(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(vi,vi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,qu(e),e;default:if(typeof t.status=="string")t.then(vi,vi);else{if(e=We,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var l=t;l.status="fulfilled",l.value=a}},function(a){if(t.status==="pending"){var l=t;l.status="rejected",l.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,qu(e),e}throw ns=t,ts}}var ns=null;function Hu(){if(ns===null)throw Error(c(459));var e=ns;return ns=null,e}function qu(e){if(e===ts||e===pi)throw Error(c(483))}var Wn=!1;function Wr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ec(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ea(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ta(e,t,n){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Ye&2)!==0){var l=a.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),a.pending=t,t=oi(e),Tu(e,null,n),t}return ci(e,a,t,n),oi(e)}function as(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Ml(e,n)}}function tc(e,t){var n=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,n===a)){var l=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var h={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};o===null?l=o=h:o=o.next=h,n=n.next}while(n!==null);o===null?l=o=t:o=o.next=t}else l=o=t;n={baseState:a.baseState,firstBaseUpdate:l,lastBaseUpdate:o,shared:a.shared,callbacks:a.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var nc=!1;function ls(){if(nc){var e=cl;if(e!==null)throw e}}function ss(e,t,n,a){nc=!1;var l=e.updateQueue;Wn=!1;var o=l.firstBaseUpdate,h=l.lastBaseUpdate,g=l.shared.pending;if(g!==null){l.shared.pending=null;var N=g,B=N.next;N.next=null,h===null?o=B:h.next=B,h=N;var V=e.alternate;V!==null&&(V=V.updateQueue,g=V.lastBaseUpdate,g!==h&&(g===null?V.firstBaseUpdate=B:g.next=B,V.lastBaseUpdate=N))}if(o!==null){var K=l.baseState;h=0,V=B=N=null,g=o;do{var U=g.lane&-536870913,C=U!==g.lane;if(C?(Le&U)===U:(a&U)===U){U!==0&&U===rl&&(nc=!0),V!==null&&(V=V.next={lane:0,tag:g.tag,payload:g.payload,callback:null,next:null});e:{var we=e,Se=g;U=t;var Je=n;switch(Se.tag){case 1:if(we=Se.payload,typeof we=="function"){K=we.call(Je,K,U);break e}K=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Se.payload,U=typeof we=="function"?we.call(Je,K,U):we,U==null)break e;K=S({},K,U);break e;case 2:Wn=!0}}U=g.callback,U!==null&&(e.flags|=64,C&&(e.flags|=8192),C=l.callbacks,C===null?l.callbacks=[U]:C.push(U))}else C={lane:U,tag:g.tag,payload:g.payload,callback:g.callback,next:null},V===null?(B=V=C,N=K):V=V.next=C,h|=U;if(g=g.next,g===null){if(g=l.shared.pending,g===null)break;C=g,g=C.next,C.next=null,l.lastBaseUpdate=C,l.shared.pending=null}}while(!0);V===null&&(N=K),l.baseState=N,l.firstBaseUpdate=B,l.lastBaseUpdate=V,o===null&&(l.shared.lanes=0),oa|=h,e.lanes=h,e.memoizedState=K}}function Gu(e,t){if(typeof e!="function")throw Error(c(191,e));e.call(t)}function Vu(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Gu(n[e],t)}var ol=Y(null),xi=Y(0);function Yu(e,t){e=qn,I(xi,e),I(ol,t),qn=e|t.baseLanes}function ac(){I(xi,qn),I(ol,ol.current)}function lc(){qn=xi.current,G(ol),G(xi)}var na=0,Oe=null,Ze=null,ft=null,yi=!1,ul=!1,Ma=!1,bi=0,is=0,dl=null,X0=0;function ot(){throw Error(c(321))}function sc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qt(e[n],t[n]))return!1;return!0}function ic(e,t,n,a,l,o){return na=o,Oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,x.H=e===null||e.memoizedState===null?Td:_d,Ma=!1,o=n(a,l),Ma=!1,ul&&(o=Xu(t,n,a,l)),Fu(e),o}function Fu(e){x.H=wi;var t=Ze!==null&&Ze.next!==null;if(na=0,ft=Ze=Oe=null,yi=!1,is=0,dl=null,t)throw Error(c(300));e===null||yt||(e=e.dependencies,e!==null&&hi(e)&&(yt=!0))}function Xu(e,t,n,a){Oe=e;var l=0;do{if(ul&&(dl=null),is=0,ul=!1,25<=l)throw Error(c(301));if(l+=1,ft=Ze=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}x.H=W0,o=t(n,a)}while(ul);return o}function Q0(){var e=x.H,t=e.useState()[0];return t=typeof t.then=="function"?rs(t):t,e=e.useState()[0],(Ze!==null?Ze.memoizedState:null)!==e&&(Oe.flags|=1024),t}function rc(){var e=bi!==0;return bi=0,e}function cc(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function oc(e){if(yi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}yi=!1}na=0,ft=Ze=Oe=null,ul=!1,is=bi=0,dl=null}function kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Oe.memoizedState=ft=e:ft=ft.next=e,ft}function ht(){if(Ze===null){var e=Oe.alternate;e=e!==null?e.memoizedState:null}else e=Ze.next;var t=ft===null?Oe.memoizedState:ft.next;if(t!==null)ft=t,Ze=e;else{if(e===null)throw Oe.alternate===null?Error(c(467)):Error(c(310));Ze=e,e={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},ft===null?Oe.memoizedState=ft=e:ft=ft.next=e}return ft}function uc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rs(e){var t=is;return is+=1,dl===null&&(dl=[]),e=Iu(dl,e,t),t=Oe,(ft===null?t.memoizedState:ft.next)===null&&(t=t.alternate,x.H=t===null||t.memoizedState===null?Td:_d),e}function Ni(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return rs(e);if(e.$$typeof===q)return _t(e)}throw Error(c(438,String(e)))}function dc(e){var t=null,n=Oe.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var a=Oe.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(l){return l.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=uc(),Oe.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),a=0;a<e;a++)n[a]=se;return t.index++,n}function Dn(e,t){return typeof t=="function"?t(e):t}function Si(e){var t=ht();return fc(t,Ze,e)}function fc(e,t,n){var a=e.queue;if(a===null)throw Error(c(311));a.lastRenderedReducer=n;var l=e.baseQueue,o=a.pending;if(o!==null){if(l!==null){var h=l.next;l.next=o.next,o.next=h}t.baseQueue=l=o,a.pending=null}if(o=e.baseState,l===null)e.memoizedState=o;else{t=l.next;var g=h=null,N=null,B=t,V=!1;do{var K=B.lane&-536870913;if(K!==B.lane?(Le&K)===K:(na&K)===K){var U=B.revertLane;if(U===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),K===rl&&(V=!0);else if((na&U)===U){B=B.next,U===rl&&(V=!0);continue}else K={lane:0,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(g=N=K,h=o):N=N.next=K,Oe.lanes|=U,oa|=U;K=B.action,Ma&&n(o,K),o=B.hasEagerState?B.eagerState:n(o,K)}else U={lane:K,revertLane:B.revertLane,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},N===null?(g=N=U,h=o):N=N.next=U,Oe.lanes|=K,oa|=K;B=B.next}while(B!==null&&B!==t);if(N===null?h=o:N.next=g,!qt(o,e.memoizedState)&&(yt=!0,V&&(n=cl,n!==null)))throw n;e.memoizedState=o,e.baseState=h,e.baseQueue=N,a.lastRenderedState=o}return l===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function hc(e){var t=ht(),n=t.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=e;var a=n.dispatch,l=n.pending,o=t.memoizedState;if(l!==null){n.pending=null;var h=l=l.next;do o=e(o,h.action),h=h.next;while(h!==l);qt(o,t.memoizedState)||(yt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,a]}function Qu(e,t,n){var a=Oe,l=ht(),o=Ge;if(o){if(n===void 0)throw Error(c(407));n=n()}else n=t();var h=!qt((Ze||l).memoizedState,n);h&&(l.memoizedState=n,yt=!0),l=l.queue;var g=$u.bind(null,a,l,e);if(cs(2048,8,g,[e]),l.getSnapshot!==t||h||ft!==null&&ft.memoizedState.tag&1){if(a.flags|=2048,fl(9,ji(),Zu.bind(null,a,l,n,t),null),We===null)throw Error(c(349));o||(na&124)!==0||Ku(a,t,n)}return n}function Ku(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Oe.updateQueue,t===null?(t=uc(),Oe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Zu(e,t,n,a){t.value=n,t.getSnapshot=a,Ju(t)&&Pu(e)}function $u(e,t,n){return n(function(){Ju(t)&&Pu(e)})}function Ju(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!qt(e,n)}catch{return!0}}function Pu(e){var t=al(e,2);t!==null&&Qt(t,e,2)}function mc(e){var t=kt();if(typeof e=="function"){var n=e;if(e=n(),Ma){Ht(!0);try{n()}finally{Ht(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:e},t}function Wu(e,t,n,a){return e.baseState=n,fc(e,Ze,typeof a=="function"?a:Dn)}function K0(e,t,n,a,l){if(Ei(e))throw Error(c(485));if(e=t.action,e!==null){var o={payload:l,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(h){o.listeners.push(h)}};x.T!==null?n(!0):o.isTransition=!1,a(o),n=t.pending,n===null?(o.next=t.pending=o,ed(t,o)):(o.next=n.next,t.pending=n.next=o)}}function ed(e,t){var n=t.action,a=t.payload,l=e.state;if(t.isTransition){var o=x.T,h={};x.T=h;try{var g=n(l,a),N=x.S;N!==null&&N(h,g),td(e,t,g)}catch(B){gc(e,t,B)}finally{x.T=o}}else try{o=n(l,a),td(e,t,o)}catch(B){gc(e,t,B)}}function td(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(a){nd(e,t,a)},function(a){return gc(e,t,a)}):nd(e,t,n)}function nd(e,t,n){t.status="fulfilled",t.value=n,ad(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,ed(e,n)))}function gc(e,t,n){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=n,ad(t),t=t.next;while(t!==a)}e.action=null}function ad(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ld(e,t){return t}function sd(e,t){if(Ge){var n=We.formState;if(n!==null){e:{var a=Oe;if(Ge){if(at){t:{for(var l=at,o=pn;l.nodeType!==8;){if(!o){l=null;break t}if(l=fn(l.nextSibling),l===null){l=null;break t}}o=l.data,l=o==="F!"||o==="F"?l:null}if(l){at=fn(l.nextSibling),a=l.data==="F!";break e}}Oa(a)}a=!1}a&&(t=n[0])}}return n=kt(),n.memoizedState=n.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ld,lastRenderedState:t},n.queue=a,n=Ad.bind(null,Oe,a),a.dispatch=n,a=mc(!1),o=bc.bind(null,Oe,!1,a.queue),a=kt(),l={state:t,dispatch:null,action:e,pending:null},a.queue=l,n=K0.bind(null,Oe,l,o,n),l.dispatch=n,a.memoizedState=e,[t,n,!1]}function id(e){var t=ht();return rd(t,Ze,e)}function rd(e,t,n){if(t=fc(e,t,ld)[0],e=Si(Dn)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=rs(t)}catch(h){throw h===ts?pi:h}else a=t;t=ht();var l=t.queue,o=l.dispatch;return n!==t.memoizedState&&(Oe.flags|=2048,fl(9,ji(),Z0.bind(null,l,n),null)),[a,o,e]}function Z0(e,t){e.action=t}function cd(e){var t=ht(),n=Ze;if(n!==null)return rd(t,n,e);ht(),t=t.memoizedState,n=ht();var a=n.queue.dispatch;return n.memoizedState=e,[t,a,!1]}function fl(e,t,n,a){return e={tag:e,create:n,deps:a,inst:t,next:null},t=Oe.updateQueue,t===null&&(t=uc(),Oe.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function ji(){return{destroy:void 0,resource:void 0}}function od(){return ht().memoizedState}function Ai(e,t,n,a){var l=kt();a=a===void 0?null:a,Oe.flags|=e,l.memoizedState=fl(1|t,ji(),n,a)}function cs(e,t,n,a){var l=ht();a=a===void 0?null:a;var o=l.memoizedState.inst;Ze!==null&&a!==null&&sc(a,Ze.memoizedState.deps)?l.memoizedState=fl(t,o,n,a):(Oe.flags|=e,l.memoizedState=fl(1|t,o,n,a))}function ud(e,t){Ai(8390656,8,e,t)}function dd(e,t){cs(2048,8,e,t)}function fd(e,t){return cs(4,2,e,t)}function hd(e,t){return cs(4,4,e,t)}function md(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function gd(e,t,n){n=n!=null?n.concat([e]):null,cs(4,4,md.bind(null,t,e),n)}function pc(){}function pd(e,t){var n=ht();t=t===void 0?null:t;var a=n.memoizedState;return t!==null&&sc(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function vd(e,t){var n=ht();t=t===void 0?null:t;var a=n.memoizedState;if(t!==null&&sc(t,a[1]))return a[0];if(a=e(),Ma){Ht(!0);try{e()}finally{Ht(!1)}}return n.memoizedState=[a,t],a}function vc(e,t,n){return n===void 0||(na&1073741824)!==0?e.memoizedState=t:(e.memoizedState=n,e=Nf(),Oe.lanes|=e,oa|=e,n)}function xd(e,t,n,a){return qt(n,t)?n:ol.current!==null?(e=vc(e,n,a),qt(e,t)||(yt=!0),e):(na&42)===0?(yt=!0,e.memoizedState=n):(e=Nf(),Oe.lanes|=e,oa|=e,t)}function yd(e,t,n,a,l){var o=b.p;b.p=o!==0&&8>o?o:8;var h=x.T,g={};x.T=g,bc(e,!1,t,n);try{var N=l(),B=x.S;if(B!==null&&B(g,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var V=F0(N,a);os(e,t,V,Xt(e))}else os(e,t,a,Xt(e))}catch(K){os(e,t,{then:function(){},status:"rejected",reason:K},Xt())}finally{b.p=o,x.T=h}}function $0(){}function xc(e,t,n,a){if(e.tag!==5)throw Error(c(476));var l=bd(e).queue;yd(e,l,t,D,n===null?$0:function(){return Nd(e),n(a)})}function bd(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:D},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dn,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Nd(e){var t=bd(e).next.queue;os(e,t,{},Xt())}function yc(){return _t(Ts)}function Sd(){return ht().memoizedState}function jd(){return ht().memoizedState}function J0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Xt();e=ea(n);var a=ta(t,e,n);a!==null&&(Qt(a,t,n),as(a,t,n)),t={cache:Zr()},e.payload=t;return}t=t.return}}function P0(e,t,n){var a=Xt();n={lane:a,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ei(e)?Ed(t,n):(n=Ir(e,t,n,a),n!==null&&(Qt(n,e,a),wd(n,t,a)))}function Ad(e,t,n){var a=Xt();os(e,t,n,a)}function os(e,t,n,a){var l={lane:a,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ei(e))Ed(t,l);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var h=t.lastRenderedState,g=o(h,n);if(l.hasEagerState=!0,l.eagerState=g,qt(g,h))return ci(e,t,l,0),We===null&&ri(),!1}catch{}finally{}if(n=Ir(e,t,l,a),n!==null)return Qt(n,e,a),wd(n,t,a),!0}return!1}function bc(e,t,n,a){if(a={lane:2,revertLane:Pc(),action:a,hasEagerState:!1,eagerState:null,next:null},Ei(e)){if(t)throw Error(c(479))}else t=Ir(e,n,a,2),t!==null&&Qt(t,e,2)}function Ei(e){var t=e.alternate;return e===Oe||t!==null&&t===Oe}function Ed(e,t){ul=yi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function wd(e,t,n){if((n&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,n|=a,t.lanes=n,Ml(e,n)}}var wi={readContext:_t,use:Ni,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useLayoutEffect:ot,useInsertionEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useSyncExternalStore:ot,useId:ot,useHostTransitionStatus:ot,useFormState:ot,useActionState:ot,useOptimistic:ot,useMemoCache:ot,useCacheRefresh:ot},Td={readContext:_t,use:Ni,useCallback:function(e,t){return kt().memoizedState=[e,t===void 0?null:t],e},useContext:_t,useEffect:ud,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Ai(4194308,4,md.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ai(4194308,4,e,t)},useInsertionEffect:function(e,t){Ai(4,2,e,t)},useMemo:function(e,t){var n=kt();t=t===void 0?null:t;var a=e();if(Ma){Ht(!0);try{e()}finally{Ht(!1)}}return n.memoizedState=[a,t],a},useReducer:function(e,t,n){var a=kt();if(n!==void 0){var l=n(t);if(Ma){Ht(!0);try{n(t)}finally{Ht(!1)}}}else l=t;return a.memoizedState=a.baseState=l,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:l},a.queue=e,e=e.dispatch=P0.bind(null,Oe,e),[a.memoizedState,e]},useRef:function(e){var t=kt();return e={current:e},t.memoizedState=e},useState:function(e){e=mc(e);var t=e.queue,n=Ad.bind(null,Oe,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:pc,useDeferredValue:function(e,t){var n=kt();return vc(n,e,t)},useTransition:function(){var e=mc(!1);return e=yd.bind(null,Oe,e.queue,!0,!1),kt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var a=Oe,l=kt();if(Ge){if(n===void 0)throw Error(c(407));n=n()}else{if(n=t(),We===null)throw Error(c(349));(Le&124)!==0||Ku(a,t,n)}l.memoizedState=n;var o={value:n,getSnapshot:t};return l.queue=o,ud($u.bind(null,a,o,e),[e]),a.flags|=2048,fl(9,ji(),Zu.bind(null,a,o,n,t),null),n},useId:function(){var e=kt(),t=We.identifierPrefix;if(Ge){var n=Un,a=Bn;n=(a&~(1<<32-Tt(a)-1)).toString(32)+n,t="«"+t+"R"+n,n=bi++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=X0++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:yc,useFormState:sd,useActionState:sd,useOptimistic:function(e){var t=kt();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=bc.bind(null,Oe,!0,n),n.dispatch=t,[e,t]},useMemoCache:dc,useCacheRefresh:function(){return kt().memoizedState=J0.bind(null,Oe)}},_d={readContext:_t,use:Ni,useCallback:pd,useContext:_t,useEffect:dd,useImperativeHandle:gd,useInsertionEffect:fd,useLayoutEffect:hd,useMemo:vd,useReducer:Si,useRef:od,useState:function(){return Si(Dn)},useDebugValue:pc,useDeferredValue:function(e,t){var n=ht();return xd(n,Ze.memoizedState,e,t)},useTransition:function(){var e=Si(Dn)[0],t=ht().memoizedState;return[typeof e=="boolean"?e:rs(e),t]},useSyncExternalStore:Qu,useId:Sd,useHostTransitionStatus:yc,useFormState:id,useActionState:id,useOptimistic:function(e,t){var n=ht();return Wu(n,Ze,e,t)},useMemoCache:dc,useCacheRefresh:jd},W0={readContext:_t,use:Ni,useCallback:pd,useContext:_t,useEffect:dd,useImperativeHandle:gd,useInsertionEffect:fd,useLayoutEffect:hd,useMemo:vd,useReducer:hc,useRef:od,useState:function(){return hc(Dn)},useDebugValue:pc,useDeferredValue:function(e,t){var n=ht();return Ze===null?vc(n,e,t):xd(n,Ze.memoizedState,e,t)},useTransition:function(){var e=hc(Dn)[0],t=ht().memoizedState;return[typeof e=="boolean"?e:rs(e),t]},useSyncExternalStore:Qu,useId:Sd,useHostTransitionStatus:yc,useFormState:cd,useActionState:cd,useOptimistic:function(e,t){var n=ht();return Ze!==null?Wu(n,Ze,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:dc,useCacheRefresh:jd},hl=null,us=0;function Ti(e){var t=us;return us+=1,hl===null&&(hl=[]),Iu(hl,e,t)}function ds(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function _i(e,t){throw t.$$typeof===j?Error(c(525)):(e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Rd(e){var t=e._init;return t(e._payload)}function Od(e){function t(w,A){if(e){var R=w.deletions;R===null?(w.deletions=[A],w.flags|=16):R.push(A)}}function n(w,A){if(!e)return null;for(;A!==null;)t(w,A),A=A.sibling;return null}function a(w){for(var A=new Map;w!==null;)w.key!==null?A.set(w.key,w):A.set(w.index,w),w=w.sibling;return A}function l(w,A){return w=On(w,A),w.index=0,w.sibling=null,w}function o(w,A,R){return w.index=R,e?(R=w.alternate,R!==null?(R=R.index,R<A?(w.flags|=67108866,A):R):(w.flags|=67108866,A)):(w.flags|=1048576,A)}function h(w){return e&&w.alternate===null&&(w.flags|=67108866),w}function g(w,A,R,F){return A===null||A.tag!==6?(A=qr(R,w.mode,F),A.return=w,A):(A=l(A,R),A.return=w,A)}function N(w,A,R,F){var ge=R.type;return ge===_?V(w,A,R.props.children,F,R.key):A!==null&&(A.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===P&&Rd(ge)===A.type)?(A=l(A,R.props),ds(A,R),A.return=w,A):(A=ui(R.type,R.key,R.props,null,w.mode,F),ds(A,R),A.return=w,A)}function B(w,A,R,F){return A===null||A.tag!==4||A.stateNode.containerInfo!==R.containerInfo||A.stateNode.implementation!==R.implementation?(A=Gr(R,w.mode,F),A.return=w,A):(A=l(A,R.children||[]),A.return=w,A)}function V(w,A,R,F,ge){return A===null||A.tag!==7?(A=wa(R,w.mode,F,ge),A.return=w,A):(A=l(A,R),A.return=w,A)}function K(w,A,R){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=qr(""+A,w.mode,R),A.return=w,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case T:return R=ui(A.type,A.key,A.props,null,w.mode,R),ds(R,A),R.return=w,R;case O:return A=Gr(A,w.mode,R),A.return=w,A;case P:var F=A._init;return A=F(A._payload),K(w,A,R)}if(Z(A)||Te(A))return A=wa(A,w.mode,R,null),A.return=w,A;if(typeof A.then=="function")return K(w,Ti(A),R);if(A.$$typeof===q)return K(w,mi(w,A),R);_i(w,A)}return null}function U(w,A,R,F){var ge=A!==null?A.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return ge!==null?null:g(w,A,""+R,F);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case T:return R.key===ge?N(w,A,R,F):null;case O:return R.key===ge?B(w,A,R,F):null;case P:return ge=R._init,R=ge(R._payload),U(w,A,R,F)}if(Z(R)||Te(R))return ge!==null?null:V(w,A,R,F,null);if(typeof R.then=="function")return U(w,A,Ti(R),F);if(R.$$typeof===q)return U(w,A,mi(w,R),F);_i(w,R)}return null}function C(w,A,R,F,ge){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return w=w.get(R)||null,g(A,w,""+F,ge);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case T:return w=w.get(F.key===null?R:F.key)||null,N(A,w,F,ge);case O:return w=w.get(F.key===null?R:F.key)||null,B(A,w,F,ge);case P:var Ue=F._init;return F=Ue(F._payload),C(w,A,R,F,ge)}if(Z(F)||Te(F))return w=w.get(R)||null,V(A,w,F,ge,null);if(typeof F.then=="function")return C(w,A,R,Ti(F),ge);if(F.$$typeof===q)return C(w,A,R,mi(A,F),ge);_i(A,F)}return null}function we(w,A,R,F){for(var ge=null,Ue=null,ve=A,Ee=A=0,Nt=null;ve!==null&&Ee<R.length;Ee++){ve.index>Ee?(Nt=ve,ve=null):Nt=ve.sibling;var Ie=U(w,ve,R[Ee],F);if(Ie===null){ve===null&&(ve=Nt);break}e&&ve&&Ie.alternate===null&&t(w,ve),A=o(Ie,A,Ee),Ue===null?ge=Ie:Ue.sibling=Ie,Ue=Ie,ve=Nt}if(Ee===R.length)return n(w,ve),Ge&&_a(w,Ee),ge;if(ve===null){for(;Ee<R.length;Ee++)ve=K(w,R[Ee],F),ve!==null&&(A=o(ve,A,Ee),Ue===null?ge=ve:Ue.sibling=ve,Ue=ve);return Ge&&_a(w,Ee),ge}for(ve=a(ve);Ee<R.length;Ee++)Nt=C(ve,w,Ee,R[Ee],F),Nt!==null&&(e&&Nt.alternate!==null&&ve.delete(Nt.key===null?Ee:Nt.key),A=o(Nt,A,Ee),Ue===null?ge=Nt:Ue.sibling=Nt,Ue=Nt);return e&&ve.forEach(function(xa){return t(w,xa)}),Ge&&_a(w,Ee),ge}function Se(w,A,R,F){if(R==null)throw Error(c(151));for(var ge=null,Ue=null,ve=A,Ee=A=0,Nt=null,Ie=R.next();ve!==null&&!Ie.done;Ee++,Ie=R.next()){ve.index>Ee?(Nt=ve,ve=null):Nt=ve.sibling;var xa=U(w,ve,Ie.value,F);if(xa===null){ve===null&&(ve=Nt);break}e&&ve&&xa.alternate===null&&t(w,ve),A=o(xa,A,Ee),Ue===null?ge=xa:Ue.sibling=xa,Ue=xa,ve=Nt}if(Ie.done)return n(w,ve),Ge&&_a(w,Ee),ge;if(ve===null){for(;!Ie.done;Ee++,Ie=R.next())Ie=K(w,Ie.value,F),Ie!==null&&(A=o(Ie,A,Ee),Ue===null?ge=Ie:Ue.sibling=Ie,Ue=Ie);return Ge&&_a(w,Ee),ge}for(ve=a(ve);!Ie.done;Ee++,Ie=R.next())Ie=C(ve,w,Ee,Ie.value,F),Ie!==null&&(e&&Ie.alternate!==null&&ve.delete(Ie.key===null?Ee:Ie.key),A=o(Ie,A,Ee),Ue===null?ge=Ie:Ue.sibling=Ie,Ue=Ie);return e&&ve.forEach(function(e1){return t(w,e1)}),Ge&&_a(w,Ee),ge}function Je(w,A,R,F){if(typeof R=="object"&&R!==null&&R.type===_&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case T:e:{for(var ge=R.key;A!==null;){if(A.key===ge){if(ge=R.type,ge===_){if(A.tag===7){n(w,A.sibling),F=l(A,R.props.children),F.return=w,w=F;break e}}else if(A.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===P&&Rd(ge)===A.type){n(w,A.sibling),F=l(A,R.props),ds(F,R),F.return=w,w=F;break e}n(w,A);break}else t(w,A);A=A.sibling}R.type===_?(F=wa(R.props.children,w.mode,F,R.key),F.return=w,w=F):(F=ui(R.type,R.key,R.props,null,w.mode,F),ds(F,R),F.return=w,w=F)}return h(w);case O:e:{for(ge=R.key;A!==null;){if(A.key===ge)if(A.tag===4&&A.stateNode.containerInfo===R.containerInfo&&A.stateNode.implementation===R.implementation){n(w,A.sibling),F=l(A,R.children||[]),F.return=w,w=F;break e}else{n(w,A);break}else t(w,A);A=A.sibling}F=Gr(R,w.mode,F),F.return=w,w=F}return h(w);case P:return ge=R._init,R=ge(R._payload),Je(w,A,R,F)}if(Z(R))return we(w,A,R,F);if(Te(R)){if(ge=Te(R),typeof ge!="function")throw Error(c(150));return R=ge.call(R),Se(w,A,R,F)}if(typeof R.then=="function")return Je(w,A,Ti(R),F);if(R.$$typeof===q)return Je(w,A,mi(w,R),F);_i(w,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,A!==null&&A.tag===6?(n(w,A.sibling),F=l(A,R),F.return=w,w=F):(n(w,A),F=qr(R,w.mode,F),F.return=w,w=F),h(w)):n(w,A)}return function(w,A,R,F){try{us=0;var ge=Je(w,A,R,F);return hl=null,ge}catch(ve){if(ve===ts||ve===pi)throw ve;var Ue=Gt(29,ve,null,w.mode);return Ue.lanes=F,Ue.return=w,Ue}finally{}}}var ml=Od(!0),Bd=Od(!1),nn=Y(null),vn=null;function aa(e){var t=e.alternate;I(vt,vt.current&1),I(nn,e),vn===null&&(t===null||ol.current!==null||t.memoizedState!==null)&&(vn=e)}function Ud(e){if(e.tag===22){if(I(vt,vt.current),I(nn,e),vn===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(vn=e)}}else la()}function la(){I(vt,vt.current),I(nn,nn.current)}function kn(e){G(nn),vn===e&&(vn=null),G(vt)}var vt=Y(0);function Ri(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||uo(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Nc(e,t,n,a){t=e.memoizedState,n=n(a,t),n=n==null?t:S({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Sc={enqueueSetState:function(e,t,n){e=e._reactInternals;var a=Xt(),l=ea(a);l.payload=t,n!=null&&(l.callback=n),t=ta(e,l,a),t!==null&&(Qt(t,e,a),as(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=Xt(),l=ea(a);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=ta(e,l,a),t!==null&&(Qt(t,e,a),as(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xt(),a=ea(n);a.tag=2,t!=null&&(a.callback=t),t=ta(e,a,n),t!==null&&(Qt(t,e,n),as(t,e,n))}};function Cd(e,t,n,a,l,o,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,o,h):t.prototype&&t.prototype.isPureReactComponent?!Ql(n,a)||!Ql(l,o):!0}function Md(e,t,n,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&Sc.enqueueReplaceState(t,t.state,null)}function Da(e,t){var n=t;if("ref"in t){n={};for(var a in t)a!=="ref"&&(n[a]=t[a])}if(e=e.defaultProps){n===t&&(n=S({},n));for(var l in e)n[l]===void 0&&(n[l]=e[l])}return n}var Oi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Dd(e){Oi(e)}function kd(e){console.error(e)}function zd(e){Oi(e)}function Bi(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function Ld(e,t,n){try{var a=e.onCaughtError;a(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function jc(e,t,n){return n=ea(n),n.tag=3,n.payload={element:null},n.callback=function(){Bi(e,t)},n}function Id(e){return e=ea(e),e.tag=3,e}function Hd(e,t,n,a){var l=n.type.getDerivedStateFromError;if(typeof l=="function"){var o=a.value;e.payload=function(){return l(o)},e.callback=function(){Ld(t,n,a)}}var h=n.stateNode;h!==null&&typeof h.componentDidCatch=="function"&&(e.callback=function(){Ld(t,n,a),typeof l!="function"&&(ua===null?ua=new Set([this]):ua.add(this));var g=a.stack;this.componentDidCatch(a.value,{componentStack:g!==null?g:""})})}function eg(e,t,n,a,l){if(n.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=n.alternate,t!==null&&Pl(t,n,l,!0),n=nn.current,n!==null){switch(n.tag){case 13:return vn===null?Qc():n.alternate===null&&lt===0&&(lt=3),n.flags&=-257,n.flags|=65536,n.lanes=l,a===Pr?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([a]):t.add(a),Zc(e,a,l)),!1;case 22:return n.flags|=65536,a===Pr?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([a]):n.add(a)),Zc(e,a,l)),!1}throw Error(c(435,n.tag))}return Zc(e,a,l),Qc(),!1}if(Ge)return t=nn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=l,a!==Fr&&(e=Error(c(422),{cause:a}),Jl(Pt(e,n)))):(a!==Fr&&(t=Error(c(423),{cause:a}),Jl(Pt(t,n))),e=e.current.alternate,e.flags|=65536,l&=-l,e.lanes|=l,a=Pt(a,n),l=jc(e.stateNode,a,l),tc(e,l),lt!==4&&(lt=2)),!1;var o=Error(c(520),{cause:a});if(o=Pt(o,n),xs===null?xs=[o]:xs.push(o),lt!==4&&(lt=2),t===null)return!0;a=Pt(a,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=l&-l,n.lanes|=e,e=jc(n.stateNode,a,e),tc(n,e),!1;case 1:if(t=n.type,o=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(ua===null||!ua.has(o))))return n.flags|=65536,l&=-l,n.lanes|=l,l=Id(l),Hd(l,e,n,a),tc(n,l),!1}n=n.return}while(n!==null);return!1}var qd=Error(c(461)),yt=!1;function jt(e,t,n,a){t.child=e===null?Bd(t,null,n,a):ml(t,e.child,n,a)}function Gd(e,t,n,a,l){n=n.render;var o=t.ref;if("ref"in a){var h={};for(var g in a)g!=="ref"&&(h[g]=a[g])}else h=a;return Ua(t),a=ic(e,t,n,h,o,l),g=rc(),e!==null&&!yt?(cc(e,t,l),zn(e,t,l)):(Ge&&g&&Vr(t),t.flags|=1,jt(e,t,a,l),t.child)}function Vd(e,t,n,a,l){if(e===null){var o=n.type;return typeof o=="function"&&!Hr(o)&&o.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=o,Yd(e,t,o,a,l)):(e=ui(n.type,null,a,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!Bc(e,l)){var h=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ql,n(h,a)&&e.ref===t.ref)return zn(e,t,l)}return t.flags|=1,e=On(o,a),e.ref=t.ref,e.return=t,t.child=e}function Yd(e,t,n,a,l){if(e!==null){var o=e.memoizedProps;if(Ql(o,a)&&e.ref===t.ref)if(yt=!1,t.pendingProps=a=o,Bc(e,l))(e.flags&131072)!==0&&(yt=!0);else return t.lanes=e.lanes,zn(e,t,l)}return Ac(e,t,n,a,l)}function Fd(e,t,n){var a=t.pendingProps,l=a.children,o=e!==null?e.memoizedState:null;if(a.mode==="hidden"){if((t.flags&128)!==0){if(a=o!==null?o.baseLanes|n:n,e!==null){for(l=t.child=e.child,o=0;l!==null;)o=o|l.lanes|l.childLanes,l=l.sibling;t.childLanes=o&~a}else t.childLanes=0,t.child=null;return Xd(e,t,a,n)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&gi(t,o!==null?o.cachePool:null),o!==null?Yu(t,o):ac(),Ud(t);else return t.lanes=t.childLanes=536870912,Xd(e,t,o!==null?o.baseLanes|n:n,n)}else o!==null?(gi(t,o.cachePool),Yu(t,o),la(),t.memoizedState=null):(e!==null&&gi(t,null),ac(),la());return jt(e,t,l,n),t.child}function Xd(e,t,n,a){var l=Jr();return l=l===null?null:{parent:pt._currentValue,pool:l},t.memoizedState={baseLanes:n,cachePool:l},e!==null&&gi(t,null),ac(),Ud(t),e!==null&&Pl(e,t,a,!0),null}function Ui(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(c(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Ac(e,t,n,a,l){return Ua(t),n=ic(e,t,n,a,void 0,l),a=rc(),e!==null&&!yt?(cc(e,t,l),zn(e,t,l)):(Ge&&a&&Vr(t),t.flags|=1,jt(e,t,n,l),t.child)}function Qd(e,t,n,a,l,o){return Ua(t),t.updateQueue=null,n=Xu(t,a,n,l),Fu(e),a=rc(),e!==null&&!yt?(cc(e,t,o),zn(e,t,o)):(Ge&&a&&Vr(t),t.flags|=1,jt(e,t,n,o),t.child)}function Kd(e,t,n,a,l){if(Ua(t),t.stateNode===null){var o=ll,h=n.contextType;typeof h=="object"&&h!==null&&(o=_t(h)),o=new n(a,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Sc,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=a,o.state=t.memoizedState,o.refs={},Wr(t),h=n.contextType,o.context=typeof h=="object"&&h!==null?_t(h):ll,o.state=t.memoizedState,h=n.getDerivedStateFromProps,typeof h=="function"&&(Nc(t,n,h,a),o.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(h=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),h!==o.state&&Sc.enqueueReplaceState(o,o.state,null),ss(t,a,o,l),ls(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){o=t.stateNode;var g=t.memoizedProps,N=Da(n,g);o.props=N;var B=o.context,V=n.contextType;h=ll,typeof V=="object"&&V!==null&&(h=_t(V));var K=n.getDerivedStateFromProps;V=typeof K=="function"||typeof o.getSnapshotBeforeUpdate=="function",g=t.pendingProps!==g,V||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(g||B!==h)&&Md(t,o,a,h),Wn=!1;var U=t.memoizedState;o.state=U,ss(t,a,o,l),ls(),B=t.memoizedState,g||U!==B||Wn?(typeof K=="function"&&(Nc(t,n,K,a),B=t.memoizedState),(N=Wn||Cd(t,n,N,a,U,B,h))?(V||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=B),o.props=a,o.state=B,o.context=h,a=N):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{o=t.stateNode,ec(e,t),h=t.memoizedProps,V=Da(n,h),o.props=V,K=t.pendingProps,U=o.context,B=n.contextType,N=ll,typeof B=="object"&&B!==null&&(N=_t(B)),g=n.getDerivedStateFromProps,(B=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(h!==K||U!==N)&&Md(t,o,a,N),Wn=!1,U=t.memoizedState,o.state=U,ss(t,a,o,l),ls();var C=t.memoizedState;h!==K||U!==C||Wn||e!==null&&e.dependencies!==null&&hi(e.dependencies)?(typeof g=="function"&&(Nc(t,n,g,a),C=t.memoizedState),(V=Wn||Cd(t,n,V,a,U,C,N)||e!==null&&e.dependencies!==null&&hi(e.dependencies))?(B||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(a,C,N),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(a,C,N)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||h===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=C),o.props=a,o.state=C,o.context=N,a=V):(typeof o.componentDidUpdate!="function"||h===e.memoizedProps&&U===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&U===e.memoizedState||(t.flags|=1024),a=!1)}return o=a,Ui(e,t),a=(t.flags&128)!==0,o||a?(o=t.stateNode,n=a&&typeof n.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,e!==null&&a?(t.child=ml(t,e.child,null,l),t.child=ml(t,null,n,l)):jt(e,t,n,l),t.memoizedState=o.state,e=t.child):e=zn(e,t,l),e}function Zd(e,t,n,a){return $l(),t.flags|=256,jt(e,t,n,a),t.child}var Ec={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wc(e){return{baseLanes:e,cachePool:ku()}}function Tc(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=an),e}function $d(e,t,n){var a=t.pendingProps,l=!1,o=(t.flags&128)!==0,h;if((h=o)||(h=e!==null&&e.memoizedState===null?!1:(vt.current&2)!==0),h&&(l=!0,t.flags&=-129),h=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ge){if(l?aa(t):la(),Ge){var g=at,N;if(N=g){e:{for(N=g,g=pn;N.nodeType!==8;){if(!g){g=null;break e}if(N=fn(N.nextSibling),N===null){g=null;break e}}g=N}g!==null?(t.memoizedState={dehydrated:g,treeContext:Ta!==null?{id:Bn,overflow:Un}:null,retryLane:536870912,hydrationErrors:null},N=Gt(18,null,null,0),N.stateNode=g,N.return=t,t.child=N,Bt=t,at=null,N=!0):N=!1}N||Oa(t)}if(g=t.memoizedState,g!==null&&(g=g.dehydrated,g!==null))return uo(g)?t.lanes=32:t.lanes=536870912,null;kn(t)}return g=a.children,a=a.fallback,l?(la(),l=t.mode,g=Ci({mode:"hidden",children:g},l),a=wa(a,l,n,null),g.return=t,a.return=t,g.sibling=a,t.child=g,l=t.child,l.memoizedState=wc(n),l.childLanes=Tc(e,h,n),t.memoizedState=Ec,a):(aa(t),_c(t,g))}if(N=e.memoizedState,N!==null&&(g=N.dehydrated,g!==null)){if(o)t.flags&256?(aa(t),t.flags&=-257,t=Rc(e,t,n)):t.memoizedState!==null?(la(),t.child=e.child,t.flags|=128,t=null):(la(),l=a.fallback,g=t.mode,a=Ci({mode:"visible",children:a.children},g),l=wa(l,g,n,null),l.flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,ml(t,e.child,null,n),a=t.child,a.memoizedState=wc(n),a.childLanes=Tc(e,h,n),t.memoizedState=Ec,t=l);else if(aa(t),uo(g)){if(h=g.nextSibling&&g.nextSibling.dataset,h)var B=h.dgst;h=B,a=Error(c(419)),a.stack="",a.digest=h,Jl({value:a,source:null,stack:null}),t=Rc(e,t,n)}else if(yt||Pl(e,t,n,!1),h=(n&e.childLanes)!==0,yt||h){if(h=We,h!==null&&(a=n&-n,a=(a&42)!==0?1:Ya(a),a=(a&(h.suspendedLanes|n))!==0?0:a,a!==0&&a!==N.retryLane))throw N.retryLane=a,al(e,a),Qt(h,e,a),qd;g.data==="$?"||Qc(),t=Rc(e,t,n)}else g.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=N.treeContext,at=fn(g.nextSibling),Bt=t,Ge=!0,Ra=null,pn=!1,e!==null&&(en[tn++]=Bn,en[tn++]=Un,en[tn++]=Ta,Bn=e.id,Un=e.overflow,Ta=t),t=_c(t,a.children),t.flags|=4096);return t}return l?(la(),l=a.fallback,g=t.mode,N=e.child,B=N.sibling,a=On(N,{mode:"hidden",children:a.children}),a.subtreeFlags=N.subtreeFlags&65011712,B!==null?l=On(B,l):(l=wa(l,g,n,null),l.flags|=2),l.return=t,a.return=t,a.sibling=l,t.child=a,a=l,l=t.child,g=e.child.memoizedState,g===null?g=wc(n):(N=g.cachePool,N!==null?(B=pt._currentValue,N=N.parent!==B?{parent:B,pool:B}:N):N=ku(),g={baseLanes:g.baseLanes|n,cachePool:N}),l.memoizedState=g,l.childLanes=Tc(e,h,n),t.memoizedState=Ec,a):(aa(t),n=e.child,e=n.sibling,n=On(n,{mode:"visible",children:a.children}),n.return=t,n.sibling=null,e!==null&&(h=t.deletions,h===null?(t.deletions=[e],t.flags|=16):h.push(e)),t.child=n,t.memoizedState=null,n)}function _c(e,t){return t=Ci({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ci(e,t){return e=Gt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Rc(e,t,n){return ml(t,e.child,null,n),e=_c(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Jd(e,t,n){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Qr(e.return,t,n)}function Oc(e,t,n,a,l){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:l}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=a,o.tail=n,o.tailMode=l)}function Pd(e,t,n){var a=t.pendingProps,l=a.revealOrder,o=a.tail;if(jt(e,t,a.children,n),a=vt.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jd(e,n,t);else if(e.tag===19)Jd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}switch(I(vt,a),l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&Ri(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),Oc(t,!1,l,n,o);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Ri(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}Oc(t,!0,n,null,o);break;case"together":Oc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),oa|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Pl(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,n=On(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=On(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Bc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&hi(e)))}function tg(e,t,n){switch(t.tag){case 3:Ce(t,t.stateNode.containerInfo),Pn(t,pt,e.memoizedState.cache),$l();break;case 27:case 5:rt(t);break;case 4:Ce(t,t.stateNode.containerInfo);break;case 10:Pn(t,t.type,t.memoizedProps.value);break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(aa(t),t.flags|=128,null):(n&t.child.childLanes)!==0?$d(e,t,n):(aa(t),e=zn(e,t,n),e!==null?e.sibling:null);aa(t);break;case 19:var l=(e.flags&128)!==0;if(a=(n&t.childLanes)!==0,a||(Pl(e,t,n,!1),a=(n&t.childLanes)!==0),l){if(a)return Pd(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),I(vt,vt.current),a)break;return null;case 22:case 23:return t.lanes=0,Fd(e,t,n);case 24:Pn(t,pt,e.memoizedState.cache)}return zn(e,t,n)}function Wd(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)yt=!0;else{if(!Bc(e,n)&&(t.flags&128)===0)return yt=!1,tg(e,t,n);yt=(e.flags&131072)!==0}else yt=!1,Ge&&(t.flags&1048576)!==0&&Ru(t,fi,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var a=t.elementType,l=a._init;if(a=l(a._payload),t.type=a,typeof a=="function")Hr(a)?(e=Da(a,e),t.tag=1,t=Kd(null,t,a,e,n)):(t.tag=0,t=Ac(null,t,a,e,n));else{if(a!=null){if(l=a.$$typeof,l===$){t.tag=11,t=Gd(null,t,a,e,n);break e}else if(l===X){t.tag=14,t=Vd(null,t,a,e,n);break e}}throw t=ce(a)||a,Error(c(306,t,""))}}return t;case 0:return Ac(e,t,t.type,t.pendingProps,n);case 1:return a=t.type,l=Da(a,t.pendingProps),Kd(e,t,a,l,n);case 3:e:{if(Ce(t,t.stateNode.containerInfo),e===null)throw Error(c(387));a=t.pendingProps;var o=t.memoizedState;l=o.element,ec(e,t),ss(t,a,null,n);var h=t.memoizedState;if(a=h.cache,Pn(t,pt,a),a!==o.cache&&Kr(t,[pt],n,!0),ls(),a=h.element,o.isDehydrated)if(o={element:a,isDehydrated:!1,cache:h.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=Zd(e,t,a,n);break e}else if(a!==l){l=Pt(Error(c(424)),t),Jl(l),t=Zd(e,t,a,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(at=fn(e.firstChild),Bt=t,Ge=!0,Ra=null,pn=!0,n=Bd(t,null,a,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if($l(),a===l){t=zn(e,t,n);break e}jt(e,t,a,n)}t=t.child}return t;case 26:return Ui(e,t),e===null?(n=lh(t.type,null,t.pendingProps,null))?t.memoizedState=n:Ge||(n=t.type,e=t.pendingProps,a=Qi(Be.current).createElement(n),a[gt]=t,a[St]=e,Et(a,n,e),Ae(a),t.stateNode=a):t.memoizedState=lh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return rt(t),e===null&&Ge&&(a=t.stateNode=th(t.type,t.pendingProps,Be.current),Bt=t,pn=!0,l=at,ha(t.type)?(fo=l,at=fn(a.firstChild)):at=l),jt(e,t,t.pendingProps.children,n),Ui(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ge&&((l=a=at)&&(a=Rg(a,t.type,t.pendingProps,pn),a!==null?(t.stateNode=a,Bt=t,at=fn(a.firstChild),pn=!1,l=!0):l=!1),l||Oa(t)),rt(t),l=t.type,o=t.pendingProps,h=e!==null?e.memoizedProps:null,a=o.children,ro(l,o)?a=null:h!==null&&ro(l,h)&&(t.flags|=32),t.memoizedState!==null&&(l=ic(e,t,Q0,null,null,n),Ts._currentValue=l),Ui(e,t),jt(e,t,a,n),t.child;case 6:return e===null&&Ge&&((e=n=at)&&(n=Og(n,t.pendingProps,pn),n!==null?(t.stateNode=n,Bt=t,at=null,e=!0):e=!1),e||Oa(t)),null;case 13:return $d(e,t,n);case 4:return Ce(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=ml(t,null,a,n):jt(e,t,a,n),t.child;case 11:return Gd(e,t,t.type,t.pendingProps,n);case 7:return jt(e,t,t.pendingProps,n),t.child;case 8:return jt(e,t,t.pendingProps.children,n),t.child;case 12:return jt(e,t,t.pendingProps.children,n),t.child;case 10:return a=t.pendingProps,Pn(t,t.type,a.value),jt(e,t,a.children,n),t.child;case 9:return l=t.type._context,a=t.pendingProps.children,Ua(t),l=_t(l),a=a(l),t.flags|=1,jt(e,t,a,n),t.child;case 14:return Vd(e,t,t.type,t.pendingProps,n);case 15:return Yd(e,t,t.type,t.pendingProps,n);case 19:return Pd(e,t,n);case 31:return a=t.pendingProps,n=t.mode,a={mode:a.mode,children:a.children},e===null?(n=Ci(a,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=On(e.child,a),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Fd(e,t,n);case 24:return Ua(t),a=_t(pt),e===null?(l=Jr(),l===null&&(l=We,o=Zr(),l.pooledCache=o,o.refCount++,o!==null&&(l.pooledCacheLanes|=n),l=o),t.memoizedState={parent:a,cache:l},Wr(t),Pn(t,pt,l)):((e.lanes&n)!==0&&(ec(e,t),ss(t,null,null,n),ls()),l=e.memoizedState,o=t.memoizedState,l.parent!==a?(l={parent:a,cache:a},t.memoizedState=l,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=l),Pn(t,pt,a)):(a=o.cache,Pn(t,pt,a),a!==l.cache&&Kr(t,[pt],n,!0))),jt(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(c(156,t.tag))}function Ln(e){e.flags|=4}function ef(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!oh(t)){if(t=nn.current,t!==null&&((Le&4194048)===Le?vn!==null:(Le&62914560)!==Le&&(Le&536870912)===0||t!==vn))throw ns=Pr,zu;e.flags|=8192}}function Mi(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Ul():536870912,e.lanes|=t,xl|=t)}function fs(e,t){if(!Ge)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function nt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,a=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,a|=l.subtreeFlags&65011712,a|=l.flags&65011712,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,a|=l.subtreeFlags,a|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function ng(e,t,n){var a=t.pendingProps;switch(Yr(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(t),null;case 1:return nt(t),null;case 3:return n=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Mn(pt),ke(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Zl(t)?Ln(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Uu())),nt(t),null;case 26:return n=t.memoizedState,e===null?(Ln(t),n!==null?(nt(t),ef(t,n)):(nt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Ln(t),nt(t),ef(t,n)):(nt(t),t.flags&=-16777217):(e.memoizedProps!==a&&Ln(t),nt(t),t.flags&=-16777217),null;case 27:mt(t),n=Be.current;var l=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==a&&Ln(t);else{if(!a){if(t.stateNode===null)throw Error(c(166));return nt(t),null}e=he.current,Zl(t)?Ou(t):(e=th(l,a,n),t.stateNode=e,Ln(t))}return nt(t),null;case 5:if(mt(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&Ln(t);else{if(!a){if(t.stateNode===null)throw Error(c(166));return nt(t),null}if(e=he.current,Zl(t))Ou(t);else{switch(l=Qi(Be.current),e){case 1:e=l.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=l.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=l.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=l.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof a.is=="string"?l.createElement("select",{is:a.is}):l.createElement("select"),a.multiple?e.multiple=!0:a.size&&(e.size=a.size);break;default:e=typeof a.is=="string"?l.createElement(n,{is:a.is}):l.createElement(n)}}e[gt]=t,e[St]=a;e:for(l=t.child;l!==null;){if(l.tag===5||l.tag===6)e.appendChild(l.stateNode);else if(l.tag!==4&&l.tag!==27&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===t)break e;for(;l.sibling===null;){if(l.return===null||l.return===t)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}t.stateNode=e;e:switch(Et(e,n,a),n){case"button":case"input":case"select":case"textarea":e=!!a.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ln(t)}}return nt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&Ln(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(c(166));if(e=Be.current,Zl(t)){if(e=t.stateNode,n=t.memoizedProps,a=null,l=Bt,l!==null)switch(l.tag){case 27:case 5:a=l.memoizedProps}e[gt]=t,e=!!(e.nodeValue===n||a!==null&&a.suppressHydrationWarning===!0||Kf(e.nodeValue,n)),e||Oa(t)}else e=Qi(e).createTextNode(a),e[gt]=t,t.stateNode=e}return nt(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(l=Zl(t),a!==null&&a.dehydrated!==null){if(e===null){if(!l)throw Error(c(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(c(317));l[gt]=t}else $l(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;nt(t),l=!1}else l=Uu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),l=!0;if(!l)return t.flags&256?(kn(t),t):(kn(t),null)}if(kn(t),(t.flags&128)!==0)return t.lanes=n,t;if(n=a!==null,e=e!==null&&e.memoizedState!==null,n){a=t.child,l=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(l=a.alternate.memoizedState.cachePool.pool);var o=null;a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==l&&(a.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Mi(t,t.updateQueue),nt(t),null;case 4:return ke(),e===null&&no(t.stateNode.containerInfo),nt(t),null;case 10:return Mn(t.type),nt(t),null;case 19:if(G(vt),l=t.memoizedState,l===null)return nt(t),null;if(a=(t.flags&128)!==0,o=l.rendering,o===null)if(a)fs(l,!1);else{if(lt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=Ri(e),o!==null){for(t.flags|=128,fs(l,!1),e=o.updateQueue,t.updateQueue=e,Mi(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)_u(n,e),n=n.sibling;return I(vt,vt.current&1|2),t.child}e=e.sibling}l.tail!==null&&re()>zi&&(t.flags|=128,a=!0,fs(l,!1),t.lanes=4194304)}else{if(!a)if(e=Ri(o),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,Mi(t,e),fs(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!Ge)return nt(t),null}else 2*re()-l.renderingStartTime>zi&&n!==536870912&&(t.flags|=128,a=!0,fs(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(e=l.last,e!==null?e.sibling=o:t.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=re(),t.sibling=null,e=vt.current,I(vt,a?e&1|2:e&1),t):(nt(t),null);case 22:case 23:return kn(t),lc(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(n&536870912)!==0&&(t.flags&128)===0&&(nt(t),t.subtreeFlags&6&&(t.flags|=8192)):nt(t),n=t.updateQueue,n!==null&&Mi(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==n&&(t.flags|=2048),e!==null&&G(Ca),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Mn(pt),nt(t),null;case 25:return null;case 30:return null}throw Error(c(156,t.tag))}function ag(e,t){switch(Yr(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Mn(pt),ke(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return mt(t),null;case 13:if(kn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));$l()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return G(vt),null;case 4:return ke(),null;case 10:return Mn(t.type),null;case 22:case 23:return kn(t),lc(),e!==null&&G(Ca),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Mn(pt),null;case 25:return null;default:return null}}function tf(e,t){switch(Yr(t),t.tag){case 3:Mn(pt),ke();break;case 26:case 27:case 5:mt(t);break;case 4:ke();break;case 13:kn(t);break;case 19:G(vt);break;case 10:Mn(t.type);break;case 22:case 23:kn(t),lc(),e!==null&&G(Ca);break;case 24:Mn(pt)}}function hs(e,t){try{var n=t.updateQueue,a=n!==null?n.lastEffect:null;if(a!==null){var l=a.next;n=l;do{if((n.tag&e)===e){a=void 0;var o=n.create,h=n.inst;a=o(),h.destroy=a}n=n.next}while(n!==l)}}catch(g){Pe(t,t.return,g)}}function sa(e,t,n){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var o=l.next;a=o;do{if((a.tag&e)===e){var h=a.inst,g=h.destroy;if(g!==void 0){h.destroy=void 0,l=t;var N=n,B=g;try{B()}catch(V){Pe(l,N,V)}}}a=a.next}while(a!==o)}}catch(V){Pe(t,t.return,V)}}function nf(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Vu(t,n)}catch(a){Pe(e,e.return,a)}}}function af(e,t,n){n.props=Da(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(a){Pe(e,t,a)}}function ms(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof n=="function"?e.refCleanup=n(a):n.current=a}}catch(l){Pe(e,t,l)}}function xn(e,t){var n=e.ref,a=e.refCleanup;if(n!==null)if(typeof a=="function")try{a()}catch(l){Pe(e,t,l)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(l){Pe(e,t,l)}else n.current=null}function lf(e){var t=e.type,n=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&a.focus();break e;case"img":n.src?a.src=n.src:n.srcSet&&(a.srcset=n.srcSet)}}catch(l){Pe(e,e.return,l)}}function Uc(e,t,n){try{var a=e.stateNode;Ag(a,e.type,n,t),a[St]=t}catch(l){Pe(e,e.return,l)}}function sf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ha(e.type)||e.tag===4}function Cc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||sf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ha(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Mc(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Xi));else if(a!==4&&(a===27&&ha(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Mc(e,t,n),e=e.sibling;e!==null;)Mc(e,t,n),e=e.sibling}function Di(e,t,n){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(a!==4&&(a===27&&ha(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(Di(e,t,n),e=e.sibling;e!==null;)Di(e,t,n),e=e.sibling}function rf(e){var t=e.stateNode,n=e.memoizedProps;try{for(var a=e.type,l=t.attributes;l.length;)t.removeAttributeNode(l[0]);Et(t,a,n),t[gt]=e,t[St]=n}catch(o){Pe(e,e.return,o)}}var In=!1,ut=!1,Dc=!1,cf=typeof WeakSet=="function"?WeakSet:Set,bt=null;function lg(e,t){if(e=e.containerInfo,so=Wi,e=xu(e),Cr(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var a=n.getSelection&&n.getSelection();if(a&&a.rangeCount!==0){n=a.anchorNode;var l=a.anchorOffset,o=a.focusNode;a=a.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var h=0,g=-1,N=-1,B=0,V=0,K=e,U=null;t:for(;;){for(var C;K!==n||l!==0&&K.nodeType!==3||(g=h+l),K!==o||a!==0&&K.nodeType!==3||(N=h+a),K.nodeType===3&&(h+=K.nodeValue.length),(C=K.firstChild)!==null;)U=K,K=C;for(;;){if(K===e)break t;if(U===n&&++B===l&&(g=h),U===o&&++V===a&&(N=h),(C=K.nextSibling)!==null)break;K=U,U=K.parentNode}K=C}n=g===-1||N===-1?null:{start:g,end:N}}else n=null}n=n||{start:0,end:0}}else n=null;for(io={focusedElem:e,selectionRange:n},Wi=!1,bt=t;bt!==null;)if(t=bt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,bt=e;else for(;bt!==null;){switch(t=bt,o=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&o!==null){e=void 0,n=t,l=o.memoizedProps,o=o.memoizedState,a=n.stateNode;try{var we=Da(n.type,l,n.elementType===n.type);e=a.getSnapshotBeforeUpdate(we,o),a.__reactInternalSnapshotBeforeUpdate=e}catch(Se){Pe(n,n.return,Se)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)oo(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":oo(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=t.sibling,e!==null){e.return=t.return,bt=e;break}bt=t.return}}function of(e,t,n){var a=n.flags;switch(n.tag){case 0:case 11:case 15:ia(e,n),a&4&&hs(5,n);break;case 1:if(ia(e,n),a&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(h){Pe(n,n.return,h)}else{var l=Da(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(l,t,e.__reactInternalSnapshotBeforeUpdate)}catch(h){Pe(n,n.return,h)}}a&64&&nf(n),a&512&&ms(n,n.return);break;case 3:if(ia(e,n),a&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Vu(e,t)}catch(h){Pe(n,n.return,h)}}break;case 27:t===null&&a&4&&rf(n);case 26:case 5:ia(e,n),t===null&&a&4&&lf(n),a&512&&ms(n,n.return);break;case 12:ia(e,n);break;case 13:ia(e,n),a&4&&ff(e,n),a&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=hg.bind(null,n),Bg(e,n))));break;case 22:if(a=n.memoizedState!==null||In,!a){t=t!==null&&t.memoizedState!==null||ut,l=In;var o=ut;In=a,(ut=t)&&!o?ra(e,n,(n.subtreeFlags&8772)!==0):ia(e,n),In=l,ut=o}break;case 30:break;default:ia(e,n)}}function uf(e){var t=e.alternate;t!==null&&(e.alternate=null,uf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Qa(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var et=null,zt=!1;function Hn(e,t,n){for(n=n.child;n!==null;)df(e,t,n),n=n.sibling}function df(e,t,n){if(Ve&&typeof Ve.onCommitFiberUnmount=="function")try{Ve.onCommitFiberUnmount(Qe,n)}catch{}switch(n.tag){case 26:ut||xn(n,t),Hn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ut||xn(n,t);var a=et,l=zt;ha(n.type)&&(et=n.stateNode,zt=!1),Hn(e,t,n),js(n.stateNode),et=a,zt=l;break;case 5:ut||xn(n,t);case 6:if(a=et,l=zt,et=null,Hn(e,t,n),et=a,zt=l,et!==null)if(zt)try{(et.nodeType===9?et.body:et.nodeName==="HTML"?et.ownerDocument.body:et).removeChild(n.stateNode)}catch(o){Pe(n,t,o)}else try{et.removeChild(n.stateNode)}catch(o){Pe(n,t,o)}break;case 18:et!==null&&(zt?(e=et,Wf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Bs(e)):Wf(et,n.stateNode));break;case 4:a=et,l=zt,et=n.stateNode.containerInfo,zt=!0,Hn(e,t,n),et=a,zt=l;break;case 0:case 11:case 14:case 15:ut||sa(2,n,t),ut||sa(4,n,t),Hn(e,t,n);break;case 1:ut||(xn(n,t),a=n.stateNode,typeof a.componentWillUnmount=="function"&&af(n,t,a)),Hn(e,t,n);break;case 21:Hn(e,t,n);break;case 22:ut=(a=ut)||n.memoizedState!==null,Hn(e,t,n),ut=a;break;default:Hn(e,t,n)}}function ff(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Bs(e)}catch(n){Pe(t,t.return,n)}}function sg(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new cf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new cf),t;default:throw Error(c(435,e.tag))}}function kc(e,t){var n=sg(e);t.forEach(function(a){var l=mg.bind(null,e,a);n.has(a)||(n.add(a),a.then(l,l))})}function Vt(e,t){var n=t.deletions;if(n!==null)for(var a=0;a<n.length;a++){var l=n[a],o=e,h=t,g=h;e:for(;g!==null;){switch(g.tag){case 27:if(ha(g.type)){et=g.stateNode,zt=!1;break e}break;case 5:et=g.stateNode,zt=!1;break e;case 3:case 4:et=g.stateNode.containerInfo,zt=!0;break e}g=g.return}if(et===null)throw Error(c(160));df(o,h,l),et=null,zt=!1,o=l.alternate,o!==null&&(o.return=null),l.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)hf(t,e),t=t.sibling}var dn=null;function hf(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Vt(t,e),Yt(e),a&4&&(sa(3,e,e.return),hs(3,e),sa(5,e,e.return));break;case 1:Vt(t,e),Yt(e),a&512&&(ut||n===null||xn(n,n.return)),a&64&&In&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?a:n.concat(a))));break;case 26:var l=dn;if(Vt(t,e),Yt(e),a&512&&(ut||n===null||xn(n,n.return)),a&4){var o=n!==null?n.memoizedState:null;if(a=e.memoizedState,n===null)if(a===null)if(e.stateNode===null){e:{a=e.type,n=e.memoizedProps,l=l.ownerDocument||l;t:switch(a){case"title":o=l.getElementsByTagName("title")[0],(!o||o[Qn]||o[gt]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=l.createElement(a),l.head.insertBefore(o,l.querySelector("head > title"))),Et(o,a,n),o[gt]=e,Ae(o),a=o;break e;case"link":var h=rh("link","href",l).get(a+(n.href||""));if(h){for(var g=0;g<h.length;g++)if(o=h[g],o.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&o.getAttribute("rel")===(n.rel==null?null:n.rel)&&o.getAttribute("title")===(n.title==null?null:n.title)&&o.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){h.splice(g,1);break t}}o=l.createElement(a),Et(o,a,n),l.head.appendChild(o);break;case"meta":if(h=rh("meta","content",l).get(a+(n.content||""))){for(g=0;g<h.length;g++)if(o=h[g],o.getAttribute("content")===(n.content==null?null:""+n.content)&&o.getAttribute("name")===(n.name==null?null:n.name)&&o.getAttribute("property")===(n.property==null?null:n.property)&&o.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&o.getAttribute("charset")===(n.charSet==null?null:n.charSet)){h.splice(g,1);break t}}o=l.createElement(a),Et(o,a,n),l.head.appendChild(o);break;default:throw Error(c(468,a))}o[gt]=e,Ae(o),a=o}e.stateNode=a}else ch(l,e.type,e.stateNode);else e.stateNode=ih(l,a,e.memoizedProps);else o!==a?(o===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):o.count--,a===null?ch(l,e.type,e.stateNode):ih(l,a,e.memoizedProps)):a===null&&e.stateNode!==null&&Uc(e,e.memoizedProps,n.memoizedProps)}break;case 27:Vt(t,e),Yt(e),a&512&&(ut||n===null||xn(n,n.return)),n!==null&&a&4&&Uc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Vt(t,e),Yt(e),a&512&&(ut||n===null||xn(n,n.return)),e.flags&32){l=e.stateNode;try{$a(l,"")}catch(C){Pe(e,e.return,C)}}a&4&&e.stateNode!=null&&(l=e.memoizedProps,Uc(e,l,n!==null?n.memoizedProps:l)),a&1024&&(Dc=!0);break;case 6:if(Vt(t,e),Yt(e),a&4){if(e.stateNode===null)throw Error(c(162));a=e.memoizedProps,n=e.stateNode;try{n.nodeValue=a}catch(C){Pe(e,e.return,C)}}break;case 3:if($i=null,l=dn,dn=Ki(t.containerInfo),Vt(t,e),dn=l,Yt(e),a&4&&n!==null&&n.memoizedState.isDehydrated)try{Bs(t.containerInfo)}catch(C){Pe(e,e.return,C)}Dc&&(Dc=!1,mf(e));break;case 4:a=dn,dn=Ki(e.stateNode.containerInfo),Vt(t,e),Yt(e),dn=a;break;case 12:Vt(t,e),Yt(e);break;case 13:Vt(t,e),Yt(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Gc=re()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,kc(e,a)));break;case 22:l=e.memoizedState!==null;var N=n!==null&&n.memoizedState!==null,B=In,V=ut;if(In=B||l,ut=V||N,Vt(t,e),ut=V,In=B,Yt(e),a&8192)e:for(t=e.stateNode,t._visibility=l?t._visibility&-2:t._visibility|1,l&&(n===null||N||In||ut||ka(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){N=n=t;try{if(o=N.stateNode,l)h=o.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none";else{g=N.stateNode;var K=N.memoizedProps.style,U=K!=null&&K.hasOwnProperty("display")?K.display:null;g.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(C){Pe(N,N.return,C)}}}else if(t.tag===6){if(n===null){N=t;try{N.stateNode.nodeValue=l?"":N.memoizedProps}catch(C){Pe(N,N.return,C)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(n=a.retryQueue,n!==null&&(a.retryQueue=null,kc(e,n))));break;case 19:Vt(t,e),Yt(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,kc(e,a)));break;case 30:break;case 21:break;default:Vt(t,e),Yt(e)}}function Yt(e){var t=e.flags;if(t&2){try{for(var n,a=e.return;a!==null;){if(sf(a)){n=a;break}a=a.return}if(n==null)throw Error(c(160));switch(n.tag){case 27:var l=n.stateNode,o=Cc(e);Di(e,o,l);break;case 5:var h=n.stateNode;n.flags&32&&($a(h,""),n.flags&=-33);var g=Cc(e);Di(e,g,h);break;case 3:case 4:var N=n.stateNode.containerInfo,B=Cc(e);Mc(e,B,N);break;default:throw Error(c(161))}}catch(V){Pe(e,e.return,V)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function mf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;mf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function ia(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)of(e,t.alternate,t),t=t.sibling}function ka(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:sa(4,t,t.return),ka(t);break;case 1:xn(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&af(t,t.return,n),ka(t);break;case 27:js(t.stateNode);case 26:case 5:xn(t,t.return),ka(t);break;case 22:t.memoizedState===null&&ka(t);break;case 30:ka(t);break;default:ka(t)}e=e.sibling}}function ra(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,l=e,o=t,h=o.flags;switch(o.tag){case 0:case 11:case 15:ra(l,o,n),hs(4,o);break;case 1:if(ra(l,o,n),a=o,l=a.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(B){Pe(a,a.return,B)}if(a=o,l=a.updateQueue,l!==null){var g=a.stateNode;try{var N=l.shared.hiddenCallbacks;if(N!==null)for(l.shared.hiddenCallbacks=null,l=0;l<N.length;l++)Gu(N[l],g)}catch(B){Pe(a,a.return,B)}}n&&h&64&&nf(o),ms(o,o.return);break;case 27:rf(o);case 26:case 5:ra(l,o,n),n&&a===null&&h&4&&lf(o),ms(o,o.return);break;case 12:ra(l,o,n);break;case 13:ra(l,o,n),n&&h&4&&ff(l,o);break;case 22:o.memoizedState===null&&ra(l,o,n),ms(o,o.return);break;case 30:break;default:ra(l,o,n)}t=t.sibling}}function zc(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Wl(n))}function Lc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Wl(e))}function yn(e,t,n,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)gf(e,t,n,a),t=t.sibling}function gf(e,t,n,a){var l=t.flags;switch(t.tag){case 0:case 11:case 15:yn(e,t,n,a),l&2048&&hs(9,t);break;case 1:yn(e,t,n,a);break;case 3:yn(e,t,n,a),l&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Wl(e)));break;case 12:if(l&2048){yn(e,t,n,a),e=t.stateNode;try{var o=t.memoizedProps,h=o.id,g=o.onPostCommit;typeof g=="function"&&g(h,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){Pe(t,t.return,N)}}else yn(e,t,n,a);break;case 13:yn(e,t,n,a);break;case 23:break;case 22:o=t.stateNode,h=t.alternate,t.memoizedState!==null?o._visibility&2?yn(e,t,n,a):gs(e,t):o._visibility&2?yn(e,t,n,a):(o._visibility|=2,gl(e,t,n,a,(t.subtreeFlags&10256)!==0)),l&2048&&zc(h,t);break;case 24:yn(e,t,n,a),l&2048&&Lc(t.alternate,t);break;default:yn(e,t,n,a)}}function gl(e,t,n,a,l){for(l=l&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var o=e,h=t,g=n,N=a,B=h.flags;switch(h.tag){case 0:case 11:case 15:gl(o,h,g,N,l),hs(8,h);break;case 23:break;case 22:var V=h.stateNode;h.memoizedState!==null?V._visibility&2?gl(o,h,g,N,l):gs(o,h):(V._visibility|=2,gl(o,h,g,N,l)),l&&B&2048&&zc(h.alternate,h);break;case 24:gl(o,h,g,N,l),l&&B&2048&&Lc(h.alternate,h);break;default:gl(o,h,g,N,l)}t=t.sibling}}function gs(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,a=t,l=a.flags;switch(a.tag){case 22:gs(n,a),l&2048&&zc(a.alternate,a);break;case 24:gs(n,a),l&2048&&Lc(a.alternate,a);break;default:gs(n,a)}t=t.sibling}}var ps=8192;function pl(e){if(e.subtreeFlags&ps)for(e=e.child;e!==null;)pf(e),e=e.sibling}function pf(e){switch(e.tag){case 26:pl(e),e.flags&ps&&e.memoizedState!==null&&Yg(dn,e.memoizedState,e.memoizedProps);break;case 5:pl(e);break;case 3:case 4:var t=dn;dn=Ki(e.stateNode.containerInfo),pl(e),dn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=ps,ps=16777216,pl(e),ps=t):pl(e));break;default:pl(e)}}function vf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function vs(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];bt=a,yf(a,e)}vf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)xf(e),e=e.sibling}function xf(e){switch(e.tag){case 0:case 11:case 15:vs(e),e.flags&2048&&sa(9,e,e.return);break;case 3:vs(e);break;case 12:vs(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ki(e)):vs(e);break;default:vs(e)}}function ki(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var a=t[n];bt=a,yf(a,e)}vf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:sa(8,t,t.return),ki(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,ki(t));break;default:ki(t)}e=e.sibling}}function yf(e,t){for(;bt!==null;){var n=bt;switch(n.tag){case 0:case 11:case 15:sa(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var a=n.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Wl(n.memoizedState.cache)}if(a=n.child,a!==null)a.return=n,bt=a;else e:for(n=e;bt!==null;){a=bt;var l=a.sibling,o=a.return;if(uf(a),a===n){bt=null;break e}if(l!==null){l.return=o,bt=l;break e}bt=o}}}var ig={getCacheForType:function(e){var t=_t(pt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},rg=typeof WeakMap=="function"?WeakMap:Map,Ye=0,We=null,Me=null,Le=0,Fe=0,Ft=null,ca=!1,vl=!1,Ic=!1,qn=0,lt=0,oa=0,za=0,Hc=0,an=0,xl=0,xs=null,Lt=null,qc=!1,Gc=0,zi=1/0,Li=null,ua=null,At=0,da=null,yl=null,bl=0,Vc=0,Yc=null,bf=null,ys=0,Fc=null;function Xt(){if((Ye&2)!==0&&Le!==0)return Le&-Le;if(x.T!==null){var e=rl;return e!==0?e:Pc()}return Dl()}function Nf(){an===0&&(an=(Le&536870912)===0||Ge?Bl():536870912);var e=nn.current;return e!==null&&(e.flags|=32),an}function Qt(e,t,n){(e===We&&(Fe===2||Fe===9)||e.cancelPendingCommit!==null)&&(Nl(e,0),fa(e,Le,an,!1)),Xn(e,n),((Ye&2)===0||e!==We)&&(e===We&&((Ye&2)===0&&(za|=n),lt===4&&fa(e,Le,an,!1)),bn(e))}function Sf(e,t,n){if((Ye&6)!==0)throw Error(c(327));var a=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Fn(e,t),l=a?ug(e,t):Kc(e,t,!0),o=a;do{if(l===0){vl&&!a&&fa(e,t,0,!1);break}else{if(n=e.current.alternate,o&&!cg(n)){l=Kc(e,t,!1),o=!1;continue}if(l===2){if(o=t,e.errorRecoveryDisabledLanes&o)var h=0;else h=e.pendingLanes&-536870913,h=h!==0?h:h&536870912?536870912:0;if(h!==0){t=h;e:{var g=e;l=xs;var N=g.current.memoizedState.isDehydrated;if(N&&(Nl(g,h).flags|=256),h=Kc(g,h,!1),h!==2){if(Ic&&!N){g.errorRecoveryDisabledLanes|=o,za|=o,l=4;break e}o=Lt,Lt=l,o!==null&&(Lt===null?Lt=o:Lt.push.apply(Lt,o))}l=h}if(o=!1,l!==2)continue}}if(l===1){Nl(e,0),fa(e,t,0,!0);break}e:{switch(a=e,o=l,o){case 0:case 1:throw Error(c(345));case 4:if((t&4194048)!==t)break;case 6:fa(a,t,an,!ca);break e;case 2:Lt=null;break;case 3:case 5:break;default:throw Error(c(329))}if((t&62914560)===t&&(l=Gc+300-re(),10<l)){if(fa(a,t,an,!ca),Sa(a,0,!0)!==0)break e;a.timeoutHandle=Jf(jf.bind(null,a,n,Lt,Li,qc,t,an,za,xl,ca,o,2,-0,0),l);break e}jf(a,n,Lt,Li,qc,t,an,za,xl,ca,o,0,-0,0)}}break}while(!0);bn(e)}function jf(e,t,n,a,l,o,h,g,N,B,V,K,U,C){if(e.timeoutHandle=-1,K=t.subtreeFlags,(K&8192||(K&16785408)===16785408)&&(ws={stylesheets:null,count:0,unsuspend:Vg},pf(t),K=Fg(),K!==null)){e.cancelPendingCommit=K(Of.bind(null,e,t,o,n,a,l,h,g,N,V,1,U,C)),fa(e,o,h,!B);return}Of(e,t,o,n,a,l,h,g,N)}function cg(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var a=0;a<n.length;a++){var l=n[a],o=l.getSnapshot;l=l.value;try{if(!qt(o(),l))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function fa(e,t,n,a){t&=~Hc,t&=~za,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var l=t;0<l;){var o=31-Tt(l),h=1<<o;a[o]=-1,l&=~h}n!==0&&Cl(e,n,t)}function Ii(){return(Ye&6)===0?(bs(0),!1):!0}function Xc(){if(Me!==null){if(Fe===0)var e=Me.return;else e=Me,Cn=Ba=null,oc(e),hl=null,us=0,e=Me;for(;e!==null;)tf(e.alternate,e),e=e.return;Me=null}}function Nl(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,wg(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Xc(),We=e,Me=n=On(e.current,null),Le=t,Fe=0,Ft=null,ca=!1,vl=Fn(e,t),Ic=!1,xl=an=Hc=za=oa=lt=0,Lt=xs=null,qc=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var l=31-Tt(a),o=1<<l;t|=e[l],a&=~o}return qn=t,ri(),n}function Af(e,t){Oe=null,x.H=wi,t===ts||t===pi?(t=Hu(),Fe=3):t===zu?(t=Hu(),Fe=4):Fe=t===qd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ft=t,Me===null&&(lt=1,Bi(e,Pt(t,e.current)))}function Ef(){var e=x.H;return x.H=wi,e===null?wi:e}function wf(){var e=x.A;return x.A=ig,e}function Qc(){lt=4,ca||(Le&4194048)!==Le&&nn.current!==null||(vl=!0),(oa&134217727)===0&&(za&134217727)===0||We===null||fa(We,Le,an,!1)}function Kc(e,t,n){var a=Ye;Ye|=2;var l=Ef(),o=wf();(We!==e||Le!==t)&&(Li=null,Nl(e,t)),t=!1;var h=lt;e:do try{if(Fe!==0&&Me!==null){var g=Me,N=Ft;switch(Fe){case 8:Xc(),h=6;break e;case 3:case 2:case 9:case 6:nn.current===null&&(t=!0);var B=Fe;if(Fe=0,Ft=null,Sl(e,g,N,B),n&&vl){h=0;break e}break;default:B=Fe,Fe=0,Ft=null,Sl(e,g,N,B)}}og(),h=lt;break}catch(V){Af(e,V)}while(!0);return t&&e.shellSuspendCounter++,Cn=Ba=null,Ye=a,x.H=l,x.A=o,Me===null&&(We=null,Le=0,ri()),h}function og(){for(;Me!==null;)Tf(Me)}function ug(e,t){var n=Ye;Ye|=2;var a=Ef(),l=wf();We!==e||Le!==t?(Li=null,zi=re()+500,Nl(e,t)):vl=Fn(e,t);e:do try{if(Fe!==0&&Me!==null){t=Me;var o=Ft;t:switch(Fe){case 1:Fe=0,Ft=null,Sl(e,t,o,1);break;case 2:case 9:if(Lu(o)){Fe=0,Ft=null,_f(t);break}t=function(){Fe!==2&&Fe!==9||We!==e||(Fe=7),bn(e)},o.then(t,t);break e;case 3:Fe=7;break e;case 4:Fe=5;break e;case 7:Lu(o)?(Fe=0,Ft=null,_f(t)):(Fe=0,Ft=null,Sl(e,t,o,7));break;case 5:var h=null;switch(Me.tag){case 26:h=Me.memoizedState;case 5:case 27:var g=Me;if(!h||oh(h)){Fe=0,Ft=null;var N=g.sibling;if(N!==null)Me=N;else{var B=g.return;B!==null?(Me=B,Hi(B)):Me=null}break t}}Fe=0,Ft=null,Sl(e,t,o,5);break;case 6:Fe=0,Ft=null,Sl(e,t,o,6);break;case 8:Xc(),lt=6;break e;default:throw Error(c(462))}}dg();break}catch(V){Af(e,V)}while(!0);return Cn=Ba=null,x.H=a,x.A=l,Ye=n,Me!==null?0:(We=null,Le=0,ri(),lt)}function dg(){for(;Me!==null&&!je();)Tf(Me)}function Tf(e){var t=Wd(e.alternate,e,qn);e.memoizedProps=e.pendingProps,t===null?Hi(e):Me=t}function _f(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Qd(n,t,t.pendingProps,t.type,void 0,Le);break;case 11:t=Qd(n,t,t.pendingProps,t.type.render,t.ref,Le);break;case 5:oc(t);default:tf(n,t),t=Me=_u(t,qn),t=Wd(n,t,qn)}e.memoizedProps=e.pendingProps,t===null?Hi(e):Me=t}function Sl(e,t,n,a){Cn=Ba=null,oc(t),hl=null,us=0;var l=t.return;try{if(eg(e,l,t,n,Le)){lt=1,Bi(e,Pt(n,e.current)),Me=null;return}}catch(o){if(l!==null)throw Me=l,o;lt=1,Bi(e,Pt(n,e.current)),Me=null;return}t.flags&32768?(Ge||a===1?e=!0:vl||(Le&536870912)!==0?e=!1:(ca=e=!0,(a===2||a===9||a===3||a===6)&&(a=nn.current,a!==null&&a.tag===13&&(a.flags|=16384))),Rf(t,e)):Hi(t)}function Hi(e){var t=e;do{if((t.flags&32768)!==0){Rf(t,ca);return}e=t.return;var n=ng(t.alternate,t,qn);if(n!==null){Me=n;return}if(t=t.sibling,t!==null){Me=t;return}Me=t=e}while(t!==null);lt===0&&(lt=5)}function Rf(e,t){do{var n=ag(e.alternate,e);if(n!==null){n.flags&=32767,Me=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Me=e;return}Me=e=n}while(e!==null);lt=6,Me=null}function Of(e,t,n,a,l,o,h,g,N){e.cancelPendingCommit=null;do qi();while(At!==0);if((Ye&6)!==0)throw Error(c(327));if(t!==null){if(t===e.current)throw Error(c(177));if(o=t.lanes|t.childLanes,o|=Lr,Qs(e,n,o,h,g,N),e===We&&(Me=We=null,Le=0),yl=t,da=e,bl=n,Vc=o,Yc=l,bf=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,gg(le,function(){return Df(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=x.T,x.T=null,l=b.p,b.p=2,h=Ye,Ye|=4;try{lg(e,t,n)}finally{Ye=h,b.p=l,x.T=a}}At=1,Bf(),Uf(),Cf()}}function Bf(){if(At===1){At=0;var e=da,t=yl,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=x.T,x.T=null;var a=b.p;b.p=2;var l=Ye;Ye|=4;try{hf(t,e);var o=io,h=xu(e.containerInfo),g=o.focusedElem,N=o.selectionRange;if(h!==g&&g&&g.ownerDocument&&vu(g.ownerDocument.documentElement,g)){if(N!==null&&Cr(g)){var B=N.start,V=N.end;if(V===void 0&&(V=B),"selectionStart"in g)g.selectionStart=B,g.selectionEnd=Math.min(V,g.value.length);else{var K=g.ownerDocument||document,U=K&&K.defaultView||window;if(U.getSelection){var C=U.getSelection(),we=g.textContent.length,Se=Math.min(N.start,we),Je=N.end===void 0?Se:Math.min(N.end,we);!C.extend&&Se>Je&&(h=Je,Je=Se,Se=h);var w=pu(g,Se),A=pu(g,Je);if(w&&A&&(C.rangeCount!==1||C.anchorNode!==w.node||C.anchorOffset!==w.offset||C.focusNode!==A.node||C.focusOffset!==A.offset)){var R=K.createRange();R.setStart(w.node,w.offset),C.removeAllRanges(),Se>Je?(C.addRange(R),C.extend(A.node,A.offset)):(R.setEnd(A.node,A.offset),C.addRange(R))}}}}for(K=[],C=g;C=C.parentNode;)C.nodeType===1&&K.push({element:C,left:C.scrollLeft,top:C.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<K.length;g++){var F=K[g];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}Wi=!!so,io=so=null}finally{Ye=l,b.p=a,x.T=n}}e.current=t,At=2}}function Uf(){if(At===2){At=0;var e=da,t=yl,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=x.T,x.T=null;var a=b.p;b.p=2;var l=Ye;Ye|=4;try{of(e,t.alternate,t)}finally{Ye=l,b.p=a,x.T=n}}At=3}}function Cf(){if(At===4||At===3){At=0,xe();var e=da,t=yl,n=bl,a=bf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?At=5:(At=0,yl=da=null,Mf(e,e.pendingLanes));var l=e.pendingLanes;if(l===0&&(ua=null),Fa(n),t=t.stateNode,Ve&&typeof Ve.onCommitFiberRoot=="function")try{Ve.onCommitFiberRoot(Qe,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=x.T,l=b.p,b.p=2,x.T=null;try{for(var o=e.onRecoverableError,h=0;h<a.length;h++){var g=a[h];o(g.value,{componentStack:g.stack})}}finally{x.T=t,b.p=l}}(bl&3)!==0&&qi(),bn(e),l=e.pendingLanes,(n&4194090)!==0&&(l&42)!==0?e===Fc?ys++:(ys=0,Fc=e):ys=0,bs(0)}}function Mf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Wl(t)))}function qi(e){return Bf(),Uf(),Cf(),Df()}function Df(){if(At!==5)return!1;var e=da,t=Vc;Vc=0;var n=Fa(bl),a=x.T,l=b.p;try{b.p=32>n?32:n,x.T=null,n=Yc,Yc=null;var o=da,h=bl;if(At=0,yl=da=null,bl=0,(Ye&6)!==0)throw Error(c(331));var g=Ye;if(Ye|=4,xf(o.current),gf(o,o.current,h,n),Ye=g,bs(0,!1),Ve&&typeof Ve.onPostCommitFiberRoot=="function")try{Ve.onPostCommitFiberRoot(Qe,o)}catch{}return!0}finally{b.p=l,x.T=a,Mf(e,t)}}function kf(e,t,n){t=Pt(n,t),t=jc(e.stateNode,t,2),e=ta(e,t,2),e!==null&&(Xn(e,2),bn(e))}function Pe(e,t,n){if(e.tag===3)kf(e,e,n);else for(;t!==null;){if(t.tag===3){kf(t,e,n);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(ua===null||!ua.has(a))){e=Pt(n,e),n=Id(2),a=ta(t,n,2),a!==null&&(Hd(n,a,t,e),Xn(a,2),bn(a));break}}t=t.return}}function Zc(e,t,n){var a=e.pingCache;if(a===null){a=e.pingCache=new rg;var l=new Set;a.set(t,l)}else l=a.get(t),l===void 0&&(l=new Set,a.set(t,l));l.has(n)||(Ic=!0,l.add(n),e=fg.bind(null,e,t,n),t.then(e,e))}function fg(e,t,n){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,We===e&&(Le&n)===n&&(lt===4||lt===3&&(Le&62914560)===Le&&300>re()-Gc?(Ye&2)===0&&Nl(e,0):Hc|=n,xl===Le&&(xl=0)),bn(e)}function zf(e,t){t===0&&(t=Ul()),e=al(e,t),e!==null&&(Xn(e,t),bn(e))}function hg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),zf(e,n)}function mg(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(c(314))}a!==null&&a.delete(t),zf(e,n)}function gg(e,t){return ae(e,t)}var Gi=null,jl=null,$c=!1,Vi=!1,Jc=!1,La=0;function bn(e){e!==jl&&e.next===null&&(jl===null?Gi=jl=e:jl=jl.next=e),Vi=!0,$c||($c=!0,vg())}function bs(e,t){if(!Jc&&Vi){Jc=!0;do for(var n=!1,a=Gi;a!==null;){if(e!==0){var l=a.pendingLanes;if(l===0)var o=0;else{var h=a.suspendedLanes,g=a.pingedLanes;o=(1<<31-Tt(42|e)+1)-1,o&=l&~(h&~g),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(n=!0,qf(a,o))}else o=Le,o=Sa(a,a===We?o:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(o&3)===0||Fn(a,o)||(n=!0,qf(a,o));a=a.next}while(n);Jc=!1}}function pg(){Lf()}function Lf(){Vi=$c=!1;var e=0;La!==0&&(Eg()&&(e=La),La=0);for(var t=re(),n=null,a=Gi;a!==null;){var l=a.next,o=If(a,t);o===0?(a.next=null,n===null?Gi=l:n.next=l,l===null&&(jl=n)):(n=a,(e!==0||(o&3)!==0)&&(Vi=!0)),a=l}bs(e)}function If(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,l=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var h=31-Tt(o),g=1<<h,N=l[h];N===-1?((g&n)===0||(g&a)!==0)&&(l[h]=Xs(g,t)):N<=t&&(e.expiredLanes|=g),o&=~g}if(t=We,n=Le,n=Sa(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,n===0||e===t&&(Fe===2||Fe===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&ye(a),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Fn(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(a!==null&&ye(a),Fa(n)){case 2:case 8:n=M;break;case 32:n=le;break;case 268435456:n=fe;break;default:n=le}return a=Hf.bind(null,e),n=ae(n,a),e.callbackPriority=t,e.callbackNode=n,t}return a!==null&&a!==null&&ye(a),e.callbackPriority=2,e.callbackNode=null,2}function Hf(e,t){if(At!==0&&At!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(qi()&&e.callbackNode!==n)return null;var a=Le;return a=Sa(e,e===We?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Sf(e,a,t),If(e,re()),e.callbackNode!=null&&e.callbackNode===n?Hf.bind(null,e):null)}function qf(e,t){if(qi())return null;Sf(e,t,!0)}function vg(){Tg(function(){(Ye&6)!==0?ae(Q,pg):Lf()})}function Pc(){return La===0&&(La=Bl()),La}function Gf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ei(""+e)}function Vf(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function xg(e,t,n,a,l){if(t==="submit"&&n&&n.stateNode===l){var o=Gf((l[St]||null).action),h=a.submitter;h&&(t=(t=h[St]||null)?Gf(t.formAction):h.getAttribute("formAction"),t!==null&&(o=t,h=null));var g=new li("action","action",null,a,l);e.push({event:g,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(La!==0){var N=h?Vf(l,h):new FormData(l);xc(n,{pending:!0,data:N,method:l.method,action:o},null,N)}}else typeof o=="function"&&(g.preventDefault(),N=h?Vf(l,h):new FormData(l),xc(n,{pending:!0,data:N,method:l.method,action:o},o,N))},currentTarget:l}]})}}for(var Wc=0;Wc<zr.length;Wc++){var eo=zr[Wc],yg=eo.toLowerCase(),bg=eo[0].toUpperCase()+eo.slice(1);un(yg,"on"+bg)}un(Nu,"onAnimationEnd"),un(Su,"onAnimationIteration"),un(ju,"onAnimationStart"),un("dblclick","onDoubleClick"),un("focusin","onFocus"),un("focusout","onBlur"),un(z0,"onTransitionRun"),un(L0,"onTransitionStart"),un(I0,"onTransitionCancel"),un(Au,"onTransitionEnd"),ct("onMouseEnter",["mouseout","mouseover"]),ct("onMouseLeave",["mouseout","mouseover"]),ct("onPointerEnter",["pointerout","pointerover"]),ct("onPointerLeave",["pointerout","pointerover"]),Ke("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ke("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ke("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ke("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ns="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ng=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ns));function Yf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var a=e[n],l=a.event;a=a.listeners;e:{var o=void 0;if(t)for(var h=a.length-1;0<=h;h--){var g=a[h],N=g.instance,B=g.currentTarget;if(g=g.listener,N!==o&&l.isPropagationStopped())break e;o=g,l.currentTarget=B;try{o(l)}catch(V){Oi(V)}l.currentTarget=null,o=N}else for(h=0;h<a.length;h++){if(g=a[h],N=g.instance,B=g.currentTarget,g=g.listener,N!==o&&l.isPropagationStopped())break e;o=g,l.currentTarget=B;try{o(l)}catch(V){Oi(V)}l.currentTarget=null,o=N}}}}function De(e,t){var n=t[Xa];n===void 0&&(n=t[Xa]=new Set);var a=e+"__bubble";n.has(a)||(Ff(t,e,2,!1),n.add(a))}function to(e,t,n){var a=0;t&&(a|=4),Ff(n,e,a,t)}var Yi="_reactListening"+Math.random().toString(36).slice(2);function no(e){if(!e[Yi]){e[Yi]=!0,qe.forEach(function(n){n!=="selectionchange"&&(Ng.has(n)||to(n,!1,e),to(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Yi]||(t[Yi]=!0,to("selectionchange",!1,t))}}function Ff(e,t,n,a){switch(gh(t)){case 2:var l=Kg;break;case 8:l=Zg;break;default:l=vo}n=l.bind(null,t,n,e),l=void 0,!Ar||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),a?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function ao(e,t,n,a,l){var o=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var h=a.tag;if(h===3||h===4){var g=a.stateNode.containerInfo;if(g===l)break;if(h===4)for(h=a.return;h!==null;){var N=h.tag;if((N===3||N===4)&&h.stateNode.containerInfo===l)return;h=h.return}for(;g!==null;){if(h=Tn(g),h===null)return;if(N=h.tag,N===5||N===6||N===26||N===27){a=o=h;continue e}g=g.parentNode}}a=a.return}Jo(function(){var B=o,V=Sr(n),K=[];e:{var U=Eu.get(e);if(U!==void 0){var C=li,we=e;switch(e){case"keypress":if(ni(n)===0)break e;case"keydown":case"keyup":C=g0;break;case"focusin":we="focus",C=_r;break;case"focusout":we="blur",C=_r;break;case"beforeblur":case"afterblur":C=_r;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=eu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=a0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=x0;break;case Nu:case Su:case ju:C=i0;break;case Au:C=b0;break;case"scroll":case"scrollend":C=t0;break;case"wheel":C=S0;break;case"copy":case"cut":case"paste":C=c0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=nu;break;case"toggle":case"beforetoggle":C=A0}var Se=(t&4)!==0,Je=!Se&&(e==="scroll"||e==="scrollend"),w=Se?U!==null?U+"Capture":null:U;Se=[];for(var A=B,R;A!==null;){var F=A;if(R=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||R===null||w===null||(F=Hl(A,w),F!=null&&Se.push(Ss(A,F,R))),Je)break;A=A.return}0<Se.length&&(U=new C(U,we,null,n,V),K.push({event:U,listeners:Se}))}}if((t&7)===0){e:{if(U=e==="mouseover"||e==="pointerover",C=e==="mouseout"||e==="pointerout",U&&n!==Nr&&(we=n.relatedTarget||n.fromElement)&&(Tn(we)||we[wn]))break e;if((C||U)&&(U=V.window===V?V:(U=V.ownerDocument)?U.defaultView||U.parentWindow:window,C?(we=n.relatedTarget||n.toElement,C=B,we=we?Tn(we):null,we!==null&&(Je=f(we),Se=we.tag,we!==Je||Se!==5&&Se!==27&&Se!==6)&&(we=null)):(C=null,we=B),C!==we)){if(Se=eu,F="onMouseLeave",w="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(Se=nu,F="onPointerLeave",w="onPointerEnter",A="pointer"),Je=C==null?U:Kn(C),R=we==null?U:Kn(we),U=new Se(F,A+"leave",C,n,V),U.target=Je,U.relatedTarget=R,F=null,Tn(V)===B&&(Se=new Se(w,A+"enter",we,n,V),Se.target=R,Se.relatedTarget=Je,F=Se),Je=F,C&&we)t:{for(Se=C,w=we,A=0,R=Se;R;R=Al(R))A++;for(R=0,F=w;F;F=Al(F))R++;for(;0<A-R;)Se=Al(Se),A--;for(;0<R-A;)w=Al(w),R--;for(;A--;){if(Se===w||w!==null&&Se===w.alternate)break t;Se=Al(Se),w=Al(w)}Se=null}else Se=null;C!==null&&Xf(K,U,C,Se,!1),we!==null&&Je!==null&&Xf(K,Je,we,Se,!0)}}e:{if(U=B?Kn(B):window,C=U.nodeName&&U.nodeName.toLowerCase(),C==="select"||C==="input"&&U.type==="file")var ge=uu;else if(cu(U))if(du)ge=M0;else{ge=U0;var Ue=B0}else C=U.nodeName,!C||C.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?B&&br(B.elementType)&&(ge=uu):ge=C0;if(ge&&(ge=ge(e,B))){ou(K,ge,n,V);break e}Ue&&Ue(e,U,B),e==="focusout"&&B&&U.type==="number"&&B.memoizedProps.value!=null&&yr(U,"number",U.value)}switch(Ue=B?Kn(B):window,e){case"focusin":(cu(Ue)||Ue.contentEditable==="true")&&(el=Ue,Mr=B,Kl=null);break;case"focusout":Kl=Mr=el=null;break;case"mousedown":Dr=!0;break;case"contextmenu":case"mouseup":case"dragend":Dr=!1,yu(K,n,V);break;case"selectionchange":if(k0)break;case"keydown":case"keyup":yu(K,n,V)}var ve;if(Or)e:{switch(e){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Wa?iu(e,n)&&(Ee="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Ee="onCompositionStart");Ee&&(au&&n.locale!=="ko"&&(Wa||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Wa&&(ve=Po()):(Jn=V,Er="value"in Jn?Jn.value:Jn.textContent,Wa=!0)),Ue=Fi(B,Ee),0<Ue.length&&(Ee=new tu(Ee,e,null,n,V),K.push({event:Ee,listeners:Ue}),ve?Ee.data=ve:(ve=ru(n),ve!==null&&(Ee.data=ve)))),(ve=w0?T0(e,n):_0(e,n))&&(Ee=Fi(B,"onBeforeInput"),0<Ee.length&&(Ue=new tu("onBeforeInput","beforeinput",null,n,V),K.push({event:Ue,listeners:Ee}),Ue.data=ve)),xg(K,e,B,n,V)}Yf(K,t)})}function Ss(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fi(e,t){for(var n=t+"Capture",a=[];e!==null;){var l=e,o=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||o===null||(l=Hl(e,n),l!=null&&a.unshift(Ss(e,l,o)),l=Hl(e,t),l!=null&&a.push(Ss(e,l,o))),e.tag===3)return a;e=e.return}return[]}function Al(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Xf(e,t,n,a,l){for(var o=t._reactName,h=[];n!==null&&n!==a;){var g=n,N=g.alternate,B=g.stateNode;if(g=g.tag,N!==null&&N===a)break;g!==5&&g!==26&&g!==27||B===null||(N=B,l?(B=Hl(n,o),B!=null&&h.unshift(Ss(n,B,N))):l||(B=Hl(n,o),B!=null&&h.push(Ss(n,B,N)))),n=n.return}h.length!==0&&e.push({event:t,listeners:h})}var Sg=/\r\n?/g,jg=/\u0000|\uFFFD/g;function Qf(e){return(typeof e=="string"?e:""+e).replace(Sg,`
`).replace(jg,"")}function Kf(e,t){return t=Qf(t),Qf(e)===t}function Xi(){}function $e(e,t,n,a,l,o){switch(n){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||$a(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&$a(e,""+a);break;case"className":Ka(e,"class",a);break;case"tabIndex":Ka(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Ka(e,n,a);break;case"style":Zo(e,a,o);break;case"data":if(t!=="object"){Ka(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=ei(""+a),e.setAttribute(n,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(n==="formAction"?(t!=="input"&&$e(e,t,"name",l.name,l,null),$e(e,t,"formEncType",l.formEncType,l,null),$e(e,t,"formMethod",l.formMethod,l,null),$e(e,t,"formTarget",l.formTarget,l,null)):($e(e,t,"encType",l.encType,l,null),$e(e,t,"method",l.method,l,null),$e(e,t,"target",l.target,l,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(n);break}a=ei(""+a),e.setAttribute(n,a);break;case"onClick":a!=null&&(e.onclick=Xi);break;case"onScroll":a!=null&&De("scroll",e);break;case"onScrollEnd":a!=null&&De("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(c(61));if(n=a.__html,n!=null){if(l.children!=null)throw Error(c(60));e.innerHTML=n}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}n=ei(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""+a):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":a===!0?e.setAttribute(n,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(n,a):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(n,a):e.removeAttribute(n);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(n):e.setAttribute(n,a);break;case"popover":De("beforetoggle",e),De("toggle",e),gn(e,"popover",a);break;case"xlinkActuate":on(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":on(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":on(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":on(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":on(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":on(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":on(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":on(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":on(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":gn(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Wm.get(n)||n,gn(e,n,a))}}function lo(e,t,n,a,l,o){switch(n){case"style":Zo(e,a,o);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(c(61));if(n=a.__html,n!=null){if(l.children!=null)throw Error(c(60));e.innerHTML=n}}break;case"children":typeof a=="string"?$a(e,a):(typeof a=="number"||typeof a=="bigint")&&$a(e,""+a);break;case"onScroll":a!=null&&De("scroll",e);break;case"onScrollEnd":a!=null&&De("scrollend",e);break;case"onClick":a!=null&&(e.onclick=Xi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ot.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(l=n.endsWith("Capture"),t=n.slice(2,l?n.length-7:void 0),o=e[St]||null,o=o!=null?o[n]:null,typeof o=="function"&&e.removeEventListener(t,o,l),typeof a=="function")){typeof o!="function"&&o!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,a,l);break e}n in e?e[n]=a:a===!0?e.setAttribute(n,""):gn(e,n,a)}}}function Et(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",e),De("load",e);var a=!1,l=!1,o;for(o in n)if(n.hasOwnProperty(o)){var h=n[o];if(h!=null)switch(o){case"src":a=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:$e(e,t,o,h,n,null)}}l&&$e(e,t,"srcSet",n.srcSet,n,null),a&&$e(e,t,"src",n.src,n,null);return;case"input":De("invalid",e);var g=o=h=l=null,N=null,B=null;for(a in n)if(n.hasOwnProperty(a)){var V=n[a];if(V!=null)switch(a){case"name":l=V;break;case"type":h=V;break;case"checked":N=V;break;case"defaultChecked":B=V;break;case"value":o=V;break;case"defaultValue":g=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(c(137,t));break;default:$e(e,t,a,V,n,null)}}Fo(e,o,g,N,B,h,l,!1),Ps(e);return;case"select":De("invalid",e),a=h=o=null;for(l in n)if(n.hasOwnProperty(l)&&(g=n[l],g!=null))switch(l){case"value":o=g;break;case"defaultValue":h=g;break;case"multiple":a=g;default:$e(e,t,l,g,n,null)}t=o,n=h,e.multiple=!!a,t!=null?Za(e,!!a,t,!1):n!=null&&Za(e,!!a,n,!0);return;case"textarea":De("invalid",e),o=l=a=null;for(h in n)if(n.hasOwnProperty(h)&&(g=n[h],g!=null))switch(h){case"value":a=g;break;case"defaultValue":l=g;break;case"children":o=g;break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(c(91));break;default:$e(e,t,h,g,n,null)}Qo(e,a,l,o),Ps(e);return;case"option":for(N in n)if(n.hasOwnProperty(N)&&(a=n[N],a!=null))switch(N){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:$e(e,t,N,a,n,null)}return;case"dialog":De("beforetoggle",e),De("toggle",e),De("cancel",e),De("close",e);break;case"iframe":case"object":De("load",e);break;case"video":case"audio":for(a=0;a<Ns.length;a++)De(Ns[a],e);break;case"image":De("error",e),De("load",e);break;case"details":De("toggle",e);break;case"embed":case"source":case"link":De("error",e),De("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in n)if(n.hasOwnProperty(B)&&(a=n[B],a!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:$e(e,t,B,a,n,null)}return;default:if(br(t)){for(V in n)n.hasOwnProperty(V)&&(a=n[V],a!==void 0&&lo(e,t,V,a,n,void 0));return}}for(g in n)n.hasOwnProperty(g)&&(a=n[g],a!=null&&$e(e,t,g,a,n,null))}function Ag(e,t,n,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,o=null,h=null,g=null,N=null,B=null,V=null;for(C in n){var K=n[C];if(n.hasOwnProperty(C)&&K!=null)switch(C){case"checked":break;case"value":break;case"defaultValue":N=K;default:a.hasOwnProperty(C)||$e(e,t,C,null,a,K)}}for(var U in a){var C=a[U];if(K=n[U],a.hasOwnProperty(U)&&(C!=null||K!=null))switch(U){case"type":o=C;break;case"name":l=C;break;case"checked":B=C;break;case"defaultChecked":V=C;break;case"value":h=C;break;case"defaultValue":g=C;break;case"children":case"dangerouslySetInnerHTML":if(C!=null)throw Error(c(137,t));break;default:C!==K&&$e(e,t,U,C,a,K)}}xr(e,h,g,N,B,V,o,l);return;case"select":C=h=g=U=null;for(o in n)if(N=n[o],n.hasOwnProperty(o)&&N!=null)switch(o){case"value":break;case"multiple":C=N;default:a.hasOwnProperty(o)||$e(e,t,o,null,a,N)}for(l in a)if(o=a[l],N=n[l],a.hasOwnProperty(l)&&(o!=null||N!=null))switch(l){case"value":U=o;break;case"defaultValue":g=o;break;case"multiple":h=o;default:o!==N&&$e(e,t,l,o,a,N)}t=g,n=h,a=C,U!=null?Za(e,!!n,U,!1):!!a!=!!n&&(t!=null?Za(e,!!n,t,!0):Za(e,!!n,n?[]:"",!1));return;case"textarea":C=U=null;for(g in n)if(l=n[g],n.hasOwnProperty(g)&&l!=null&&!a.hasOwnProperty(g))switch(g){case"value":break;case"children":break;default:$e(e,t,g,null,a,l)}for(h in a)if(l=a[h],o=n[h],a.hasOwnProperty(h)&&(l!=null||o!=null))switch(h){case"value":U=l;break;case"defaultValue":C=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(c(91));break;default:l!==o&&$e(e,t,h,l,a,o)}Xo(e,U,C);return;case"option":for(var we in n)if(U=n[we],n.hasOwnProperty(we)&&U!=null&&!a.hasOwnProperty(we))switch(we){case"selected":e.selected=!1;break;default:$e(e,t,we,null,a,U)}for(N in a)if(U=a[N],C=n[N],a.hasOwnProperty(N)&&U!==C&&(U!=null||C!=null))switch(N){case"selected":e.selected=U&&typeof U!="function"&&typeof U!="symbol";break;default:$e(e,t,N,U,a,C)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in n)U=n[Se],n.hasOwnProperty(Se)&&U!=null&&!a.hasOwnProperty(Se)&&$e(e,t,Se,null,a,U);for(B in a)if(U=a[B],C=n[B],a.hasOwnProperty(B)&&U!==C&&(U!=null||C!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(c(137,t));break;default:$e(e,t,B,U,a,C)}return;default:if(br(t)){for(var Je in n)U=n[Je],n.hasOwnProperty(Je)&&U!==void 0&&!a.hasOwnProperty(Je)&&lo(e,t,Je,void 0,a,U);for(V in a)U=a[V],C=n[V],!a.hasOwnProperty(V)||U===C||U===void 0&&C===void 0||lo(e,t,V,U,a,C);return}}for(var w in n)U=n[w],n.hasOwnProperty(w)&&U!=null&&!a.hasOwnProperty(w)&&$e(e,t,w,null,a,U);for(K in a)U=a[K],C=n[K],!a.hasOwnProperty(K)||U===C||U==null&&C==null||$e(e,t,K,U,a,C)}var so=null,io=null;function Qi(e){return e.nodeType===9?e:e.ownerDocument}function Zf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $f(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function ro(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var co=null;function Eg(){var e=window.event;return e&&e.type==="popstate"?e===co?!1:(co=e,!0):(co=null,!1)}var Jf=typeof setTimeout=="function"?setTimeout:void 0,wg=typeof clearTimeout=="function"?clearTimeout:void 0,Pf=typeof Promise=="function"?Promise:void 0,Tg=typeof queueMicrotask=="function"?queueMicrotask:typeof Pf<"u"?function(e){return Pf.resolve(null).then(e).catch(_g)}:Jf;function _g(e){setTimeout(function(){throw e})}function ha(e){return e==="head"}function Wf(e,t){var n=t,a=0,l=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(0<a&&8>a){n=a;var h=e.ownerDocument;if(n&1&&js(h.documentElement),n&2&&js(h.body),n&4)for(n=h.head,js(n),h=n.firstChild;h;){var g=h.nextSibling,N=h.nodeName;h[Qn]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&h.rel.toLowerCase()==="stylesheet"||n.removeChild(h),h=g}}if(l===0){e.removeChild(o),Bs(t);return}l--}else n==="$"||n==="$?"||n==="$!"?l++:a=n.charCodeAt(0)-48;else a=0;n=o}while(n);Bs(t)}function oo(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":oo(n),Qa(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Rg(e,t,n,a){for(;e.nodeType===1;){var l=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[Qn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==l.rel||e.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||e.getAttribute("title")!==(l.title==null?null:l.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(l.src==null?null:l.src)||e.getAttribute("type")!==(l.type==null?null:l.type)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var o=l.name==null?null:""+l.name;if(l.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=fn(e.nextSibling),e===null)break}return null}function Og(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=fn(e.nextSibling),e===null))return null;return e}function uo(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Bg(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var a=function(){t(),n.removeEventListener("DOMContentLoaded",a)};n.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function fn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var fo=null;function eh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function th(e,t,n){switch(t=Qi(n),e){case"html":if(e=t.documentElement,!e)throw Error(c(452));return e;case"head":if(e=t.head,!e)throw Error(c(453));return e;case"body":if(e=t.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function js(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Qa(e)}var ln=new Map,nh=new Set;function Ki(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Gn=b.d;b.d={f:Ug,r:Cg,D:Mg,C:Dg,L:kg,m:zg,X:Ig,S:Lg,M:Hg};function Ug(){var e=Gn.f(),t=Ii();return e||t}function Cg(e){var t=_n(e);t!==null&&t.tag===5&&t.type==="form"?Nd(t):Gn.r(e)}var El=typeof document>"u"?null:document;function ah(e,t,n){var a=El;if(a&&typeof t=="string"&&t){var l=Jt(t);l='link[rel="'+e+'"][href="'+l+'"]',typeof n=="string"&&(l+='[crossorigin="'+n+'"]'),nh.has(l)||(nh.add(l),e={rel:e,crossOrigin:n,href:t},a.querySelector(l)===null&&(t=a.createElement("link"),Et(t,"link",e),Ae(t),a.head.appendChild(t)))}}function Mg(e){Gn.D(e),ah("dns-prefetch",e,null)}function Dg(e,t){Gn.C(e,t),ah("preconnect",e,t)}function kg(e,t,n){Gn.L(e,t,n);var a=El;if(a&&e&&t){var l='link[rel="preload"][as="'+Jt(t)+'"]';t==="image"&&n&&n.imageSrcSet?(l+='[imagesrcset="'+Jt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(l+='[imagesizes="'+Jt(n.imageSizes)+'"]')):l+='[href="'+Jt(e)+'"]';var o=l;switch(t){case"style":o=wl(e);break;case"script":o=Tl(e)}ln.has(o)||(e=S({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),ln.set(o,e),a.querySelector(l)!==null||t==="style"&&a.querySelector(As(o))||t==="script"&&a.querySelector(Es(o))||(t=a.createElement("link"),Et(t,"link",e),Ae(t),a.head.appendChild(t)))}}function zg(e,t){Gn.m(e,t);var n=El;if(n&&e){var a=t&&typeof t.as=="string"?t.as:"script",l='link[rel="modulepreload"][as="'+Jt(a)+'"][href="'+Jt(e)+'"]',o=l;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Tl(e)}if(!ln.has(o)&&(e=S({rel:"modulepreload",href:e},t),ln.set(o,e),n.querySelector(l)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Es(o)))return}a=n.createElement("link"),Et(a,"link",e),Ae(a),n.head.appendChild(a)}}}function Lg(e,t,n){Gn.S(e,t,n);var a=El;if(a&&e){var l=me(a).hoistableStyles,o=wl(e);t=t||"default";var h=l.get(o);if(!h){var g={loading:0,preload:null};if(h=a.querySelector(As(o)))g.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":t},n),(n=ln.get(o))&&ho(e,n);var N=h=a.createElement("link");Ae(N),Et(N,"link",e),N._p=new Promise(function(B,V){N.onload=B,N.onerror=V}),N.addEventListener("load",function(){g.loading|=1}),N.addEventListener("error",function(){g.loading|=2}),g.loading|=4,Zi(h,t,a)}h={type:"stylesheet",instance:h,count:1,state:g},l.set(o,h)}}}function Ig(e,t){Gn.X(e,t);var n=El;if(n&&e){var a=me(n).hoistableScripts,l=Tl(e),o=a.get(l);o||(o=n.querySelector(Es(l)),o||(e=S({src:e,async:!0},t),(t=ln.get(l))&&mo(e,t),o=n.createElement("script"),Ae(o),Et(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},a.set(l,o))}}function Hg(e,t){Gn.M(e,t);var n=El;if(n&&e){var a=me(n).hoistableScripts,l=Tl(e),o=a.get(l);o||(o=n.querySelector(Es(l)),o||(e=S({src:e,async:!0,type:"module"},t),(t=ln.get(l))&&mo(e,t),o=n.createElement("script"),Ae(o),Et(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},a.set(l,o))}}function lh(e,t,n,a){var l=(l=Be.current)?Ki(l):null;if(!l)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=wl(n.href),n=me(l).hoistableStyles,a=n.get(t),a||(a={type:"style",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=wl(n.href);var o=me(l).hoistableStyles,h=o.get(e);if(h||(l=l.ownerDocument||l,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,h),(o=l.querySelector(As(e)))&&!o._p&&(h.instance=o,h.state.loading=5),ln.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ln.set(e,n),o||qg(l,e,n,h.state))),t&&a===null)throw Error(c(528,""));return h}if(t&&a!==null)throw Error(c(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Tl(n),n=me(l).hoistableScripts,a=n.get(t),a||(a={type:"script",instance:null,count:0,state:null},n.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function wl(e){return'href="'+Jt(e)+'"'}function As(e){return'link[rel="stylesheet"]['+e+"]"}function sh(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function qg(e,t,n,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),Et(t,"link",n),Ae(t),e.head.appendChild(t))}function Tl(e){return'[src="'+Jt(e)+'"]'}function Es(e){return"script[async]"+e}function ih(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+Jt(n.href)+'"]');if(a)return t.instance=a,Ae(a),a;var l=S({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),Ae(a),Et(a,"style",l),Zi(a,n.precedence,e),t.instance=a;case"stylesheet":l=wl(n.href);var o=e.querySelector(As(l));if(o)return t.state.loading|=4,t.instance=o,Ae(o),o;a=sh(n),(l=ln.get(l))&&ho(a,l),o=(e.ownerDocument||e).createElement("link"),Ae(o);var h=o;return h._p=new Promise(function(g,N){h.onload=g,h.onerror=N}),Et(o,"link",a),t.state.loading|=4,Zi(o,n.precedence,e),t.instance=o;case"script":return o=Tl(n.src),(l=e.querySelector(Es(o)))?(t.instance=l,Ae(l),l):(a=n,(l=ln.get(o))&&(a=S({},n),mo(a,l)),e=e.ownerDocument||e,l=e.createElement("script"),Ae(l),Et(l,"link",a),e.head.appendChild(l),t.instance=l);case"void":return null;default:throw Error(c(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,Zi(a,n.precedence,e));return t.instance}function Zi(e,t,n){for(var a=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=a.length?a[a.length-1]:null,o=l,h=0;h<a.length;h++){var g=a[h];if(g.dataset.precedence===t)o=g;else if(o!==l)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function ho(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function mo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var $i=null;function rh(e,t,n){if($i===null){var a=new Map,l=$i=new Map;l.set(n,a)}else l=$i,a=l.get(n),a||(a=new Map,l.set(n,a));if(a.has(e))return a;for(a.set(e,null),n=n.getElementsByTagName(e),l=0;l<n.length;l++){var o=n[l];if(!(o[Qn]||o[gt]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var h=o.getAttribute(t)||"";h=e+h;var g=a.get(h);g?g.push(o):a.set(h,[o])}}return a}function ch(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Gg(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function oh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var ws=null;function Vg(){}function Yg(e,t,n){if(ws===null)throw Error(c(475));var a=ws;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var l=wl(n.href),o=e.querySelector(As(l));if(o){e=o._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(a.count++,a=Ji.bind(a),e.then(a,a)),t.state.loading|=4,t.instance=o,Ae(o);return}o=e.ownerDocument||e,n=sh(n),(l=ln.get(l))&&ho(n,l),o=o.createElement("link"),Ae(o);var h=o;h._p=new Promise(function(g,N){h.onload=g,h.onerror=N}),Et(o,"link",n),t.instance=o}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(a.count++,t=Ji.bind(a),e.addEventListener("load",t),e.addEventListener("error",t))}}function Fg(){if(ws===null)throw Error(c(475));var e=ws;return e.stylesheets&&e.count===0&&go(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&go(e,e.stylesheets),e.unsuspend){var a=e.unsuspend;e.unsuspend=null,a()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function Ji(){if(this.count--,this.count===0){if(this.stylesheets)go(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Pi=null;function go(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Pi=new Map,t.forEach(Xg,e),Pi=null,Ji.call(e))}function Xg(e,t){if(!(t.state.loading&4)){var n=Pi.get(e);if(n)var a=n.get(null);else{n=new Map,Pi.set(e,n);for(var l=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<l.length;o++){var h=l[o];(h.nodeName==="LINK"||h.getAttribute("media")!=="not all")&&(n.set(h.dataset.precedence,h),a=h)}a&&n.set(null,a)}l=t.instance,h=l.getAttribute("data-precedence"),o=n.get(h)||a,o===a&&n.set(null,l),n.set(h,l),this.count++,a=Ji.bind(this),l.addEventListener("load",a),l.addEventListener("error",a),o?o.parentNode.insertBefore(l,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(l,e.firstChild)),t.state.loading|=4}}var Ts={$$typeof:q,Provider:null,Consumer:null,_currentValue:D,_currentValue2:D,_threadCount:0};function Qg(e,t,n,a,l,o,h,g){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Va(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Va(0),this.hiddenUpdates=Va(null),this.identifierPrefix=a,this.onUncaughtError=l,this.onCaughtError=o,this.onRecoverableError=h,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=g,this.incompleteTransitions=new Map}function uh(e,t,n,a,l,o,h,g,N,B,V,K){return e=new Qg(e,t,n,h,g,N,B,K),t=1,o===!0&&(t|=24),o=Gt(3,null,null,t),e.current=o,o.stateNode=e,t=Zr(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:a,isDehydrated:n,cache:t},Wr(o),e}function dh(e){return e?(e=ll,e):ll}function fh(e,t,n,a,l,o){l=dh(l),a.context===null?a.context=l:a.pendingContext=l,a=ea(t),a.payload={element:n},o=o===void 0?null:o,o!==null&&(a.callback=o),n=ta(e,a,t),n!==null&&(Qt(n,e,t),as(n,e,t))}function hh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function po(e,t){hh(e,t),(e=e.alternate)&&hh(e,t)}function mh(e){if(e.tag===13){var t=al(e,67108864);t!==null&&Qt(t,e,67108864),po(e,67108864)}}var Wi=!0;function Kg(e,t,n,a){var l=x.T;x.T=null;var o=b.p;try{b.p=2,vo(e,t,n,a)}finally{b.p=o,x.T=l}}function Zg(e,t,n,a){var l=x.T;x.T=null;var o=b.p;try{b.p=8,vo(e,t,n,a)}finally{b.p=o,x.T=l}}function vo(e,t,n,a){if(Wi){var l=xo(a);if(l===null)ao(e,t,a,er,n),ph(e,a);else if(Jg(l,e,t,n,a))a.stopPropagation();else if(ph(e,a),t&4&&-1<$g.indexOf(e)){for(;l!==null;){var o=_n(l);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var h=mn(o.pendingLanes);if(h!==0){var g=o;for(g.pendingLanes|=2,g.entangledLanes|=2;h;){var N=1<<31-Tt(h);g.entanglements[1]|=N,h&=~N}bn(o),(Ye&6)===0&&(zi=re()+500,bs(0))}}break;case 13:g=al(o,2),g!==null&&Qt(g,o,2),Ii(),po(o,2)}if(o=xo(a),o===null&&ao(e,t,a,er,n),o===l)break;l=o}l!==null&&a.stopPropagation()}else ao(e,t,a,null,n)}}function xo(e){return e=Sr(e),yo(e)}var er=null;function yo(e){if(er=null,e=Tn(e),e!==null){var t=f(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=m(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return er=e,null}function gh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pe()){case Q:return 2;case M:return 8;case le:case ie:return 32;case fe:return 268435456;default:return 32}default:return 32}}var bo=!1,ma=null,ga=null,pa=null,_s=new Map,Rs=new Map,va=[],$g="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ph(e,t){switch(e){case"focusin":case"focusout":ma=null;break;case"dragenter":case"dragleave":ga=null;break;case"mouseover":case"mouseout":pa=null;break;case"pointerover":case"pointerout":_s.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rs.delete(t.pointerId)}}function Os(e,t,n,a,l,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:o,targetContainers:[l]},t!==null&&(t=_n(t),t!==null&&mh(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function Jg(e,t,n,a,l){switch(t){case"focusin":return ma=Os(ma,e,t,n,a,l),!0;case"dragenter":return ga=Os(ga,e,t,n,a,l),!0;case"mouseover":return pa=Os(pa,e,t,n,a,l),!0;case"pointerover":var o=l.pointerId;return _s.set(o,Os(_s.get(o)||null,e,t,n,a,l)),!0;case"gotpointercapture":return o=l.pointerId,Rs.set(o,Os(Rs.get(o)||null,e,t,n,a,l)),!0}return!1}function vh(e){var t=Tn(e.target);if(t!==null){var n=f(t);if(n!==null){if(t=n.tag,t===13){if(t=m(n),t!==null){e.blockedOn=t,Ks(e.priority,function(){if(n.tag===13){var a=Xt();a=Ya(a);var l=al(n,a);l!==null&&Qt(l,n,a),po(n,a)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tr(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=xo(e.nativeEvent);if(n===null){n=e.nativeEvent;var a=new n.constructor(n.type,n);Nr=a,n.target.dispatchEvent(a),Nr=null}else return t=_n(n),t!==null&&mh(t),e.blockedOn=n,!1;t.shift()}return!0}function xh(e,t,n){tr(e)&&n.delete(t)}function Pg(){bo=!1,ma!==null&&tr(ma)&&(ma=null),ga!==null&&tr(ga)&&(ga=null),pa!==null&&tr(pa)&&(pa=null),_s.forEach(xh),Rs.forEach(xh)}function nr(e,t){e.blockedOn===t&&(e.blockedOn=null,bo||(bo=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Pg)))}var ar=null;function yh(e){ar!==e&&(ar=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){ar===e&&(ar=null);for(var t=0;t<e.length;t+=3){var n=e[t],a=e[t+1],l=e[t+2];if(typeof a!="function"){if(yo(a||n)===null)continue;break}var o=_n(n);o!==null&&(e.splice(t,3),t-=3,xc(o,{pending:!0,data:l,method:n.method,action:a},a,l))}}))}function Bs(e){function t(N){return nr(N,e)}ma!==null&&nr(ma,e),ga!==null&&nr(ga,e),pa!==null&&nr(pa,e),_s.forEach(t),Rs.forEach(t);for(var n=0;n<va.length;n++){var a=va[n];a.blockedOn===e&&(a.blockedOn=null)}for(;0<va.length&&(n=va[0],n.blockedOn===null);)vh(n),n.blockedOn===null&&va.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(a=0;a<n.length;a+=3){var l=n[a],o=n[a+1],h=l[St]||null;if(typeof o=="function")h||yh(n);else if(h){var g=null;if(o&&o.hasAttribute("formAction")){if(l=o,h=o[St]||null)g=h.formAction;else if(yo(l)!==null)continue}else g=h.action;typeof g=="function"?n[a+1]=g:(n.splice(a,3),a-=3),yh(n)}}}function No(e){this._internalRoot=e}lr.prototype.render=No.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));var n=t.current,a=Xt();fh(n,a,e,t,null,null)},lr.prototype.unmount=No.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fh(e.current,2,null,e,null,null),Ii(),t[wn]=null}};function lr(e){this._internalRoot=e}lr.prototype.unstable_scheduleHydration=function(e){if(e){var t=Dl();e={blockedOn:null,target:e,priority:t};for(var n=0;n<va.length&&t!==0&&t<va[n].priority;n++);va.splice(n,0,e),n===0&&vh(e)}};var bh=i.version;if(bh!=="19.1.0")throw Error(c(527,bh,"19.1.0"));b.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=v(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var Wg={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:x,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sr.isDisabled&&sr.supportsFiber)try{Qe=sr.inject(Wg),Ve=sr}catch{}}return Cs.createRoot=function(e,t){if(!d(e))throw Error(c(299));var n=!1,a="",l=Dd,o=kd,h=zd,g=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(l=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(h=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(g=t.unstable_transitionCallbacks)),t=uh(e,1,!1,null,null,n,a,l,o,h,g,null),e[wn]=t.current,no(e),new No(t)},Cs.hydrateRoot=function(e,t,n){if(!d(e))throw Error(c(299));var a=!1,l="",o=Dd,h=kd,g=zd,N=null,B=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(o=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(g=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(N=n.unstable_transitionCallbacks),n.formState!==void 0&&(B=n.formState)),t=uh(e,1,!0,t,n??null,a,l,o,h,g,N,B),t.context=dh(null),n=t.current,a=Xt(),a=Ya(a),l=ea(a),l.callback=null,ta(n,l,a),n=a,t.current.lanes=n,Xn(t,n),bn(t),e[wn]=t.current,no(e),new lr(t)},Cs.version="19.1.0",Cs}var Mh;function k1(){if(Mh)return Ao.exports;Mh=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(i){console.error(i)}}return r(),Ao.exports=D1(),Ao.exports}var z1=k1();const L1=s1(z1);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="firebasestorage.googleapis.com",gm="storageBucket",I1=2*60*1e3,H1=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it extends g1{constructor(i,u,c=0){super(To(i),`Firebase Storage: ${u} (${To(i)})`),this.status_=c,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,it.prototype)}get status(){return this.status_}set status(i){this.status_=i}_codeEquals(i){return To(i)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(i){this.customData.serverResponse=i,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var st;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(st||(st={}));function To(r){return"storage/"+r}function Lo(){const r="An unknown error occurred, please check the error payload for server response.";return new it(st.UNKNOWN,r)}function q1(r){return new it(st.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function G1(r){return new it(st.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function V1(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new it(st.UNAUTHENTICATED,r)}function Y1(){return new it(st.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function F1(r){return new it(st.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function X1(){return new it(st.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Q1(){return new it(st.CANCELED,"User canceled the upload/download.")}function K1(r){return new it(st.INVALID_URL,"Invalid URL '"+r+"'.")}function Z1(r){return new it(st.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function $1(){return new it(st.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+gm+"' property when initializing the app?")}function J1(){return new it(st.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function P1(){return new it(st.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function W1(r){return new it(st.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Bo(r){return new it(st.INVALID_ARGUMENT,r)}function pm(){return new it(st.APP_DELETED,"The Firebase app was deleted.")}function ep(r){return new it(st.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ls(r,i){return new it(st.INVALID_FORMAT,"String does not match format '"+r+"': "+i)}function Ms(r){throw new it(st.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(i,u){this.bucket=i,this.path_=u}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const i=encodeURIComponent;return"/b/"+i(this.bucket)+"/o/"+i(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(i,u){let c;try{c=Zt.makeFromUrl(i,u)}catch{return new Zt(i,"")}if(c.path==="")return c;throw Z1(i)}static makeFromUrl(i,u){let c=null;const d="([A-Za-z0-9.\\-_]+)";function f($){$.path.charAt($.path.length-1)==="/"&&($.path_=$.path_.slice(0,-1))}const m="(/(.*))?$",p=new RegExp("^gs://"+d+m,"i"),v={bucket:1,path:3};function y($){$.path_=decodeURIComponent($.path)}const S="v[A-Za-z0-9_]+",j=u.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",O=new RegExp(`^https?://${j}/${S}/b/${d}/o${T}`,"i"),_={bucket:1,path:3},z=u===mm?"(?:storage.googleapis.com|storage.cloud.google.com)":u,te="([^?#]*)",ee=new RegExp(`^https?://${z}/${d}/${te}`,"i"),q=[{regex:p,indices:v,postModify:f},{regex:O,indices:_,postModify:y},{regex:ee,indices:{bucket:1,path:2},postModify:y}];for(let $=0;$<q.length;$++){const H=q[$],k=H.regex.exec(i);if(k){const X=k[H.indices.bucket];let P=k[H.indices.path];P||(P=""),c=new Zt(X,P),H.postModify(c);break}}if(c==null)throw K1(i);return c}}class tp{constructor(i){this.promise_=Promise.reject(i)}getPromise(){return this.promise_}cancel(i=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(r,i,u){let c=1,d=null,f=null,m=!1,p=0;function v(){return p===2}let y=!1;function S(...te){y||(y=!0,i.apply(null,te))}function j(te){d=setTimeout(()=>{d=null,r(O,v())},te)}function T(){f&&clearTimeout(f)}function O(te,...ee){if(y){T();return}if(te){T(),S.call(null,te,...ee);return}if(v()||m){T(),S.call(null,te,...ee);return}c<64&&(c*=2);let q;p===1?(p=2,q=0):q=(c+Math.random())*1e3,j(q)}let _=!1;function z(te){_||(_=!0,T(),!y&&(d!==null?(te||(p=2),clearTimeout(d),j(0)):te||(p=1)))}return j(0),f=setTimeout(()=>{m=!0,z(!0)},u),z}function ap(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(r){return r!==void 0}function sp(r){return typeof r=="object"&&!Array.isArray(r)}function Io(r){return typeof r=="string"||r instanceof String}function Dh(r){return Ho()&&r instanceof Blob}function Ho(){return typeof Blob<"u"}function kh(r,i,u,c){if(c<i)throw Bo(`Invalid value for '${r}'. Expected ${i} or greater.`);if(c>u)throw Bo(`Invalid value for '${r}'. Expected ${u} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(r,i,u){let c=i;return u==null&&(c=`https://${i}`),`${u}://${c}/v0${r}`}function vm(r){const i=encodeURIComponent;let u="?";for(const c in r)if(r.hasOwnProperty(c)){const d=i(c)+"="+i(r[c]);u=u+d+"&"}return u=u.slice(0,-1),u}var Ia;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Ia||(Ia={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(r,i){const u=r>=500&&r<600,d=[408,429].indexOf(r)!==-1,f=i.indexOf(r)!==-1;return u||d||f}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(i,u,c,d,f,m,p,v,y,S,j,T=!0,O=!1){this.url_=i,this.method_=u,this.headers_=c,this.body_=d,this.successCodes_=f,this.additionalRetryCodes_=m,this.callback_=p,this.errorCallback_=v,this.timeout_=y,this.progressCallback_=S,this.connectionFactory_=j,this.retry=T,this.isUsingEmulator=O,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,z)=>{this.resolve_=_,this.reject_=z,this.start_()})}start_(){const i=(c,d)=>{if(d){c(!1,new ir(!1,null,!0));return}const f=this.connectionFactory_();this.pendingConnection_=f;const m=p=>{const v=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(v,y)};this.progressCallback_!==null&&f.addUploadProgressListener(m),f.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&f.removeUploadProgressListener(m),this.pendingConnection_=null;const p=f.getErrorCode()===Ia.NO_ERROR,v=f.getStatus();if(!p||ip(v,this.additionalRetryCodes_)&&this.retry){const S=f.getErrorCode()===Ia.ABORT;c(!1,new ir(!1,null,S));return}const y=this.successCodes_.indexOf(v)!==-1;c(!0,new ir(y,f))})},u=(c,d)=>{const f=this.resolve_,m=this.reject_,p=d.connection;if(d.wasSuccessCode)try{const v=this.callback_(p,p.getResponse());lp(v)?f(v):f()}catch(v){m(v)}else if(p!==null){const v=Lo();v.serverResponse=p.getErrorText(),this.errorCallback_?m(this.errorCallback_(p,v)):m(v)}else if(d.canceled){const v=this.appDelete_?pm():Q1();m(v)}else{const v=X1();m(v)}};this.canceled_?u(!1,new ir(!1,null,!0)):this.backoffId_=np(i,u,this.timeout_)}getPromise(){return this.promise_}cancel(i){this.canceled_=!0,this.appDelete_=i||!1,this.backoffId_!==null&&ap(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ir{constructor(i,u,c){this.wasSuccessCode=i,this.connection=u,this.canceled=!!c}}function cp(r,i){i!==null&&i.length>0&&(r.Authorization="Firebase "+i)}function op(r,i){r["X-Firebase-Storage-Version"]="webjs/"+(i??"AppManager")}function up(r,i){i&&(r["X-Firebase-GMPID"]=i)}function dp(r,i){i!==null&&(r["X-Firebase-AppCheck"]=i)}function fp(r,i,u,c,d,f,m=!0,p=!1){const v=vm(r.urlParams),y=r.url+v,S=Object.assign({},r.headers);return up(S,i),cp(S,u),op(S,f),dp(S,c),new rp(y,r.method,S,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,d,m,p)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function mp(...r){const i=hp();if(i!==void 0){const u=new i;for(let c=0;c<r.length;c++)u.append(r[c]);return u.getBlob()}else{if(Ho())return new Blob(r);throw new it(st.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function gp(r,i,u){return r.webkitSlice?r.webkitSlice(i,u):r.mozSlice?r.mozSlice(i,u):r.slice?r.slice(i,u):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(r){if(typeof atob>"u")throw W1("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _o{constructor(i,u){this.data=i,this.contentType=u||null}}function vp(r,i){switch(r){case An.RAW:return new _o(xm(i));case An.BASE64:case An.BASE64URL:return new _o(ym(r,i));case An.DATA_URL:return new _o(yp(i),bp(i))}throw Lo()}function xm(r){const i=[];for(let u=0;u<r.length;u++){let c=r.charCodeAt(u);if(c<=127)i.push(c);else if(c<=2047)i.push(192|c>>6,128|c&63);else if((c&64512)===55296)if(!(u<r.length-1&&(r.charCodeAt(u+1)&64512)===56320))i.push(239,191,189);else{const f=c,m=r.charCodeAt(++u);c=65536|(f&1023)<<10|m&1023,i.push(240|c>>18,128|c>>12&63,128|c>>6&63,128|c&63)}else(c&64512)===56320?i.push(239,191,189):i.push(224|c>>12,128|c>>6&63,128|c&63)}return new Uint8Array(i)}function xp(r){let i;try{i=decodeURIComponent(r)}catch{throw Ls(An.DATA_URL,"Malformed data URL.")}return xm(i)}function ym(r,i){switch(r){case An.BASE64:{const d=i.indexOf("-")!==-1,f=i.indexOf("_")!==-1;if(d||f)throw Ls(r,"Invalid character '"+(d?"-":"_")+"' found: is it base64url encoded?");break}case An.BASE64URL:{const d=i.indexOf("+")!==-1,f=i.indexOf("/")!==-1;if(d||f)throw Ls(r,"Invalid character '"+(d?"+":"/")+"' found: is it base64 encoded?");i=i.replace(/-/g,"+").replace(/_/g,"/");break}}let u;try{u=pp(i)}catch(d){throw d.message.includes("polyfill")?d:Ls(r,"Invalid character found")}const c=new Uint8Array(u.length);for(let d=0;d<u.length;d++)c[d]=u.charCodeAt(d);return c}class bm{constructor(i){this.base64=!1,this.contentType=null;const u=i.match(/^data:([^,]+)?,/);if(u===null)throw Ls(An.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const c=u[1]||null;c!=null&&(this.base64=Np(c,";base64"),this.contentType=this.base64?c.substring(0,c.length-7):c),this.rest=i.substring(i.indexOf(",")+1)}}function yp(r){const i=new bm(r);return i.base64?ym(An.BASE64,i.rest):xp(i.rest)}function bp(r){return new bm(r).contentType}function Np(r,i){return r.length>=i.length?r.substring(r.length-i.length)===i:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(i,u){let c=0,d="";Dh(i)?(this.data_=i,c=i.size,d=i.type):i instanceof ArrayBuffer?(u?this.data_=new Uint8Array(i):(this.data_=new Uint8Array(i.byteLength),this.data_.set(new Uint8Array(i))),c=this.data_.length):i instanceof Uint8Array&&(u?this.data_=i:(this.data_=new Uint8Array(i.length),this.data_.set(i)),c=i.length),this.size_=c,this.type_=d}size(){return this.size_}type(){return this.type_}slice(i,u){if(Dh(this.data_)){const c=this.data_,d=gp(c,i,u);return d===null?null:new ya(d)}else{const c=new Uint8Array(this.data_.buffer,i,u-i);return new ya(c,!0)}}static getBlob(...i){if(Ho()){const u=i.map(c=>c instanceof ya?c.data_:c);return new ya(mp.apply(null,u))}else{const u=i.map(m=>Io(m)?vp(An.RAW,m).data:m.data_);let c=0;u.forEach(m=>{c+=m.byteLength});const d=new Uint8Array(c);let f=0;return u.forEach(m=>{for(let p=0;p<m.length;p++)d[f++]=m[p]}),new ya(d,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(r){let i;try{i=JSON.parse(r)}catch{return null}return sp(i)?i:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(r){if(r.length===0)return null;const i=r.lastIndexOf("/");return i===-1?"":r.slice(0,i)}function jp(r,i){const u=i.split("/").filter(c=>c.length>0).join("/");return r.length===0?u:r+"/"+u}function Sm(r){const i=r.lastIndexOf("/",r.length-2);return i===-1?r:r.slice(i+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(r,i){return i}class Ut{constructor(i,u,c,d){this.server=i,this.local=u||i,this.writable=!!c,this.xform=d||Ap}}let rr=null;function Ep(r){return!Io(r)||r.length<2?r:Sm(r)}function jm(){if(rr)return rr;const r=[];r.push(new Ut("bucket")),r.push(new Ut("generation")),r.push(new Ut("metageneration")),r.push(new Ut("name","fullPath",!0));function i(f,m){return Ep(m)}const u=new Ut("name");u.xform=i,r.push(u);function c(f,m){return m!==void 0?Number(m):m}const d=new Ut("size");return d.xform=c,r.push(d),r.push(new Ut("timeCreated")),r.push(new Ut("updated")),r.push(new Ut("md5Hash",null,!0)),r.push(new Ut("cacheControl",null,!0)),r.push(new Ut("contentDisposition",null,!0)),r.push(new Ut("contentEncoding",null,!0)),r.push(new Ut("contentLanguage",null,!0)),r.push(new Ut("contentType",null,!0)),r.push(new Ut("metadata","customMetadata",!0)),rr=r,rr}function wp(r,i){function u(){const c=r.bucket,d=r.fullPath,f=new Zt(c,d);return i._makeStorageReference(f)}Object.defineProperty(r,"ref",{get:u})}function Tp(r,i,u){const c={};c.type="file";const d=u.length;for(let f=0;f<d;f++){const m=u[f];c[m.local]=m.xform(c,i[m.server])}return wp(c,r),c}function Am(r,i,u){const c=Nm(i);return c===null?null:Tp(r,c,u)}function _p(r,i,u,c){const d=Nm(i);if(d===null||!Io(d.downloadTokens))return null;const f=d.downloadTokens;if(f.length===0)return null;const m=encodeURIComponent;return f.split(",").map(y=>{const S=r.bucket,j=r.fullPath,T="/b/"+m(S)+"/o/"+m(j),O=qo(T,u,c),_=vm({alt:"media",token:y});return O+_})[0]}function Rp(r,i){const u={},c=i.length;for(let d=0;d<c;d++){const f=i[d];f.writable&&(u[f.server]=r[f.local])}return JSON.stringify(u)}class Em{constructor(i,u,c,d){this.url=i,this.method=u,this.handler=c,this.timeout=d,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(r){if(!r)throw Lo()}function Op(r,i){function u(c,d){const f=Am(r,d,i);return wm(f!==null),f}return u}function Bp(r,i){function u(c,d){const f=Am(r,d,i);return wm(f!==null),_p(f,d,r.host,r._protocol)}return u}function Tm(r){function i(u,c){let d;return u.getStatus()===401?u.getErrorText().includes("Firebase App Check token is invalid")?d=Y1():d=V1():u.getStatus()===402?d=G1(r.bucket):u.getStatus()===403?d=F1(r.path):d=c,d.status=u.getStatus(),d.serverResponse=c.serverResponse,d}return i}function Up(r){const i=Tm(r);function u(c,d){let f=i(c,d);return c.getStatus()===404&&(f=q1(r.path)),f.serverResponse=d.serverResponse,f}return u}function Cp(r,i,u){const c=i.fullServerUrl(),d=qo(c,r.host,r._protocol),f="GET",m=r.maxOperationRetryTime,p=new Em(d,f,Bp(r,u),m);return p.errorHandler=Up(i),p}function Mp(r,i){return r&&r.contentType||i&&i.type()||"application/octet-stream"}function Dp(r,i,u){const c=Object.assign({},u);return c.fullPath=r.path,c.size=i.size(),c.contentType||(c.contentType=Mp(null,i)),c}function kp(r,i,u,c,d){const f=i.bucketOnlyServerUrl(),m={"X-Goog-Upload-Protocol":"multipart"};function p(){let q="";for(let $=0;$<2;$++)q=q+Math.random().toString().slice(2);return q}const v=p();m["Content-Type"]="multipart/related; boundary="+v;const y=Dp(i,c,d),S=Rp(y,u),j="--"+v+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+S+`\r
--`+v+`\r
Content-Type: `+y.contentType+`\r
\r
`,T=`\r
--`+v+"--",O=ya.getBlob(j,c,T);if(O===null)throw J1();const _={name:y.fullPath},z=qo(f,r.host,r._protocol),te="POST",ee=r.maxUploadRetryTime,ue=new Em(z,te,Op(r,u),ee);return ue.urlParams=_,ue.headers=m,ue.body=O.uploadData(),ue.errorHandler=Tm(i),ue}class zp{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ia.NO_ERROR,this.sendPromise_=new Promise(i=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ia.ABORT,i()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ia.NETWORK_ERROR,i()}),this.xhr_.addEventListener("load",()=>{i()})})}send(i,u,c,d,f){if(this.sent_)throw Ms("cannot .send() more than once");if(sm(i)&&c&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(u,i,!0),f!==void 0)for(const m in f)f.hasOwnProperty(m)&&this.xhr_.setRequestHeader(m,f[m].toString());return d!==void 0?this.xhr_.send(d):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ms("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ms("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ms("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ms("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(i){return this.xhr_.getResponseHeader(i)}addUploadProgressListener(i){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",i)}removeUploadProgressListener(i){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",i)}}class Lp extends zp{initXhr(){this.xhr_.responseType="text"}}function _m(){return new Lp}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(i,u){this._service=i,u instanceof Zt?this._location=u:this._location=Zt.makeFromUrl(u,i.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(i,u){return new qa(i,u)}get root(){const i=new Zt(this._location.bucket,"");return this._newRef(this._service,i)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Sm(this._location.path)}get storage(){return this._service}get parent(){const i=Sp(this._location.path);if(i===null)return null;const u=new Zt(this._location.bucket,i);return new qa(this._service,u)}_throwIfRoot(i){if(this._location.path==="")throw ep(i)}}function Ip(r,i,u){r._throwIfRoot("uploadBytes");const c=kp(r.storage,r._location,jm(),new ya(i,!0),u);return r.storage.makeRequestWithTokens(c,_m).then(d=>({metadata:d,ref:r}))}function Hp(r){r._throwIfRoot("getDownloadURL");const i=Cp(r.storage,r._location,jm());return r.storage.makeRequestWithTokens(i,_m).then(u=>{if(u===null)throw P1();return u})}function qp(r,i){const u=jp(r._location.path,i),c=new Zt(r._location.bucket,u);return new qa(r.storage,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(r){return/^[A-Za-z]+:\/\//.test(r)}function Vp(r,i){return new qa(r,i)}function Rm(r,i){if(r instanceof Go){const u=r;if(u._bucket==null)throw $1();const c=new qa(u,u._bucket);return i!=null?Rm(c,i):c}else return i!==void 0?qp(r,i):r}function Yp(r,i){if(i&&Gp(i)){if(r instanceof Go)return Vp(r,i);throw Bo("To use ref(service, url), the first argument must be a Storage instance.")}else return Rm(r,i)}function zh(r,i){const u=i==null?void 0:i[gm];return u==null?null:Zt.makeFromBucketSpec(u,r)}function Fp(r,i,u,c={}){r.host=`${i}:${u}`;const d=sm(i);d&&(y1(`https://${r.host}/b`),b1("Storage",!0)),r._isUsingEmulator=!0,r._protocol=d?"https":"http";const{mockUserToken:f}=c;f&&(r._overrideAuthToken=typeof f=="string"?f:N1(f,r.app.options.projectId))}class Go{constructor(i,u,c,d,f,m=!1){this.app=i,this._authProvider=u,this._appCheckProvider=c,this._url=d,this._firebaseVersion=f,this._isUsingEmulator=m,this._bucket=null,this._host=mm,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=I1,this._maxUploadRetryTime=H1,this._requests=new Set,d!=null?this._bucket=Zt.makeFromBucketSpec(d,this._host):this._bucket=zh(this._host,this.app.options)}get host(){return this._host}set host(i){this._host=i,this._url!=null?this._bucket=Zt.makeFromBucketSpec(this._url,i):this._bucket=zh(i,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(i){kh("time",0,Number.POSITIVE_INFINITY,i),this._maxUploadRetryTime=i}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(i){kh("time",0,Number.POSITIVE_INFINITY,i),this._maxOperationRetryTime=i}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const i=this._authProvider.getImmediate({optional:!0});if(i){const u=await i.getToken();if(u!==null)return u.accessToken}return null}async _getAppCheckToken(){if(m1(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const i=this._appCheckProvider.getImmediate({optional:!0});return i?(await i.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(i=>i.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(i){return new qa(this,i)}_makeRequest(i,u,c,d,f=!0){if(this._deleted)return new tp(pm());{const m=fp(i,this._appId,c,d,u,this._firebaseVersion,f,this._isUsingEmulator);return this._requests.add(m),m.getPromise().then(()=>this._requests.delete(m),()=>this._requests.delete(m)),m}}async makeRequestWithTokens(i,u){const[c,d]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(i,u,c,d).getPromise()}}const Lh="@firebase/storage",Ih="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="storage";function Xp(r,i,u){return r=mr(r),Ip(r,i,u)}function Qp(r){return r=mr(r),Hp(r)}function Kp(r,i){return r=mr(r),Yp(r,i)}function Zp(r=p1(),i){r=mr(r);const c=v1(r,Om).getImmediate({identifier:i}),d=x1("storage");return d&&$p(c,...d),c}function $p(r,i,u,c={}){Fp(r,i,u,c)}function Jp(r,{instanceIdentifier:i}){const u=r.getProvider("app").getImmediate(),c=r.getProvider("auth-internal"),d=r.getProvider("app-check-internal");return new Go(u,c,d,i,h1)}function Pp(){d1(new f1(Om,Jp,"PUBLIC").setMultipleInstances(!0)),Sh(Lh,Ih,""),Sh(Lh,Ih,"esm2017")}Pp();const Wp={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyCxl9ki92NaxmXmxB8kc-SCuN_Cmle-MwA",VITE_FIREBASE_APP_ID:"1:51448990869:web:1fd63a1fa84e89bce1af4",VITE_FIREBASE_AUTH_DOMAIN:"fitness-app-69f08.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"51448990869",VITE_FIREBASE_PROJECT_ID:"fitness-app-69f08",VITE_FIREBASE_STORAGE_BUCKET:"fitness-app-69f08.firebasestorage.app"},ev=!1;let cr,oe,Re,Uo;try{let r;if(!ev){const d=["VITE_FIREBASE_API_KEY","VITE_FIREBASE_AUTH_DOMAIN","VITE_FIREBASE_PROJECT_ID","VITE_FIREBASE_STORAGE_BUCKET","VITE_FIREBASE_MESSAGING_SENDER_ID","VITE_FIREBASE_APP_ID"].filter(f=>!Wp[f]);if(d.length>0)throw console.error("缺少環境變量:",d),new Error(`缺少環境變量：${d.join(", ")}`);r={apiKey:"AIzaSyCxl9ki92NaxmXmxB8kc-SCuN_Cmle-MwA",authDomain:"fitness-app-69f08.firebaseapp.com",projectId:"fitness-app-69f08",storageBucket:"fitness-app-69f08.firebasestorage.app",messagingSenderId:"51448990869",appId:"1:51448990869:web:1fd63a1fa84e89bce1af4"}}console.log("開始初始化 Firebase"),cr=S1(r),oe=j1(cr),Re=A1(cr),Uo=Zp(cr);const i=new im,u=new rm;i.setCustomParameters({prompt:"select_account"}),u.addScope("email"),u.addScope("public_profile"),console.log("Firebase 初始化成功")}catch(r){console.error("Firebase 初始化失敗:",r.message,r),oe=null,Re=null,Uo=null}const Ol=r=>r==null||r<0||r>150?"unknown":r<=20?"under20":r<=30?"21to30":r<=40?"31to40":r<=50?"41to50":r<=60?"51to60":r<=70?"61to70":"over70",Hh=r=>{const{strength:i,explosivePower:u,cardio:c,muscleMass:d,bodyFat:f}=r,m=[i,u,c,d,f];if(m.filter(y=>y>0).length<5)return 0;const v=m.reduce((y,S)=>y+Number(S),0);return Math.round(v/5*100)/100},qh=r=>!r&&r!==0?"0.00":Number(r).toFixed(2),tv=r=>{if(!r)return"健身愛好者";const i=r.split("@")[0];return i.charAt(0).toUpperCase()+i.slice(1)};class nv{constructor(){this.writeCounts={setDoc:0,updateDoc:0,addDoc:0,writeBatch:0,arrayUnion:0,arrayRemove:0},this.writeHistory=[],this.isMonitoring=!1}start(){this.isMonitoring||(this.isMonitoring=!0,console.log("🔥 Firebase 寫入監控已啟動"))}stop(){this.isMonitoring=!1,console.log("🛑 Firebase 寫入監控已停止")}logWrite(i,u,c,d=null){if(!this.isMonitoring)return;this.writeCounts[i]++;const f={timestamp:new Date().toISOString(),operation:i,collection:u,documentId:c,data:d?JSON.stringify(d).substring(0,100)+"...":null};this.writeHistory.push(f),this.writeHistory.length>100&&this.writeHistory.shift(),console.log(`📝 Firebase 寫入: ${i} -> ${u}/${c}`)}getStats(){return{totalWrites:Object.values(this.writeCounts).reduce((u,c)=>u+c,0),writeCounts:{...this.writeCounts},recentWrites:this.writeHistory.slice(-10),averageWritesPerMinute:this.calculateAverageWritesPerMinute()}}calculateAverageWritesPerMinute(){if(this.writeHistory.length<2)return 0;const i=new Date(this.writeHistory[0].timestamp),c=(new Date(this.writeHistory[this.writeHistory.length-1].timestamp)-i)/(1e3*60);return c>0?this.writeHistory.length/c:0}reset(){this.writeCounts={setDoc:0,updateDoc:0,addDoc:0,writeBatch:0,arrayUnion:0,arrayRemove:0},this.writeHistory=[],console.log("🔄 Firebase 寫入統計已重置")}detectAnomalies(){const i=this.getStats(),u=[];i.averageWritesPerMinute>10&&u.push({type:"high_frequency",message:`檢測到高頻率寫入: ${i.averageWritesPerMinute.toFixed(2)} 次/分鐘`,severity:"warning"}),i.writeCounts.updateDoc>50&&u.push({type:"frequent_updates",message:`檢測到頻繁的 updateDoc 操作: ${i.writeCounts.updateDoc} 次`,severity:"warning"});const c=this.writeHistory.slice(-20);if(c.length>=20){const d=new Date(c[c.length-1].timestamp)-new Date(c[0].timestamp),f=c.length/(d/1e3);f>2&&u.push({type:"burst_writes",message:`檢測到寫入爆發: ${f.toFixed(2)} 次/秒`,severity:"error"})}return u}generateOptimizationSuggestions(){const i=this.getStats(),u=this.detectAnomalies(),c=[];return u.length>0&&(c.push("🚨 檢測到異常寫入模式，建議檢查以下方面："),u.forEach(d=>{c.push(`- ${d.message}`)})),i.writeCounts.updateDoc>i.writeCounts.setDoc*2&&c.push("💡 建議：考慮使用 setDoc 替代頻繁的 updateDoc 操作"),i.writeCounts.arrayUnion>10&&c.push("💡 建議：考慮批量處理 arrayUnion 操作"),i.averageWritesPerMinute>5&&c.push("💡 建議：增加防抖機制，減少寫入頻率"),c}}const Rt=new nv,Bm=E.createContext(),Ds={gender:"",height:0,weight:0,age:0,nickname:"",avatarUrl:"",ageGroup:"",friends:[],friendRequests:[],blockedUsers:[],ladderScore:0,ladderRank:0,ladderHistory:[],isGuest:!1,isAnonymousInLadder:!1,lastActive:new Date().toISOString(),scores:{strength:0,explosivePower:0,cardio:0,muscleMass:0,bodyFat:0},history:[],testInputs:{}};function Um({children:r}){const i=E.useRef(!0),[u,c]=E.useState(!0),[d,f]=E.useState(!1),m=(q,$)=>{switch($.type){case"UPDATE_USER_DATA":return{...q,...$.payload};case"SET_USER_DATA":return $.payload;case"RESET_USER_DATA":return Ds;default:return q}},[p,v]=E.useReducer(m,Ds),y=E.useCallback(async(q,$=!1)=>{if(!q||!i.current)return c(!1),!1;c(!0);try{const H=tt(Re,"users",q.uid),k=await zs(H);if(k.exists()){const X=k.data(),P={...Ds,...X,scores:{...Ds.scores,...X.scores||{}},height:Number(X.height)||0,weight:Number(X.weight)||0,age:Number(X.age)||0,ageGroup:X.age?Ol(Number(X.age)):X.ageGroup||"",ladderScore:X.ladderScore||0,ladderRank:Number(X.ladderRank)||0};return i.current&&(v({type:"SET_USER_DATA",payload:P}),localStorage.setItem("userData",JSON.stringify(P))),c(!1),!0}else{console.log("用戶文檔不存在，創建新的");const X={...Ds,userId:q.uid};return await Yn(H,X),i.current&&(v({type:"SET_USER_DATA",payload:X}),localStorage.setItem("userData",JSON.stringify(X))),c(!1),!0}}catch(H){console.error("載入用戶數據失敗:",H);try{const k=localStorage.getItem("userData");if(k&&i.current){const X=JSON.parse(k);return v({type:"SET_USER_DATA",payload:X}),c(!1),!0}}catch(k){console.error("解析本地數據失敗:",k)}return c(!1),!1}},[]),S=E.useCallback(async q=>{if(!oe.currentUser||!q)return console.warn("無法保存數據：用戶未登入或數據無效"),!1;try{const $=tt(Re,"users",oe.currentUser.uid),H={...q,userId:oe.currentUser.uid,updatedAt:new Date().toISOString(),height:Number(q.height)||0,weight:Number(q.weight)||0,age:Number(q.age)||0,ageGroup:q.age?Ol(Number(q.age)):q.ageGroup||"",ladderScore:q.ladderScore||0,ladderRank:Number(q.ladderRank)||0};return await Yn($,H,{merge:!0}),localStorage.setItem("userData",JSON.stringify(H)),Rt.logWrite("setDoc","users",oe.currentUser.uid,H),!0}catch($){return console.error("保存用戶數據失敗:",$),localStorage.setItem("userData",JSON.stringify(q)),!1}},[]),j=E.useRef(null),T=E.useRef(null),O=E.useRef(0),_=E.useRef(0),z=E.useRef(Date.now()),te=E.useCallback(q=>{let $;if(typeof q=="function"?$=q(p):$={...p,...q},$.age&&($.ageGroup=Ol($.age)),v({type:"UPDATE_USER_DATA",payload:$}),oe.currentUser&&["scores","height","weight","age","gender","nickname","avatarUrl","ladderRank","history"].some(X=>JSON.stringify($[X])!==JSON.stringify(p[X]))){const X=JSON.stringify($.nickname)!==JSON.stringify(p.nickname)&&JSON.stringify({...$,nickname:p.nickname})===JSON.stringify({...p,nickname:$.nickname}),P=Date.now(),ne=P-O.current;P-z.current>36e5&&(_.current=0,z.current=P);let de=X?2e3:3e4;_.current>10?de=X?5e3:6e4:_.current>5&&(de=X?3e3:45e3),ne<6e4?(j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{console.log("🔄 防抖後保存用戶數據（60秒頻率限制）"),O.current=Date.now(),_.current++,S($),j.current=null},6e4-ne)):(j.current&&clearTimeout(j.current),j.current=setTimeout(()=>{console.log(`🔄 防抖後保存用戶數據（${de/1e3}秒防抖，第${_.current+1}次寫入）`),O.current=Date.now(),_.current++,S($),j.current=null},de))}},[p,S]),ee=E.useCallback(async q=>{if(!oe.currentUser){console.warn("無法保存歷史記錄：用戶未登入");return}const $={...q,userId:oe.currentUser.uid,timestamp:new Date().toISOString(),id:Date.now().toString()},H=p.history||[],k=50;if(H.length>=k){console.warn(`歷史記錄已達上限 (${k})，執行自動清理`);const ne=[...H].sort((se,de)=>{const Te=se.timestamp?new Date(se.timestamp):new Date(se.date);return(de.timestamp?new Date(de.timestamp):new Date(de.date))-Te}).slice(0,k-10);console.log(`自動清理完成：刪除 ${H.length-ne.length} 條舊記錄`),v({type:"UPDATE_USER_DATA",payload:{history:ne}}),typeof window<"u"&&window.alert&&alert("歷史記錄已達上限，已自動清理最舊的記錄以騰出空間。")}const X=[...p.history||[],$];v({type:"UPDATE_USER_DATA",payload:{history:X}}),T.current&&clearTimeout(T.current),T.current=setTimeout(async()=>{try{const P=tt(Re,"users",oe.currentUser.uid),se={...p,history:X,updatedAt:new Date().toISOString()};await Yn(P,se,{merge:!0}),Rt.logWrite("setDoc","users",oe.currentUser.uid,{history:"batch_update"}),console.log(`歷史記錄保存成功 (${X.length}/${k})`)}catch(P){console.error("保存歷史記錄失敗:",P)}finally{T.current=null}},1e4)},[p,S]),ue=E.useCallback(()=>{console.log("清除用戶資料"),localStorage.removeItem("userData"),v({type:"RESET_USER_DATA"}),c(!1)},[]);return E.useEffect(()=>{i.current=!0;const q=oe.onAuthStateChanged(async $=>{$?(console.log("認證狀態變更 - 用戶已登入:",$.email),f(!0),sessionStorage.removeItem("guestMode"),await y($)):(console.log("認證狀態變更 - 用戶未登入"),f(!1),ue())});return()=>{i.current=!1,q()}},[y,ue]),E.useEffect(()=>{if(!oe.currentUser||!p||Object.keys(p).length===0)return;const q=setInterval(()=>{if(oe.currentUser&&p&&p.height){if(Date.now()-O.current<6e5){console.log("⏭️ 定期同步：距離上次寫入時間太短，跳過同步");return}const k=localStorage.getItem("lastSavedUserData"),X=JSON.stringify({scores:p.scores,height:p.height,weight:p.weight,age:p.age,gender:p.gender,nickname:p.nickname,avatarUrl:p.avatarUrl,ladderRank:p.ladderRank});k!==X?(console.log("🔄 定期同步：檢測到數據變化，執行保存"),S(p),localStorage.setItem("lastSavedUserData",X)):console.log("⏭️ 定期同步：無數據變化，跳過保存")}},18e5);return()=>clearInterval(q)},[p,S]),s.jsx(Bm.Provider,{value:{userData:p,setUserData:te,saveUserData:S,saveHistory:ee,clearUserData:ue,loadUserData:(q=!1)=>y(oe.currentUser,q),isLoading:u,isAuthenticated:d},children:r})}Um.propTypes={children:ze.node.isRequired};function sn(){const r=E.useContext(Bm);if(!r)throw new Error("useUser must be used within a UserProvider");return r}function av(){const{pathname:r}=Ga(),i=E.useRef(null);return E.useLayoutEffect(()=>{const u=i.current==="/login"||i.current==="/";r==="/user-info"?u?window.scrollTo(0,0):requestAnimationFrame(()=>{const c=document.getElementById("radar-section");c&&c.scrollIntoView({behavior:"smooth",block:"start"})}):window.scrollTo(0,0),i.current=r},[r]),null}const lv=(r,i,u,c)=>{var f,m,p,v;const d=[u,{code:i,...c||{}}];if((m=(f=r==null?void 0:r.services)==null?void 0:f.logger)!=null&&m.forward)return r.services.logger.forward(d,"warn","react-i18next::",!0);Ha(d[0])&&(d[0]=`react-i18next:: ${d[0]}`),(v=(p=r==null?void 0:r.services)==null?void 0:p.logger)!=null&&v.warn?r.services.logger.warn(...d):console!=null&&console.warn&&console.warn(...d)},Gh={},Co=(r,i,u,c)=>{Ha(u)&&Gh[u]||(Ha(u)&&(Gh[u]=new Date),lv(r,i,u,c))},Cm=(r,i)=>()=>{if(r.isInitialized)i();else{const u=()=>{setTimeout(()=>{r.off("initialized",u)},0),i()};r.on("initialized",u)}},Mo=(r,i,u)=>{r.loadNamespaces(i,Cm(r,u))},Vh=(r,i,u,c)=>{if(Ha(u)&&(u=[u]),r.options.preload&&r.options.preload.indexOf(i)>-1)return Mo(r,u,c);u.forEach(d=>{r.options.ns.indexOf(d)<0&&r.options.ns.push(d)}),r.loadLanguages(i,Cm(r,c))},sv=(r,i,u={})=>!i.languages||!i.languages.length?(Co(i,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:i.languages}),!0):i.hasLoadedNamespace(r,{lng:u.lng,precheck:(c,d)=>{var f;if(((f=u.bindI18n)==null?void 0:f.indexOf("languageChanging"))>-1&&c.services.backendConnector.backend&&c.isLanguageChangingTo&&!d(c.isLanguageChangingTo,r))return!1}}),Ha=r=>typeof r=="string",iv=r=>typeof r=="object"&&r!==null,rv=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,cv={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},ov=r=>cv[r],uv=r=>r.replace(rv,ov);let Do={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:uv};const dv=(r={})=>{Do={...Do,...r}},fv=()=>Do;let Mm;const hv=r=>{Mm=r},mv=()=>Mm,gv={type:"3rdParty",init(r){dv(r.options.react),hv(r)}},pv=E.createContext();class vv{constructor(){this.usedNamespaces={}}addUsedNamespaces(i){i.forEach(u=>{this.usedNamespaces[u]||(this.usedNamespaces[u]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const xv=(r,i)=>{const u=E.useRef();return E.useEffect(()=>{u.current=r},[r,i]),u.current},Dm=(r,i,u,c)=>r.getFixedT(i,u,c),yv=(r,i,u,c)=>E.useCallback(Dm(r,i,u,c),[r,i,u,c]),km=(r,i={})=>{var $,H,k,X;const{i18n:u}=i,{i18n:c,defaultNS:d}=E.useContext(pv)||{},f=u||c||mv();if(f&&!f.reportNamespaces&&(f.reportNamespaces=new vv),!f){Co(f,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const P=(se,de)=>Ha(de)?de:iv(de)&&Ha(de.defaultValue)?de.defaultValue:Array.isArray(se)?se[se.length-1]:se,ne=[P,{},!1];return ne.t=P,ne.i18n={},ne.ready=!1,ne}($=f.options.react)!=null&&$.wait&&Co(f,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const m={...fv(),...f.options.react,...i},{useSuspense:p,keyPrefix:v}=m;let y=d||((H=f.options)==null?void 0:H.defaultNS);y=Ha(y)?[y]:y||["translation"],(X=(k=f.reportNamespaces).addUsedNamespaces)==null||X.call(k,y);const S=(f.isInitialized||f.initializedStoreOnce)&&y.every(P=>sv(P,f,m)),j=yv(f,i.lng||null,m.nsMode==="fallback"?y:y[0],v),T=()=>j,O=()=>Dm(f,i.lng||null,m.nsMode==="fallback"?y:y[0],v),[_,z]=E.useState(T);let te=y.join();i.lng&&(te=`${i.lng}${te}`);const ee=xv(te),ue=E.useRef(!0);E.useEffect(()=>{const{bindI18n:P,bindI18nStore:ne}=m;ue.current=!0,!S&&!p&&(i.lng?Vh(f,i.lng,y,()=>{ue.current&&z(O)}):Mo(f,y,()=>{ue.current&&z(O)})),S&&ee&&ee!==te&&ue.current&&z(O);const se=()=>{ue.current&&z(O)};return P&&(f==null||f.on(P,se)),ne&&(f==null||f.store.on(ne,se)),()=>{ue.current=!1,f&&(P==null||P.split(" ").forEach(de=>f.off(de,se))),ne&&f&&ne.split(" ").forEach(de=>f.store.off(de,se))}},[f,te]),E.useEffect(()=>{ue.current&&S&&z(T)},[f,v,S]);const q=[_,f,S];if(q.t=_,q.i18n=f,q.ready=S,S||!S&&!p)return q;throw new Promise(P=>{i.lng?Vh(f,i.lng,y,()=>P()):Mo(f,y,()=>P())})},bv=()=>{const{i18n:r}=km(),i=c=>{r.changeLanguage(c),localStorage.setItem("language",c)},u=r.language;return s.jsxs("div",{className:"language-switcher",children:[s.jsx("button",{className:`lang-btn ${u==="zh-TW"?"active":""}`,onClick:()=>i("zh-TW"),children:"中文"}),s.jsx("button",{className:`lang-btn ${u==="en-US"?"active":""}`,onClick:()=>i("en-US"),children:"English"})]})},_e=r=>typeof r=="string",ks=()=>{let r,i;const u=new Promise((c,d)=>{r=c,i=d});return u.resolve=r,u.reject=i,u},Yh=r=>r==null?"":""+r,Nv=(r,i,u)=>{r.forEach(c=>{i[c]&&(u[c]=i[c])})},Sv=/###/g,Fh=r=>r&&r.indexOf("###")>-1?r.replace(Sv,"."):r,Xh=r=>!r||_e(r),Is=(r,i,u)=>{const c=_e(i)?i.split("."):i;let d=0;for(;d<c.length-1;){if(Xh(r))return{};const f=Fh(c[d]);!r[f]&&u&&(r[f]=new u),Object.prototype.hasOwnProperty.call(r,f)?r=r[f]:r={},++d}return Xh(r)?{}:{obj:r,k:Fh(c[d])}},Qh=(r,i,u)=>{const{obj:c,k:d}=Is(r,i,Object);if(c!==void 0||i.length===1){c[d]=u;return}let f=i[i.length-1],m=i.slice(0,i.length-1),p=Is(r,m,Object);for(;p.obj===void 0&&m.length;)f=`${m[m.length-1]}.${f}`,m=m.slice(0,m.length-1),p=Is(r,m,Object),p!=null&&p.obj&&typeof p.obj[`${p.k}.${f}`]<"u"&&(p.obj=void 0);p.obj[`${p.k}.${f}`]=u},jv=(r,i,u,c)=>{const{obj:d,k:f}=Is(r,i,Object);d[f]=d[f]||[],d[f].push(u)},dr=(r,i)=>{const{obj:u,k:c}=Is(r,i);if(u&&Object.prototype.hasOwnProperty.call(u,c))return u[c]},Av=(r,i,u)=>{const c=dr(r,u);return c!==void 0?c:dr(i,u)},zm=(r,i,u)=>{for(const c in i)c!=="__proto__"&&c!=="constructor"&&(c in r?_e(r[c])||r[c]instanceof String||_e(i[c])||i[c]instanceof String?u&&(r[c]=i[c]):zm(r[c],i[c],u):r[c]=i[c]);return r},_l=r=>r.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Ev={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const wv=r=>_e(r)?r.replace(/[&<>"'\/]/g,i=>Ev[i]):r;class Tv{constructor(i){this.capacity=i,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(i){const u=this.regExpMap.get(i);if(u!==void 0)return u;const c=new RegExp(i);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(i,c),this.regExpQueue.push(i),c}}const _v=[" ",",","?","!",";"],Rv=new Tv(20),Ov=(r,i,u)=>{i=i||"",u=u||"";const c=_v.filter(m=>i.indexOf(m)<0&&u.indexOf(m)<0);if(c.length===0)return!0;const d=Rv.getRegExp(`(${c.map(m=>m==="?"?"\\?":m).join("|")})`);let f=!d.test(r);if(!f){const m=r.indexOf(u);m>0&&!d.test(r.substring(0,m))&&(f=!0)}return f},ko=(r,i,u=".")=>{if(!r)return;if(r[i])return Object.prototype.hasOwnProperty.call(r,i)?r[i]:void 0;const c=i.split(u);let d=r;for(let f=0;f<c.length;){if(!d||typeof d!="object")return;let m,p="";for(let v=f;v<c.length;++v)if(v!==f&&(p+=u),p+=c[v],m=d[p],m!==void 0){if(["string","number","boolean"].indexOf(typeof m)>-1&&v<c.length-1)continue;f+=v-f+1;break}d=m}return d},qs=r=>r==null?void 0:r.replace("_","-"),Bv={type:"logger",log(r){this.output("log",r)},warn(r){this.output("warn",r)},error(r){this.output("error",r)},output(r,i){var u,c;(c=(u=console==null?void 0:console[r])==null?void 0:u.apply)==null||c.call(u,console,i)}};class fr{constructor(i,u={}){this.init(i,u)}init(i,u={}){this.prefix=u.prefix||"i18next:",this.logger=i||Bv,this.options=u,this.debug=u.debug}log(...i){return this.forward(i,"log","",!0)}warn(...i){return this.forward(i,"warn","",!0)}error(...i){return this.forward(i,"error","")}deprecate(...i){return this.forward(i,"warn","WARNING DEPRECATED: ",!0)}forward(i,u,c,d){return d&&!this.debug?null:(_e(i[0])&&(i[0]=`${c}${this.prefix} ${i[0]}`),this.logger[u](i))}create(i){return new fr(this.logger,{prefix:`${this.prefix}:${i}:`,...this.options})}clone(i){return i=i||this.options,i.prefix=i.prefix||this.prefix,new fr(this.logger,i)}}var En=new fr;class pr{constructor(){this.observers={}}on(i,u){return i.split(" ").forEach(c=>{this.observers[c]||(this.observers[c]=new Map);const d=this.observers[c].get(u)||0;this.observers[c].set(u,d+1)}),this}off(i,u){if(this.observers[i]){if(!u){delete this.observers[i];return}this.observers[i].delete(u)}}emit(i,...u){this.observers[i]&&Array.from(this.observers[i].entries()).forEach(([d,f])=>{for(let m=0;m<f;m++)d(...u)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([d,f])=>{for(let m=0;m<f;m++)d.apply(d,[i,...u])})}}class Kh extends pr{constructor(i,u={ns:["translation"],defaultNS:"translation"}){super(),this.data=i||{},this.options=u,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(i){this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}removeNamespaces(i){const u=this.options.ns.indexOf(i);u>-1&&this.options.ns.splice(u,1)}getResource(i,u,c,d={}){var y,S;const f=d.keySeparator!==void 0?d.keySeparator:this.options.keySeparator,m=d.ignoreJSONStructure!==void 0?d.ignoreJSONStructure:this.options.ignoreJSONStructure;let p;i.indexOf(".")>-1?p=i.split("."):(p=[i,u],c&&(Array.isArray(c)?p.push(...c):_e(c)&&f?p.push(...c.split(f)):p.push(c)));const v=dr(this.data,p);return!v&&!u&&!c&&i.indexOf(".")>-1&&(i=p[0],u=p[1],c=p.slice(2).join(".")),v||!m||!_e(c)?v:ko((S=(y=this.data)==null?void 0:y[i])==null?void 0:S[u],c,f)}addResource(i,u,c,d,f={silent:!1}){const m=f.keySeparator!==void 0?f.keySeparator:this.options.keySeparator;let p=[i,u];c&&(p=p.concat(m?c.split(m):c)),i.indexOf(".")>-1&&(p=i.split("."),d=u,u=p[1]),this.addNamespaces(u),Qh(this.data,p,d),f.silent||this.emit("added",i,u,c,d)}addResources(i,u,c,d={silent:!1}){for(const f in c)(_e(c[f])||Array.isArray(c[f]))&&this.addResource(i,u,f,c[f],{silent:!0});d.silent||this.emit("added",i,u,c)}addResourceBundle(i,u,c,d,f,m={silent:!1,skipCopy:!1}){let p=[i,u];i.indexOf(".")>-1&&(p=i.split("."),d=c,c=u,u=p[1]),this.addNamespaces(u);let v=dr(this.data,p)||{};m.skipCopy||(c=JSON.parse(JSON.stringify(c))),d?zm(v,c,f):v={...v,...c},Qh(this.data,p,v),m.silent||this.emit("added",i,u,c)}removeResourceBundle(i,u){this.hasResourceBundle(i,u)&&delete this.data[i][u],this.removeNamespaces(u),this.emit("removed",i,u)}hasResourceBundle(i,u){return this.getResource(i,u)!==void 0}getResourceBundle(i,u){return u||(u=this.options.defaultNS),this.getResource(i,u)}getDataByLanguage(i){return this.data[i]}hasLanguageSomeTranslations(i){const u=this.getDataByLanguage(i);return!!(u&&Object.keys(u)||[]).find(d=>u[d]&&Object.keys(u[d]).length>0)}toJSON(){return this.data}}var Lm={processors:{},addPostProcessor(r){this.processors[r.name]=r},handle(r,i,u,c,d){return r.forEach(f=>{var m;i=((m=this.processors[f])==null?void 0:m.process(i,u,c,d))??i}),i}};const Zh={},$h=r=>!_e(r)&&typeof r!="boolean"&&typeof r!="number";class hr extends pr{constructor(i,u={}){super(),Nv(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],i,this),this.options=u,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=En.create("translator")}changeLanguage(i){i&&(this.language=i)}exists(i,u={interpolation:{}}){const c={...u};if(i==null)return!1;const d=this.resolve(i,c);return(d==null?void 0:d.res)!==void 0}extractFromKey(i,u){let c=u.nsSeparator!==void 0?u.nsSeparator:this.options.nsSeparator;c===void 0&&(c=":");const d=u.keySeparator!==void 0?u.keySeparator:this.options.keySeparator;let f=u.ns||this.options.defaultNS||[];const m=c&&i.indexOf(c)>-1,p=!this.options.userDefinedKeySeparator&&!u.keySeparator&&!this.options.userDefinedNsSeparator&&!u.nsSeparator&&!Ov(i,c,d);if(m&&!p){const v=i.match(this.interpolator.nestingRegexp);if(v&&v.length>0)return{key:i,namespaces:_e(f)?[f]:f};const y=i.split(c);(c!==d||c===d&&this.options.ns.indexOf(y[0])>-1)&&(f=y.shift()),i=y.join(d)}return{key:i,namespaces:_e(f)?[f]:f}}translate(i,u,c){let d=typeof u=="object"?{...u}:u;if(typeof d!="object"&&this.options.overloadTranslationOptionHandler&&(d=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(d={...d}),d||(d={}),i==null)return"";Array.isArray(i)||(i=[String(i)]);const f=d.returnDetails!==void 0?d.returnDetails:this.options.returnDetails,m=d.keySeparator!==void 0?d.keySeparator:this.options.keySeparator,{key:p,namespaces:v}=this.extractFromKey(i[i.length-1],d),y=v[v.length-1];let S=d.nsSeparator!==void 0?d.nsSeparator:this.options.nsSeparator;S===void 0&&(S=":");const j=d.lng||this.language,T=d.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((j==null?void 0:j.toLowerCase())==="cimode")return T?f?{res:`${y}${S}${p}`,usedKey:p,exactUsedKey:p,usedLng:j,usedNS:y,usedParams:this.getUsedParamsDetails(d)}:`${y}${S}${p}`:f?{res:p,usedKey:p,exactUsedKey:p,usedLng:j,usedNS:y,usedParams:this.getUsedParamsDetails(d)}:p;const O=this.resolve(i,d);let _=O==null?void 0:O.res;const z=(O==null?void 0:O.usedKey)||p,te=(O==null?void 0:O.exactUsedKey)||p,ee=["[object Number]","[object Function]","[object RegExp]"],ue=d.joinArrays!==void 0?d.joinArrays:this.options.joinArrays,q=!this.i18nFormat||this.i18nFormat.handleAsObject,$=d.count!==void 0&&!_e(d.count),H=hr.hasDefaultValue(d),k=$?this.pluralResolver.getSuffix(j,d.count,d):"",X=d.ordinal&&$?this.pluralResolver.getSuffix(j,d.count,{ordinal:!1}):"",P=$&&!d.ordinal&&d.count===0,ne=P&&d[`defaultValue${this.options.pluralSeparator}zero`]||d[`defaultValue${k}`]||d[`defaultValue${X}`]||d.defaultValue;let se=_;q&&!_&&H&&(se=ne);const de=$h(se),Te=Object.prototype.toString.apply(se);if(q&&se&&de&&ee.indexOf(Te)<0&&!(_e(ue)&&Array.isArray(se))){if(!d.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const be=this.options.returnedObjectHandler?this.options.returnedObjectHandler(z,se,{...d,ns:v}):`key '${p} (${this.language})' returned an object instead of string.`;return f?(O.res=be,O.usedParams=this.getUsedParamsDetails(d),O):be}if(m){const be=Array.isArray(se),ce=be?[]:{},Z=be?te:z;for(const x in se)if(Object.prototype.hasOwnProperty.call(se,x)){const b=`${Z}${m}${x}`;H&&!_?ce[x]=this.translate(b,{...d,defaultValue:$h(ne)?ne[x]:void 0,joinArrays:!1,ns:v}):ce[x]=this.translate(b,{...d,joinArrays:!1,ns:v}),ce[x]===b&&(ce[x]=se[x])}_=ce}}else if(q&&_e(ue)&&Array.isArray(_))_=_.join(ue),_&&(_=this.extendTranslation(_,i,d,c));else{let be=!1,ce=!1;!this.isValidLookup(_)&&H&&(be=!0,_=ne),this.isValidLookup(_)||(ce=!0,_=p);const x=(d.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&ce?void 0:_,b=H&&ne!==_&&this.options.updateMissing;if(ce||be||b){if(this.logger.log(b?"updateKey":"missingKey",j,y,p,b?ne:_),m){const Y=this.resolve(p,{...d,keySeparator:!1});Y&&Y.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let D=[];const J=this.languageUtils.getFallbackCodes(this.options.fallbackLng,d.lng||this.language);if(this.options.saveMissingTo==="fallback"&&J&&J[0])for(let Y=0;Y<J.length;Y++)D.push(J[Y]);else this.options.saveMissingTo==="all"?D=this.languageUtils.toResolveHierarchy(d.lng||this.language):D.push(d.lng||this.language);const W=(Y,G,I)=>{var Ne;const he=H&&I!==_?I:x;this.options.missingKeyHandler?this.options.missingKeyHandler(Y,y,G,he,b,d):(Ne=this.backendConnector)!=null&&Ne.saveMissing&&this.backendConnector.saveMissing(Y,y,G,he,b,d),this.emit("missingKey",Y,y,G,_)};this.options.saveMissing&&(this.options.saveMissingPlurals&&$?D.forEach(Y=>{const G=this.pluralResolver.getSuffixes(Y,d);P&&d[`defaultValue${this.options.pluralSeparator}zero`]&&G.indexOf(`${this.options.pluralSeparator}zero`)<0&&G.push(`${this.options.pluralSeparator}zero`),G.forEach(I=>{W([Y],p+I,d[`defaultValue${I}`]||ne)})}):W(D,p,ne))}_=this.extendTranslation(_,i,d,O,c),ce&&_===p&&this.options.appendNamespaceToMissingKey&&(_=`${y}${S}${p}`),(ce||be)&&this.options.parseMissingKeyHandler&&(_=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${y}${S}${p}`:p,be?_:void 0,d))}return f?(O.res=_,O.usedParams=this.getUsedParamsDetails(d),O):_}extendTranslation(i,u,c,d,f){var v,y;if((v=this.i18nFormat)!=null&&v.parse)i=this.i18nFormat.parse(i,{...this.options.interpolation.defaultVariables,...c},c.lng||this.language||d.usedLng,d.usedNS,d.usedKey,{resolved:d});else if(!c.skipInterpolation){c.interpolation&&this.interpolator.init({...c,interpolation:{...this.options.interpolation,...c.interpolation}});const S=_e(i)&&(((y=c==null?void 0:c.interpolation)==null?void 0:y.skipOnVariables)!==void 0?c.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let j;if(S){const O=i.match(this.interpolator.nestingRegexp);j=O&&O.length}let T=c.replace&&!_e(c.replace)?c.replace:c;if(this.options.interpolation.defaultVariables&&(T={...this.options.interpolation.defaultVariables,...T}),i=this.interpolator.interpolate(i,T,c.lng||this.language||d.usedLng,c),S){const O=i.match(this.interpolator.nestingRegexp),_=O&&O.length;j<_&&(c.nest=!1)}!c.lng&&d&&d.res&&(c.lng=this.language||d.usedLng),c.nest!==!1&&(i=this.interpolator.nest(i,(...O)=>(f==null?void 0:f[0])===O[0]&&!c.context?(this.logger.warn(`It seems you are nesting recursively key: ${O[0]} in key: ${u[0]}`),null):this.translate(...O,u),c)),c.interpolation&&this.interpolator.reset()}const m=c.postProcess||this.options.postProcess,p=_e(m)?[m]:m;return i!=null&&(p!=null&&p.length)&&c.applyPostProcessor!==!1&&(i=Lm.handle(p,i,u,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...d,usedParams:this.getUsedParamsDetails(c)},...c}:c,this)),i}resolve(i,u={}){let c,d,f,m,p;return _e(i)&&(i=[i]),i.forEach(v=>{if(this.isValidLookup(c))return;const y=this.extractFromKey(v,u),S=y.key;d=S;let j=y.namespaces;this.options.fallbackNS&&(j=j.concat(this.options.fallbackNS));const T=u.count!==void 0&&!_e(u.count),O=T&&!u.ordinal&&u.count===0,_=u.context!==void 0&&(_e(u.context)||typeof u.context=="number")&&u.context!=="",z=u.lngs?u.lngs:this.languageUtils.toResolveHierarchy(u.lng||this.language,u.fallbackLng);j.forEach(te=>{var ee,ue;this.isValidLookup(c)||(p=te,!Zh[`${z[0]}-${te}`]&&((ee=this.utils)!=null&&ee.hasLoadedNamespace)&&!((ue=this.utils)!=null&&ue.hasLoadedNamespace(p))&&(Zh[`${z[0]}-${te}`]=!0,this.logger.warn(`key "${d}" for languages "${z.join(", ")}" won't get resolved as namespace "${p}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),z.forEach(q=>{var k;if(this.isValidLookup(c))return;m=q;const $=[S];if((k=this.i18nFormat)!=null&&k.addLookupKeys)this.i18nFormat.addLookupKeys($,S,q,te,u);else{let X;T&&(X=this.pluralResolver.getSuffix(q,u.count,u));const P=`${this.options.pluralSeparator}zero`,ne=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(T&&($.push(S+X),u.ordinal&&X.indexOf(ne)===0&&$.push(S+X.replace(ne,this.options.pluralSeparator)),O&&$.push(S+P)),_){const se=`${S}${this.options.contextSeparator}${u.context}`;$.push(se),T&&($.push(se+X),u.ordinal&&X.indexOf(ne)===0&&$.push(se+X.replace(ne,this.options.pluralSeparator)),O&&$.push(se+P))}}let H;for(;H=$.pop();)this.isValidLookup(c)||(f=H,c=this.getResource(q,te,H,u))}))})}),{res:c,usedKey:d,exactUsedKey:f,usedLng:m,usedNS:p}}isValidLookup(i){return i!==void 0&&!(!this.options.returnNull&&i===null)&&!(!this.options.returnEmptyString&&i==="")}getResource(i,u,c,d={}){var f;return(f=this.i18nFormat)!=null&&f.getResource?this.i18nFormat.getResource(i,u,c,d):this.resourceStore.getResource(i,u,c,d)}getUsedParamsDetails(i={}){const u=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],c=i.replace&&!_e(i.replace);let d=c?i.replace:i;if(c&&typeof i.count<"u"&&(d.count=i.count),this.options.interpolation.defaultVariables&&(d={...this.options.interpolation.defaultVariables,...d}),!c){d={...d};for(const f of u)delete d[f]}return d}static hasDefaultValue(i){const u="defaultValue";for(const c in i)if(Object.prototype.hasOwnProperty.call(i,c)&&u===c.substring(0,u.length)&&i[c]!==void 0)return!0;return!1}}class Jh{constructor(i){this.options=i,this.supportedLngs=this.options.supportedLngs||!1,this.logger=En.create("languageUtils")}getScriptPartFromCode(i){if(i=qs(i),!i||i.indexOf("-")<0)return null;const u=i.split("-");return u.length===2||(u.pop(),u[u.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(u.join("-"))}getLanguagePartFromCode(i){if(i=qs(i),!i||i.indexOf("-")<0)return i;const u=i.split("-");return this.formatLanguageCode(u[0])}formatLanguageCode(i){if(_e(i)&&i.indexOf("-")>-1){let u;try{u=Intl.getCanonicalLocales(i)[0]}catch{}return u&&this.options.lowerCaseLng&&(u=u.toLowerCase()),u||(this.options.lowerCaseLng?i.toLowerCase():i)}return this.options.cleanCode||this.options.lowerCaseLng?i.toLowerCase():i}isSupportedCode(i){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(i=this.getLanguagePartFromCode(i)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(i)>-1}getBestMatchFromCodes(i){if(!i)return null;let u;return i.forEach(c=>{if(u)return;const d=this.formatLanguageCode(c);(!this.options.supportedLngs||this.isSupportedCode(d))&&(u=d)}),!u&&this.options.supportedLngs&&i.forEach(c=>{if(u)return;const d=this.getScriptPartFromCode(c);if(this.isSupportedCode(d))return u=d;const f=this.getLanguagePartFromCode(c);if(this.isSupportedCode(f))return u=f;u=this.options.supportedLngs.find(m=>{if(m===f)return m;if(!(m.indexOf("-")<0&&f.indexOf("-")<0)&&(m.indexOf("-")>0&&f.indexOf("-")<0&&m.substring(0,m.indexOf("-"))===f||m.indexOf(f)===0&&f.length>1))return m})}),u||(u=this.getFallbackCodes(this.options.fallbackLng)[0]),u}getFallbackCodes(i,u){if(!i)return[];if(typeof i=="function"&&(i=i(u)),_e(i)&&(i=[i]),Array.isArray(i))return i;if(!u)return i.default||[];let c=i[u];return c||(c=i[this.getScriptPartFromCode(u)]),c||(c=i[this.formatLanguageCode(u)]),c||(c=i[this.getLanguagePartFromCode(u)]),c||(c=i.default),c||[]}toResolveHierarchy(i,u){const c=this.getFallbackCodes((u===!1?[]:u)||this.options.fallbackLng||[],i),d=[],f=m=>{m&&(this.isSupportedCode(m)?d.push(m):this.logger.warn(`rejecting language code not found in supportedLngs: ${m}`))};return _e(i)&&(i.indexOf("-")>-1||i.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&f(this.formatLanguageCode(i)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&f(this.getScriptPartFromCode(i)),this.options.load!=="currentOnly"&&f(this.getLanguagePartFromCode(i))):_e(i)&&f(this.formatLanguageCode(i)),c.forEach(m=>{d.indexOf(m)<0&&f(this.formatLanguageCode(m))}),d}}const Ph={zero:0,one:1,two:2,few:3,many:4,other:5},Wh={select:r=>r===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Uv{constructor(i,u={}){this.languageUtils=i,this.options=u,this.logger=En.create("pluralResolver"),this.pluralRulesCache={}}addRule(i,u){this.rules[i]=u}clearCache(){this.pluralRulesCache={}}getRule(i,u={}){const c=qs(i==="dev"?"en":i),d=u.ordinal?"ordinal":"cardinal",f=JSON.stringify({cleanedCode:c,type:d});if(f in this.pluralRulesCache)return this.pluralRulesCache[f];let m;try{m=new Intl.PluralRules(c,{type:d})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Wh;if(!i.match(/-|_/))return Wh;const v=this.languageUtils.getLanguagePartFromCode(i);m=this.getRule(v,u)}return this.pluralRulesCache[f]=m,m}needsPlural(i,u={}){let c=this.getRule(i,u);return c||(c=this.getRule("dev",u)),(c==null?void 0:c.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(i,u,c={}){return this.getSuffixes(i,c).map(d=>`${u}${d}`)}getSuffixes(i,u={}){let c=this.getRule(i,u);return c||(c=this.getRule("dev",u)),c?c.resolvedOptions().pluralCategories.sort((d,f)=>Ph[d]-Ph[f]).map(d=>`${this.options.prepend}${u.ordinal?`ordinal${this.options.prepend}`:""}${d}`):[]}getSuffix(i,u,c={}){const d=this.getRule(i,c);return d?`${this.options.prepend}${c.ordinal?`ordinal${this.options.prepend}`:""}${d.select(u)}`:(this.logger.warn(`no plural rule found for: ${i}`),this.getSuffix("dev",u,c))}}const em=(r,i,u,c=".",d=!0)=>{let f=Av(r,i,u);return!f&&d&&_e(u)&&(f=ko(r,u,c),f===void 0&&(f=ko(i,u,c))),f},Ro=r=>r.replace(/\$/g,"$$$$");class Cv{constructor(i={}){var u;this.logger=En.create("interpolator"),this.options=i,this.format=((u=i==null?void 0:i.interpolation)==null?void 0:u.format)||(c=>c),this.init(i)}init(i={}){i.interpolation||(i.interpolation={escapeValue:!0});const{escape:u,escapeValue:c,useRawValueToEscape:d,prefix:f,prefixEscaped:m,suffix:p,suffixEscaped:v,formatSeparator:y,unescapeSuffix:S,unescapePrefix:j,nestingPrefix:T,nestingPrefixEscaped:O,nestingSuffix:_,nestingSuffixEscaped:z,nestingOptionsSeparator:te,maxReplaces:ee,alwaysFormat:ue}=i.interpolation;this.escape=u!==void 0?u:wv,this.escapeValue=c!==void 0?c:!0,this.useRawValueToEscape=d!==void 0?d:!1,this.prefix=f?_l(f):m||"{{",this.suffix=p?_l(p):v||"}}",this.formatSeparator=y||",",this.unescapePrefix=S?"":j||"-",this.unescapeSuffix=this.unescapePrefix?"":S||"",this.nestingPrefix=T?_l(T):O||_l("$t("),this.nestingSuffix=_?_l(_):z||_l(")"),this.nestingOptionsSeparator=te||",",this.maxReplaces=ee||1e3,this.alwaysFormat=ue!==void 0?ue:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const i=(u,c)=>(u==null?void 0:u.source)===c?(u.lastIndex=0,u):new RegExp(c,"g");this.regexp=i(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=i(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=i(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(i,u,c,d){var O;let f,m,p;const v=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},y=_=>{if(_.indexOf(this.formatSeparator)<0){const ue=em(u,v,_,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(ue,void 0,c,{...d,...u,interpolationkey:_}):ue}const z=_.split(this.formatSeparator),te=z.shift().trim(),ee=z.join(this.formatSeparator).trim();return this.format(em(u,v,te,this.options.keySeparator,this.options.ignoreJSONStructure),ee,c,{...d,...u,interpolationkey:te})};this.resetRegExp();const S=(d==null?void 0:d.missingInterpolationHandler)||this.options.missingInterpolationHandler,j=((O=d==null?void 0:d.interpolation)==null?void 0:O.skipOnVariables)!==void 0?d.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:_=>Ro(_)},{regex:this.regexp,safeValue:_=>this.escapeValue?Ro(this.escape(_)):Ro(_)}].forEach(_=>{for(p=0;f=_.regex.exec(i);){const z=f[1].trim();if(m=y(z),m===void 0)if(typeof S=="function"){const ee=S(i,f,d);m=_e(ee)?ee:""}else if(d&&Object.prototype.hasOwnProperty.call(d,z))m="";else if(j){m=f[0];continue}else this.logger.warn(`missed to pass in variable ${z} for interpolating ${i}`),m="";else!_e(m)&&!this.useRawValueToEscape&&(m=Yh(m));const te=_.safeValue(m);if(i=i.replace(f[0],te),j?(_.regex.lastIndex+=m.length,_.regex.lastIndex-=f[0].length):_.regex.lastIndex=0,p++,p>=this.maxReplaces)break}}),i}nest(i,u,c={}){let d,f,m;const p=(v,y)=>{const S=this.nestingOptionsSeparator;if(v.indexOf(S)<0)return v;const j=v.split(new RegExp(`${S}[ ]*{`));let T=`{${j[1]}`;v=j[0],T=this.interpolate(T,m);const O=T.match(/'/g),_=T.match(/"/g);(((O==null?void 0:O.length)??0)%2===0&&!_||_.length%2!==0)&&(T=T.replace(/'/g,'"'));try{m=JSON.parse(T),y&&(m={...y,...m})}catch(z){return this.logger.warn(`failed parsing options string in nesting for key ${v}`,z),`${v}${S}${T}`}return m.defaultValue&&m.defaultValue.indexOf(this.prefix)>-1&&delete m.defaultValue,v};for(;d=this.nestingRegexp.exec(i);){let v=[];m={...c},m=m.replace&&!_e(m.replace)?m.replace:m,m.applyPostProcessor=!1,delete m.defaultValue;const y=/{.*}/.test(d[1])?d[1].lastIndexOf("}")+1:d[1].indexOf(this.formatSeparator);if(y!==-1&&(v=d[1].slice(y).split(this.formatSeparator).map(S=>S.trim()).filter(Boolean),d[1]=d[1].slice(0,y)),f=u(p.call(this,d[1].trim(),m),m),f&&d[0]===i&&!_e(f))return f;_e(f)||(f=Yh(f)),f||(this.logger.warn(`missed to resolve ${d[1]} for nesting ${i}`),f=""),v.length&&(f=v.reduce((S,j)=>this.format(S,j,c.lng,{...c,interpolationkey:d[1].trim()}),f.trim())),i=i.replace(d[0],f),this.regexp.lastIndex=0}return i}}const Mv=r=>{let i=r.toLowerCase().trim();const u={};if(r.indexOf("(")>-1){const c=r.split("(");i=c[0].toLowerCase().trim();const d=c[1].substring(0,c[1].length-1);i==="currency"&&d.indexOf(":")<0?u.currency||(u.currency=d.trim()):i==="relativetime"&&d.indexOf(":")<0?u.range||(u.range=d.trim()):d.split(";").forEach(m=>{if(m){const[p,...v]=m.split(":"),y=v.join(":").trim().replace(/^'+|'+$/g,""),S=p.trim();u[S]||(u[S]=y),y==="false"&&(u[S]=!1),y==="true"&&(u[S]=!0),isNaN(y)||(u[S]=parseInt(y,10))}})}return{formatName:i,formatOptions:u}},tm=r=>{const i={};return(u,c,d)=>{let f=d;d&&d.interpolationkey&&d.formatParams&&d.formatParams[d.interpolationkey]&&d[d.interpolationkey]&&(f={...f,[d.interpolationkey]:void 0});const m=c+JSON.stringify(f);let p=i[m];return p||(p=r(qs(c),d),i[m]=p),p(u)}},Dv=r=>(i,u,c)=>r(qs(u),c)(i);class kv{constructor(i={}){this.logger=En.create("formatter"),this.options=i,this.init(i)}init(i,u={interpolation:{}}){this.formatSeparator=u.interpolation.formatSeparator||",";const c=u.cacheInBuiltFormats?tm:Dv;this.formats={number:c((d,f)=>{const m=new Intl.NumberFormat(d,{...f});return p=>m.format(p)}),currency:c((d,f)=>{const m=new Intl.NumberFormat(d,{...f,style:"currency"});return p=>m.format(p)}),datetime:c((d,f)=>{const m=new Intl.DateTimeFormat(d,{...f});return p=>m.format(p)}),relativetime:c((d,f)=>{const m=new Intl.RelativeTimeFormat(d,{...f});return p=>m.format(p,f.range||"day")}),list:c((d,f)=>{const m=new Intl.ListFormat(d,{...f});return p=>m.format(p)})}}add(i,u){this.formats[i.toLowerCase().trim()]=u}addCached(i,u){this.formats[i.toLowerCase().trim()]=tm(u)}format(i,u,c,d={}){const f=u.split(this.formatSeparator);if(f.length>1&&f[0].indexOf("(")>1&&f[0].indexOf(")")<0&&f.find(p=>p.indexOf(")")>-1)){const p=f.findIndex(v=>v.indexOf(")")>-1);f[0]=[f[0],...f.splice(1,p)].join(this.formatSeparator)}return f.reduce((p,v)=>{var j;const{formatName:y,formatOptions:S}=Mv(v);if(this.formats[y]){let T=p;try{const O=((j=d==null?void 0:d.formatParams)==null?void 0:j[d.interpolationkey])||{},_=O.locale||O.lng||d.locale||d.lng||c;T=this.formats[y](p,_,{...S,...d,...O})}catch(O){this.logger.warn(O)}return T}else this.logger.warn(`there was no format function for ${y}`);return p},i)}}const zv=(r,i)=>{r.pending[i]!==void 0&&(delete r.pending[i],r.pendingCount--)};class Lv extends pr{constructor(i,u,c,d={}){var f,m;super(),this.backend=i,this.store=u,this.services=c,this.languageUtils=c.languageUtils,this.options=d,this.logger=En.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=d.maxParallelReads||10,this.readingCalls=0,this.maxRetries=d.maxRetries>=0?d.maxRetries:5,this.retryTimeout=d.retryTimeout>=1?d.retryTimeout:350,this.state={},this.queue=[],(m=(f=this.backend)==null?void 0:f.init)==null||m.call(f,c,d.backend,d)}queueLoad(i,u,c,d){const f={},m={},p={},v={};return i.forEach(y=>{let S=!0;u.forEach(j=>{const T=`${y}|${j}`;!c.reload&&this.store.hasResourceBundle(y,j)?this.state[T]=2:this.state[T]<0||(this.state[T]===1?m[T]===void 0&&(m[T]=!0):(this.state[T]=1,S=!1,m[T]===void 0&&(m[T]=!0),f[T]===void 0&&(f[T]=!0),v[j]===void 0&&(v[j]=!0)))}),S||(p[y]=!0)}),(Object.keys(f).length||Object.keys(m).length)&&this.queue.push({pending:m,pendingCount:Object.keys(m).length,loaded:{},errors:[],callback:d}),{toLoad:Object.keys(f),pending:Object.keys(m),toLoadLanguages:Object.keys(p),toLoadNamespaces:Object.keys(v)}}loaded(i,u,c){const d=i.split("|"),f=d[0],m=d[1];u&&this.emit("failedLoading",f,m,u),!u&&c&&this.store.addResourceBundle(f,m,c,void 0,void 0,{skipCopy:!0}),this.state[i]=u?-1:2,u&&c&&(this.state[i]=0);const p={};this.queue.forEach(v=>{jv(v.loaded,[f],m),zv(v,i),u&&v.errors.push(u),v.pendingCount===0&&!v.done&&(Object.keys(v.loaded).forEach(y=>{p[y]||(p[y]={});const S=v.loaded[y];S.length&&S.forEach(j=>{p[y][j]===void 0&&(p[y][j]=!0)})}),v.done=!0,v.errors.length?v.callback(v.errors):v.callback())}),this.emit("loaded",p),this.queue=this.queue.filter(v=>!v.done)}read(i,u,c,d=0,f=this.retryTimeout,m){if(!i.length)return m(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:i,ns:u,fcName:c,tried:d,wait:f,callback:m});return}this.readingCalls++;const p=(y,S)=>{if(this.readingCalls--,this.waitingReads.length>0){const j=this.waitingReads.shift();this.read(j.lng,j.ns,j.fcName,j.tried,j.wait,j.callback)}if(y&&S&&d<this.maxRetries){setTimeout(()=>{this.read.call(this,i,u,c,d+1,f*2,m)},f);return}m(y,S)},v=this.backend[c].bind(this.backend);if(v.length===2){try{const y=v(i,u);y&&typeof y.then=="function"?y.then(S=>p(null,S)).catch(p):p(null,y)}catch(y){p(y)}return}return v(i,u,p)}prepareLoading(i,u,c={},d){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),d&&d();_e(i)&&(i=this.languageUtils.toResolveHierarchy(i)),_e(u)&&(u=[u]);const f=this.queueLoad(i,u,c,d);if(!f.toLoad.length)return f.pending.length||d(),null;f.toLoad.forEach(m=>{this.loadOne(m)})}load(i,u,c){this.prepareLoading(i,u,{},c)}reload(i,u,c){this.prepareLoading(i,u,{reload:!0},c)}loadOne(i,u=""){const c=i.split("|"),d=c[0],f=c[1];this.read(d,f,"read",void 0,void 0,(m,p)=>{m&&this.logger.warn(`${u}loading namespace ${f} for language ${d} failed`,m),!m&&p&&this.logger.log(`${u}loaded namespace ${f} for language ${d}`,p),this.loaded(i,m,p)})}saveMissing(i,u,c,d,f,m={},p=()=>{}){var v,y,S,j,T;if((y=(v=this.services)==null?void 0:v.utils)!=null&&y.hasLoadedNamespace&&!((j=(S=this.services)==null?void 0:S.utils)!=null&&j.hasLoadedNamespace(u))){this.logger.warn(`did not save key "${c}" as the namespace "${u}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(c==null||c==="")){if((T=this.backend)!=null&&T.create){const O={...m,isUpdate:f},_=this.backend.create.bind(this.backend);if(_.length<6)try{let z;_.length===5?z=_(i,u,c,d,O):z=_(i,u,c,d),z&&typeof z.then=="function"?z.then(te=>p(null,te)).catch(p):p(null,z)}catch(z){p(z)}else _(i,u,c,d,p,O)}!i||!i[0]||this.store.addResource(i[0],u,c,d)}}}const nm=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:r=>{let i={};if(typeof r[1]=="object"&&(i=r[1]),_e(r[1])&&(i.defaultValue=r[1]),_e(r[2])&&(i.tDescription=r[2]),typeof r[2]=="object"||typeof r[3]=="object"){const u=r[3]||r[2];Object.keys(u).forEach(c=>{i[c]=u[c]})}return i},interpolation:{escapeValue:!0,format:r=>r,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),am=r=>{var i,u;return _e(r.ns)&&(r.ns=[r.ns]),_e(r.fallbackLng)&&(r.fallbackLng=[r.fallbackLng]),_e(r.fallbackNS)&&(r.fallbackNS=[r.fallbackNS]),((u=(i=r.supportedLngs)==null?void 0:i.indexOf)==null?void 0:u.call(i,"cimode"))<0&&(r.supportedLngs=r.supportedLngs.concat(["cimode"])),typeof r.initImmediate=="boolean"&&(r.initAsync=r.initImmediate),r},or=()=>{},Iv=r=>{Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(u=>{typeof r[u]=="function"&&(r[u]=r[u].bind(r))})};class Gs extends pr{constructor(i={},u){if(super(),this.options=am(i),this.services={},this.logger=En,this.modules={external:[]},Iv(this),u&&!this.isInitialized&&!i.isClone){if(!this.options.initAsync)return this.init(i,u),this;setTimeout(()=>{this.init(i,u)},0)}}init(i={},u){this.isInitializing=!0,typeof i=="function"&&(u=i,i={}),i.defaultNS==null&&i.ns&&(_e(i.ns)?i.defaultNS=i.ns:i.ns.indexOf("translation")<0&&(i.defaultNS=i.ns[0]));const c=nm();this.options={...c,...this.options,...am(i)},this.options.interpolation={...c.interpolation,...this.options.interpolation},i.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=i.keySeparator),i.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=i.nsSeparator);const d=y=>y?typeof y=="function"?new y:y:null;if(!this.options.isClone){this.modules.logger?En.init(d(this.modules.logger),this.options):En.init(null,this.options);let y;this.modules.formatter?y=this.modules.formatter:y=kv;const S=new Jh(this.options);this.store=new Kh(this.options.resources,this.options);const j=this.services;j.logger=En,j.resourceStore=this.store,j.languageUtils=S,j.pluralResolver=new Uv(S,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==c.interpolation.format&&this.logger.warn("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),y&&(!this.options.interpolation.format||this.options.interpolation.format===c.interpolation.format)&&(j.formatter=d(y),j.formatter.init&&j.formatter.init(j,this.options),this.options.interpolation.format=j.formatter.format.bind(j.formatter)),j.interpolator=new Cv(this.options),j.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},j.backendConnector=new Lv(d(this.modules.backend),j.resourceStore,j,this.options),j.backendConnector.on("*",(O,..._)=>{this.emit(O,..._)}),this.modules.languageDetector&&(j.languageDetector=d(this.modules.languageDetector),j.languageDetector.init&&j.languageDetector.init(j,this.options.detection,this.options)),this.modules.i18nFormat&&(j.i18nFormat=d(this.modules.i18nFormat),j.i18nFormat.init&&j.i18nFormat.init(this)),this.translator=new hr(this.services,this.options),this.translator.on("*",(O,..._)=>{this.emit(O,..._)}),this.modules.external.forEach(O=>{O.init&&O.init(this)})}if(this.format=this.options.interpolation.format,u||(u=or),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const y=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);y.length>0&&y[0]!=="dev"&&(this.options.lng=y[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(y=>{this[y]=(...S)=>this.store[y](...S)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(y=>{this[y]=(...S)=>(this.store[y](...S),this)});const p=ks(),v=()=>{const y=(S,j)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),p.resolve(j),u(S,j)};if(this.languages&&!this.isInitialized)return y(null,this.t.bind(this));this.changeLanguage(this.options.lng,y)};return this.options.resources||!this.options.initAsync?v():setTimeout(v,0),p}loadResources(i,u=or){var f,m;let c=u;const d=_e(i)?i:this.language;if(typeof i=="function"&&(c=i),!this.options.resources||this.options.partialBundledLanguages){if((d==null?void 0:d.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return c();const p=[],v=y=>{if(!y||y==="cimode")return;this.services.languageUtils.toResolveHierarchy(y).forEach(j=>{j!=="cimode"&&p.indexOf(j)<0&&p.push(j)})};d?v(d):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(S=>v(S)),(m=(f=this.options.preload)==null?void 0:f.forEach)==null||m.call(f,y=>v(y)),this.services.backendConnector.load(p,this.options.ns,y=>{!y&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),c(y)})}else c(null)}reloadResources(i,u,c){const d=ks();return typeof i=="function"&&(c=i,i=void 0),typeof u=="function"&&(c=u,u=void 0),i||(i=this.languages),u||(u=this.options.ns),c||(c=or),this.services.backendConnector.reload(i,u,f=>{d.resolve(),c(f)}),d}use(i){if(!i)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!i.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return i.type==="backend"&&(this.modules.backend=i),(i.type==="logger"||i.log&&i.warn&&i.error)&&(this.modules.logger=i),i.type==="languageDetector"&&(this.modules.languageDetector=i),i.type==="i18nFormat"&&(this.modules.i18nFormat=i),i.type==="postProcessor"&&Lm.addPostProcessor(i),i.type==="formatter"&&(this.modules.formatter=i),i.type==="3rdParty"&&this.modules.external.push(i),this}setResolvedLanguage(i){if(!(!i||!this.languages)&&!(["cimode","dev"].indexOf(i)>-1)){for(let u=0;u<this.languages.length;u++){const c=this.languages[u];if(!(["cimode","dev"].indexOf(c)>-1)&&this.store.hasLanguageSomeTranslations(c)){this.resolvedLanguage=c;break}}!this.resolvedLanguage&&this.languages.indexOf(i)<0&&this.store.hasLanguageSomeTranslations(i)&&(this.resolvedLanguage=i,this.languages.unshift(i))}}changeLanguage(i,u){this.isLanguageChangingTo=i;const c=ks();this.emit("languageChanging",i);const d=p=>{this.language=p,this.languages=this.services.languageUtils.toResolveHierarchy(p),this.resolvedLanguage=void 0,this.setResolvedLanguage(p)},f=(p,v)=>{v?this.isLanguageChangingTo===i&&(d(v),this.translator.changeLanguage(v),this.isLanguageChangingTo=void 0,this.emit("languageChanged",v),this.logger.log("languageChanged",v)):this.isLanguageChangingTo=void 0,c.resolve((...y)=>this.t(...y)),u&&u(p,(...y)=>this.t(...y))},m=p=>{var S,j;!i&&!p&&this.services.languageDetector&&(p=[]);const v=_e(p)?p:p&&p[0],y=this.store.hasLanguageSomeTranslations(v)?v:this.services.languageUtils.getBestMatchFromCodes(_e(p)?[p]:p);y&&(this.language||d(y),this.translator.language||this.translator.changeLanguage(y),(j=(S=this.services.languageDetector)==null?void 0:S.cacheUserLanguage)==null||j.call(S,y)),this.loadResources(y,T=>{f(T,y)})};return!i&&this.services.languageDetector&&!this.services.languageDetector.async?m(this.services.languageDetector.detect()):!i&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(m):this.services.languageDetector.detect(m):m(i),c}getFixedT(i,u,c){const d=(f,m,...p)=>{let v;typeof m!="object"?v=this.options.overloadTranslationOptionHandler([f,m].concat(p)):v={...m},v.lng=v.lng||d.lng,v.lngs=v.lngs||d.lngs,v.ns=v.ns||d.ns,v.keyPrefix!==""&&(v.keyPrefix=v.keyPrefix||c||d.keyPrefix);const y=this.options.keySeparator||".";let S;return v.keyPrefix&&Array.isArray(f)?S=f.map(j=>`${v.keyPrefix}${y}${j}`):S=v.keyPrefix?`${v.keyPrefix}${y}${f}`:f,this.t(S,v)};return _e(i)?d.lng=i:d.lngs=i,d.ns=u,d.keyPrefix=c,d}t(...i){var u;return(u=this.translator)==null?void 0:u.translate(...i)}exists(...i){var u;return(u=this.translator)==null?void 0:u.exists(...i)}setDefaultNamespace(i){this.options.defaultNS=i}hasLoadedNamespace(i,u={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const c=u.lng||this.resolvedLanguage||this.languages[0],d=this.options?this.options.fallbackLng:!1,f=this.languages[this.languages.length-1];if(c.toLowerCase()==="cimode")return!0;const m=(p,v)=>{const y=this.services.backendConnector.state[`${p}|${v}`];return y===-1||y===0||y===2};if(u.precheck){const p=u.precheck(this,m);if(p!==void 0)return p}return!!(this.hasResourceBundle(c,i)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||m(c,i)&&(!d||m(f,i)))}loadNamespaces(i,u){const c=ks();return this.options.ns?(_e(i)&&(i=[i]),i.forEach(d=>{this.options.ns.indexOf(d)<0&&this.options.ns.push(d)}),this.loadResources(d=>{c.resolve(),u&&u(d)}),c):(u&&u(),Promise.resolve())}loadLanguages(i,u){const c=ks();_e(i)&&(i=[i]);const d=this.options.preload||[],f=i.filter(m=>d.indexOf(m)<0&&this.services.languageUtils.isSupportedCode(m));return f.length?(this.options.preload=d.concat(f),this.loadResources(m=>{c.resolve(),u&&u(m)}),c):(u&&u(),Promise.resolve())}dir(i){var d,f;if(i||(i=this.resolvedLanguage||(((d=this.languages)==null?void 0:d.length)>0?this.languages[0]:this.language)),!i)return"rtl";try{const m=new Intl.Locale(i);if(m&&m.getTextInfo){const p=m.getTextInfo();if(p&&p.direction)return p.direction}}catch{}const u=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],c=((f=this.services)==null?void 0:f.languageUtils)||new Jh(nm());return i.toLowerCase().indexOf("-latn")>1?"ltr":u.indexOf(c.getLanguagePartFromCode(i))>-1||i.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(i={},u){return new Gs(i,u)}cloneInstance(i={},u=or){const c=i.forkResourceStore;c&&delete i.forkResourceStore;const d={...this.options,...i,isClone:!0},f=new Gs(d);if((i.debug!==void 0||i.prefix!==void 0)&&(f.logger=f.logger.clone(i)),["store","services","language"].forEach(p=>{f[p]=this[p]}),f.services={...this.services},f.services.utils={hasLoadedNamespace:f.hasLoadedNamespace.bind(f)},c){const p=Object.keys(this.store.data).reduce((v,y)=>(v[y]={...this.store.data[y]},v[y]=Object.keys(v[y]).reduce((S,j)=>(S[j]={...v[y][j]},S),v[y]),v),{});f.store=new Kh(p,d),f.services.resourceStore=f.store}return f.translator=new hr(f.services,d),f.translator.on("*",(p,...v)=>{f.emit(p,...v)}),f.init(d,u),f.translator.options=d,f.translator.backendConnector.services.utils={hasLoadedNamespace:f.hasLoadedNamespace.bind(f)},f}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const wt=Gs.createInstance();wt.createInstance=Gs.createInstance;wt.createInstance;wt.dir;wt.init;wt.loadResources;wt.reloadResources;wt.use;wt.changeLanguage;wt.getFixedT;wt.t;wt.exists;wt.setDefaultNamespace;wt.hasLoadedNamespace;wt.loadNamespaces;wt.loadLanguages;const Hv={translation:{common:{loading:"載入中...",save:"儲存",cancel:"取消",confirm:"確認",back:"返回",next:"下一步",submit:"提交",edit:"編輯",delete:"刪除",search:"搜尋",filter:"篩選",all:"全部"},navigation:{home:"首頁",profile:"個人資料",history:"歷史紀錄",ladder:"天梯排行榜",friends:"好友",settings:"設定",logout:"登出"},welcome:{title:"歡迎來到評測小能手",subtitle:"留下運動數據,進步多少馬上知道",login:"登入",guestMode:"立即體驗（訪客模式）",register:"註冊帳號",guestInfo:{title:"訪客模式功能：",features:["完整體驗所有評測功能","本地儲存評測結果","隨時可註冊同步資料","無法使用好友、天梯等社交功能"]}},userInfo:{title:"身體狀態與表現總覽",nickname:"暱稱",nicknamePlaceholder:"請輸入暱稱",generateNickname:"生成暱稱",gender:"性別",selectGender:"請選擇性別",male:"男性",female:"女性",height:"身高 (cm)",weight:"體重 (kg)",age:"年齡",saveData:"儲存資料",saving:"儲存中...",dataSaved:"資料已儲存成功！",saveFailed:"儲存失敗，請稍後再試"},tests:{strength:"力量評測",explosivePower:"爆發力測試",cardio:"心肺耐力測試",muscleMass:"骨骼肌肉量",bodyFat:"體脂肪率與FFMI",startTest:"開始評測",completeTest:"完成評測",testComplete:"評測完成",score:"分數",averageScore:"平均分數"},ladder:{title:"天梯排行榜",myScore:"我的天梯分數",myRank:"我的排名",notParticipated:"未參與",notRanked:"未上榜",rank:"第 {{rank}} 名",ageGroups:{all:"全部年齡",under20:"20歲以下","21to30":"21~30歲","31to40":"31~40歲","41to50":"41~50歲","51to60":"51~60歲","61to70":"61~70歲",over70:"70歲以上",unknown:"未知年齡"},empty:{title:"暫無排行榜數據",subtitle:"完成評測即可上榜！"},footer:{scoreFormula:"完成所有評測項目即可計算天梯分數",formula:"天梯分數 = (力量 + 爆發力 + 心肺 + 肌肉量 + 體脂) ÷ 5"}},guestMode:{title:"歡迎使用健身評測",subtitle:"您可以選擇註冊帳號或直接體驗",startGuest:"立即體驗（訪客模式）",register:"註冊帳號",or:"或",banner:"訪客模式 - 您的資料僅儲存在本地",syncData:"註冊同步",exit:"退出"},errors:{required:"此欄位為必填",invalidFormat:"格式不正確",networkError:"網路錯誤，請稍後再試",authError:"認證失敗",saveError:"儲存失敗",loadError:"載入失敗"}}},qv={translation:{common:{loading:"Loading...",save:"Save",cancel:"Cancel",confirm:"Confirm",back:"Back",next:"Next",submit:"Submit",edit:"Edit",delete:"Delete",search:"Search",filter:"Filter",all:"All"},navigation:{home:"Home",profile:"Profile",history:"History",ladder:"Ladder",friends:"Friends",settings:"Settings",logout:"Logout"},welcome:{title:"Welcome to Fitness Assessment",subtitle:"Track your progress with detailed fitness metrics",login:"Login",guestMode:"Try Now (Guest Mode)",register:"Register",guestInfo:{title:"Guest Mode Features:",features:["Full access to all assessment features","Local storage of assessment results","Register anytime to sync data","Social features like friends and ladder not available"]}},userInfo:{title:"Body Status & Performance Overview",nickname:"Nickname",nicknamePlaceholder:"Enter nickname",generateNickname:"Generate",gender:"Gender",selectGender:"Select gender",male:"Male",female:"Female",height:"Height (cm)",weight:"Weight (kg)",age:"Age",saveData:"Save Data",saving:"Saving...",dataSaved:"Data saved successfully!",saveFailed:"Save failed, please try again"},tests:{strength:"Strength Assessment",explosivePower:"Explosive Power Test",cardio:"Cardio Endurance Test",muscleMass:"Muscle Mass",bodyFat:"Body Fat & FFMI",startTest:"Start Test",completeTest:"Complete Test",testComplete:"Test Complete",score:"Score",averageScore:"Average Score"},ladder:{title:"Ladder Rankings",myScore:"My Ladder Score",myRank:"My Rank",notParticipated:"Not Participated",notRanked:"Not Ranked",rank:"Rank {{rank}}",ageGroups:{all:"All Ages",under20:"Under 20","21to30":"21-30","31to40":"31-40","41to50":"41-50","51to60":"51-60","61to70":"61-70",over70:"Over 70",unknown:"Unknown Age"},empty:{title:"No ladder data available",subtitle:"Complete assessments to rank!"},footer:{scoreFormula:"Complete all assessment items to calculate ladder score",formula:"Ladder Score = (Strength + Explosive Power + Cardio + Muscle Mass + Body Fat) ÷ 5"}},guestMode:{title:"Welcome to Fitness Assessment",subtitle:"You can choose to register or try directly",startGuest:"Try Now (Guest Mode)",register:"Register",or:"or",banner:"Guest Mode - Your data is stored locally only",syncData:"Register to Sync",exit:"Exit"},errors:{required:"This field is required",invalidFormat:"Invalid format",networkError:"Network error, please try again later",authError:"Authentication failed",saveError:"Save failed",loadError:"Load failed"}}};wt.use(gv).init({resources:{"zh-TW":Hv,"en-US":qv},lng:"zh-TW",fallbackLng:"zh-TW",interpolation:{escapeValue:!1},react:{useSuspense:!1}});try{localStorage.removeItem("language")}catch{}function Im({onLogin:r,onGuestMode:i}){const u=hn(),{clearUserData:c,isAuthenticated:d,isLoading:f}=sn(),{t:m}=km(),[p,v]=E.useState(!1);E.useEffect(()=>{console.log("i18n current language:",wt.language)},[]),E.useEffect(()=>{const j=async()=>{if(p||d)return;const O=localStorage.getItem("savedEmail"),_=localStorage.getItem("savedPassword");if(O&&_&&!p){console.log("Welcome - 嘗試自動登入:",O),v(!0);try{const z=await zo(oe,O,_);console.log("Welcome - 自動登入成功:",z.user.email),setTimeout(()=>{u("/user-info")},500)}catch(z){console.error("Welcome - 自動登入失敗:",z),localStorage.removeItem("savedEmail"),localStorage.removeItem("savedPassword")}}},T=setTimeout(()=>{j()},100);return()=>clearTimeout(T)},[p,d,u]),E.useEffect(()=>{d&&!f&&(console.log("Welcome - 用戶已認證，導航到 user-info"),u("/user-info"))},[d,f,u]);const y=()=>{u("/login")},S=()=>{i?i():u("/guest")};return s.jsxs("div",{className:"welcome-container",children:[s.jsx("div",{className:"welcome-header",children:s.jsx(bv,{})}),s.jsxs("div",{className:"welcome-content",children:[s.jsx("h1",{className:"welcome-title",children:m("welcome.title")}),s.jsx("p",{className:"welcome-subtitle",children:m("welcome.subtitle")}),s.jsxs("div",{className:"button-group-mode",children:[s.jsxs("div",{className:"button-with-tooltip",children:[s.jsx("button",{onClick:y,className:"mode-btn login-btn",children:m("welcome.login")}),s.jsx("span",{className:"tooltip",children:"將數據保存到雲端,隨時隨地訪問"})]}),s.jsxs("div",{className:"button-with-tooltip",children:[s.jsx("button",{onClick:S,className:"mode-btn guest-btn",children:m("welcome.guestMode")}),s.jsx("span",{className:"tooltip",children:"無需註冊,立即開始評測"})]})]})]})]})}Im.propTypes={onLogin:ze.func,onGuestMode:ze.func};const Rl={strength:0,explosivePower:0,cardio:0,muscleMass:0,bodyFat:0},Gv=["male","female"],Vv=({isOpen:r,onClose:i,title:u,message:c,type:d="info",onAction:f=null,actionText:m=null})=>{if(!r)return null;const p=()=>{switch(d){case"warning":return"⚠️";case"success":return"✅";case"error":return"❌";default:return"ℹ️"}},v=()=>{switch(d){case"warning":return"modal-btn modal-btn-warning";case"success":return"modal-btn modal-btn-success";case"error":return"modal-btn modal-btn-error";default:return"modal-btn modal-btn-info"}},y=()=>{console.log("Modal close button clicked"),i()},S=()=>{console.log("Modal overlay clicked"),i()},j=()=>{f&&f(),i()};return s.jsx("div",{className:"modal-overlay",onClick:S,children:s.jsxs("div",{className:"modal-content",onClick:T=>T.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("span",{className:"modal-icon",children:p()}),s.jsx("h3",{className:"modal-title",children:u})]}),s.jsx("div",{className:"modal-body",children:s.jsx("p",{className:"modal-message",children:c})}),s.jsx("div",{className:"modal-footer",children:f&&m?s.jsxs("div",{className:"modal-footer-actions",children:[s.jsx("button",{className:"modal-btn modal-btn-secondary",onClick:y,children:"稍後查看"}),s.jsx("button",{className:v(),onClick:j,style:{position:"relative",zIndex:10001},children:m})]}):s.jsx("button",{className:v(),onClick:y,style:{position:"relative",zIndex:10001},children:"確定"})})]})})},lm=({isOpen:r,onConfirm:i,onCancel:u,remainingCount:c})=>{if(!r)return null;const d=f=>{f.target===f.currentTarget&&u()};return s.jsx("div",{className:"modal-overlay submit-confirm-overlay",onClick:d,children:s.jsxs("div",{className:"modal-content submit-confirm-content",onClick:f=>f.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("span",{className:"modal-icon",children:"🏆"}),s.jsx("h3",{className:"modal-title",children:"提交確認"})]}),s.jsx("div",{className:"modal-body",children:s.jsxs("div",{className:"submit-confirm-message",children:[s.jsxs("p",{className:"confirm-text",children:["為提升天梯參考價值，防止誤植，今天還剩下"," ",s.jsx("span",{className:"remaining-count",children:c})," ","次提交機會，每天凌晨12點將重置"]}),s.jsxs("div",{className:"confirm-details",children:[s.jsxs("div",{className:"detail-item",children:[s.jsx("span",{className:"detail-icon",children:"📊"}),s.jsx("span",{className:"detail-text",children:"確保數據準確性"})]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("span",{className:"detail-icon",children:"⏰"}),s.jsx("span",{className:"detail-text",children:"每日凌晨重置次數"})]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("span",{className:"detail-icon",children:"🎯"}),s.jsx("span",{className:"detail-text",children:"提升天梯參考價值"})]})]})]})}),s.jsxs("div",{className:"modal-footer submit-confirm-footer",children:[s.jsx("button",{className:"modal-btn modal-btn-secondary",onClick:u,children:"還沒填好"}),s.jsx("button",{className:"modal-btn modal-btn-success",onClick:i,children:"確定提交"})]})]})})};async function Yv(r,i=300*1024,u=192,c=192){return new Promise((d,f)=>{const m=new window.Image,p=new FileReader;p.onload=v=>{m.src=v.target.result},m.onload=()=>{const v=document.createElement("canvas");let y=m.width,S=m.height;(y>u||S>c)&&(y>S?(S=Math.round(S*u/y),y=u):(y=Math.round(y*c/S),S=c)),v.width=y,v.height=S,v.getContext("2d").drawImage(m,0,0,y,S),v.toBlob(T=>{T.size>i?v.toBlob(O=>{d(O)},"image/jpeg",.7):d(T)},"image/jpeg",.85)},m.onerror=f,p.onerror=f,p.readAsDataURL(r)})}function Hm({testData:r,onLogout:i,clearTestData:u}){const{userData:c,setUserData:d,saveUserData:f,saveHistory:m,loadUserData:p,isLoading:v}=sn(),[y,S]=E.useState(null),[j,T]=E.useState(!1),[O,_]=E.useState(null),[z,te]=E.useState(!1),ee=hn(),ue=Ga(),q=E.useRef(null),$=E.useRef(null),H=E.useRef(null),[k,X]=E.useState(!1),[P,ne]=E.useState(null),[se,de]=E.useState({isOpen:!1,title:"",message:"",type:"info",onAction:null,actionText:null}),[Te,be]=E.useState(null),[ce,Z]=E.useState({lastSubmissionTime:null,dailySubmissionCount:0,lastSubmissionDate:null}),[x,b]=E.useState({isOpen:!1,remainingCount:3});E.useCallback(()=>{const Q=new Date,M=Q.toDateString();if(ce.lastSubmissionDate!==M)return Z(le=>({...le,dailySubmissionCount:0,lastSubmissionDate:M})),{canSubmit:!0,reason:null};if(ce.dailySubmissionCount>=3)return{canSubmit:!1,reason:"今日已達提交上限（3次），請明天再試"};if(ce.lastSubmissionTime){const le=Q-ce.lastSubmissionTime,fe=2*60*60*1e3;if(le<fe)return{canSubmit:!1,reason:`請等待 ${Math.ceil((fe-le)/6e4)} 分鐘後再提交`}}return{canSubmit:!0,reason:null}},[ce]);const D=E.useCallback(()=>{const Q=3-(ce.dailySubmissionCount||0);b({isOpen:!0,remainingCount:Math.max(0,Q)})},[ce.dailySubmissionCount]),J=E.useCallback(async()=>{if(b({isOpen:!1,remainingCount:0}),!j)try{T(!0);const Q=c.scores||{},M=Hh(Q),le={...c,ladderScore:M,lastLadderSubmission:new Date().toISOString()};d(le);try{const fe=tt(Re,"users",oe.currentUser.uid);await Yn(fe,{ladderScore:M,lastLadderSubmission:new Date().toISOString(),updatedAt:new Date().toISOString()},{merge:!0}),console.log("天梯分數已立即保存到 Firebase:",M)}catch(fe){throw console.error("保存天梯分數到 Firebase 失敗:",fe),fe}const ie=new Date;Z(fe=>({lastSubmissionTime:ie,dailySubmissionCount:fe.dailySubmissionCount+1,lastSubmissionDate:ie.toDateString()})),de({isOpen:!0,title:"提交成功",message:`您的分數 ${M} 已成功提交到天梯！`,type:"success",onAction:()=>{de(fe=>({...fe,isOpen:!1})),ee("/ladder",{state:{forceReload:!0,from:"/user-info",timestamp:Date.now()}})},actionText:"立即查看天梯"}),setTimeout(()=>{de(fe=>({...fe,isOpen:!1}))},5e3)}catch(Q){console.error("提交到天梯失敗:",Q),de({isOpen:!0,title:"提交失敗",message:"提交到天梯時發生錯誤，請稍後再試",type:"error"})}finally{T(!1)}},[c.scores,d,j,ee]),W=E.useCallback(()=>{b({isOpen:!1,remainingCount:0})},[]),Y=E.useCallback(async()=>{if(!oe.currentUser){de({isOpen:!0,title:"需要登入",message:"請先登入以提交到天梯",type:"warning"});return}const Q=c.scores||{},M=Object.values(Q).filter(le=>le>0).length;if(M<5){de({isOpen:!0,title:"評測未完成",message:`請先完成全部5項評測（目前完成 ${M}/5 項）`,type:"warning"});return}D()},[c,D]),G=E.useMemo(()=>{const Q=c.scores||Rl;return[{name:"力量",value:Q.strength?Number(Q.strength).toFixed(2)*1:0,icon:"💪"},{name:"爆發力",value:Q.explosivePower?Number(Q.explosivePower).toFixed(2)*1:0,icon:"⚡"},{name:"心肺耐力",value:Q.cardio?Number(Q.cardio).toFixed(2)*1:0,icon:"❤️"},{name:"骨骼肌肉量",value:Q.muscleMass?Number(Q.muscleMass).toFixed(2)*1:0,icon:"🥩"},{name:"FFMI",value:Q.bodyFat?Number(Q.bodyFat).toFixed(2)*1:0,icon:"📊"}]},[c.scores]),I=sessionStorage.getItem("guestMode")==="true",he=({payload:Q,x:M,y:le,textAnchor:ie})=>{const fe=G.find(Ht=>Ht.name===Q.value);let He=M,dt=le;const Qe=Math.sqrt(M*M+le*le),Ve=Math.atan2(le,M);return Q.value==="力量"?(He=M,dt=le-Qe*.12):Q.value==="爆發力"?(He=M+Math.cos(Ve)*(Qe*.03),dt=le+Math.sin(Ve)*(Qe*.06)):Q.value==="FFMI"?(He=M+Math.cos(Ve)*(Qe*-.2),dt=le+Math.sin(Ve)*(Qe*.06)):Q.value==="心肺耐力"?(He=M+Math.cos(Ve)*(Qe*.01),dt=le+Math.sin(Ve)*(Qe*.06)):Q.value==="骨骼肌肉量"?(He=M+Math.cos(Ve)*(Qe*-.05),dt=le+Math.sin(Ve)*(Qe*.06)):(He=M+Math.cos(Ve)*(Qe*.1),dt=le+Math.sin(Ve)*(Qe*.1)),s.jsxs("g",{transform:`translate(${He},${dt})`,children:[s.jsx("defs",{children:s.jsxs("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[s.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),s.jsxs("feMerge",{children:[s.jsx("feMergeNode",{in:"coloredBlur"}),s.jsx("feMergeNode",{in:"SourceGraphic"})]})]})}),s.jsx("circle",{cx:0,cy:0,r:16,fill:"rgba(129, 216, 208, 0.1)",filter:"url(#glow)"}),s.jsx("circle",{cx:0,cy:0,r:14,fill:"rgba(255, 255, 255, 0.95)",stroke:"rgba(129, 216, 208, 0.4)",strokeWidth:2,filter:"drop-shadow(0 2px 4px rgba(129, 216, 208, 0.2))"}),s.jsx("text",{x:0,y:-8,textAnchor:"middle",fill:"#4a5568",fontSize:"16",fontWeight:"600",dominantBaseline:"middle",filter:"drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1))",children:fe==null?void 0:fe.icon}),s.jsx("text",{x:0,y:12,textAnchor:"middle",fill:"#2d3748",fontSize:"13",fontWeight:"700",dominantBaseline:"middle",filter:"drop-shadow(0 1px 3px rgba(255, 255, 255, 0.9))",children:Q.value})]})};E.useEffect(()=>{if(!oe){S("無法初始化身份驗證，請檢查 Firebase 配置並稍後再試。"),console.error("auth 未初始化");return}const Q=oe.onAuthStateChanged(M=>{console.log("UserInfo - 認證狀態變更:",M==null?void 0:M.email),_(M),!M&&!I&&ee("/login")});return()=>Q()},[]),E.useEffect(()=>{(async()=>{O&&!z&&!v&&(console.log("UserInfo - 檢查資料載入狀態"),!c.height&&!c.weight&&!c.age&&(console.log("UserInfo - 資料為空，嘗試重新載入"),await p()),te(!0))})()},[O,z,v,p,c.height,c.weight,c.age]),E.useEffect(()=>{var ie,fe;const Q=["/strength","/explosive-power","/cardio","/muscle-mass","/body-fat"],M=(ie=ue.state)==null?void 0:ie.from;M&&Q.includes(M)&&setTimeout(()=>{q.current&&q.current.scrollIntoView({behavior:"smooth",block:"center"})},300);const le=(fe=ue.state)==null?void 0:fe.scrollTo;le&&setTimeout(()=>{le==="radar"&&q.current?q.current.scrollIntoView({behavior:"smooth",block:"center"}):le==="tests"&&$.current&&$.current.scrollIntoView({behavior:"smooth",block:"start"})},300)},[ue]),E.useEffect(()=>{(()=>{try{const M=localStorage.getItem("ladderSubmissionState");if(M){const le=JSON.parse(M),ie=new Date().toDateString();le.lastSubmissionDate!==ie?Z({lastSubmissionTime:null,dailySubmissionCount:0,lastSubmissionDate:ie}):Z(le)}}catch(M){console.error("載入提交狀態失敗:",M)}})()},[]),E.useEffect(()=>{ce.lastSubmissionDate&&localStorage.setItem("ladderSubmissionState",JSON.stringify(ce))},[ce]),E.useEffect(()=>{if(r&&Object.keys(r).length>0){console.log("收到測試數據:",r);const Q=setTimeout(()=>{d(M=>{const ie={...M.scores||Rl,...r.distance!==void 0&&{cardio:r.score||0},...r.squat!==void 0&&{strength:r.averageScore||0},...r.jumpHeight!==void 0&&{explosivePower:r.finalScore||0},...r.smm!==void 0&&{muscleMass:r.finalScore||0},...r.bodyFat!==void 0&&{bodyFat:r.ffmiScore||0}};return console.log("💾 防抖後更新測試數據分數（10秒防抖）"),{...M,scores:ie,ladderScore:M.ladderScore||0}})},1e4);return u&&setTimeout(u,11e3),()=>clearTimeout(Q)}},[r,u]);const Ne=E.useCallback(()=>{const{height:Q,weight:M,age:le,gender:ie}=c;return!Q||!M||!le||!ie?(S("請填寫所有欄位"),!1):Q<=0||M<=0||le<=0?(S("身高、體重和年齡必須大於 0"),!1):Gv.includes(ie)?!0:(S("請選擇有效的性別"),!1)},[c.height,c.weight,c.age,c.gender]),Be=E.useCallback(async Q=>{if(Q.preventDefault(),S(null),T(!0),!Ne()){T(!1);return}const M={...c,height:Number(c.height)||0,weight:Number(c.weight)||0,age:Number(c.age)||0,gender:c.gender,scores:c.scores||Rl,ladderScore:c.ladderScore||0,lastActive:new Date().toISOString()};try{d(M),de({isOpen:!0,title:"儲存成功",message:"資料已儲存成功！",type:"success"})}catch(le){de(I?{isOpen:!0,title:"訪客模式",message:"訪客模式下無法保存到雲端，但您現在可以開始進行評測了！",type:"info"}:{isOpen:!0,title:"儲存失敗",message:`儲存失敗：${le.message}`,type:"error"})}finally{T(!1)}},[c.height,c.weight,c.age,c.gender,c.scores,c.ladderScore,Ne,I]),Xe=E.useMemo(()=>{const Q=(c==null?void 0:c.scores)||Rl,M=Object.values(Q).filter(ie=>ie>0);return M.length?(M.reduce((ie,fe)=>ie+Number(fe),0)/M.length).toFixed(2):0},[c==null?void 0:c.scores]),Ce=E.useMemo(()=>{const Q=(c==null?void 0:c.scores)||Rl;return Hh(Q)},[c==null?void 0:c.scores]),ke=(c==null?void 0:c.ladderScore)||0,rt=E.useMemo(()=>{const Q=(c==null?void 0:c.scores)||Rl,M=Object.values(Q).filter(ie=>ie>0).length;return{completedCount:M,isFullyCompleted:M===5,progress:M/5*100}},[c==null?void 0:c.scores]),mt=E.useCallback(async()=>{if(!(c!=null&&c.userId)||!ke||ke<=0){be(null);return}try{const Q=Kt(Re,"users"),M=Sn(Q,Nn("ladderScore",">",0),Hs("ladderScore","desc"),gr(100)),le=await jn(M),ie=[];le.forEach(He=>{const dt=He.data();dt.ladderScore>0&&ie.push({id:He.id,...dt})});const fe=ie.findIndex(He=>He.id===c.userId);be(fe!==-1?fe+1:null)}catch(Q){console.error("獲取用戶排名失敗:",Q),be(null)}},[c==null?void 0:c.userId,ke]);E.useEffect(()=>{mt()},[mt]),E.useMemo(()=>c!=null&&c.age?Ol(c.age):"",[c==null?void 0:c.age]);const L=E.useCallback(Q=>{const M=Q.target.value,le=/[\u4e00-\u9fff]/.test(M);let ie=!0,fe="";if(le?M.length>8&&(ie=!1,fe="暱稱不能超過8個中文字"):M.length>16&&(ie=!1,fe="暱稱不能超過16個英文字元"),!ie){de({isOpen:!0,title:"字數限制",message:fe,type:"warning"});return}d(He=>({...He,nickname:M})),H.current&&clearTimeout(H.current),H.current=setTimeout(()=>{H.current=null},1e3)},[d]),ae=()=>{var le;const Q=(le=oe.currentUser)==null?void 0:le.email,M=tv(Q);d(ie=>({...ie,nickname:M,ladderScore:ie.ladderScore||0}))},ye=E.useCallback(()=>{if(!oe.currentUser){de({isOpen:!0,title:"需要登入",message:"請先登入以儲存結果",type:"warning"});return}const Q={date:new Date().toLocaleDateString("zh-TW"),scores:c.scores,averageScore:Xe};m(Q),de({isOpen:!0,title:"儲存成功",message:"結果已儲存",type:"success"}),setTimeout(()=>{de(M=>({...M,isOpen:!1}))},2e3)},[c.scores,Xe,m]),je=E.useCallback(async Q=>{if(!c.height||!c.weight||!c.age||!c.gender){de({isOpen:!0,title:"需要基本資料",message:"請先填寫並儲存您的身高、體重、年齡和性別，才能開始評測！",type:"warning"});return}Ne()?ee(Q,{state:{from:"/user-info"}}):de({isOpen:!0,title:"資料未保存",message:"請確保資料已正確保存後再進行評測！",type:"warning"})},[c.height,c.weight,c.age,c.gender,Ne,ee]),xe=E.useCallback(()=>{localStorage.removeItem("savedEmail"),localStorage.removeItem("savedPassword"),oe.currentUser&&oe.signOut().catch(Q=>console.error("登出失敗:",Q)),i(),ee("/login")},[i,ee]),re=E.useCallback(Q=>{const{name:M,value:le}=Q.target;let ie=le;M==="gender"||["profession"].includes(M)?ie=le:["weeklyTrainingHours","trainingYears"].includes(M)?ie=le===""?"":Number(le):ie=le===""?0:Number(le),d(fe=>({...fe,[M]:ie,ladderScore:fe.ladderScore||0}))},[d]),pe=async Q=>{var le;ne(null);const M=Q.target.files[0];if(M){if(!M.type.startsWith("image/")){ne("請選擇圖片檔案");return}if(M.size>2*1024*1024){ne("圖片大小請勿超過 2MB");return}X(!0);try{const ie=await Yv(M,307200,192,192);if(ie.size>350*1024){ne("壓縮後圖片仍超過 350KB，請選擇更小的圖片"),X(!1);return}const fe=(le=oe.currentUser)==null?void 0:le.uid;if(!fe)throw new Error("未登入，無法上傳頭像");const He=Kp(Uo,`avatars/${fe}/avatar.jpg`);await Xp(He,ie,{contentType:"image/jpeg"});const dt=await Qp(He);d(Qe=>({...Qe,avatarUrl:dt,ladderScore:Qe.ladderScore||0}));try{const Qe=tt(Re,"users",fe);await Vn(Qe,{avatarUrl:dt,updatedAt:new Date().toISOString()}),console.log("頭像已立即保存到 Firebase"),de({isOpen:!0,title:"頭像上傳成功",message:"您的頭像已成功更新！",type:"success"}),setTimeout(()=>{de(Ve=>({...Ve,isOpen:!1}))},2e3)}catch(Qe){console.error("頭像保存到 Firebase 失敗:",Qe),ne("頭像保存失敗: "+Qe.message)}}catch(ie){ne("頭像上傳失敗: "+ie.message)}finally{X(!1)}}};return v&&!z?s.jsx("div",{className:"user-info-container",children:s.jsx("div",{className:"loading-message",children:s.jsx("p",{children:"正在載入用戶資料..."})})}):s.jsxs("div",{className:"user-info-container",children:[s.jsx(Vv,{isOpen:se.isOpen,onClose:()=>{console.log("Modal onClose triggered, current state:",se),de(Q=>(console.log("Setting modal state to closed"),{...Q,isOpen:!1}))},title:se.title,message:se.message,type:se.type,onAction:se.onAction,actionText:se.actionText}),s.jsx(lm,{isOpen:x.isOpen,onConfirm:J,onCancel:W,remainingCount:x.remainingCount}),y&&s.jsx("p",{className:"error-message",children:y}),s.jsxs("div",{className:"avatar-section",children:[s.jsx("div",{className:"avatar-container",children:s.jsx("img",{src:I?"/guest-avatar.svg":(c==null?void 0:c.avatarUrl)||"/logo192.png",alt:"頭像",className:"user-avatar"})}),s.jsxs("div",{className:"avatar-actions-container",children:[!I&&s.jsxs("label",{className:"avatar-upload-label",children:[k?"上傳中...":"更換頭像",s.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:pe,disabled:k})]}),I&&s.jsx("div",{className:"guest-avatar-note",children:s.jsx("span",{children:"訪客模式"})})]}),P&&s.jsx("div",{className:"avatar-error",children:P})]}),(O||I)&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"page-header",children:[s.jsx("h1",{className:"page-title",children:"身體狀態與表現總覽"}),s.jsx("div",{className:"page-subtitle",children:"完善您的個人資料，開始健身之旅"})]}),s.jsx("div",{className:"form-card",children:s.jsxs("form",{className:"user-form",onSubmit:Be,children:[s.jsxs("div",{className:"form-section",children:[s.jsxs("div",{className:"section-header",children:[s.jsx("h3",{className:"section-title",children:"基本資料"}),O&&s.jsx("button",{type:"button",onClick:xe,title:"登出",className:"user-info__logout-btn",onMouseEnter:Q=>{const M=document.createElement("div");M.innerText="登出",M.style.position="absolute",M.style.bottom="44px",M.style.left="50%",M.style.transform="translateX(-50%)",M.style.background="rgba(60,60,60,0.95)",M.style.color="#fff",M.style.padding="6px 14px",M.style.borderRadius="6px",M.style.fontSize="13px",M.style.whiteSpace="nowrap",M.style.pointerEvents="none",M.style.zIndex="1001",M.className="logout-tooltip",Q.currentTarget.parentNode.appendChild(M)},onMouseLeave:Q=>{const M=Q.currentTarget.parentNode.querySelector(".logout-tooltip");M&&M.remove()},children:s.jsx("span",{className:"user-info__logout-icon",children:"⎋"})})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"nickname",className:"form-label",children:"暱稱"}),s.jsxs("div",{className:"nickname-input-group",children:[s.jsx("input",{id:"nickname",name:"nickname",type:"text",value:(c==null?void 0:c.nickname)||"",onChange:L,placeholder:"請輸入暱稱",className:"form-input",maxLength:"16"}),s.jsx("button",{type:"button",onClick:ae,className:"generate-nickname-btn",children:"生成暱稱"})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"gender",className:"form-label",children:"性別"}),s.jsxs("select",{id:"gender",name:"gender",value:(c==null?void 0:c.gender)||"",onChange:re,className:"form-input",required:!0,children:[s.jsx("option",{value:"",children:"請選擇性別"}),s.jsx("option",{value:"male",children:"男性"}),s.jsx("option",{value:"female",children:"女性"})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"age",className:"form-label",children:"年齡"}),s.jsx("input",{id:"age",name:"age",type:"number",value:(c==null?void 0:c.age)||"",onChange:re,placeholder:"年齡",className:"form-input",required:!0,min:"0",step:"1"})]})]}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"height",className:"form-label",children:"身高 (cm)"}),s.jsx("input",{id:"height",name:"height",type:"number",value:(c==null?void 0:c.height)||"",onChange:re,placeholder:"身高 (cm)",className:"form-input",required:!0,min:"0",step:"0.1"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"weight",className:"form-label",children:"體重 (kg)"}),s.jsx("input",{id:"weight",name:"weight",type:"number",value:(c==null?void 0:c.weight)||"",onChange:re,placeholder:"體重 (kg)",className:"form-input",required:!0,min:"0",step:"0.1"})]})]})]}),s.jsxs("div",{className:"form-section",children:[s.jsx("h3",{className:"section-title",children:"🏆 天梯排行榜設置"}),s.jsx("div",{className:"privacy-options",children:s.jsxs("label",{className:"privacy-option",children:[s.jsx("input",{type:"checkbox",checked:c.isAnonymousInLadder===!0,onChange:Q=>d(M=>({...M,isAnonymousInLadder:Q.target.checked}))}),s.jsxs("div",{className:"privacy-option-content",children:[s.jsx("span",{className:"privacy-option-title",children:"匿名參與天梯排名"}),s.jsx("span",{className:"privacy-option-desc",children:"勾選後將隱藏您的暱稱和頭像，以匿名方式顯示在排行榜中"})]})]})}),s.jsxs("div",{className:"training-info-section",children:[s.jsx("h4",{className:"training-info-title",children:"💪 訓練背景（選填）"}),s.jsx("p",{className:"training-info-desc",children:"分享您的訓練背景，激勵其他健身愛好者！"}),s.jsxs("div",{className:"form-row",children:[s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"profession",className:"form-label",children:"職業"}),s.jsx("input",{id:"profession",name:"profession",type:"text",value:(c==null?void 0:c.profession)||"",onChange:re,placeholder:"例如：工程師、學生、教師...",className:"form-input",maxLength:"100"})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"weeklyTrainingHours",className:"form-label",children:"每周訓練時數"}),s.jsx("input",{id:"weeklyTrainingHours",name:"weeklyTrainingHours",type:"number",value:(c==null?void 0:c.weeklyTrainingHours)||"",onChange:re,placeholder:"小時",className:"form-input",min:"0",max:"168",step:"0.5"})]})]}),s.jsxs("div",{className:"form-group",children:[s.jsx("label",{htmlFor:"trainingYears",className:"form-label",children:"訓練年資"}),s.jsx("input",{id:"trainingYears",name:"trainingYears",type:"number",value:(c==null?void 0:c.trainingYears)||"",onChange:re,placeholder:"年",className:"form-input",min:"0",max:"50",step:"0.5"})]})]})]}),s.jsx("div",{className:"form-actions",children:s.jsx("button",{type:"submit",className:"submit-btn",disabled:j,children:j?"儲存中...":"儲存資料"})})]})})]}),s.jsx("div",{id:"radar-section",className:"radar-section",ref:q,children:s.jsxs("div",{className:"radar-card",children:[s.jsx("div",{className:"corner-decoration top-left"}),s.jsx("div",{className:"corner-decoration top-right"}),s.jsx("div",{className:"corner-decoration bottom-left"}),s.jsx("div",{className:"corner-decoration bottom-right"}),s.jsx("h2",{className:"radar-title",children:"表現總覽"}),j?s.jsxs("div",{className:"loading-container",children:[s.jsx("div",{className:"loading-spinner"}),s.jsx("p",{children:"正在載入數據..."})]}):s.jsx("div",{className:"radar-chart-container",children:s.jsx(ur,{width:"100%",height:400,children:s.jsxs(om,{data:G,children:[s.jsx(um,{gridType:"polygon",stroke:"rgba(129, 216, 208, 0.25)",strokeWidth:2,strokeDasharray:"4 4"}),s.jsx(dm,{dataKey:"name",tick:s.jsx(he,{}),axisLine:!1}),s.jsx(fm,{angle:90,domain:[0,100],tickCount:5,tick:{fontSize:12,fill:"#2d3748",fontWeight:600},axisLine:!1}),s.jsx(hm,{name:"您的表現",dataKey:"value",stroke:"#81D8D0",fill:"url(#tiffanyGradient)",fillOpacity:.8,strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("defs",{children:s.jsxs("linearGradient",{id:"tiffanyGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"#81D8D0",stopOpacity:.9}),s.jsx("stop",{offset:"50%",stopColor:"#5F9EA0",stopOpacity:.7}),s.jsx("stop",{offset:"100%",stopColor:"#81D8D0",stopOpacity:.6})]})})]})})}),!j&&s.jsxs("div",{className:"score-section",children:[Xe>0&&s.jsxs("div",{className:"average-score-display",children:[s.jsxs("p",{className:"average-score",children:["⭐ 戰鬥力"," ",s.jsx("span",{className:"score-value-large",children:Xe})]}),rt.isFullyCompleted&&s.jsxs("div",{className:"ladder-info",children:[s.jsxs("p",{className:"ladder-rank",children:["🏆 天梯排名:"," ",s.jsx("span",{className:"rank-value",children:Te||"未上榜"})]}),ke>0&&s.jsxs("p",{className:"submitted-score",children:["已提交分數:"," ",s.jsx("span",{className:"score-value",children:ke})]}),Ce>0&&Ce!==ke&&s.jsxs("p",{className:"current-score",children:["當前分數:"," ",s.jsx("span",{className:"score-value",children:Ce}),s.jsx("span",{className:"score-note",children:"（需提交更新）"})]})]})]}),s.jsxs("div",{className:"action-buttons-section",children:[Xe>0&&s.jsxs("button",{onClick:ye,className:"action-btn save-results-btn",disabled:j,children:[s.jsx("span",{className:"btn-icon",children:"💾"}),s.jsx("span",{className:"btn-text",children:"儲存評測結果"})]}),rt.isFullyCompleted&&s.jsxs("button",{onClick:Y,className:"action-btn submit-ladder-btn",disabled:j,children:[s.jsx("span",{className:"btn-icon",children:"🏆"}),s.jsx("span",{className:"btn-text",children:ke>0?"更新天梯分數":"提交到天梯"})]})]}),s.jsx("div",{className:"ladder-info-card",children:s.jsx("p",{className:"ladder-info-text",children:rt.isFullyCompleted?"完成五項評測，可參與天梯排名":`完成 ${rt.completedCount}/5 項評測後可參與天梯排名`})})]})]})}),s.jsxs("div",{className:"test-buttons-section",ref:$,children:[s.jsx("h3",{className:"section-title",children:"開始評測"}),s.jsxs("div",{className:"test-buttons-grid",children:[s.jsxs("button",{onClick:()=>je("/strength"),className:"test-btn strength-btn",children:[s.jsx("span",{className:"test-icon",children:"💪"}),s.jsx("span",{className:"test-label",children:"力量評測"})]}),s.jsxs("button",{onClick:()=>je("/explosive-power"),className:"test-btn explosive-btn",children:[s.jsx("span",{className:"test-icon",children:"⚡"}),s.jsx("span",{className:"test-label",children:"爆發力測試"})]}),s.jsxs("button",{onClick:()=>je("/cardio"),className:"test-btn cardio-btn",children:[s.jsx("span",{className:"test-icon",children:"❤️"}),s.jsx("span",{className:"test-label",children:"心肺耐力測試"})]}),s.jsxs("button",{onClick:()=>je("/muscle-mass"),className:"test-btn muscle-btn",children:[s.jsx("span",{className:"test-icon",children:"🥩"}),s.jsx("span",{className:"test-label",children:"骨骼肌肉量"})]}),s.jsxs("button",{onClick:()=>je("/body-fat"),className:"test-btn bodyfat-btn",children:[s.jsx("span",{className:"test-icon",children:"📊"}),s.jsx("span",{className:"test-label",children:"體脂肪率與FFMI"})]})]})]}),x.isOpen&&s.jsx(lm,{isOpen:x.isOpen,onConfirm:J,onCancel:W,remainingCount:x.remainingCount})]})}Hm.propTypes={testData:ze.shape({distance:ze.number,score:ze.number,squat:ze.number,averageScore:ze.number,jumpHeight:ze.number,finalScore:ze.number,smm:ze.number,bodyFat:ze.number,ffmiScore:ze.number}),onLogout:ze.func.isRequired,clearTestData:ze.func.isRequired};const Fv={50:{Beginner:24,Novice:38,Intermediate:57,Advanced:79,Elite:103},55:{Beginner:29,Novice:45,Intermediate:64,Advanced:87,Elite:113},60:{Beginner:34,Novice:51,Intermediate:72,Advanced:96,Elite:123},65:{Beginner:39,Novice:57,Intermediate:79,Advanced:104,Elite:132},70:{Beginner:44,Novice:62,Intermediate:85,Advanced:112,Elite:141},75:{Beginner:49,Novice:68,Intermediate:92,Advanced:119,Elite:149},80:{Beginner:53,Novice:74,Intermediate:98,Advanced:127,Elite:157},85:{Beginner:58,Novice:79,Intermediate:105,Advanced:134,Elite:165},90:{Beginner:62,Novice:84,Intermediate:111,Advanced:141,Elite:172},95:{Beginner:67,Novice:89,Intermediate:116,Advanced:147,Elite:180},100:{Beginner:71,Novice:94,Intermediate:122,Advanced:153,Elite:187},105:{Beginner:75,Novice:99,Intermediate:128,Advanced:160,Elite:194},110:{Beginner:80,Novice:104,Intermediate:133,Advanced:166,Elite:200},115:{Beginner:84,Novice:109,Intermediate:138,Advanced:172,Elite:207},120:{Beginner:88,Novice:113,Intermediate:143,Advanced:177,Elite:213},125:{Beginner:92,Novice:118,Intermediate:148,Advanced:183,Elite:219},130:{Beginner:95,Novice:122,Intermediate:153,Advanced:188,Elite:225},135:{Beginner:99,Novice:126,Intermediate:158,Advanced:194,Elite:231},140:{Beginner:103,Novice:130,Intermediate:163,Advanced:199,Elite:236}},Xv={40:{Beginner:8,Novice:18,Intermediate:32,Advanced:50,Elite:70},45:{Beginner:10,Novice:21,Intermediate:36,Advanced:55,Elite:76},50:{Beginner:12,Novice:24,Intermediate:40,Advanced:59,Elite:82},55:{Beginner:15,Novice:27,Intermediate:43,Advanced:64,Elite:87},60:{Beginner:17,Novice:29,Intermediate:47,Advanced:68,Elite:92},65:{Beginner:19,Novice:32,Intermediate:50,Advanced:72,Elite:96},70:{Beginner:20,Novice:34,Intermediate:53,Advanced:75,Elite:101},75:{Beginner:22,Novice:37,Intermediate:56,Advanced:79,Elite:105},80:{Beginner:24,Novice:39,Intermediate:59,Advanced:82,Elite:109},85:{Beginner:26,Novice:41,Intermediate:62,Advanced:86,Elite:112},90:{Beginner:28,Novice:44,Intermediate:64,Advanced:89,Elite:116},95:{Beginner:29,Novice:46,Intermediate:67,Advanced:92,Elite:119},100:{Beginner:31,Novice:48,Intermediate:69,Advanced:95,Elite:123},105:{Beginner:33,Novice:50,Intermediate:72,Advanced:98,Elite:126},110:{Beginner:34,Novice:52,Intermediate:74,Advanced:100,Elite:129},115:{Beginner:36,Novice:54,Intermediate:76,Advanced:103,Elite:132},120:{Beginner:37,Novice:56,Intermediate:79,Advanced:106,Elite:135}},Qv={50:{Beginner:33,Novice:52,Intermediate:76,Advanced:104,Elite:136},55:{Beginner:40,Novice:60,Intermediate:86,Advanced:116,Elite:149},60:{Beginner:47,Novice:68,Intermediate:95,Advanced:127,Elite:161},65:{Beginner:53,Novice:76,Intermediate:104,Advanced:137,Elite:173},70:{Beginner:59,Novice:83,Intermediate:113,Advanced:147,Elite:184},75:{Beginner:66,Novice:91,Intermediate:122,Advanced:157,Elite:195},80:{Beginner:72,Novice:98,Intermediate:130,Advanced:166,Elite:205},85:{Beginner:78,Novice:105,Intermediate:138,Advanced:175,Elite:215},90:{Beginner:83,Novice:112,Intermediate:146,Advanced:184,Elite:225},95:{Beginner:89,Novice:118,Intermediate:153,Advanced:192,Elite:234},100:{Beginner:95,Novice:125,Intermediate:160,Advanced:201,Elite:243},105:{Beginner:100,Novice:131,Intermediate:168,Advanced:209,Elite:252},110:{Beginner:106,Novice:137,Intermediate:174,Advanced:216,Elite:260},115:{Beginner:111,Novice:143,Intermediate:181,Advanced:224,Elite:269},120:{Beginner:116,Novice:149,Intermediate:188,Advanced:231,Elite:277},125:{Beginner:121,Novice:155,Intermediate:194,Advanced:238,Elite:284},130:{Beginner:126,Novice:160,Intermediate:201,Advanced:245,Elite:292},135:{Beginner:131,Novice:166,Intermediate:207,Advanced:252,Elite:299},140:{Beginner:136,Novice:171,Intermediate:213,Advanced:259,Elite:307}},Kv={40:{Beginner:17,Novice:31,Intermediate:51,Advanced:75,Elite:101},45:{Beginner:20,Novice:36,Intermediate:56,Advanced:81,Elite:109},50:{Beginner:23,Novice:39,Intermediate:61,Advanced:87,Elite:115},55:{Beginner:26,Novice:43,Intermediate:65,Advanced:92,Elite:122},60:{Beginner:29,Novice:47,Intermediate:70,Advanced:97,Elite:128},65:{Beginner:32,Novice:50,Intermediate:74,Advanced:102,Elite:133},70:{Beginner:34,Novice:53,Intermediate:78,Advanced:106,Elite:138},75:{Beginner:37,Novice:56,Intermediate:81,Advanced:111,Elite:143},80:{Beginner:39,Novice:59,Intermediate:85,Advanced:115,Elite:148},85:{Beginner:41,Novice:62,Intermediate:88,Advanced:119,Elite:152},90:{Beginner:44,Novice:65,Intermediate:91,Advanced:123,Elite:157},95:{Beginner:46,Novice:68,Intermediate:95,Advanced:126,Elite:161},100:{Beginner:48,Novice:70,Intermediate:98,Advanced:130,Elite:165},105:{Beginner:50,Novice:73,Intermediate:101,Advanced:133,Elite:169},110:{Beginner:52,Novice:75,Intermediate:103,Advanced:136,Elite:172},115:{Beginner:54,Novice:77,Intermediate:106,Advanced:140,Elite:176},120:{Beginner:56,Novice:80,Intermediate:109,Advanced:143,Elite:179}},Zv={50:{Beginner:44,Novice:65,Intermediate:93,Advanced:125,Elite:160},55:{Beginner:51,Novice:74,Intermediate:103,Advanced:137,Elite:174},60:{Beginner:58,Novice:83,Intermediate:114,Advanced:149,Elite:187},65:{Beginner:66,Novice:92,Intermediate:124,Advanced:160,Elite:200},70:{Beginner:73,Novice:100,Intermediate:133,Advanced:171,Elite:212},75:{Beginner:79,Novice:108,Intermediate:142,Advanced:182,Elite:224},80:{Beginner:86,Novice:116,Intermediate:151,Advanced:192,Elite:235},85:{Beginner:93,Novice:123,Intermediate:160,Advanced:201,Elite:245},90:{Beginner:99,Novice:131,Intermediate:168,Advanced:211,Elite:256},95:{Beginner:105,Novice:138,Intermediate:176,Advanced:220,Elite:266},100:{Beginner:111,Novice:145,Intermediate:184,Advanced:228,Elite:275},105:{Beginner:117,Novice:151,Intermediate:192,Advanced:237,Elite:284},110:{Beginner:123,Novice:158,Intermediate:199,Advanced:245,Elite:293},115:{Beginner:129,Novice:164,Intermediate:206,Advanced:253,Elite:302},120:{Beginner:134,Novice:171,Intermediate:213,Advanced:261,Elite:311},125:{Beginner:140,Novice:177,Intermediate:220,Advanced:268,Elite:319},130:{Beginner:145,Novice:183,Intermediate:227,Advanced:276,Elite:327},135:{Beginner:150,Novice:188,Intermediate:233,Advanced:283,Elite:335},140:{Beginner:155,Novice:194,Intermediate:240,Advanced:290,Elite:342}},$v={40:{Beginner:24,Novice:40,Intermediate:62,Advanced:89,Elite:118},45:{Beginner:27,Novice:45,Intermediate:68,Advanced:95,Elite:126},50:{Beginner:31,Novice:49,Intermediate:73,Advanced:102,Elite:133},55:{Beginner:34,Novice:53,Intermediate:78,Advanced:107,Elite:140},60:{Beginner:37,Novice:57,Intermediate:83,Advanced:113,Elite:146},65:{Beginner:40,Novice:61,Intermediate:87,Advanced:118,Elite:152},70:{Beginner:43,Novice:64,Intermediate:91,Advanced:123,Elite:157},75:{Beginner:45,Novice:67,Intermediate:95,Advanced:127,Elite:163},80:{Beginner:48,Novice:71,Intermediate:99,Advanced:132,Elite:168},85:{Beginner:51,Novice:74,Intermediate:102,Advanced:136,Elite:172},90:{Beginner:53,Novice:77,Intermediate:106,Advanced:140,Elite:177},95:{Beginner:55,Novice:79,Intermediate:109,Advanced:144,Elite:181},100:{Beginner:58,Novice:82,Intermediate:112,Advanced:147,Elite:185},105:{Beginner:60,Novice:85,Intermediate:116,Advanced:151,Elite:189},110:{Beginner:62,Novice:87,Intermediate:119,Advanced:154,Elite:193},115:{Beginner:64,Novice:90,Intermediate:121,Advanced:158,Elite:197},120:{Beginner:66,Novice:92,Intermediate:124,Advanced:161,Elite:200}},Jv={50:{Beginner:25,Novice:39,Intermediate:58,Advanced:81,Elite:105},55:{Beginner:28,Novice:43,Intermediate:63,Advanced:86,Elite:112},60:{Beginner:31,Novice:47,Intermediate:67,Advanced:92,Elite:118},65:{Beginner:34,Novice:51,Intermediate:72,Advanced:97,Elite:124},70:{Beginner:37,Novice:54,Intermediate:76,Advanced:101,Elite:129},75:{Beginner:39,Novice:57,Intermediate:80,Advanced:106,Elite:134},80:{Beginner:42,Novice:61,Intermediate:84,Advanced:110,Elite:139},85:{Beginner:45,Novice:64,Intermediate:87,Advanced:115,Elite:144},90:{Beginner:47,Novice:67,Intermediate:91,Advanced:119,Elite:149},95:{Beginner:50,Novice:70,Intermediate:94,Advanced:122,Elite:153},100:{Beginner:52,Novice:72,Intermediate:97,Advanced:126,Elite:157},105:{Beginner:54,Novice:75,Intermediate:101,Advanced:130,Elite:161},110:{Beginner:57,Novice:78,Intermediate:104,Advanced:133,Elite:165},115:{Beginner:59,Novice:80,Intermediate:107,Advanced:137,Elite:169},120:{Beginner:61,Novice:83,Intermediate:110,Advanced:140,Elite:172},125:{Beginner:63,Novice:85,Intermediate:112,Advanced:143,Elite:176},130:{Beginner:65,Novice:88,Intermediate:115,Advanced:146,Elite:179},135:{Beginner:67,Novice:90,Intermediate:118,Advanced:149,Elite:183},140:{Beginner:69,Novice:92,Intermediate:120,Advanced:152,Elite:186}},Pv={40:{Beginner:14,Novice:24,Intermediate:36,Advanced:52,Elite:70},45:{Beginner:15,Novice:25,Intermediate:39,Advanced:55,Elite:72},50:{Beginner:17,Novice:27,Intermediate:41,Advanced:57,Elite:75},55:{Beginner:18,Novice:28,Intermediate:42,Advanced:59,Elite:78},60:{Beginner:19,Novice:30,Intermediate:44,Advanced:61,Elite:80},65:{Beginner:20,Novice:31,Intermediate:46,Advanced:63,Elite:82},70:{Beginner:21,Novice:32,Intermediate:47,Advanced:65,Elite:84},75:{Beginner:22,Novice:34,Intermediate:49,Advanced:66,Elite:86},80:{Beginner:23,Novice:35,Intermediate:50,Advanced:68,Elite:88},85:{Beginner:24,Novice:36,Intermediate:51,Advanced:69,Elite:89},90:{Beginner:24,Novice:37,Intermediate:52,Advanced:71,Elite:91},95:{Beginner:25,Novice:38,Intermediate:54,Advanced:72,Elite:93},100:{Beginner:26,Novice:39,Intermediate:55,Advanced:74,Elite:94},105:{Beginner:27,Novice:40,Intermediate:56,Advanced:75,Elite:95},110:{Beginner:27,Novice:40,Intermediate:57,Advanced:76,Elite:97},115:{Beginner:28,Novice:41,Intermediate:58,Advanced:77,Elite:98},120:{Beginner:29,Novice:42,Intermediate:59,Advanced:78,Elite:99}},Wv={15:{Beginner:40,Novice:59,Intermediate:84,Advanced:112,Elite:144},20:{Beginner:46,Novice:68,Intermediate:96,Advanced:129,Elite:164},25:{Beginner:47,Novice:70,Intermediate:98,Advanced:132,Elite:169},30:{Beginner:47,Novice:70,Intermediate:98,Advanced:132,Elite:169},35:{Beginner:47,Novice:70,Intermediate:98,Advanced:132,Elite:169},40:{Beginner:47,Novice:70,Intermediate:98,Advanced:132,Elite:169},45:{Beginner:44,Novice:66,Intermediate:93,Advanced:125,Elite:160},50:{Beginner:42,Novice:62,Intermediate:88,Advanced:118,Elite:150},55:{Beginner:39,Novice:57,Intermediate:81,Advanced:109,Elite:139},60:{Beginner:35,Novice:52,Intermediate:74,Advanced:99,Elite:127},65:{Beginner:32,Novice:47,Intermediate:67,Advanced:90,Elite:115},70:{Beginner:29,Novice:42,Intermediate:60,Advanced:80,Elite:103},75:{Beginner:26,Novice:38,Intermediate:54,Advanced:72,Elite:92},80:{Beginner:23,Novice:34,Intermediate:48,Advanced:64,Elite:82},85:{Beginner:20,Novice:30,Intermediate:43,Advanced:58,Elite:74},90:{Beginner:18,Novice:27,Intermediate:39,Advanced:52,Elite:66}},e2={15:{Beginner:15,Novice:27,Intermediate:43,Advanced:63,Elite:86},20:{Beginner:17,Novice:31,Intermediate:49,Advanced:72,Elite:98},25:{Beginner:17,Novice:31,Intermediate:51,Advanced:74,Elite:101},30:{Beginner:17,Novice:31,Intermediate:51,Advanced:74,Elite:101},35:{Beginner:17,Novice:31,Intermediate:51,Advanced:74,Elite:101},40:{Beginner:17,Novice:31,Intermediate:51,Advanced:74,Elite:101},45:{Beginner:16,Novice:30,Intermediate:48,Advanced:70,Elite:96},50:{Beginner:15,Novice:28,Intermediate:45,Advanced:66,Elite:90},55:{Beginner:14,Novice:26,Intermediate:42,Advanced:61,Elite:83},60:{Beginner:13,Novice:24,Intermediate:38,Advanced:56,Elite:76},65:{Beginner:12,Novice:21,Intermediate:34,Advanced:50,Elite:69},70:{Beginner:11,Novice:19,Intermediate:31,Advanced:45,Elite:62},75:{Beginner:9,Novice:17,Intermediate:28,Advanced:40,Elite:55},80:{Beginner:8,Novice:15,Intermediate:25,Advanced:36,Elite:49},85:{Beginner:8,Novice:14,Intermediate:22,Advanced:32,Elite:44},90:{Beginner:7,Novice:12,Intermediate:20,Advanced:29,Elite:40}},t2={15:{Beginner:55,Novice:80,Intermediate:111,Advanced:147,Elite:187},20:{Beginner:62,Novice:91,Intermediate:127,Advanced:168,Elite:214},25:{Beginner:64,Novice:93,Intermediate:130,Advanced:173,Elite:219},30:{Beginner:64,Novice:93,Intermediate:130,Advanced:173,Elite:219},35:{Beginner:64,Novice:93,Intermediate:130,Advanced:173,Elite:219},40:{Beginner:64,Novice:93,Intermediate:130,Advanced:173,Elite:219},45:{Beginner:61,Novice:89,Intermediate:123,Advanced:164,Elite:208},50:{Beginner:57,Novice:83,Intermediate:116,Advanced:154,Elite:195},55:{Beginner:53,Novice:77,Intermediate:107,Advanced:142,Elite:180},60:{Beginner:48,Novice:70,Intermediate:98,Advanced:130,Elite:165},65:{Beginner:44,Novice:63,Intermediate:88,Advanced:117,Elite:149},70:{Beginner:39,Novice:57,Intermediate:79,Advanced:105,Elite:134},75:{Beginner:35,Novice:51,Intermediate:71,Advanced:94,Elite:119},80:{Beginner:31,Novice:46,Intermediate:63,Advanced:84,Elite:107},85:{Beginner:28,Novice:41,Intermediate:57,Advanced:75,Elite:96},90:{Beginner:25,Novice:37,Intermediate:51,Advanced:68,Elite:86}},n2={15:{Beginner:25,Novice:41,Intermediate:62,Advanced:88,Elite:116},20:{Beginner:29,Novice:47,Intermediate:71,Advanced:100,Elite:132},25:{Beginner:30,Novice:48,Intermediate:73,Advanced:103,Elite:136},30:{Beginner:30,Novice:48,Intermediate:73,Advanced:103,Elite:136},35:{Beginner:30,Novice:48,Intermediate:73,Advanced:103,Elite:136},40:{Beginner:30,Novice:48,Intermediate:73,Advanced:103,Elite:136},45:{Beginner:28,Novice:46,Intermediate:69,Advanced:97,Elite:129},50:{Beginner:26,Novice:43,Intermediate:65,Advanced:92,Elite:121},55:{Beginner:24,Novice:40,Intermediate:60,Advanced:85,Elite:112},60:{Beginner:22,Novice:36,Intermediate:55,Advanced:77,Elite:102},65:{Beginner:20,Novice:33,Intermediate:50,Advanced:70,Elite:92},70:{Beginner:18,Novice:29,Intermediate:44,Advanced:63,Elite:83},75:{Beginner:16,Novice:26,Intermediate:40,Advanced:56,Elite:74},80:{Beginner:14,Novice:24,Intermediate:36,Advanced:50,Elite:66},85:{Beginner:13,Novice:21,Intermediate:32,Advanced:45,Elite:59},90:{Beginner:12,Novice:19,Intermediate:29,Advanced:40,Elite:54}},a2={15:{Beginner:67,Novice:95,Intermediate:130,Advanced:170,Elite:213},20:{Beginner:76,Novice:109,Intermediate:148,Advanced:194,Elite:244},25:{Beginner:78,Novice:112,Intermediate:152,Advanced:200,Elite:250},30:{Beginner:78,Novice:112,Intermediate:152,Advanced:200,Elite:250},35:{Beginner:78,Novice:112,Intermediate:152,Advanced:200,Elite:250},40:{Beginner:78,Novice:112,Intermediate:152,Advanced:200,Elite:250},45:{Beginner:74,Novice:106,Intermediate:145,Advanced:189,Elite:238},50:{Beginner:70,Novice:99,Intermediate:136,Advanced:178,Elite:223},55:{Beginner:65,Novice:92,Intermediate:125,Advanced:164,Elite:206},60:{Beginner:59,Novice:84,Intermediate:115,Advanced:150,Elite:188},65:{Beginner:53,Novice:76,Intermediate:103,Advanced:135,Elite:170},70:{Beginner:48,Novice:68,Intermediate:93,Advanced:122,Elite:153},75:{Beginner:43,Novice:61,Intermediate:83,Advanced:109,Elite:136},80:{Beginner:38,Novice:54,Intermediate:74,Advanced:97,Elite:122},85:{Beginner:34,Novice:49,Intermediate:67,Advanced:87,Elite:109},90:{Beginner:31,Novice:44,Intermediate:60,Advanced:79,Elite:99}},l2={15:{Beginner:32,Novice:51,Intermediate:74,Advanced:102,Elite:133},20:{Beginner:37,Novice:58,Intermediate:85,Advanced:117,Elite:153},25:{Beginner:38,Novice:60,Intermediate:87,Advanced:120,Elite:157},30:{Beginner:38,Novice:60,Intermediate:87,Advanced:120,Elite:157},35:{Beginner:38,Novice:60,Intermediate:87,Advanced:120,Elite:157},40:{Beginner:38,Novice:60,Intermediate:87,Advanced:120,Elite:157},45:{Beginner:36,Novice:57,Intermediate:83,Advanced:114,Elite:149},50:{Beginner:34,Novice:53,Intermediate:78,Advanced:107,Elite:139},55:{Beginner:31,Novice:49,Intermediate:72,Advanced:99,Elite:129},60:{Beginner:29,Novice:45,Intermediate:66,Advanced:90,Elite:118},65:{Beginner:26,Novice:41,Intermediate:59,Advanced:82,Elite:106},70:{Beginner:23,Novice:36,Intermediate:53,Advanced:73,Elite:95},75:{Beginner:21,Novice:33,Intermediate:48,Advanced:66,Elite:85},80:{Beginner:19,Novice:29,Intermediate:43,Advanced:59,Elite:76},85:{Beginner:17,Novice:26,Intermediate:38,Advanced:53,Elite:68},90:{Beginner:15,Novice:23,Intermediate:34,Advanced:47,Elite:62}},s2={15:{Beginner:33,Novice:49,Intermediate:70,Advanced:94,Elite:120},20:{Beginner:37,Novice:56,Intermediate:80,Advanced:107,Elite:138},25:{Beginner:38,Novice:58,Intermediate:82,Advanced:110,Elite:141},30:{Beginner:38,Novice:58,Intermediate:82,Advanced:110,Elite:141},35:{Beginner:38,Novice:58,Intermediate:82,Advanced:110,Elite:141},40:{Beginner:38,Novice:58,Intermediate:82,Advanced:110,Elite:141},45:{Beginner:36,Novice:55,Intermediate:78,Advanced:105,Elite:134},50:{Beginner:34,Novice:51,Intermediate:73,Advanced:98,Elite:126},55:{Beginner:32,Novice:47,Intermediate:67,Advanced:91,Elite:117},60:{Beginner:29,Novice:43,Intermediate:61,Advanced:83,Elite:106},65:{Beginner:26,Novice:39,Intermediate:56,Advanced:75,Elite:96},70:{Beginner:23,Novice:35,Intermediate:50,Advanced:67,Elite:86},75:{Beginner:21,Novice:31,Intermediate:45,Advanced:60,Elite:77},80:{Beginner:19,Novice:28,Intermediate:40,Advanced:54,Elite:69},85:{Beginner:17,Novice:25,Intermediate:36,Advanced:48,Elite:62},90:{Beginner:15,Novice:23,Intermediate:32,Advanced:43,Elite:56}},i2={15:{Beginner:16,Novice:26,Intermediate:39,Advanced:54,Elite:71},20:{Beginner:19,Novice:30,Intermediate:45,Advanced:62,Elite:81},25:{Beginner:19,Novice:31,Intermediate:46,Advanced:64,Elite:83},30:{Beginner:19,Novice:31,Intermediate:46,Advanced:64,Elite:83},35:{Beginner:19,Novice:31,Intermediate:46,Advanced:64,Elite:83},40:{Beginner:19,Novice:31,Intermediate:46,Advanced:64,Elite:83},45:{Beginner:18,Novice:29,Intermediate:43,Advanced:60,Elite:79},50:{Beginner:17,Novice:27,Intermediate:41,Advanced:57,Elite:74},55:{Beginner:16,Novice:25,Intermediate:38,Advanced:52,Elite:69},60:{Beginner:15,Novice:23,Intermediate:34,Advanced:48,Elite:63},65:{Beginner:13,Novice:21,Intermediate:31,Advanced:43,Elite:57},70:{Beginner:12,Novice:19,Intermediate:28,Advanced:39,Elite:51},75:{Beginner:11,Novice:17,Intermediate:25,Advanced:35,Elite:45},80:{Beginner:9,Novice:15,Intermediate:22,Advanced:31,Elite:41},85:{Beginner:8,Novice:13,Intermediate:20,Advanced:28,Elite:36},90:{Beginner:8,Novice:12,Intermediate:18,Advanced:25,Elite:33}},r2={50:{Beginner:15,Novice:25,Intermediate:38,Advanced:53,Elite:71},55:{Beginner:18,Novice:29,Intermediate:42,Advanced:59,Elite:77},60:{Beginner:21,Novice:32,Intermediate:47,Advanced:64,Elite:84},65:{Beginner:24,Novice:36,Intermediate:52,Advanced:70,Elite:90},70:{Beginner:27,Novice:40,Intermediate:56,Advanced:75,Elite:95},75:{Beginner:30,Novice:43,Intermediate:60,Advanced:80,Elite:101},80:{Beginner:33,Novice:47,Intermediate:64,Advanced:84,Elite:106},85:{Beginner:36,Novice:50,Intermediate:68,Advanced:89,Elite:111},90:{Beginner:39,Novice:54,Intermediate:72,Advanced:93,Elite:116},95:{Beginner:41,Novice:57,Intermediate:76,Advanced:97,Elite:121},100:{Beginner:44,Novice:60,Intermediate:79,Advanced:102,Elite:125},105:{Beginner:47,Novice:63,Intermediate:83,Advanced:106,Elite:130},110:{Beginner:49,Novice:66,Intermediate:86,Advanced:109,Elite:134},115:{Beginner:52,Novice:69,Intermediate:90,Advanced:113,Elite:138},120:{Beginner:54,Novice:72,Intermediate:93,Advanced:117,Elite:142},125:{Beginner:57,Novice:75,Intermediate:96,Advanced:120,Elite:146},130:{Beginner:59,Novice:77,Intermediate:99,Advanced:124,Elite:150},135:{Beginner:61,Novice:80,Intermediate:102,Advanced:127,Elite:154},140:{Beginner:64,Novice:83,Intermediate:105,Advanced:131,Elite:157}},c2={15:{Beginner:25,Novice:38,Intermediate:55,Advanced:74,Elite:96},20:{Beginner:29,Novice:44,Intermediate:63,Advanced:85,Elite:109},25:{Beginner:30,Novice:45,Intermediate:64,Advanced:87,Elite:112},30:{Beginner:30,Novice:45,Intermediate:64,Advanced:87,Elite:112},35:{Beginner:30,Novice:45,Intermediate:64,Advanced:87,Elite:112},40:{Beginner:30,Novice:45,Intermediate:64,Advanced:87,Elite:112},45:{Beginner:28,Novice:43,Intermediate:61,Advanced:83,Elite:107},50:{Beginner:27,Novice:40,Intermediate:57,Advanced:78,Elite:100},55:{Beginner:25,Novice:37,Intermediate:53,Advanced:72,Elite:92},60:{Beginner:22,Novice:34,Intermediate:48,Advanced:66,Elite:84},65:{Beginner:20,Novice:31,Intermediate:44,Advanced:59,Elite:76},70:{Beginner:18,Novice:27,Intermediate:39,Advanced:53,Elite:68},75:{Beginner:16,Novice:25,Intermediate:35,Advanced:48,Elite:61},80:{Beginner:15,Novice:22,Intermediate:31,Advanced:43,Elite:55},85:{Beginner:13,Novice:20,Intermediate:28,Advanced:38,Elite:49},90:{Beginner:12,Novice:18,Intermediate:25,Advanced:34,Elite:44}},o2={40:{Beginner:7,Novice:14,Intermediate:23,Advanced:35,Elite:48},45:{Beginner:8,Novice:16,Intermediate:25,Advanced:38,Elite:52},50:{Beginner:10,Novice:17,Intermediate:28,Advanced:40,Elite:55},55:{Beginner:11,Novice:19,Intermediate:30,Advanced:43,Elite:58},60:{Beginner:12,Novice:21,Intermediate:32,Advanced:45,Elite:60},65:{Beginner:13,Novice:22,Intermediate:34,Advanced:48,Elite:63},70:{Beginner:15,Novice:24,Intermediate:35,Advanced:50,Elite:65},75:{Beginner:16,Novice:25,Intermediate:37,Advanced:52,Elite:68},80:{Beginner:17,Novice:26,Intermediate:39,Advanced:54,Elite:70},85:{Beginner:18,Novice:28,Intermediate:40,Advanced:55,Elite:72},90:{Beginner:19,Novice:29,Intermediate:42,Advanced:57,Elite:74},95:{Beginner:20,Novice:30,Intermediate:43,Advanced:59,Elite:76},100:{Beginner:21,Novice:31,Intermediate:45,Advanced:61,Elite:78},105:{Beginner:22,Novice:32,Intermediate:46,Advanced:62,Elite:80},110:{Beginner:23,Novice:34,Intermediate:47,Advanced:64,Elite:81},115:{Beginner:23,Novice:35,Intermediate:49,Advanced:65,Elite:83},120:{Beginner:24,Novice:36,Intermediate:50,Advanced:66,Elite:85}},u2={15:{Beginner:11,Novice:19,Intermediate:29,Advanced:41,Elite:55},20:{Beginner:12,Novice:21,Intermediate:33,Advanced:47,Elite:63},25:{Beginner:13,Novice:22,Intermediate:34,Advanced:48,Elite:65},30:{Beginner:13,Novice:22,Intermediate:34,Advanced:48,Elite:65},35:{Beginner:13,Novice:22,Intermediate:34,Advanced:48,Elite:65},40:{Beginner:13,Novice:22,Intermediate:34,Advanced:48,Elite:65},45:{Beginner:12,Novice:21,Intermediate:32,Advanced:46,Elite:62},50:{Beginner:11,Novice:19,Intermediate:30,Advanced:43,Elite:58},55:{Beginner:11,Novice:18,Intermediate:28,Advanced:40,Elite:53},60:{Beginner:10,Novice:16,Intermediate:25,Advanced:36,Elite:49},65:{Beginner:9,Novice:15,Intermediate:23,Advanced:33,Elite:44},70:{Beginner:8,Novice:13,Intermediate:21,Advanced:30,Elite:40},75:{Beginner:7,Novice:12,Intermediate:18,Advanced:26,Elite:35},80:{Beginner:6,Novice:11,Intermediate:16,Advanced:24,Elite:32},85:{Beginner:6,Novice:10,Intermediate:15,Advanced:21,Elite:28},90:{Beginner:5,Novice:9,Intermediate:13,Advanced:19,Elite:26}},d2={"10-12":{100:26,90:24,80:22,70:20,60:18,50:16,40:14,30:12,20:10,10:8,0:6},"13-17":{100:36,90:34,80:32,70:30,60:28,50:26,40:24,30:22,20:20,10:18,0:16},"18-30":{100:42,90:40,80:38,70:36,60:34,50:32,40:30,30:28,20:26,10:24,0:22},"31-40":{100:40,90:38,80:36,70:34,60:32,50:30,40:28,30:26,20:24,10:22,0:20},"41-50":{100:38,90:36,80:34,70:32,60:30,50:28,40:26,30:24,20:22,10:20,0:18},"51-60":{100:36,90:34,80:32,70:30,60:28,50:26,40:24,30:22,20:20,10:18,0:16},"61-70":{100:34,90:32,80:30,70:28,60:26,50:24,40:22,30:20,20:18,10:16,0:14},"71-80":{100:32,90:30,80:28,70:26,60:24,50:22,40:20,30:18,20:16,10:14,0:12}},f2={"10-12":{100:44,90:42,80:40,70:38,60:36,50:34,40:32,30:30,20:28,10:26,0:24},"13-17":{100:46,90:44,80:42,70:40,60:38,50:36,40:34,30:32,20:30,10:28,0:26},"18-30":{100:48,90:46,80:44,70:42,60:40,50:38,40:36,30:34,20:32,10:30,0:28},"31-40":{100:46,90:44,80:42,70:40,60:38,50:36,40:34,30:32,20:30,10:28,0:26},"41-50":{100:44,90:42,80:40,70:38,60:36,50:34,40:32,30:30,20:28,10:26,0:24},"51-60":{100:42,90:40,80:38,70:36,60:34,50:32,40:30,30:28,20:26,10:24,0:22},"61-70":{100:40,90:38,80:36,70:34,60:32,50:30,40:28,30:26,20:24,10:22,0:20},"71-80":{100:38,90:36,80:34,70:32,60:30,50:28,40:26,30:24,20:22,10:20,0:18}},h2={"10-12":{100:18,90:17,80:16,70:15,60:14,50:13,40:12,30:11,20:10,10:9,0:8},"13-17":{100:24,90:23,80:22,70:21,60:20,50:19,40:18,30:17,20:16,10:15,0:14},"18-30":{100:28,90:27,80:26,70:25,60:24,50:23,40:22,30:21,20:20,10:19,0:18},"31-40":{100:27,90:26,80:25,70:24,60:23,50:22,40:21,30:20,20:19,10:18,0:17},"41-50":{100:26,90:25,80:24,70:23,60:22,50:21,40:20,30:19,20:18,10:17,0:16},"51-60":{100:25,90:24,80:23,70:22,60:21,50:20,40:19,30:18,20:17,10:16,0:15},"61-70":{100:24,90:23,80:22,70:21,60:20,50:19,40:18,30:17,20:16,10:15,0:14},"71-80":{100:22,90:21,80:20,70:19,60:18,50:17,40:16,30:15,20:14,10:13,0:12}},m2={"10-12":{100:38,90:36,80:34,70:32,60:30,50:28,40:26,30:24,20:22,10:20,0:18},"13-17":{100:40,90:38,80:36,70:34,60:32,50:30,40:28,30:26,20:24,10:22,0:20},"18-30":{100:42,90:40,80:38,70:36,60:34,50:32,40:30,30:28,20:26,10:24,0:22},"31-40":{100:40,90:38,80:36,70:34,60:32,50:30,40:28,30:26,20:24,10:22,0:20},"41-50":{100:38,90:36,80:34,70:32,60:30,50:28,40:26,30:24,20:22,10:20,0:18},"51-60":{100:36,90:34,80:32,70:30,60:28,50:26,40:24,30:22,20:20,10:18,0:16},"61-70":{100:34,90:32,80:30,70:28,60:26,50:24,40:22,30:20,20:18,10:16,0:14},"71-80":{100:32,90:30,80:28,70:26,60:24,50:22,40:20,30:18,20:16,10:14,0:12}},g2={"13-14":{100:2700,90:2400,80:2200,70:2100,60:2100},"15-16":{100:2800,90:2500,80:2300,70:2200,60:2200},"17-20":{100:3e3,90:2700,80:2500,70:2300,60:2300},"20-29":{100:2800,90:2400,80:2200,70:1600,60:1600},"30-39":{100:2700,90:2300,80:1900,70:1500,60:1500},"40-49":{100:2500,90:2100,80:1700,70:1400,60:1400},"50+":{100:2400,90:2e3,80:1600,70:1300,60:1300}},p2={"13-14":{100:2e3,90:1900,80:1600,70:1500,60:1500},"15-16":{100:2100,90:2e3,80:1700,70:1600,60:1600},"17-20":{100:2300,90:2100,80:1800,70:1700,60:1700},"20-29":{100:2700,90:2200,80:1800,70:1500,60:1500},"30-39":{100:2500,90:2e3,80:1700,70:1400,60:1400},"40-49":{100:2300,90:1900,80:1500,70:1200,60:1200},"50+":{100:2200,90:1700,80:1400,70:1100,60:1100}},v2={"12-15":{0:25,50:45,100:65},"16-20":{0:35,50:55,100:75},"21-30":{0:30,50:50,100:70},"31-40":{0:25,50:45,100:65},"41-50":{0:20,50:40,100:60},"51-60":{0:15,50:35,100:55},"61-70":{0:10,50:30,100:50},"71-80":{0:5,50:25,100:45}},x2={"12-15":{0:20,50:35,100:50},"16-20":{0:25,50:40,100:55},"21-30":{0:22,50:38,100:52},"31-40":{0:18,50:32,100:46},"41-50":{0:15,50:28,100:42},"51-60":{0:10,50:25,100:40},"61-70":{0:5,50:20,100:35},"71-80":{0:0,50:15,100:30}},y2={"12-15":{0:150,50:200,100:250},"16-20":{0:180,50:230,100:280},"21-30":{0:170,50:220,100:270},"31-40":{0:150,50:200,100:250},"41-50":{0:130,50:180,100:230},"51-60":{0:110,50:160,100:210},"61-70":{0:90,50:140,100:190},"71-80":{0:70,50:120,100:170}},b2={"12-15":{0:120,50:170,100:220},"16-20":{0:140,50:190,100:240},"21-30":{0:130,50:180,100:230},"31-40":{0:115,50:165,100:215},"41-50":{0:100,50:150,100:200},"51-60":{0:80,50:130,100:180},"61-70":{0:60,50:110,100:160},"71-80":{0:40,50:90,100:140}},N2={"12-15":{0:18,50:15,100:12},"16-20":{0:17,50:14,100:11},"21-30":{0:17,50:14,100:11},"31-40":{0:18,50:15,100:12},"41-50":{0:19,50:16,100:13},"51-60":{0:20,50:17,100:14},"61-70":{0:22,50:19,100:16},"71-80":{0:24,50:21,100:18}},S2={"12-15":{0:19,50:16,100:13},"16-20":{0:18,50:15,100:12},"21-30":{0:18,50:15,100:12},"31-40":{0:19,50:16,100:13},"41-50":{0:20,50:17,100:14},"51-60":{0:21,50:18,100:15},"61-70":{0:23,50:20,100:17},"71-80":{0:25,50:22,100:19}};function qm({onComplete:r,clearTestData:i}){var I,he,Ne,Be,Xe,Ce,ke,rt,mt,L,ae,ye,je,xe,re,pe,Q,M,le,ie,fe,He,dt,Qe,Ve,Ht,Tt,Vs,Ys,Fs,ba,Na,mn,Sa,Fn,Xs,Bl,Ul,Va,Xn,Qs,Cl,Ml,Ya,Fa,Dl,Ks,rn,gt,St,wn,Xa,Zs,$s,kl,Qn,Qa,Tn,_n,Kn;const{userData:u,setUserData:c}=sn(),d=hn(),{gender:f,height:m,weight:p,age:v}=u,[y,S]=E.useState("exercises"),[j,T]=E.useState({weight:((Ne=(he=(I=u.testInputs)==null?void 0:I.strength)==null?void 0:he.benchPress)==null?void 0:Ne.weight)||"",reps:((Ce=(Xe=(Be=u.testInputs)==null?void 0:Be.strength)==null?void 0:Xe.benchPress)==null?void 0:Ce.reps)||"",max:((mt=(rt=(ke=u.testInputs)==null?void 0:ke.strength)==null?void 0:rt.benchPress)==null?void 0:mt.max)||null,score:((ye=(ae=(L=u.testInputs)==null?void 0:L.strength)==null?void 0:ae.benchPress)==null?void 0:ye.score)||null}),[O,_]=E.useState({weight:((re=(xe=(je=u.testInputs)==null?void 0:je.strength)==null?void 0:xe.squat)==null?void 0:re.weight)||"",reps:((M=(Q=(pe=u.testInputs)==null?void 0:pe.strength)==null?void 0:Q.squat)==null?void 0:M.reps)||"",max:((fe=(ie=(le=u.testInputs)==null?void 0:le.strength)==null?void 0:ie.squat)==null?void 0:fe.max)||null,score:((Qe=(dt=(He=u.testInputs)==null?void 0:He.strength)==null?void 0:dt.squat)==null?void 0:Qe.score)||null}),[z,te]=E.useState({weight:((Tt=(Ht=(Ve=u.testInputs)==null?void 0:Ve.strength)==null?void 0:Ht.deadlift)==null?void 0:Tt.weight)||"",reps:((Fs=(Ys=(Vs=u.testInputs)==null?void 0:Vs.strength)==null?void 0:Ys.deadlift)==null?void 0:Fs.reps)||"",max:((mn=(Na=(ba=u.testInputs)==null?void 0:ba.strength)==null?void 0:Na.deadlift)==null?void 0:mn.max)||null,score:((Xs=(Fn=(Sa=u.testInputs)==null?void 0:Sa.strength)==null?void 0:Fn.deadlift)==null?void 0:Xs.score)||null}),[ee,ue]=E.useState({weight:((Va=(Ul=(Bl=u.testInputs)==null?void 0:Bl.strength)==null?void 0:Ul.latPulldown)==null?void 0:Va.weight)||"",reps:((Cl=(Qs=(Xn=u.testInputs)==null?void 0:Xn.strength)==null?void 0:Qs.latPulldown)==null?void 0:Cl.reps)||"",max:((Fa=(Ya=(Ml=u.testInputs)==null?void 0:Ml.strength)==null?void 0:Ya.latPulldown)==null?void 0:Fa.max)||null,score:((rn=(Ks=(Dl=u.testInputs)==null?void 0:Dl.strength)==null?void 0:Ks.latPulldown)==null?void 0:rn.score)||null}),[q,$]=E.useState({weight:((wn=(St=(gt=u.testInputs)==null?void 0:gt.strength)==null?void 0:St.shoulderPress)==null?void 0:wn.weight)||"",reps:(($s=(Zs=(Xa=u.testInputs)==null?void 0:Xa.strength)==null?void 0:Zs.shoulderPress)==null?void 0:$s.reps)||"",max:((Qa=(Qn=(kl=u.testInputs)==null?void 0:kl.strength)==null?void 0:Qn.shoulderPress)==null?void 0:Qa.max)||null,score:((Kn=(_n=(Tn=u.testInputs)==null?void 0:Tn.strength)==null?void 0:_n.shoulderPress)==null?void 0:Kn.score)||null}),[H,k]=E.useState(!1),X=E.useRef(null),P=E.useCallback(me=>{const Ae=()=>{var ct,Ct;const qe=((ct=u.testInputs)==null?void 0:ct.strength)||{},Ot=((Ct=me.testInputs)==null?void 0:Ct.strength)||{};JSON.stringify(qe)!==JSON.stringify(Ot)?(console.log("💾 測試輸入變化，更新用戶數據"),c(me)):console.log("⏭️ 測試輸入無變化，跳過更新")};X.current&&clearTimeout(X.current),X.current=setTimeout(Ae,3e3)},[c,u.testInputs]);E.useEffect(()=>{const me={...u.testInputs,strength:{benchPress:{weight:j.weight,reps:j.reps,max:j.max,score:j.score},squat:{weight:O.weight,reps:O.reps,max:O.max,score:O.score},deadlift:{weight:z.weight,reps:z.reps,max:z.max,score:z.score},latPulldown:{weight:ee.weight,reps:ee.reps,max:ee.max,score:ee.score},shoulderPress:{weight:q.weight,reps:q.reps,max:q.max,score:q.score}}},Ae={...u,testInputs:me};return P(Ae),()=>{X.current&&clearTimeout(X.current)}},[j,O,z,ee,q,u,P]);const ne=(me,Ae)=>{const{Beginner:qe,Novice:Ot,Intermediate:Ke,Advanced:ct,Elite:Ct}=Ae;return me<qe?0:me>=Ct?100:me>=ct?80+20*(me-ct)/(Ct-ct):me>=Ke?60+20*(me-Ke)/(ct-Ke):me>=Ot?40+20*(me-Ot)/(Ke-Ot):me>=qe?20+20*(me-qe)/(Ot-qe):0},se=E.useMemo(()=>{const me=f==="male"||f==="男性";return{benchPress:{bodyweight:me?Fv:Xv,age:me?Wv:e2},squat:{bodyweight:me?Qv:Kv,age:me?t2:n2},deadlift:{bodyweight:me?Zv:$v,age:me?a2:l2},latPulldown:{bodyweight:me?Jv:Pv,age:me?s2:i2},shoulderPress:{bodyweight:me?r2:o2,age:me?c2:u2}}},[f]),de=E.useCallback((me,Ae,qe,Ot)=>{if(!me||!Ae)return alert("請輸入重量和次數！");const Ke=parseFloat(me),ct=parseFloat(Ae),Ct=parseFloat(u.weight),cn=parseFloat(v);if(!Ct||!cn)return alert("請確保已輸入有效的體重和年齡！");if(ct>12){alert("可完成次數不得超過12次，請重新輸入！"),qe($t=>({...$t,reps:""}));return}const Zn=Ke/(1.0278-.0278*ct),Mt=se[Ot],gn=Object.keys(Mt.bodyweight).map(Number),Ka=Object.keys(Mt.age).map(Number),on=gn.reduce(($t,xt)=>Math.abs(xt-Ct)<Math.abs($t-Ct)?xt:$t),zl=Ka.reduce(($t,xt)=>Math.abs(xt-cn)<Math.abs($t-cn)?xt:$t),Js=Mt.bodyweight[on],$n=Mt.age[zl],Ll=ne(Zn,Js),Il=ne(Zn,$n),vr=((Ll+Il)/2).toFixed(2);qe($t=>({...$t,max:Zn.toFixed(2),score:vr}))},[se,u.weight,v]);E.useEffect(()=>{f&&u.weight&&v&&[{key:"benchPress",state:j,setState:T},{key:"squat",state:O,setState:_},{key:"deadlift",state:z,setState:te},{key:"latPulldown",state:ee,setState:ue},{key:"shoulderPress",state:q,setState:$}].forEach(({key:Ae,state:qe,setState:Ot})=>{qe.weight&&qe.reps&&!qe.score&&de(qe.weight,qe.reps,Ot,Ae)})},[f,u.weight,v,j,O,z,ee,q,de]);const Te=(me,Ae)=>{const qe=Ae==="男性"||Ae.toLowerCase()==="male"?"male":"female";return me>=90?qe==="male"?"頂尖表現！你已達建力、舉重專項運動員水平！接受掌聲吧！":"我願稱你為神力女超人!":me>=80?qe==="male"?"萬里挑一！你已達到職業運動員水平，繼續稱霸！":"太驚艷了！你應該是朋友圈裡最強的吧？超棒的！":me>=70?qe==="male"?"超越常人！許多國手的力量指標也落在這，相當厲害!":"真的很傑出！表現超棒，繼續保持哦！":me>=60?qe==="male"?"很強！業餘運動愛好者中的佼佼者，再拼一把！":"表現超棒！超越大多數人，你很厲害！":me>=50?qe==="male"?"不錯的水準！訓練痕跡肉眼可見！":"很棒的水準！再努力一點，你會更好！":me>=40?qe==="male"?"已經有基礎了，繼續進步，一切大有可為!":"有規律良好的運動習慣了!再接再厲":qe==="male"?"兄弟，該衝了！全力以赴，突破自己！":"親愛的，還有進步空間，繼續加油哦！"},be=E.useMemo(()=>[{name:"臥推",value:parseFloat(j.score)||0},{name:"深蹲",value:parseFloat(O.score)||0},{name:"硬舉",value:parseFloat(z.score)||0},{name:"滑輪下拉",value:parseFloat(ee.score)||0},{name:"站姿肩推",value:parseFloat(q.score)||0}],[j.score,O.score,z.score,ee.score,q.score]),ce=[j.score,O.score,z.score,ee.score,q.score].filter(me=>me!==null),Z=ce.length>0?(ce.reduce((me,Ae)=>me+parseFloat(Ae),0)/ce.length).toFixed(2):null,x=async()=>{if(!Z)return alert("請至少完成一項評測！");try{const me={...u.scores,strength:parseFloat(Z)};await c(qe=>({...qe,scores:me,ladderScore:qe.ladderScore||0}));const Ae={squat:O.max?{weight:O.weight,reps:O.reps,max:O.max,score:O.score}:null,benchPress:j.max?{weight:j.weight,reps:j.reps,max:j.max,score:j.score}:null,deadlift:z.max?{weight:z.weight,reps:z.reps,max:z.max,score:z.score}:null,latPulldown:ee.max?{weight:ee.weight,reps:ee.reps,max:ee.max,score:ee.score}:null,shoulderPress:q.max?{weight:q.weight,reps:q.reps,max:q.max,score:q.score}:null,averageScore:parseFloat(Z)};r&&r(Ae),setTimeout(()=>{d("/user-info",{state:{from:"/strength"}})},500)}catch(me){console.error("提交失敗:",me),alert("更新用戶數據或導航失敗，請稍後再試！")}},b=[{range:"90~100",description:"專業舉重、健力專項運動員、大力士水平，如魔山、輪子哥、阿諾、John Cena"},{range:"80~90",description:"職業運動員水平；職業格鬥、橄欖球運動員，如巨石強森、GSP(UFC次中量級世界冠軍)"},{range:"70~80",description:"國手水平、球類運動員，如大谷翔平、LBJ、傑森史塔森"},{range:"60~70",description:"業餘運動愛好者中的高手，如休傑克曼、克里斯漢斯沃、亨利卡維爾"},{range:"50~60",description:"中階運動愛好者"},{range:"40~50",description:"開始步入軌道"},{range:"40分以下",description:"初學者"}],D=[{level:"初階-運動習慣培養中",score:20,color:"#FF6B6B"},{level:"入門-業餘運動愛好者",score:40,color:"#FFA726"},{level:"中等-訓練痕跡肉眼可見",score:60,color:"#FFEE58"},{level:"高階-職業運動員等級",score:80,color:"#66BB6A"},{level:"精英-舉重、健力運動員",score:100,color:"#42A5F5"}],J=[{key:"benchPress",name:"平板臥推",state:j,setState:T},{key:"squat",name:"深蹲",state:O,setState:_},{key:"deadlift",name:"硬舉",state:z,setState:te},{key:"latPulldown",name:"滑輪下拉",state:ee,setState:ue},{key:"shoulderPress",name:"站姿肩推",state:q,setState:$}],[W,Y]=E.useState(new Set),G=me=>{const{key:Ae,name:qe,icon:Ot,state:Ke,setState:ct}=me,Ct=Ke.score!==null,cn=W.has(Ae),Zn=()=>{const Mt=new Set(W);cn?Mt.delete(Ae):Mt.add(Ae),Y(Mt)};return s.jsxs("div",{className:`exercise-card ${Ct?"completed":""}`,children:[s.jsxs("div",{className:"exercise-header",onClick:Zn,children:[s.jsxs("div",{className:"exercise-header-left",children:[s.jsx("span",{className:"exercise-icon",children:Ot}),s.jsx("h3",{className:"exercise-name",children:qe})]}),s.jsxs("div",{className:"exercise-header-right",children:[Ct&&s.jsx("span",{className:"score-badge",children:Ke.score}),s.jsx("span",{className:`expand-arrow ${cn?"expanded":""}`,children:cn?"▲":"▼"})]})]}),cn&&s.jsxs("div",{className:"exercise-content",children:[s.jsxs("div",{className:"exercise-inputs",children:[s.jsxs("div",{className:"input-group",children:[s.jsx("label",{htmlFor:`${Ae}Weight`,children:"重量 (kg)"}),s.jsx("input",{id:`${Ae}Weight`,type:"number",placeholder:"重量",value:Ke.weight,onChange:Mt=>ct(gn=>({...gn,weight:Mt.target.value})),className:"input-field"})]}),s.jsxs("div",{className:"input-group",children:[s.jsx("label",{htmlFor:`${Ae}Reps`,children:"次數"}),s.jsx("input",{id:`${Ae}Reps`,type:"number",placeholder:"次數",value:Ke.reps,onChange:Mt=>ct(gn=>({...gn,reps:Mt.target.value})),className:"input-field"})]}),s.jsx("button",{onClick:()=>de(Ke.weight,Ke.reps,ct,Ae),className:"calculate-btn",disabled:!Ke.weight||!Ke.reps,children:"計算"})]}),Ke.max&&s.jsxs("div",{className:"exercise-result",children:[s.jsxs("p",{className:"max-strength",children:["最大力量: ",Ke.max," kg"]}),Ke.score&&s.jsxs("p",{className:"score-display",children:["分數: ",Ke.score]})]})]})]},Ae)};return s.jsxs("div",{className:"strength-container",children:[s.jsxs("div",{className:"strength-header",children:[s.jsx("h1",{className:"strength-title",children:"💪 力量評測"}),s.jsx("p",{className:"strength-safety-note",children:"挑戰重量時記得綁上腰帶和手套，注意安全喔"})]}),s.jsxs("div",{className:"tab-navigation",children:[s.jsx("button",{className:`tab-btn ${y==="exercises"?"active":""}`,onClick:()=>S("exercises"),children:"🏋️ 評測項目"}),s.jsx("button",{className:`tab-btn ${y==="standards"?"active":""}`,onClick:()=>S("standards"),children:"📋 評測標準"})]}),y==="exercises"&&s.jsxs("div",{className:"exercises-tab",children:[s.jsx("div",{className:"exercises-grid",children:J.map(G)}),Z&&s.jsxs("div",{className:"results-section",children:[s.jsxs("div",{className:"radar-chart-card",children:[s.jsx("div",{className:"corner-decoration top-left"}),s.jsx("div",{className:"corner-decoration top-right"}),s.jsx("div",{className:"corner-decoration bottom-left"}),s.jsx("div",{className:"corner-decoration bottom-right"}),s.jsx("h3",{children:"📈 力量分佈圖"}),s.jsx(ur,{width:"100%",height:300,children:s.jsxs(om,{data:be,children:[s.jsx(um,{gridType:"polygon",stroke:"rgba(129, 216, 208, 0.25)",strokeWidth:2,strokeDasharray:"4 4"}),s.jsx(dm,{dataKey:"name",tick:{fontSize:13,fill:"#2d3748",fontWeight:700}}),s.jsx(fm,{angle:90,domain:[0,100],tick:{fontSize:12,fill:"#2d3748",fontWeight:600}}),s.jsx(hm,{name:"分數",dataKey:"value",stroke:"#81D8D0",fill:"url(#strengthTiffanyGradient)",fillOpacity:.8,strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("defs",{children:s.jsxs("linearGradient",{id:"strengthTiffanyGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"#81D8D0",stopOpacity:.9}),s.jsx("stop",{offset:"50%",stopColor:"#5F9EA0",stopOpacity:.7}),s.jsx("stop",{offset:"100%",stopColor:"#81D8D0",stopOpacity:.6})]})})]})})]}),s.jsxs("div",{className:"score-breakdown-card",children:[s.jsx("h3",{children:"📊 分數詳情"}),s.jsx("div",{className:"score-breakdown",children:J.map(me=>s.jsxs("div",{className:"score-item",children:[s.jsx("span",{className:"score-label",children:me.name}),s.jsx("span",{className:"score-value",children:me.state.score||"未測試"})]},me.key))}),s.jsxs("div",{className:"average-score-display",children:[s.jsxs("p",{className:"average-score",children:["平均分數: ",Z]}),s.jsx("p",{className:"average-comment",children:Te(Z,f)})]})]})]})]}),y==="standards"&&s.jsxs("div",{className:"standards-tab",children:[s.jsxs("div",{className:"standards-content",children:[s.jsx("p",{children:"我們的評測標準基於 Strength Level 用戶提供的超過 1.34 億次舉重數據，涵蓋男女標準，適用於臥推、深蹲、硬舉、肩推等多項健身動作。"}),s.jsxs("p",{className:"source-link",children:["來源：",s.jsx("a",{href:"https://strengthlevel.com/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"https://strengthlevel.com/"})]})]}),s.jsxs("div",{className:"score-levels-table",children:[s.jsx("h3",{children:"分數等級"}),s.jsx("div",{className:"levels-container",children:D.map((me,Ae)=>s.jsxs("div",{className:"level-item",children:[s.jsxs("div",{className:"level-header",children:[s.jsx("span",{className:"level-name",children:me.level}),s.jsx("span",{className:"level-score",children:me.score})]}),s.jsx("div",{className:"level-bar-container",children:s.jsx("div",{className:"level-bar",style:{width:`${me.score}%`,background:`linear-gradient(to right, ${me.color}dd, ${me.color})`}})})]},Ae))})]}),s.jsxs("div",{className:"score-table",children:[s.jsx("h3",{children:"分數說明"}),s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"分數範圍"}),s.jsx("th",{children:"說明"})]})}),s.jsx("tbody",{children:b.map((me,Ae)=>s.jsxs("tr",{children:[s.jsx("td",{children:me.range}),s.jsx("td",{children:me.description})]},Ae))})]})]})]}),s.jsx("div",{className:"submit-section",children:s.jsx("button",{onClick:x,className:"submit-btn",disabled:!Z,children:Z?"✅ 提交並返回總覽":"請至少完成一項評測"})})]})}qm.propTypes={onComplete:ze.func,clearTestData:ze.func};function Gm({onComplete:r,clearTestData:i}){var q,$;const{userData:u,setUserData:c,saveUserData:d}=sn(),f=hn(),{age:m,gender:p}=u,[v,y]=E.useState((($=(q=u.testInputs)==null?void 0:q.cardio)==null?void 0:$.distance)||""),[S,j]=E.useState(null),[T,O]=E.useState(!1);E.useEffect(()=>{var H;if(v){const k={...u.testInputs,cardio:{...(H=u.testInputs)==null?void 0:H.cardio,distance:v}};c(X=>({...X,testInputs:k}))}},[v]);const _=H=>{if(!H)return null;const k=parseInt(H);return k>=13&&k<=14?"13-14":k>=15&&k<=16?"15-16":k>=17&&k<=20?"17-20":k>=20&&k<=29?"20-29":k>=30&&k<=39?"30-39":k>=40&&k<=49?"40-49":k>=50?"50+":null},z=(H,k)=>{const X=k[60],P=k[100];return H<=0?0:H<=X?Math.round(H/X*60*100)/100:H>=P?100:Math.round((60+(H-X)/(P-X)*40)*100)/100},te=(H,k)=>{const X=k==="男性"||k.toLowerCase()==="male"?"male":"female",P=Math.floor(H/10)*10;return{male:{0:"兄弟，該動起來了！全力衝刺吧！",10:"還不夠熱血！再加把勁，衝上去！",20:"起步了！再加速，展現你的實力！",30:"進步中！再拼一點，突破極限吧！",40:"不錯！再猛一點，超越自己！",50:"很棒了！再衝刺，成為王者吧！",60:"強者氣勢！再加速，稱霸全場！",70:"超強！熱血沸騰，繼續衝刺！",80:"頂尖表現！再拼，成為傳說！",90:"無敵了！你是真正的王者，保持！",100:"無敵了！你是真正的王者，保持！"},female:{0:"親愛的，別氣餒，慢慢進步哦！",10:"再努力一點，你會更好的，加油！",20:"小進步了！繼續加油，你很棒！",30:"進步了呢！再努力一點，會更好哦！",40:"很棒了！再加把勁，你會更棒的！",50:"表現很好！再努力一點，超棒的！",60:"好厲害！繼續保持，你很棒哦！",70:"真的很棒！保持下去，你最棒了！",80:"太厲害了！繼續努力，你超棒的！",90:"完美表現！超棒的你，繼續保持！",100:"完美表現！超棒的你，繼續保持！"}}[X][P]||"加油！"},ee=()=>{if(!v||!m||!p){alert("請確保已在用戶信息中輸入年齡和性別，並在此輸入跑步距離！");return}const H=parseFloat(v),k=_(m);if(!H||!k){alert("請輸入有效的跑步距離和年齡！");return}const ne=((p==="男性"||p.toLowerCase()==="male"?"male":"female")==="male"?g2:p2)[k];if(!ne){alert("無法找到對應的評測標準，請檢查年齡和性別！");return}const se=z(H,ne);j(se),console.log("Cardio.js - 計算心肺耐力分數:",se,"距離:",H,"年齡段:",k)},ue=async()=>{if(!S){alert("請先計算心肺耐力分數！");return}const H=sessionStorage.getItem("guestMode")==="true";try{const k={...u.scores,cardio:parseFloat(S)},X={...u,scores:k};if(c({...X,ladderScore:u.ladderScore||0}),!H&&!await d(X))throw new Error("保存數據失敗");const P={distance:parseFloat(v),score:parseFloat(S)};r&&typeof r=="function"&&r(P),setTimeout(()=>{f("/user-info",{state:{from:"/cardio"}})},100)}catch(k){console.error("提交失敗:",k),H||alert("更新用戶數據失敗，請稍後再試！"),setTimeout(()=>{f("/user-info",{state:{from:"/cardio"}})},100)}};return s.jsxs("div",{className:"cardio-container",children:[s.jsxs("div",{className:"input-section",children:[s.jsx("h1",{className:"text-2xl font-bold text-center mb-4",children:"心肺耐力測試"}),s.jsxs("p",{children:["年齡：",m||"未輸入"]}),s.jsxs("p",{children:["性別：",p||"未選擇"]}),s.jsxs("div",{className:"exercise-section",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Cooper 12 分鐘跑步測試"}),s.jsx("label",{htmlFor:"distance",className:"block text-sm font-medium text-gray-700",children:"跑步距離 (公尺)"}),s.jsx("input",{id:"distance",name:"distance",type:"number",placeholder:"跑步距離 (公尺)",value:v,onChange:H=>y(H.target.value),className:"input-field",required:!0}),s.jsx("button",{onClick:ee,className:"calculate-btn",children:"計算"}),S!==null&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"score-display",children:["心肺耐力分數: ",S]}),s.jsx("p",{className:"score-display",children:te(S,p)})]})]}),s.jsx("div",{className:"description-section",children:s.jsxs("div",{className:"description-card",children:[s.jsxs("div",{className:"description-header",onClick:()=>O(!T),children:[s.jsx("h2",{className:"text-lg font-semibold",children:"動作說明"}),s.jsx("span",{className:`arrow ${T?"expanded":""}`,children:T?"▲":"▼"})]}),T&&s.jsxs("div",{className:"description-content",children:[s.jsx("p",{className:"font-semibold",children:"Cooper Test 簡介"}),s.jsx("p",{children:"傳統心肺耐力測試需在實驗室以極限強度測量最大攝氧量（VO₂ Max），但難以普及。Kenneth H. Cooper 博士發現 12 分鐘跑步距離與 VO₂ Max 高度相關，於 1968 年設計 Cooper Test，廣泛應用於美軍體測，簡化測量並提升效率。測試以年齡、性別和跑步距離估算 VO₂ Max。"}),s.jsx("p",{className:"font-semibold mt-2",children:"測量方式"}),s.jsxs("ul",{className:"list-disc pl-5",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"地點"}),"：選擇田徑場或安全跑步環境，方便記錄距離和配速。"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"記錄"}),"：用圈數或運動手錶記錄 12 分鐘跑步距離。"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"熱身"}),"：跑前動態熱身 10-15 分鐘，避免受傷。"]})]}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"本 Cooper 測試標準表可在 Cooper Test Chart 找到，由 Carl Magnus Swahn 設計。"})]})]})})]}),s.jsx("div",{className:"button-group",children:s.jsx("button",{onClick:ue,className:"submit-btn",children:"提交並返回總覽"})})]})}Gm.propTypes={onComplete:ze.func,clearTestData:ze.func};function Vm({onComplete:r,clearTestData:i}){var ne,se,de,Te,be,ce;const{userData:u,setUserData:c,saveUserData:d}=sn(),f=hn(),{age:m,gender:p}=u,[v,y]=E.useState(((se=(ne=u.testInputs)==null?void 0:ne.power)==null?void 0:se.verticalJump)||""),[S,j]=E.useState(((Te=(de=u.testInputs)==null?void 0:de.power)==null?void 0:Te.standingLongJump)||""),[T,O]=E.useState(((ce=(be=u.testInputs)==null?void 0:be.power)==null?void 0:ce.sprint)||""),[_,z]=E.useState({verticalJumpScore:null,standingLongJumpScore:null,sprintScore:null,finalScore:null}),[te,ee]=E.useState(!1),[ue,q]=E.useState(!1);E.useEffect(()=>{const Z={...u.testInputs,power:{verticalJump:v,standingLongJump:S,sprint:T}};c(x=>({...x,testInputs:Z}))},[v,S,T]);const $=Z=>{if(!Z)return null;const x=parseInt(Z);return x>=12&&x<=15?"12-15":x>=16&&x<=20?"16-20":x>=21&&x<=30?"21-30":x>=31&&x<=40?"31-40":x>=41&&x<=50?"41-50":x>=51&&x<=60?"51-60":x>=61&&x<=70?"61-70":x>=71&&x<=80?"71-80":null},H=(Z,x)=>Z<x[0]?0:Z>=x[100]?100:Z<x[50]?(Z-x[0])/(x[50]-x[0])*50:50+(Z-x[50])/(x[100]-x[50])*50,k=(Z,x)=>Z>x[0]?0:Z<=x[100]?100:Z>x[50]?(x[0]-Z)/(x[0]-x[50])*50:50+(x[50]-Z)/(x[50]-x[100])*50,X=()=>{if(!m||!p){alert("請確保已在用戶信息中輸入年齡和性別！");return}if(!v&&!S&&!T){alert("請至少輸入一項動作數據！");return}const Z=$(m);if(!Z){alert("請輸入有效的年齡！");return}const x=p==="男性"||p.toLowerCase()==="male"?"male":"female",b=x==="male"?v2:x2,D=x==="male"?y2:b2,J=x==="male"?N2:S2,W=b[Z],Y=D[Z],G=J[Z];if(!W||!Y||!G){alert("無法找到對應的評測標準，請檢查年齡和性別！");return}const I=v?parseFloat(v):null,he=S?parseFloat(S):null,Ne=T?parseFloat(T):null,Be=I!==null?H(I,W):null,Xe=he!==null?H(he,Y):null,Ce=Ne!==null?k(Ne,G):null,ke=[Be,Xe,Ce].filter(mt=>mt!==null);if(ke.length===0){alert("請至少完成一項動作的測量！");return}const rt=(ke.reduce((mt,L)=>mt+L,0)/ke.length).toFixed(2);z({verticalJumpScore:Be!==null?Be.toFixed(2):null,standingLongJumpScore:Xe!==null?Xe.toFixed(2):null,sprintScore:Ce!==null?Ce.toFixed(2):null,finalScore:rt})},P=async()=>{if(!_.finalScore){alert("請先計算爆發力分數！");return}const Z=sessionStorage.getItem("guestMode")==="true";try{const x={...u.scores,explosivePower:parseFloat(_.finalScore)},b={...u,scores:x};if(c({...b,ladderScore:u.ladderScore||0}),!Z&&!await d(b))throw new Error("保存數據失敗");const D={verticalJump:v||null,standingLongJump:S||null,sprint:T||null,finalScore:_.finalScore};r&&typeof r=="function"&&r(D),setTimeout(()=>{f("/user-info",{state:{from:"/explosive-power"}})},100)}catch(x){console.error("Power.js - 更新 UserContext 或導航失敗:",x),Z||alert("更新用戶數據失敗，請稍後再試！"),setTimeout(()=>{f("/user-info",{state:{from:"/explosive-power"}})},100)}};return s.jsxs("div",{className:"power-container",children:[s.jsxs("div",{className:"input-section",children:[s.jsx("h1",{className:"text-2xl font-bold text-center mb-4",children:"爆發力測試"}),s.jsxs("p",{children:["年齡：",m||"未輸入"]}),s.jsxs("p",{children:["性別：",p||"未選擇"]}),s.jsxs("div",{className:"exercise-section",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"爆發力動作"}),s.jsx("label",{htmlFor:"verticalJump",className:"block text-sm font-medium text-gray-700",children:"垂直彈跳 (公分)"}),s.jsx("input",{id:"verticalJump",name:"verticalJump",type:"number",placeholder:"垂直彈跳 (公分)",value:v,onChange:Z=>y(Z.target.value),className:"input-field"}),s.jsx("label",{htmlFor:"standingLongJump",className:"block text-sm font-medium text-gray-700",children:"立定跳遠 (公分)"}),s.jsx("input",{id:"standingLongJump",name:"standingLongJump",type:"number",placeholder:"立定跳遠 (公分)",value:S,onChange:Z=>j(Z.target.value),className:"input-field"}),s.jsx("label",{htmlFor:"sprint",className:"block text-sm font-medium text-gray-700",children:"100公尺衝刺跑 (秒)"}),s.jsx("input",{id:"sprint",name:"sprint",type:"number",placeholder:"100公尺衝刺跑 (秒)",value:T,onChange:Z=>O(Z.target.value),className:"input-field"}),s.jsx("button",{onClick:X,className:"calculate-btn",children:"計算"}),_.finalScore&&s.jsxs(s.Fragment,{children:[_.verticalJumpScore&&s.jsxs("p",{className:"score-display",children:["垂直彈跳分數: ",_.verticalJumpScore]}),_.standingLongJumpScore&&s.jsxs("p",{className:"score-display",children:["立定跳遠分數: ",_.standingLongJumpScore]}),_.sprintScore&&s.jsxs("p",{className:"score-display",children:["100公尺衝刺跑分數: ",_.sprintScore]}),s.jsxs("p",{className:"score-display",children:["最終分數: ",_.finalScore]})]})]}),s.jsxs("div",{className:"description-section",children:[s.jsxs("div",{className:"description-card",children:[s.jsxs("div",{className:"description-header",onClick:()=>ee(!te),children:[s.jsx("h2",{className:"text-lg font-semibold",children:"動作說明"}),s.jsx("span",{className:`arrow ${te?"expanded":""}`,children:te?"▲":"▼"})]}),te&&s.jsxs("div",{className:"description-content",children:[s.jsx("p",{className:"exercise-title",children:"垂直彈跳"}),s.jsx("p",{className:"exercise-description",children:"測量垂直跳躍高度，反映下肢爆發力。站立時伸手觸及最高點，然後全力跳起觸及最高點，兩者高度差即為垂直彈跳高度（單位：公分）。"}),s.jsx("p",{className:"exercise-title mt-2",children:"立定跳遠"}),s.jsx("p",{className:"exercise-description",children:"測量站立跳躍距離，反映下肢力量和協調性。雙腳站立於起跳線，無助跑直接跳出，測量起跳線(腳尖)到著地點(腳跟)最近處的距離（單位：公分）。"}),s.jsx("p",{className:"exercise-title mt-2",children:"100公尺衝刺跑"}),s.jsx("p",{className:"exercise-description",children:"測量短距離衝刺速度，反映全身爆發力和速度。從靜止起跑，盡全力衝刺100公尺，記錄完成時間（單位：秒）。"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"建議：測量前充分熱身，避免受傷。使用專業設備或在標準場地進行測量以確保準確性。"})]})]}),s.jsxs("div",{className:"standards-card",children:[s.jsxs("div",{className:"standards-header",onClick:()=>q(!ue),children:[s.jsx("h2",{className:"text-lg font-semibold",children:"檢測標準說明"}),s.jsx("span",{className:`arrow ${ue?"expanded":""}`,children:ue?"▲":"▼"})]}),ue&&s.jsxs("div",{className:"standards-content",children:[s.jsx("p",{className:"font-semibold",children:"來源："}),s.jsx("p",{children:"參考教育部體育署體適能網站、美國運動醫學會（ACSM）、世界田徑協會及全國中等學校運動會田徑標準。"}),s.jsx("p",{className:"font-semibold mt-2",children:"依據："}),s.jsxs("ul",{className:"list-disc pl-5",children:[s.jsx("li",{children:"原地垂直彈跳：ACSM標準與青少年數據。"}),s.jsx("li",{children:"立定跳遠：教育部常模與ACSM衰退研究。"}),s.jsx("li",{children:"100公尺衝刺跑：世界田徑與全國運動會標準。"})]}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"本測驗包含推測值：12-80歲全齡數據不全，依ACSM每10年下降10-15%、性別差異70-90%推估。"})]})]})]})]}),s.jsx("div",{className:"button-group",children:s.jsx("button",{onClick:P,className:"submit-btn",children:"提交並返回總覽"})})]})}Vm.propTypes={onComplete:ze.func,clearTestData:ze.func};function Ym({onComplete:r,clearTestData:i}){var q,$;const{userData:u,setUserData:c,saveUserData:d}=sn(),f=hn(),{weight:m,age:p,gender:v}=u,[y,S]=E.useState((($=(q=u.testInputs)==null?void 0:q.muscle)==null?void 0:$.smm)||""),[j,T]=E.useState({smmScore:null,smPercent:null,smPercentScore:null,finalScore:null});E.useEffect(()=>{var H;if(y){const k={...u.testInputs,muscle:{...(H=u.testInputs)==null?void 0:H.muscle,smm:y}};c(X=>({...X,testInputs:k}))}},[y]);const O=H=>{if(!H)return null;const k=parseInt(H);return k>=10&&k<=12?"10-12":k>=13&&k<=17?"13-17":k>=18&&k<=30?"18-30":k>=31&&k<=40?"31-40":k>=41&&k<=50?"41-50":k>=51&&k<=60?"51-60":k>=61&&k<=70?"61-70":k>=71&&k<=80?"71-80":null},_=(H,k,X)=>{if(H>=k[100])return 100;if(H<=k[0])return 0;let P=0,ne=100;for(let be=10;be<=100;be+=10)if(H<k[be]){ne=be,P=be-10;break}const se=k[P],de=k[ne];if(de===se)return ne;const Te=P+(H-se)/(de-se)*(ne-P);return Math.round(Te*100)/100},z=()=>{if(!m||!y||!p||!v){alert("請確保已在用戶信息中輸入體重、年齡和性別，並在此輸入骨骼肌肉量！");return}const H=parseFloat(m),k=parseFloat(y),X=O(p);if(!H||!k||!X){alert("請輸入有效的體重、骨骼肌肉量和年齡！");return}const P=(k/H*100).toFixed(2),ne=v==="男性"||v.toLowerCase()==="male"?"male":"female",se=ne==="male"?d2:h2,de=ne==="male"?f2:m2,Te=se[X],be=de[X];if(!Te||!be){alert("無法找到對應的評測標準，請檢查年齡和性別！");return}const ce=_(k,Te),Z=_(parseFloat(P),be),x=((ce+Z)/2).toFixed(2);T({smmScore:ce,smPercent:P,smPercentScore:Z,finalScore:x})},te=async()=>{if(!j.finalScore){alert("請先計算骨骼肌肉量分數！");return}const H=sessionStorage.getItem("guestMode")==="true";try{const k={...u.scores,muscleMass:parseFloat(j.finalScore)},X={...u,scores:k};if(c({...X,ladderScore:u.ladderScore||0}),!H&&!await d(X))throw new Error("保存數據失敗");const P={smm:parseFloat(y),smPercent:parseFloat(j.smPercent),finalScore:parseFloat(j.finalScore)};r&&typeof r=="function"&&r(P),setTimeout(()=>{f("/user-info",{state:{from:"/muscle-mass"}})},100)}catch(k){console.error("提交失敗:",k),H||alert("更新用戶數據失敗，請稍後再試！"),setTimeout(()=>{f("/user-info",{state:{from:"/muscle-mass"}})},100)}},ee=[{name:"骨骼肌肉量 (SMM)",value:j.smmScore||0},{name:"肌肉量百分比 (SM%)",value:j.smPercentScore||0}],ue=[{name:"最終分數",value:j.finalScore||0}];return s.jsxs("div",{className:"muscle-container",children:[s.jsx("h1",{className:"text-2xl font-bold text-center mb-4",children:"骨骼肌肉量評測"}),s.jsxs("p",{children:["體重：",m?`${m} 公斤`:"未輸入"]}),s.jsxs("p",{children:["年齡：",p||"未輸入"]}),s.jsxs("p",{children:["性別：",v||"未選擇"]}),s.jsxs("div",{className:"exercise-section",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"骨骼肌肉量 (SMM)"}),s.jsx("label",{htmlFor:"smm",className:"block text-sm font-medium text-gray-700",children:"骨骼肌肉量 (kg)"}),s.jsx("input",{id:"smm",name:"smm",type:"number",placeholder:"骨骼肌肉量 (kg)",value:y,onChange:H=>S(H.target.value),className:"input-field"}),s.jsx("button",{onClick:z,className:"calculate-btn",children:"計算"}),j.smmScore!==null&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"score-text",children:["骨骼肌肉量 (SMM) 分數: ",j.smmScore]}),s.jsxs("p",{className:"score-text",children:["骨骼肌肉量百分比 (SM%): ",j.smPercent,"%"]}),s.jsxs("p",{className:"score-text",children:["骨骼肌肉量百分比 (SM%) 分數: ",j.smPercentScore]}),s.jsxs("p",{className:"score-text final-score",children:["最終分數: ",j.finalScore]})]})]}),j.finalScore&&s.jsxs("div",{className:"chart-section",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"數值比較"}),s.jsx("div",{className:"chart-container",children:s.jsx(ur,{width:"100%",height:300,children:s.jsxs(jh,{data:ee,barSize:30,children:[s.jsx(Ah,{strokeDasharray:"3 3"}),s.jsx(Eh,{dataKey:"name"}),s.jsx(wh,{domain:[0,100]}),s.jsx(Th,{}),s.jsx(O1,{}),s.jsx(_h,{dataKey:"value",fill:"#4bc0c0",name:"分數"})]})})}),s.jsx("h2",{className:"text-lg font-semibold mt-6 mb-4",children:"最終分數"}),s.jsx("div",{className:"chart-container",children:s.jsx(ur,{width:"100%",height:200,children:s.jsxs(jh,{data:ue,barSize:30,children:[s.jsx(Ah,{strokeDasharray:"3 3"}),s.jsx(Eh,{dataKey:"name"}),s.jsx(wh,{domain:[0,100]}),s.jsx(Th,{}),s.jsx(_h,{dataKey:"value",fill:"#36a2eb",name:"分數"})]})})})]}),s.jsx("div",{className:"button-group",children:s.jsx("button",{onClick:te,className:"submit-btn",children:"提交並返回總覽"})})]})}Ym.propTypes={onComplete:ze.func,clearTestData:ze.func};function Fm({onComplete:r,clearTestData:i}){var X,P;const{userData:u,setUserData:c,saveUserData:d}=sn(),f=hn(),[m,p]=E.useState(((P=(X=u.testInputs)==null?void 0:X.ffmi)==null?void 0:P.bodyFat)||""),[v,y]=E.useState(null),[S,j]=E.useState(null),[T,O]=E.useState(""),[_,z]=E.useState(!1),[te,ee]=E.useState(!1);E.useEffect(()=>{var ne;if(m){const se={...u.testInputs,ffmi:{...(ne=u.testInputs)==null?void 0:ne.ffmi,bodyFat:m}};c(de=>({...de,testInputs:se}))}},[m]);const ue=()=>{if(!u.gender||!u.height||!u.weight||!u.age){alert("請先在用戶信息頁面填寫性別、身高、體重和年齡");return}if(!m){alert("請輸入體脂肪率");return}const ne=u.gender==="male"||u.gender==="男性",se=parseFloat(u.height)/100,de=parseFloat(u.weight),Te=parseFloat(m)/100,ce=de*(1-Te)/(se*se),Z=se>1.8?ce+6*(se-1.8):ce;y(Z.toFixed(2));let x;ne?Z<=0?x=0:Z<=18.5?x=Z/18.5*60:Z<28?x=60+(Z-18.5)/(28-18.5)*40:x=100:Z<=0?x=0:Z<=15.5?x=Z/15.5*60:Z<22?x=60+(Z-15.5)/(22-15.5)*40:x=100,j(x.toFixed(2)),ne?Z<18?O("肌肉量低於平均"):Z<20?O("肌肉量在平均值"):Z<22?O("肌肉量高於平均值"):Z<23?O("肌肉量很高"):Z<26?O("肌肉量極高"):Z<28?O("肌肉量已經高到可能有使用藥物"):O("不用藥不可能達到的數值"):Z<15?O("肌肉量低於平均"):Z<17?O("肌肉量在平均值"):Z<19?O("肌肉量高於平均值"):Z<22?O("肌肉量很高"):O("不用藥不可能達到的數值")},q=async()=>{if(!v||!S){alert("請先計算 FFMI 分數！");return}const ne=sessionStorage.getItem("guestMode")==="true";try{const se={...u.scores,bodyFat:parseFloat(S)},de={...u,scores:se};if(c({...de,ladderScore:u.ladderScore||0}),!ne&&!await d(de))throw new Error("保存數據失敗");const Te={bodyFat:parseFloat(m),ffmi:parseFloat(v),ffmiScore:parseFloat(S)};r&&typeof r=="function"&&r(Te),setTimeout(()=>{f("/user-info",{state:{from:"/body-fat"}})},100)}catch(se){console.error("提交失敗:",se),ne||alert("更新用戶數據失敗，請稍後再試！"),setTimeout(()=>{f("/user-info",{state:{from:"/body-fat"}})},100)}},$=[{range:"16 - 17",description:"肌肉量低於平均"},{range:"18 - 19",description:"肌肉量在平均值"},{range:"20 - 21",description:"肌肉量高於平均值"},{range:"22",description:"肌肉量很高"},{range:"23 - 25",description:"肌肉量極高"},{range:"26 - 27",description:"肌肉量已經高到可能有使用藥物"},{range:"28 - 30",description:"不用藥不可能達到的數值"}],H=[{range:"13 - 14",description:"肌肉量低於平均"},{range:"15 - 16",description:"肌肉量在平均值"},{range:"17 - 18",description:"肌肉量高於平均值"},{range:"19 - 21",description:"肌肉量很高"},{range:"> 22",description:"不用藥不可能達到的數值"}],k=u.gender==="male"||u.gender==="男性"?$:H;return s.jsxs("div",{className:"ffmi-container",children:[s.jsx("h1",{className:"ffmi-title",children:"體脂肪率與 FFMI"}),s.jsxs("div",{className:"input-section",children:[s.jsx("label",{htmlFor:"bodyFat",className:"input-label",children:"體脂肪率 (%)"}),s.jsx("input",{id:"bodyFat",name:"bodyFat",type:"number",value:m,onChange:ne=>p(ne.target.value),placeholder:"輸入體脂肪率 (%)",className:"input-field",required:!0}),s.jsx("button",{onClick:ue,className:"calculate-btn",children:"計算分數"})]}),v&&s.jsxs("div",{className:"result-section",children:[s.jsx("h2",{className:"result-title",children:"您的評估結果"}),s.jsxs("p",{className:"result-text",children:["FFMI：",v]}),s.jsxs("p",{className:"score-text",children:["FFMI 評分：",S," 分"]}),s.jsxs("p",{className:"category-text",children:["FFMI 等級：",T]}),s.jsx("p",{className:"result-text note-text"})]}),s.jsx("div",{className:"description-section",children:s.jsxs("div",{className:"description-card",children:[s.jsxs("div",{className:"description-header",onClick:()=>z(!_),children:[s.jsx("h2",{className:"description-title",children:"FFMI 是什麼？"}),s.jsx("span",{className:`arrow ${_?"expanded":""}`,children:_?"▲":"▼"})]}),_&&s.jsxs("div",{className:"description-content",children:[s.jsx("p",{children:"FFMI（Fat Free Mass Index 無脂肪質量指數）用來評估肌肉量多寡，考量身高與體脂，比 BMI 更準確。數值越高，代表肌肉量越多，是健身評估常用指標。在以下幾個狀況下易造成結果失真："}),s.jsxs("ol",{className:"list-decimal pl-5 mt-2",children:[s.jsx("li",{children:"受測者身高高於平均標準 (190 以上)"}),s.jsx("li",{children:"受測者體脂肪率顯著高於平均標準"}),s.jsx("li",{children:"受測者體重高於平均標準"})]})]})]})}),s.jsx("div",{className:"table-section",children:s.jsxs("div",{className:"table-card",children:[s.jsxs("div",{className:"table-header",onClick:()=>ee(!te),children:[s.jsxs("h2",{className:"table-title",children:["FFMI 對照表 (",u.gender==="male"||u.gender==="男性"?"男性":"女性",")"]}),s.jsx("span",{className:`arrow ${te?"expanded":""}`,children:te?"▲":"▼"})]}),te&&s.jsx("div",{className:"table-content",children:s.jsxs("table",{className:"ffmi-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"FFMI 範圍"}),s.jsx("th",{children:"評價"})]})}),s.jsx("tbody",{children:k.map((ne,se)=>s.jsxs("tr",{children:[s.jsx("td",{children:ne.range}),s.jsx("td",{children:ne.description})]},se))})]})})]})}),s.jsx("button",{onClick:q,className:"ffmi-submit-btn",children:"提交並返回總覽"})]})}Fm.propTypes={onComplete:ze.func,clearTestData:ze.func};function Xm({onLogin:r,onError:i}){const[u,c]=E.useState(!1),d=async(f,m)=>{c(!0);try{let p;f==="google"?(p=new im,p.setCustomParameters({prompt:"select_account"})):f==="facebook"&&(p=new rm,p.addScope("email"),p.addScope("public_profile"));const y=(await E1(oe,p)).user;console.log(`${m} 登入成功:`,y.email);const S=tt(Re,"users",y.uid);if(!(await zs(S)).exists()){const T={email:y.email,userId:y.uid,nickname:y.displayName||y.email.split("@")[0],avatarUrl:y.photoURL||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),gender:"",height:0,weight:0,age:0,scores:{strength:0,explosivePower:0,cardio:0,muscleMass:0,bodyFat:0},history:[],testInputs:{},friends:[],friendRequests:[],blockedUsers:[],ladderScore:0,ladderRank:0,ladderHistory:[],isGuest:!1,lastActive:new Date().toISOString()};await Yn(S,T),console.log("新用戶資料已創建")}r(y.email,null)}catch(p){console.error(`${m} 登入失敗:`,p);let v="登入失敗";p.code==="auth/popup-closed-by-user"?v="登入視窗被關閉，請重試":p.code==="auth/popup-blocked"?v="彈出視窗被阻擋，請允許彈出視窗後重試":p.code==="auth/account-exists-with-different-credential"?v="此電子郵件已被其他方式註冊，請使用原註冊方式登入":v=`登入失敗：${p.message}`,i(v)}finally{c(!1)}};return s.jsxs("div",{className:"social-login-container",children:[s.jsx("div",{className:"divider",children:s.jsx("span",{children:"或"})}),s.jsxs("div",{className:"social-buttons",children:[s.jsxs("button",{type:"button",className:"social-btn google-btn",onClick:()=>d("google","Google"),disabled:u,children:[s.jsxs("svg",{className:"google-icon",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),u?"處理中...":"使用 Google 登入"]}),s.jsxs("button",{type:"button",className:"social-btn facebook-btn",onClick:()=>d("facebook","Facebook"),disabled:u,children:[s.jsx("svg",{className:"facebook-icon",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),u?"處理中...":"使用 Facebook 登入"]})]})]})}Xm.propTypes={onLogin:ze.func.isRequired,onError:ze.func.isRequired};function Qm({onLogin:r}){const[i,u]=E.useState(""),[c,d]=E.useState(""),[f,m]=E.useState(null),[p,v]=E.useState(!1),[y,S]=E.useState(!1),[j,T]=E.useState(!1),O=hn(),_=Ga(),{height:z,weight:te,age:ee}=_.state||{};E.useEffect(()=>{if(console.log("檢查 auth 初始化狀態:",oe),!oe){m("Firebase 未正確初始化，請檢查配置");return}const H=oe.onAuthStateChanged(P=>{P&&(console.log("用戶已登入:",P.email),O("/user-info"))}),k=localStorage.getItem("savedEmail"),X=localStorage.getItem("savedPassword");return k&&X&&(console.log("從 localStorage 恢復帳號:",k),u(k),d(X),T(!0)),()=>H()},[O]);const ue=async H=>{if(H.preventDefault(),m(null),S(!0),console.log("開始處理表單提交，isRegistering:",p,"email:",i),!oe||!Re){m("Firebase 未正確初始化，請檢查配置"),console.error("auth 或 db 未初始化:",{auth:oe,db:Re}),S(!1);return}try{let k;if(p){console.log("嘗試註冊用戶:",i),k=await w1(oe,i,c);const P=k.user;console.log("註冊成功，用戶:",P.email,"UID:",P.uid);const ne=tt(Re,"users",P.uid),se={email:P.email,userId:P.uid,nickname:P.email.split("@")[0],avatarUrl:"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),gender:"",height:z?parseFloat(z):0,weight:te?parseFloat(te):0,age:ee?parseInt(ee,10):0,scores:{strength:0,explosivePower:0,cardio:0,muscleMass:0,bodyFat:0},history:[],testInputs:{},friends:[],friendRequests:[],blockedUsers:[],ladderScore:0,ladderRank:0,ladderHistory:[],isGuest:!1,lastActive:new Date().toISOString()};console.log("儲存初始用戶數據:",se),await Yn(ne,se),console.log("用戶數據已儲存，文檔 ID:",P.uid)}else console.log("嘗試登入用戶:",i),k=await zo(oe,i,c),console.log("登入成功，用戶:",k.user.email,"UID:",k.user.uid);const X=k.user;r(X.email,c),j?(console.log("儲存帳號到 localStorage:",i),localStorage.setItem("savedEmail",i),localStorage.setItem("savedPassword",c)):(console.log("清除 localStorage 中的帳號"),localStorage.removeItem("savedEmail"),localStorage.removeItem("savedPassword")),setTimeout(()=>{console.log("導航到 /user-info"),O("/user-info")},500)}catch(k){console.error("登入/註冊失敗:",k.code,k.message),m(`發生錯誤：${k.message} (代碼: ${k.code})`)}finally{S(!1)}},q=(H,k)=>{console.log("社交登入成功，導航到 /user-info"),O("/user-info")},$=H=>{m(H)};return s.jsxs("div",{className:"login-container",children:[s.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:p?"註冊":"登入"}),f&&s.jsx("p",{className:"error-message",children:f}),s.jsxs("form",{onSubmit:ue,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"電子郵件"}),s.jsx("input",{type:"email",value:i,onChange:H=>u(H.target.value),placeholder:"輸入你的電子郵件",className:"input-field",required:!0,disabled:y})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"密碼"}),s.jsx("input",{type:"password",value:c,onChange:H=>d(H.target.value),placeholder:"輸入你的密碼",className:"input-field",required:!0,disabled:y})]}),s.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end",marginBottom:"8px"},children:s.jsxs("label",{htmlFor:"rememberMe",style:{display:"flex",alignItems:"center",cursor:"pointer",whiteSpace:"nowrap",fontSize:"14px",color:"#555"},children:[s.jsx("input",{id:"rememberMe",type:"checkbox",checked:j,onChange:H=>T(H.target.checked),disabled:y,style:{margin:0}}),s.jsx("span",{style:{marginLeft:"6px"},children:"記住我的帳號"})]})}),s.jsx("button",{type:"submit",className:"submit-btn",disabled:y,children:y?"處理中...":p?"註冊":"登入"})]}),s.jsx("button",{onClick:()=>v(!p),className:"toggle-btn",children:p?"已有帳號？點此登入":"沒有帳號？點此註冊"}),s.jsx(Xm,{onLogin:q,onError:$}),s.jsxs("div",{className:"instructions-container",children:[s.jsx("h2",{className:"instructions-title",children:"使用說明"}),s.jsxs("ul",{className:"instructions-list",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"公平評測"}),"：依性別、年齡、身高、體重，結合科學統計，分數化呈現，簡單易懂。"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"全面分析"}),"：五邊形雷達圖顯示弱項，指引補強方向。"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"成長追蹤"}),"：記錄進步軌跡，優化課表效率。"]})]})]})]})}Qm.propTypes={onLogin:ze.func.isRequired};function j2(){const{userData:r,setUserData:i}=sn(),[u,c]=E.useState(!1),[d,f]=E.useState([]),[m,p]=E.useState(!1),[v,y]=E.useState(1),[S]=E.useState(10),[j,T]=E.useState("total"),O=E.useRef(!1),_=E.useMemo(()=>[...(r==null?void 0:r.history)||[]].sort((Z,x)=>{const b=Z.timestamp?new Date(Z.timestamp):new Date(Z.date);return(x.timestamp?new Date(x.timestamp):new Date(x.date))-b}),[r==null?void 0:r.history]),z=Math.ceil(_.length/S),te=(v-1)*S,ee=te+S,ue=_.slice(te,ee),q=_.length,$=50,H=q>=$*.8,k=q>=$,X=E.useMemo(()=>{if(_.length===0)return null;const ce=_.slice(0,6),Z=ce.map(G=>(G.timestamp?new Date(G.timestamp):new Date(G.date)).toLocaleDateString("zh-TW",{month:"numeric",day:"numeric"})).reverse(),x=ce.map(G=>{const I=G.scores||{};return G.averageScore||(Object.values(I).filter(he=>he>0).reduce((he,Ne)=>he+Ne,0)/Object.values(I).filter(he=>he>0).length).toFixed(2)}).reverse(),b=ce.map(G=>{var I;return(((I=G.scores)==null?void 0:I.strength)||0).toFixed(2)}).reverse(),D=ce.map(G=>{var I;return(((I=G.scores)==null?void 0:I.explosivePower)||0).toFixed(2)}).reverse(),J=ce.map(G=>{var I;return(((I=G.scores)==null?void 0:I.cardio)||0).toFixed(2)}).reverse(),W=ce.map(G=>{var I;return(((I=G.scores)==null?void 0:I.muscleMass)||0).toFixed(2)}).reverse(),Y=ce.map(G=>{var I;return(((I=G.scores)==null?void 0:I.bodyFat)||0).toFixed(2)}).reverse();return{labels:Z,datasets:[{label:"總分",data:x,color:"#28a745",key:"total"},{label:"力量",data:b,color:"#007bff",key:"strength"},{label:"爆發力",data:D,color:"#ffc107",key:"explosive"},{label:"心肺",data:J,color:"#dc3545",key:"cardio"},{label:"肌肉量",data:W,color:"#6f42c1",key:"muscle"},{label:"FFMI",data:Y,color:"#fd7e14",key:"ffmi"}]}},[_]),P=ce=>{const Z=Number(ce);return Z>=80?"score-excellent":Z>=60?"score-good":Z>=40?"score-fair":Z>0?"score-poor":"score-none"};E.useEffect(()=>{r&&!O.current&&(console.log("History.js - userData:",r),console.log("History.js - sortedHistory:",_),console.log("History.js - 記錄數量:",q,"/",$),console.log("History.js - 當前頁面:",v,"/",z),O.current=!0)},[r]);const ne=()=>{c(!u),f([])},se=ce=>{d.includes(ce)?f(d.filter(Z=>Z!==ce)):f([...d,ce])},de=()=>{const ce=_.filter((Z,x)=>!d.includes(x));i({...r,history:ce}),c(!1),f([]),y(1),console.log("History.js - 已刪除所選紀錄")},Te=ce=>{y(Math.max(1,Math.min(ce,z)))},be=()=>{if(!X)return null;const ce=18,Z="600",x=X.datasets.find(b=>b.key===j);return s.jsxs("div",{className:"chart-container",children:[s.jsxs("div",{className:"chart-header",children:[s.jsx("h3",{children:"📈 數據趨勢圖"}),s.jsx("div",{className:"chart-note",children:"顯示最近六次數據"}),s.jsx("div",{className:"chart-selector",children:s.jsx("select",{value:j,onChange:b=>T(b.target.value),className:"chart-select",children:X.datasets.map(b=>s.jsx("option",{value:b.key,children:b.label},b.key))})})]}),s.jsx("div",{className:"chart-wrapper",children:s.jsxs("svg",{className:"chart",viewBox:"0 0 800 800",children:[[...Array(6)].map((b,D)=>{const W=720-D*20*480/100;return s.jsx("line",{x1:"50",y1:W,x2:"750",y2:W,stroke:"#dee2e6",strokeWidth:"1"},`grid-y-${D}`)}),x&&s.jsxs("g",{children:[s.jsx("polyline",{points:x.data.map((b,D)=>{const J=50+D*700/(X.labels.length-1),W=720-b*480/100;return`${J},${W}`}).join(" "),fill:"none",stroke:x.color,strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),x.data.map((b,D)=>{const J=50+D*700/(X.labels.length-1),W=720-b*480/100;return s.jsx("circle",{cx:J,cy:W,r:"5",fill:x.color,stroke:"white",strokeWidth:"2"},`point-${D}`)})]},x.label),X.labels.map((b,D)=>{const J=50+D*700/(X.labels.length-1);return s.jsx("text",{x:J,y:"780",textAnchor:"middle",fontSize:ce,fontWeight:Z,fill:"#495057",children:b},`label-${D}`)}),[...Array(6)].map((b,D)=>{const J=D*20,W=720-J*480/100;return s.jsx("text",{x:"30",y:W+6,textAnchor:"end",fontSize:ce,fontWeight:Z,fill:"#495057",children:J},`y-label-${D}`)})]})})]})};return s.jsxs("div",{className:"history-container",children:[s.jsx("h1",{children:"歷史紀錄"}),s.jsx("div",{className:"history-table-section",children:_.length>0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"score-legend",children:[s.jsx("h4",{children:"🎯 分數解讀"}),s.jsxs("div",{className:"legend-items",children:[s.jsx("span",{className:"legend-item score-excellent",children:"80+ 優秀"}),s.jsx("span",{className:"legend-item score-good",children:"60-79 良好"}),s.jsx("span",{className:"legend-item score-fair",children:"40-59 一般"}),s.jsx("span",{className:"legend-item score-poor",children:"1-39 待加強"})]})]}),s.jsxs("table",{className:"history-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsxs("th",{className:`date-col ${m?"mobile-hidden":""}`,children:[s.jsx("span",{className:"icon",children:"📅"}),s.jsx("span",{className:"desktop-text",children:"日期"})]}),s.jsxs("th",{className:"score-col",children:[s.jsx("span",{className:"icon",children:"💪"}),s.jsx("span",{className:"desktop-text",children:"力量"})]}),s.jsxs("th",{className:"score-col",children:[s.jsx("span",{className:"icon",children:"⚡"}),s.jsx("span",{className:"desktop-text",children:"爆發力"})]}),s.jsxs("th",{className:`score-col ${m?"":"mobile-hidden"}`,children:[s.jsx("span",{className:"icon",children:"❤️"}),s.jsx("span",{className:"desktop-text",children:"心肺"})]}),s.jsxs("th",{className:`score-col ${m?"":"mobile-hidden"}`,children:[s.jsx("span",{className:"icon",children:"🥩"}),s.jsx("span",{className:"desktop-text",children:"肌肉量"})]}),s.jsxs("th",{className:`score-col ${m?"":"mobile-hidden"}`,children:[s.jsx("span",{className:"icon",children:"📊"}),s.jsx("span",{className:"desktop-text",children:"FFMI"})]}),s.jsxs("th",{className:"average-col",children:[s.jsx("span",{className:"icon",children:"🏆"}),s.jsx("span",{className:"desktop-text",children:"總分"})]}),u&&s.jsx("th",{className:"select-col",children:"選擇"})]})}),s.jsx("tbody",{children:ue.map((ce,Z)=>{const x=te+Z,b=ce.scores||{},D=ce.averageScore||(Object.values(b).filter(J=>J>0).reduce((J,W)=>J+W,0)/Object.values(b).filter(J=>J>0).length).toFixed(2)||0;return s.jsxs("tr",{children:[s.jsx("td",{className:`date-cell ${m?"mobile-hidden":""}`,children:ce.date||new Date(ce.timestamp).toLocaleDateString("zh-TW")}),s.jsx("td",{className:`score-cell ${P(b.strength||0)}`,children:(b.strength||0).toFixed(2)}),s.jsx("td",{className:`score-cell ${P(b.explosivePower||0)}`,children:(b.explosivePower||0).toFixed(2)}),s.jsx("td",{className:`score-cell ${m?"":"mobile-hidden"} ${P(b.cardio||0)}`,children:(b.cardio||0).toFixed(2)}),s.jsx("td",{className:`score-cell ${m?"":"mobile-hidden"} ${P(b.muscleMass||0)}`,children:(b.muscleMass||0).toFixed(2)}),s.jsx("td",{className:`score-cell ${m?"":"mobile-hidden"} ${P(b.bodyFat||0)}`,children:(b.bodyFat||0).toFixed(2)}),s.jsx("td",{className:`average-cell ${P(D)}`,children:s.jsx("strong",{children:Number(D).toFixed(2)})}),u&&s.jsx("td",{className:"select-cell",children:s.jsx("input",{type:"checkbox",className:"history-checkbox",checked:d.includes(x),onChange:()=>se(x)})})]},ce.id||x)})})]}),z>1&&s.jsxs("div",{className:"pagination",children:[s.jsx("button",{onClick:()=>Te(v-1),disabled:v===1,className:"pagination-btn",children:"← 上一頁"}),s.jsxs("span",{className:"page-info",children:[v,"/",z]}),s.jsx("button",{onClick:()=>Te(v+1),disabled:v===z,className:"pagination-btn",children:"下一頁 →"})]}),s.jsx("div",{className:"action-buttons",children:s.jsx("button",{onClick:()=>p(!m),className:"toggle-delete-btn mobile-toggle-btn",children:m?"顯示日期 📅":"顯示所有指標 📊"})}),_.length>0&&s.jsxs("div",{className:"history-stats",children:[s.jsxs("div",{className:"stats-and-actions",children:[s.jsxs("div",{className:"record-count",children:[s.jsx("span",{className:"count-label",children:"📊 記錄數量："}),s.jsxs("span",{className:`count-value ${H?"near-limit":""} ${k?"at-limit":""}`,children:[q," / ",$]})]}),s.jsxs("div",{className:"action-buttons",children:[s.jsx("button",{onClick:ne,className:`toggle-delete-btn ${u?"cancel-delete-btn":"edit-mode-btn"}`,children:u?"取消":"清理資料"}),u&&s.jsx("button",{onClick:de,className:"toggle-delete-btn delete-selected-btn",children:"刪除所選"})]})]}),H&&!k&&s.jsx("div",{className:"limit-warning",children:"⚠️ 記錄數量接近上限，建議清理舊記錄"}),k&&s.jsx("div",{className:"limit-error",children:"🚫 記錄數量已達上限，無法新增記錄，請先清理舊記錄"})]})]}):s.jsxs("div",{className:"no-history",children:[s.jsx("h3",{children:"📋 尚無歷史紀錄"}),s.jsx("p",{children:"完成評測後，您的紀錄就會出現在這裡"}),s.jsx("p",{children:"開始您的健身評測之旅吧！"})]})}),_.length>0&&be()]})}function A2(){const[r,i]=E.useState("載入中...");return E.useEffect(()=>{fetch("/privacy-policy.html").then(u=>{if(!u.ok)throw new Error("無法載入隱私權政策");return u.text()}).then(u=>{i(u)}).catch(u=>{console.error("載入隱私權政策失敗:",u),i("<div>載入隱私權政策時發生錯誤，請稍後再試。</div>")})},[]),s.jsx("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto"},children:s.jsx("div",{dangerouslySetInnerHTML:{__html:r}})})}function Km({open:r,onClose:i,onRegister:u}){return r?s.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.35)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsxs("div",{style:{background:"#fff",borderRadius:"12px",padding:"32px 24px",minWidth:"320px",maxWidth:"90vw",boxShadow:"0 8px 32px rgba(0,0,0,0.18)",textAlign:"center",position:"relative"},children:[s.jsx("h2",{style:{marginBottom:"16px",color:"#667eea"},children:"註冊帳號才能使用此功能"}),s.jsx("p",{style:{marginBottom:"24px",color:"#444"},children:"好友與天梯功能僅限註冊用戶使用，立即註冊帳號即可解鎖完整社交體驗！"}),s.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"16px"},children:[s.jsx("button",{onClick:u,style:{padding:"10px 24px",background:"#667eea",color:"#fff",border:"none",borderRadius:"6px",fontSize:"16px",cursor:"pointer",fontWeight:"bold",boxShadow:"0 2px 8px rgba(102,126,234,0.08)"},children:"前往註冊/登入"}),s.jsx("button",{onClick:i,style:{padding:"10px 24px",background:"#eee",color:"#333",border:"none",borderRadius:"6px",fontSize:"16px",cursor:"pointer",fontWeight:"bold"},children:"取消"})]})]})}):null}Km.propTypes={open:ze.bool.isRequired,onClose:ze.func.isRequired,onRegister:ze.func.isRequired};const E2=[{key:"community",label:"社群",icon:s.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H7a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"9",cy:"7",r:"4"}),s.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),s.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),path:"/community",guestBlock:!0},{key:"home",label:"首頁",icon:s.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M3 9l9-7 9 7"}),s.jsx("path",{d:"M9 22V12h6v10"})]}),path:"/user-info",guestBlock:!1},{key:"assessment",label:"開始評測",icon:s.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),s.jsx("path",{d:"M2 17l10 5 10-5"}),s.jsx("path",{d:"M2 12l10 5 10-5"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"}),s.jsx("path",{d:"M12 9v6"}),s.jsx("path",{d:"M9 12h6"})]}),path:"/user-info",guestBlock:!1},{key:"ladder",label:"天梯",icon:s.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),s.jsx("path",{d:"M7 3v18M17 3v18M3 9h18M3 15h18"})]}),path:"/ladder",guestBlock:!0},{key:"history",label:"歷史",icon:s.jsxs("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("polyline",{points:"12 6 12 12 16 14"})]}),path:"/history",guestBlock:!1}];function w2(){const r=sessionStorage.getItem("guestMode")==="true";return oe.currentUser?!1:r}function T2(){const r=hn(),i=Ga(),[u,c]=E.useState(!1),[d,f]=E.useState(""),m=v=>{v.guestBlock&&w2()?(f(v.path),c(!0)):v.key==="home"?r(v.path,{state:{scrollTo:"radar"}}):v.key==="assessment"?r(v.path,{state:{scrollTo:"tests"}}):r(v.path)},p=()=>{c(!1),r("/login")};return s.jsxs(s.Fragment,{children:[s.jsx("nav",{style:{position:"fixed",bottom:0,left:0,right:0,height:"64px",background:"#fff",borderTop:"1px solid #eee",display:"flex",justifyContent:"space-around",alignItems:"center",zIndex:1e3,boxShadow:"0 -2px 8px rgba(0,0,0,0.04)"},children:E2.map(v=>s.jsx("div",{style:{position:"relative",flex:1,textAlign:"center"},children:s.jsxs("button",{onClick:()=>m(v),onMouseDown:y=>y.preventDefault(),style:{background:"none",border:"none",outline:"none",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:i.pathname===v.path?"#667eea":"#888",fontWeight:i.pathname===v.path?"bold":"normal",fontSize:"12px",width:"100%",height:"64px",cursor:"pointer",position:"relative",transition:"color 0.2s"},"aria-label":v.label,children:[v.icon,s.jsx("span",{style:{marginTop:"4px"},children:v.label})]})},v.key))}),s.jsx(Km,{open:u,onClose:()=>c(!1),onRegister:p})]})}const _2=()=>{const{userData:r,loadUserData:i}=sn(),u=Ga(),[c,d]=E.useState([]),[f,m]=E.useState(0),[p,v]=E.useState("all"),[y,S]=E.useState("total"),[j,T]=E.useState(!0),[O,_]=E.useState(!1),[z,te]=E.useState(null),[ee,ue]=E.useState({x:0,y:0});E.useRef(null),E.useRef(null);const q=E.useRef(null),$=E.useRef(!1),H=E.useRef(!1),k=E.useRef(!1),X=[{value:"all",label:"全部年齡"},{value:"under20",label:"20歲以下"},{value:"21to30",label:"21~30歲"},{value:"31to40",label:"31~40歲"},{value:"41to50",label:"41~50歲"},{value:"51to60",label:"51~60歲"},{value:"61to70",label:"61~70歲"},{value:"over70",label:"70歲以上"},{value:"unknown",label:"未知年齡"}],P=E.useCallback(async()=>{var D;if(H.current){console.log("🔄 正在載入中，跳過重複請求");return}const b={selectedAgeGroup:p,selectedTab:y,userLadderScore:(r==null?void 0:r.ladderScore)||0};if(!$.current&&q.current&&JSON.stringify(q.current)===JSON.stringify(b)){console.log("🔄 載入參數未變化，跳過重複載入");return}$.current=!1,q.current=b,H.current=!0,T(!0);try{console.log("🚀 開始載入天梯數據...",b);const J=Sn(Kt(Re,"users"),Hs("ladderScore","desc"),gr(100)),W=await jn(J);let Y=[];if(console.log(`📥 從 Firebase 獲取到 ${W.size} 個文檔`),W.forEach(G=>{var he;const I=G.data();if(I.ladderScore>0){const Ne=I.isAnonymousInLadder===!0,Be={...I,ageGroup:I.age?Ol(Number(I.age)):I.ageGroup||""};Y.push({id:G.id,...Be,displayName:Ne?"匿名用戶":I.nickname||((he=I.email)==null?void 0:he.split("@")[0])||"未命名用戶",avatarUrl:Ne?"":I.avatarUrl,isAnonymous:Ne})}}),console.log(`📊 過濾後有分數的用戶：${Y.length} 名`),p!=="all"){const G=Y.length;Y=Y.filter(I=>I.ageGroup===p),console.log(`👥 年齡段過濾：${G} → ${Y.length} 名用戶`)}if(y==="weekly"){const G=Y.length,I=new Date;I.setDate(I.getDate()-7),Y=Y.filter(he=>he.lastActive?new Date(he.lastActive)>=I:!1),console.log(`📅 本周新進榜過濾：${G} → ${Y.length} 名用戶`)}if(Y.sort((G,I)=>I.ladderScore-G.ladderScore),Y=Y.slice(0,50),console.log(`📊 天梯數據載入完成：共 ${Y.length} 名用戶，最高分：${((D=Y[0])==null?void 0:D.ladderScore)||0}`),d(Y),r&&r.ladderScore>0){const G=Y.findIndex(I=>I.id===r.userId);if(G>=0){const I=G+1;console.log(`🎯 用戶排名：第 ${I} 名`),m(I)}else{console.log("📋 用戶不在前50名內，計算實際排名...");try{const I=Sn(Kt(Re,"users"),Hs("ladderScore","desc")),he=await jn(I);let Ne=[];if(he.forEach(Ce=>{const ke=Ce.data();if(ke.ladderScore>0){const rt={...ke,id:Ce.id,ageGroup:ke.age?Ol(Number(ke.age)):ke.ageGroup||""};Ne.push(rt)}}),p!=="all"&&(Ne=Ne.filter(Ce=>Ce.ageGroup===p)),y==="weekly"){const Ce=new Date;Ce.setDate(Ce.getDate()-7),Ne=Ne.filter(ke=>ke.lastActive?new Date(ke.lastActive)>=Ce:!1)}Ne.sort((Ce,ke)=>ke.ladderScore-Ce.ladderScore);const Be=Ne.findIndex(Ce=>Ce.id===r.userId),Xe=Be>=0?Be+1:0;console.log(`🎯 用戶實際排名：第 ${Xe} 名`),m(Xe)}catch(I){console.error("計算用戶實際排名失敗:",I),m(0)}}}else m(0)}catch(J){console.error("載入天梯數據失敗:",J),console.error("錯誤詳情:",{selectedAgeGroup:p,selectedTab:y,errorCode:J.code,errorMessage:J.message})}finally{T(!1),H.current=!1,k.current=!1}},[p,y,r==null?void 0:r.ladderScore,r==null?void 0:r.userId,r]);E.useEffect(()=>{var b;r&&!((b=u.state)!=null&&b.forceReload)&&P()},[r,p,y,r==null?void 0:r.ladderScore,r==null?void 0:r.userId]),E.useEffect(()=>{var b;(b=u.state)!=null&&b.forceReload&&r&&!k.current&&(console.log("🔄 檢測到強制重新載入標記，立即重新載入天梯數據"),k.current=!0,window.history.replaceState({},document.title),setTimeout(()=>{$.current=!0,q.current=null,P()},0))},[u.state,r]);const ne=E.useMemo(()=>(b,D)=>({}),[]),se=()=>null,de=b=>b===1?"🥇":b===2?"🥈":b===3?"🥉":b<=10?"🏆":b<=50?"⭐":"",Te=b=>{const D=X.find(J=>J.value===b);return D?D.label:b},be=E.useMemo(()=>{var J;if(`${r==null?void 0:r.ladderScore}${f}${c.length}${j}`,!r||!r.ladderScore||r.ladderScore===0||f>0&&f<=7||f===0)return null;const b=f,D=de(b);return s.jsx("div",{className:"floating-rank-display","data-rank":b,children:s.jsxs("div",{className:"floating-rank-card",children:[s.jsxs("div",{className:"ladder__rank",children:[s.jsx("span",{className:"ladder__rank-number",children:b}),s.jsx("span",{className:"ladder__rank-badge",children:D})]}),s.jsxs("div",{className:"ladder__user",children:[s.jsxs("div",{className:"ladder__avatar",children:[(()=>{const Y=sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":r.avatarUrl;return Y&&Y.trim()!==""?s.jsx("img",{src:Y,alt:"頭像",onError:G=>{console.log("頭像載入失敗，使用預設頭像"),G.target.style.display="none",G.target.nextSibling.style.display="flex"}}):null})(),s.jsx("div",{className:"ladder__avatar-placeholder",style:{display:(()=>{const Y=sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":r.avatarUrl;return Y&&Y.trim()!==""?"none":"flex"})()},children:r.nickname?r.nickname.charAt(0).toUpperCase():"U"})]}),s.jsxs("div",{className:"ladder__user-info",children:[s.jsx("div",{className:"ladder__user-name current-user-flame",children:r.nickname||((J=r.email)==null?void 0:J.split("@")[0])||"未命名用戶"}),s.jsxs("div",{className:"ladder__user-details",children:[Te(r.ageGroup)," •"," ",r.gender==="male"?"男":"女",s.jsx("br",{}),s.jsx("span",{className:"last-update",children:"我的排名"})]})]})]}),s.jsxs("div",{className:"ladder__score",children:[s.jsx("span",{className:"ladder__score-value",children:qh(r.ladderScore)}),s.jsx("span",{className:"ladder__score-label",children:"分"})]})]})})},[r==null?void 0:r.ladderScore,r==null?void 0:r.nickname,r==null?void 0:r.email,r==null?void 0:r.avatarUrl,r==null?void 0:r.ageGroup,r==null?void 0:r.gender,f,c.length,j]),ce=(b,D)=>{if(b.isAnonymous)return;const J=D.currentTarget.getBoundingClientRect(),W=200,Y=20,G=c.findIndex(Be=>Be.id===b.id)===0;let I=J.top-10,he=-100,Ne={};G?(I=J.bottom,he=0,Ne={width:"100%",maxWidth:"none",left:"0",transform:"translateX(0) translateY(0)",borderRadius:"0 0 16px 16px",boxShadow:"0 8px 25px rgba(0, 0, 0, 0.3)",zIndex:1001}):J.top-W-Y<0&&(I=J.bottom+10,he=0),ue({x:J.left+J.width/2,y:I,transformY:he,tooltipStyle:Ne}),te(b)},Z=()=>{te(null)},x=b=>{if(!b)return"未知";const D=b.toDate?b.toDate():new Date(b),W=new Date-D,Y=Math.floor(W/(1e3*60)),G=Math.floor(W/(1e3*60*60)),I=Math.floor(W/(1e3*60*60*24));return Y<1?"剛剛":Y<60?`${Y}分鐘前`:G<24?`${G}小時前`:I<7?`${I}天前`:D.toLocaleDateString("zh-TW")};return j?s.jsx("div",{className:"ladder",children:s.jsxs("div",{className:"ladder__loading",children:[s.jsx("div",{className:"ladder__loading-spinner"}),s.jsx("p",{children:"載入排行榜中..."})]})}):s.jsxs("div",{className:"ladder",children:[se(),be,s.jsxs("div",{className:"ladder__header",children:[s.jsx("h2",{children:"天梯排行榜"}),s.jsxs("div",{className:"ladder__filters",children:[s.jsx("div",{className:"ladder__filter-container",children:s.jsxs("select",{value:y,onChange:b=>S(b.target.value),className:"ladder__filter-select",children:[s.jsx("option",{value:"total",children:"🏆 總排行榜"}),s.jsx("option",{value:"weekly",children:"⭐ 本周新進榜"})]})}),s.jsx("div",{className:"ladder__filter-container",children:s.jsx("select",{value:p,onChange:b=>v(b.target.value),className:"ladder__filter-select",children:X.map(b=>s.jsx("option",{value:b.value,children:b.label},b.value))})}),f>50&&s.jsx("button",{className:"ladder__context-btn",onClick:()=>_(!O),children:O?"顯示前50名精華區":"顯示我的排名範圍"})]})]}),s.jsxs("div",{className:"ladder__list",children:[O&&f>50&&s.jsxs("div",{style:{padding:"8px 16px",background:"linear-gradient(135deg, #ff6b35 0%, #f7931e 100%)",color:"white",borderRadius:"8px 8px 0 0",fontSize:"12px",fontWeight:"600",textAlign:"center"},children:["🎯 您的排名範圍（第 ",Math.max(1,f-15)," - ",f+15," ","名）"]}),c.length===0?s.jsxs("div",{className:"ladder__empty",children:[s.jsx("p",{children:y==="weekly"?"暫無本周新進榜數據":"暫無排行榜數據"}),s.jsx("p",{children:y==="weekly"?"本周完成評測即可上榜！":"完成評測即可上榜！"})]}):c.map((b,D)=>s.jsxs("div",{className:`ladder__item ${b.id===(r==null?void 0:r.userId)?"ladder__item--current-user":""} ${b.isAnonymous?"":"clickable"}`,style:{...b.id===(r==null?void 0:r.userId)?{background:"linear-gradient(135deg, rgba(255, 107, 53, 0.1) 0%, rgba(247, 147, 30, 0.1) 100%)",borderLeft:"4px solid #ff6b35",fontWeight:"600"}:{},...ne(b,D)},onClick:b.isAnonymous?void 0:J=>ce(b,J),title:b.isAnonymous?"":"點擊查看訓練背景",children:[s.jsxs("div",{className:"ladder__rank",children:[s.jsx("span",{className:`ladder__rank-number ${b.id===(r==null?void 0:r.userId)?"rank-changing":""}`,children:D+1}),s.jsx("span",{className:"ladder__rank-badge",children:de(D+1)})]}),s.jsxs("div",{className:"ladder__user",children:[s.jsxs("div",{className:"ladder__avatar",children:[b.avatarUrl&&b.avatarUrl.trim()!==""&&!b.isAnonymous?s.jsx("img",{src:b.avatarUrl,alt:"頭像",onError:J=>{console.log("頭像載入失敗，使用預設頭像"),J.target.style.display="none",J.target.nextSibling.style.display="flex"}}):null,s.jsx("div",{className:`ladder__avatar-placeholder ${b.isAnonymous?"anonymous":""}`,style:{display:b.avatarUrl&&b.avatarUrl.trim()!==""&&!b.isAnonymous?"none":"flex"},children:b.isAnonymous?"👤":b.displayName.charAt(0).toUpperCase()})]}),s.jsxs("div",{className:"ladder__user-info",children:[s.jsxs("div",{className:`ladder__user-name ${b.isAnonymous?"anonymous":""} ${b.id===(r==null?void 0:r.userId)?"current-user-flame":""}`,children:[b.displayName,b.isAnonymous&&" 🔒"]}),s.jsx("div",{className:"ladder__user-details",children:b.isAnonymous?"匿名用戶":s.jsxs(s.Fragment,{children:[Te(b.ageGroup)," •"," ",b.gender==="male"?"男":"女",b.lastActive&&s.jsxs(s.Fragment,{children:[s.jsx("br",{}),s.jsxs("span",{className:"last-update",children:["更新於 ",x(b.lastActive)]})]})]})})]})]}),s.jsxs("div",{className:"ladder__score",children:[s.jsx("span",{className:"ladder__score-value",children:qh(b.ladderScore)}),s.jsx("span",{className:"ladder__score-label",children:"分"})]})]},b.id))]}),s.jsxs("div",{className:"ladder__footer",children:[y==="weekly"&&s.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"8px"},children:"📅 本周新進榜：顯示過去7天內有活動的用戶"}),f>50&&s.jsxs("p",{style:{fontSize:"12px",color:"#666",marginTop:"8px",fontStyle:"italic"},children:["💡 提示：您的排名為第 ",f," ","名，可以點擊上方按鈕查看您附近的競爭對手"]})]}),z&&s.jsxs("div",{className:"training-tooltip",style:{position:"fixed",left:ee.x,top:ee.y,transform:`translateX(-50%) translateY(${ee.transformY||-100}%)`,zIndex:1e3,...ee.tooltipStyle},children:[s.jsxs("div",{className:`tooltip-content ${c.findIndex(b=>b.id===z.id)===0?"first-place-glow expanded":""}`,children:[s.jsxs("div",{className:"tooltip-header",children:[s.jsxs("h4",{children:[z.displayName," 的訓練背景"]}),s.jsx("button",{className:"tooltip-close",onClick:Z,children:"×"})]}),s.jsxs("div",{className:"tooltip-body",children:[z.profession&&s.jsxs("div",{className:"tooltip-item",children:[s.jsx("span",{className:"tooltip-label",children:"💼 職業："}),s.jsx("span",{className:"tooltip-value",children:z.profession})]}),z.weeklyTrainingHours&&s.jsxs("div",{className:"tooltip-item",children:[s.jsx("span",{className:"tooltip-label",children:"⏰ 每周訓練時數："}),s.jsxs("span",{className:"tooltip-value",children:[z.weeklyTrainingHours," 小時"]})]}),z.trainingYears&&s.jsxs("div",{className:"tooltip-item",children:[s.jsx("span",{className:"tooltip-label",children:"📅 訓練年資："}),s.jsxs("span",{className:"tooltip-value",children:[z.trainingYears," 年"]})]}),!z.profession&&!z.weeklyTrainingHours&&!z.trainingYears&&s.jsxs("div",{className:"tooltip-empty",children:[s.jsx("p",{children:"該用戶尚未填寫訓練背景信息"}),s.jsx("p",{children:"💡 在個人資料頁面填寫訓練背景，激勵其他健身愛好者！"})]})]})]}),s.jsx("div",{className:`tooltip-arrow ${c.findIndex(b=>b.id===z.id)===0?"first-place-arrow expanded":""}`,style:{...ee.transformY===0?{bottom:"auto",top:"-8px",borderTop:"none",borderBottom:"8px solid white",...c.findIndex(b=>b.id===z.id)===0&&{left:"50px",transform:"translateX(-50%)"}}:{bottom:"-8px",top:"auto",borderBottom:"none",borderTop:"8px solid white"}}})]}),z&&s.jsx("div",{className:"tooltip-overlay",onClick:Z,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999}})]})},R2=()=>{const{userData:r,setUserData:i}=sn(),[u,c]=E.useState("feed"),[d,f]=E.useState([]),[m,p]=E.useState(!0),[v,y]=E.useState(""),[S,j]=E.useState(""),[T,O]=E.useState(""),[_,z]=E.useState(!1),[te,ee]=E.useState([]),[ue,q]=E.useState([]),[$,H]=E.useState(""),[k,X]=E.useState([]),[P,ne]=E.useState(new Set),[se,de]=E.useState(new Set),Te=E.useRef(new Map);E.useRef(new Map);const be=E.useRef(!1),ce=E.useRef(!1),Z=E.useRef(!1),x=E.useCallback(async()=>{var L;try{if(ce.current)return;p(!0),console.log("🔄 開始載入社群動態...");const ae=(L=oe.currentUser)==null?void 0:L.uid;if(!ae){console.log("❌ 用戶未登入"),f([]);return}const ye=Sn(Kt(Re,"communityPosts"),Hs("timestamp","desc"),gr(50)),je=await jn(ye),xe=[];je.forEach(le=>{const ie=le.data();ie.comments&&ie.comments.length>0&&(console.log(`🔍 處理動態 ${le.id} 的 ${ie.comments.length} 條留言`),ie.comments=ie.comments.map(fe=>fe.userAvatarUrl?(console.log(`✅ 留言 ${fe.id} 已有頭像: ${fe.userAvatarUrl}`),fe):(console.log(`📝 留言 ${fe.id} 缺少頭像，使用預設頭像`),{...fe,userAvatarUrl:"/guest-avatar.svg"}))),xe.push({id:le.id,...ie})}),console.log(`📊 載入到 ${xe.length} 條動態`),be.current||(console.log("⏳ 等待好友數據載入完成..."),await new Promise(le=>setTimeout(le,1e3)));const re=(r==null?void 0:r.friends)||[],pe=[ae,...re].filter(Boolean);console.log(`🔍 允許查看的用戶: ${pe.join(", ")}`);const Q=xe.filter(le=>{const ie=pe.includes(le.userId);return ie||console.log(`🚫 過濾掉非好友動態: ${le.userId}`),ie});console.log(`📊 過濾後剩餘 ${Q.length} 條動態`);const M=new Set;if(Q.forEach(le=>{(le.comments||[]).forEach(ie=>{!ie.userAvatarUrl&&ie.userId&&M.add(ie.userId)})}),M.size>0){const le={};await Promise.all(Array.from(M).map(async ie=>{try{const fe=await zs(tt(Re,"users",ie));if(fe.exists()){const He=fe.data();le[ie]=He.avatarUrl||"/guest-avatar.svg"}else le[ie]="/guest-avatar.svg"}catch(fe){console.warn(`取得用戶 ${ie} 頭像失敗`,fe),le[ie]="/guest-avatar.svg"}})),Q.forEach(ie=>{(ie.comments||[]).forEach(fe=>{!fe.userAvatarUrl&&fe.userId===ie.userId&&(fe.userAvatarUrl=ie.userAvatarUrl),!fe.userAvatarUrl&&le[fe.userId]&&(fe.userAvatarUrl=le[fe.userId])})})}f([...Q]),ce.current=!0,v.includes("載入動態失敗")&&y("")}catch(ae){console.error("❌ 載入動態失敗:",ae),ae.code==="permission-denied"?y("權限不足，請檢查登入狀態"):ae.code==="unavailable"?y("網路連線問題，請檢查網路連線"):y("載入動態失敗，請稍後再試"),ce.current=!1}finally{p(!1)}},[r==null?void 0:r.friends]),b=async()=>{var L;if(!T.trim()){y("請輸入動態內容");return}if(!oe.currentUser){y("請先登入");return}try{z(!0),console.log("📝 準備發布動態...");const ae={userId:oe.currentUser.uid,userNickname:(r==null?void 0:r.nickname)||((L=r==null?void 0:r.email)==null?void 0:L.split("@")[0])||"匿名用戶",userAvatarUrl:sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":(r==null?void 0:r.avatarUrl)||"",content:T.trim(),type:"status",likes:[],comments:[],timestamp:new Date().toISOString(),privacy:"friends"},ye=await Oo(Kt(Re,"communityPosts"),ae);Rt.logWrite("addDoc","communityPosts",ye.id),console.log("✅ 動態發布成功，ID:",ye.id);const je={id:ye.id,...ae};console.log("🔄 更新本地狀態，添加新動態:",je.id),f(xe=>{const re=[je,...xe];return console.log(`📊 更新後動態總數: ${re.length}`),re}),O(""),j("動態發布成功！"),setTimeout(()=>j(""),3e3)}catch(ae){console.error("❌ 發布動態失敗:",ae),y("發布失敗: "+ae.message)}finally{z(!1)}},D=async(L,ae)=>{if(!oe.currentUser){y("請先登入");return}if(P.has(L)){console.log("🔄 點讚操作進行中，請稍候...");return}const ye=oe.currentUser.uid,je=ae.includes(ye),xe=je?ae.filter(re=>re!==ye):[...ae,ye];f(re=>re.map(pe=>pe.id===L?{...pe,likes:xe}:pe)),ne(re=>new Set(re).add(L));try{const re=tt(Re,"communityPosts",L);await Yn(re,{likes:xe},{merge:!0}),Rt.logWrite("setDoc","communityPosts",L,{likes:`更新為 ${xe.length} 個點讚`}),console.log(`👍 ${je?"取消點讚":"點讚"}成功`)}catch(re){console.error("❌ 點讚操作失敗:",re),y("點讚失敗，請稍後再試"),f(pe=>pe.map(Q=>Q.id===L?{...Q,likes:ae}:Q))}finally{ne(re=>{const pe=new Set(re);return pe.delete(L),pe})}},J=async(L,ae)=>{var xe;if(!ae.trim())return;if(!oe.currentUser){y("請先登入");return}if(se.has(L)){console.log("🔄 留言提交中，請稍候...");return}const ye={id:Date.now().toString(),userId:oe.currentUser.uid,userNickname:(r==null?void 0:r.nickname)||((xe=r==null?void 0:r.email)==null?void 0:xe.split("@")[0])||"匿名用戶",userAvatarUrl:sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":(r==null?void 0:r.avatarUrl)||"",content:ae.trim(),timestamp:new Date().toISOString()};f(re=>re.map(Q=>{if(Q.id===L){const M=[...Q.comments,ye];return{...Q,comments:M}}return Q})),de(re=>new Set(re).add(L)),Te.current.has(L)&&clearTimeout(Te.current.get(L));const je=setTimeout(async()=>{try{const re=d.find(M=>M.id===L);if(!re){y("動態不存在");return}const pe=[...re.comments,ye],Q=tt(Re,"communityPosts",L);await Yn(Q,{comments:pe},{merge:!0}),Rt.logWrite("setDoc","communityPosts",L,{comments:`新增留言，總計 ${pe.length} 條`}),console.log("💬 留言添加成功")}catch(re){console.error("❌ 添加留言失敗:",re),y("留言失敗，請稍後再試"),f(pe=>pe.map(M=>{if(M.id===L){const le=M.comments.filter(ie=>ie.id!==ye.id);return{...M,comments:le}}return M}))}finally{de(re=>{const pe=new Set(re);return pe.delete(L),pe}),Te.current.delete(L)}},500);Te.current.set(L,je)},W=async(L,ae)=>{if(!oe.currentUser){y("請先登入");return}try{const ye=d.find(ie=>ie.id===L);if(!ye){y("動態不存在");return}const je=ye.comments.find(ie=>ie.id===ae);if(!je){y("留言不存在");return}const xe=oe.currentUser.uid,re=ye.userId===xe,pe=je.userId===xe;if(!re&&!pe){y("您沒有權限刪除此留言");return}const Q=re?"確定要刪除此留言嗎？":"確定要刪除您的留言嗎？";if(!window.confirm(Q))return;const M=ye.comments.filter(ie=>ie.id!==ae),le=tt(Re,"communityPosts",L);await Yn(le,{comments:M},{merge:!0}),Rt.logWrite("setDoc","communityPosts",L,{comments:`刪除留言，總計 ${M.length} 條`}),console.log("🔄 更新本地狀態，刪除留言:",ae),f(ie=>{const fe=ie.map(He=>He.id===L?{...He,comments:M}:He);return console.log(`📊 動態 ${L} 留言數: ${M.length}`),fe}),j("留言已刪除"),setTimeout(()=>j(""),3e3)}catch(ye){console.error("❌ 刪除留言失敗:",ye),y("刪除留言失敗，請稍後再試")}},Y=async L=>{if(!oe.currentUser){y("請先登入");return}try{const ae=d.find(xe=>xe.id===L);if(!ae){y("動態不存在");return}const ye=oe.currentUser.uid;if(ae.userId!==ye){y("您沒有權限刪除此動態");return}if(!window.confirm("確定要刪除此動態嗎？此操作無法撤銷。"))return;const je=tt(Re,"communityPosts",L);await cm(je),Rt.logWrite("deleteDoc","communityPosts",L,{action:"刪除動態"}),console.log("🔄 更新本地狀態，刪除動態:",L),f(xe=>{const re=xe.filter(pe=>pe.id!==L);return console.log(`📊 剩餘動態數: ${re.length}`),re}),j("動態已刪除"),setTimeout(()=>j(""),3e3)}catch(ae){console.error("❌ 刪除動態失敗:",ae),y("刪除動態失敗，請稍後再試")}},G=L=>{const ae=new Date,ye=new Date(L),je=ae-ye,xe=Math.floor(je/(1e3*60)),re=Math.floor(je/(1e3*60*60)),pe=Math.floor(je/(1e3*60*60*24));return xe<1?"剛剛":xe<60?`${xe}分鐘前`:re<24?`${re}小時前`:pe<7?`${pe}天前`:ye.toLocaleDateString()},I=E.useCallback(async()=>{var L;try{if(be.current)return;p(!0);const ae=Sn(Kt(Re,"friendInvitations"),Nn("status","==","accepted")),ye=await jn(ae),je=new Set;ye.forEach(pe=>{const Q=pe.data();Q.fromUserId===oe.currentUser.uid?je.add(Q.toUserId):Q.toUserId===oe.currentUser.uid&&je.add(Q.fromUserId)});const xe=[];for(const pe of je)try{const Q=await zs(tt(Re,"users",pe));if(Q.exists()){const M=Q.data();if(!M){console.warn(`好友 ${pe} 的用戶數據為空`);continue}let le=0,ie=0;if(M.scores){const fe=[];M.scores.strength&&M.scores.strength>0&&fe.push(M.scores.strength),M.scores.explosivePower&&M.scores.explosivePower>0&&fe.push(M.scores.explosivePower),M.scores.cardio&&M.scores.cardio>0&&fe.push(M.scores.cardio),M.scores.muscleMass&&M.scores.muscleMass>0&&fe.push(M.scores.muscleMass),M.scores.bodyFat&&M.scores.bodyFat>0&&fe.push(M.scores.bodyFat),console.log(`好友 ${pe} 的評分數據:`,M.scores),console.log(`好友 ${pe} 的有效分數:`,fe),fe.length>0&&(le=fe.reduce((He,dt)=>He+dt,0)/fe.length,ie=fe.length,console.log(`好友 ${pe} 平均分數: ${le}, 項目數: ${ie}`))}else console.log(`好友 ${pe} 沒有評分數據`);xe.push({id:pe,nickname:M.nickname||((L=M.email)==null?void 0:L.split("@")[0])||"未命名用戶",email:M.email||"",avatarUrl:M.avatarUrl||"",averageScore:le>0?Number(le).toFixed(2):null,scoreCount:ie,lastActive:M.lastActive})}}catch(Q){console.error(`載入好友 ${pe} 數據失敗:`,Q)}const re=xe.filter(pe=>pe&&pe.id&&typeof pe.nickname=="string");ee(re),be.current=!0}catch(ae){console.error("載入好友數據失敗:",ae),y("載入好友數據失敗，請稍後再試"),be.current=!0}finally{p(!1)}},[]),he=E.useCallback(async()=>{var L;try{const ae=Sn(Kt(Re,"friendInvitations"),Nn("toUserId","==",oe.currentUser.uid),Nn("status","==","pending")),ye=await jn(ae),je=[];for(const xe of ye.docs){const re=xe.data();try{const pe=await zs(tt(Re,"users",re.fromUserId));if(pe.exists()){const Q=pe.data();je.push({id:xe.id,fromUserId:re.fromUserId,nickname:Q.nickname||((L=Q.email)==null?void 0:L.split("@")[0])||"未命名用戶",email:Q.email,avatarUrl:Q.avatarUrl||"",createdAt:re.createdAt})}}catch(pe){console.error("獲取邀請用戶信息失敗:",pe)}}q(je),Z.current=!0}catch(ae){console.error("載入好友邀請失敗:",ae),Z.current=!0}},[]),Ne=async()=>{if(!$.trim()){X([]);return}try{p(!0);const L=Sn(Kt(Re,"users")),ae=await jn(L),ye=[];ae.forEach(je=>{var M;const xe=je.data(),re=$.toLowerCase(),pe=(xe.nickname||"").toLowerCase(),Q=(xe.email||"").toLowerCase();(pe.includes(re)||Q.includes(re))&&je.id!==oe.currentUser.uid&&ye.push({id:je.id,nickname:xe.nickname||((M=xe.email)==null?void 0:M.split("@")[0])||"未命名用戶",email:xe.email,avatarUrl:xe.avatarUrl||"",isFriend:te.some(le=>le.id===je.id),hasPendingRequest:!1})}),X(ye)}catch(L){console.error("搜尋用戶失敗:",L),y("搜尋失敗")}finally{p(!1)}},Be=async L=>{try{p(!0);const ae=Sn(Kt(Re,"friendInvitations"),Nn("fromUserId","==",oe.currentUser.uid),Nn("toUserId","==",L));if(!(await jn(ae)).empty){y("已經發送過好友邀請");return}const je=await Oo(Kt(Re,"friendInvitations"),{fromUserId:oe.currentUser.uid,toUserId:L,status:"pending",createdAt:new Date().toISOString()});Rt.logWrite("addDoc","friendInvitations",je.id),j("好友邀請已發送"),X(xe=>xe.map(re=>re.id===L?{...re,hasPendingRequest:!0}:re))}catch(ae){console.error("發送好友邀請失敗:",ae),y("發送邀請失敗")}finally{p(!1)}},Xe=async(L,ae)=>{try{p(!0),await Vn(tt(Re,"friendInvitations",L),{status:"accepted",acceptedAt:new Date().toISOString()}),Rt.logWrite("updateDoc","friendInvitations",L);const ye=tt(Re,"users",oe.currentUser.uid);await Vn(ye,{friends:_1(ae)}),Rt.logWrite("updateDoc","users",oe.currentUser.uid,{friends:"arrayUnion"}),i(je=>({...je,friends:[...je.friends||[],ae]})),await I(),await he(),j("已接受好友邀請")}catch(ye){console.error("接受好友邀請失敗:",ye),y("接受邀請失敗: "+ye.message)}finally{p(!1)}},Ce=async L=>{try{p(!0),await Vn(tt(Re,"friendInvitations",L),{status:"declined",declinedAt:new Date().toISOString()}),Rt.logWrite("updateDoc","friendInvitations",L),await he(),j("已拒絕好友邀請")}catch(ae){console.error("拒絕好友邀請失敗:",ae),y("拒絕邀請失敗: "+ae.message)}finally{p(!1)}},ke=hn(),rt=L=>{if(!L){console.error("好友ID為空");return}te.find(ye=>ye.id===L)?ke(`/friend-feed/${L}`):console.error("找不到好友:",L)},mt=async L=>{try{p(!0);const ae=tt(Re,"users",oe.currentUser.uid);await Vn(ae,{friends:T1(L)});const je=(await jn(Sn(Kt(Re,"friendInvitations"),Nn("fromUserId","in",[oe.currentUser.uid,L]),Nn("toUserId","in",[oe.currentUser.uid,L]),Nn("status","==","accepted")))).docs.map(xe=>Vn(xe.ref,{status:"cancelled",cancelledAt:new Date().toISOString()}));await Promise.all(je),i(xe=>{var re;return{...xe,friends:((re=xe.friends)==null?void 0:re.filter(pe=>pe!==L))||[]}}),ee(xe=>xe.filter(re=>re.id!==L)),j("已移除好友")}catch(ae){console.error("移除好友失敗:",ae),y(`移除好友失敗: ${ae.message}`)}finally{p(!1)}};return E.useEffect(()=>{try{x(),I(),he()}catch(L){console.error("初始載入失敗:",L),y("載入數據失敗，請稍後再試")}return()=>{Te.current.forEach(L=>clearTimeout(L)),Te.current.clear()}},[x,I,he]),E.useEffect(()=>{try{u==="friends"&&!be.current?(console.log("🔄 標籤切換時重新載入好友數據"),I()):u==="requests"&&!Z.current&&(console.log("🔄 標籤切換時重新載入邀請數據"),he())}catch(L){console.error("標籤切換載入失敗:",L),y("載入數據失敗，請稍後再試")}},[u,I,he]),s.jsxs("div",{className:"community-page",children:[s.jsxs("div",{className:"community-header",children:[s.jsx("h1",{children:"🏠 精神時光屋"}),v&&s.jsx("div",{className:"alert alert-error",children:v}),S&&s.jsx("div",{className:"alert alert-success",children:S})]}),!te&&s.jsx("div",{className:"alert alert-error",children:"載入好友列表時出現錯誤，請刷新頁面重試"}),s.jsxs("div",{className:"tab-navigation",children:[!be.current&&s.jsx("div",{className:"loading-indicator",children:"正在載入好友數據..."}),s.jsx("div",{className:`tab-btn ${u==="feed"?"active":""}`,onClick:()=>c("feed"),children:s.jsx("span",{className:"tab-label",children:"動態牆"})}),s.jsx("div",{className:`tab-btn ${u==="friends"?"active":""}`,onClick:()=>c("friends"),children:s.jsxs("span",{className:"tab-label",children:["好友 (",be.current?te.length:"...",")"]})}),s.jsxs("div",{className:`tab-btn ${u==="requests"?"active":""}`,onClick:()=>c("requests"),children:[s.jsx("span",{className:"tab-label",children:"邀請通知"}),ue.length>0&&s.jsx("span",{className:"notification-badge",children:ue.length})]}),s.jsx("div",{className:`tab-btn ${u==="search"?"active":""}`,onClick:()=>c("search"),children:s.jsx("span",{className:"tab-label",children:"搜尋好友"})})]}),s.jsxs("div",{className:"tab-content",children:[m&&s.jsx("div",{className:"loading",children:"載入中..."}),v&&!m&&s.jsxs("div",{className:"alert alert-error",children:[v,s.jsx("button",{onClick:()=>{ce.current=!1,be.current=!1,Z.current=!1,y(""),x(),I(),he()},style:{marginLeft:"10px",padding:"5px 10px",background:"#ff6b6b",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"重試"})]}),u==="feed"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"post-composer",children:s.jsxs("div",{className:"composer-header",children:[s.jsx("div",{className:"user-avatar",children:s.jsx("img",{src:sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":(r==null?void 0:r.avatarUrl)||"/default-avatar.png",alt:"頭像",onError:L=>{L.target.src="/default-avatar.png"}})}),s.jsxs("div",{className:"composer-input",children:[s.jsx("textarea",{placeholder:"分享你的健身成果...",value:T,onChange:L=>O(L.target.value),maxLength:500,disabled:_}),s.jsxs("div",{className:"composer-footer",children:[s.jsxs("span",{className:"char-count",children:[T.length,"/500"]}),s.jsx("button",{onClick:b,disabled:!T.trim()||_,className:"publish-btn",children:_?"發布中...":"發布"})]})]})]})}),s.jsx("div",{className:"posts-container",children:d.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("p",{children:"還沒有動態"}),s.jsx("p",{children:"發布第一條動態吧！"})]}):d.map(L=>{var ae;return s.jsx(O2,{post:L,currentUserId:(ae=oe.currentUser)==null?void 0:ae.uid,onToggleLike:D,onAddComment:J,onDeleteComment:W,onDeletePost:Y,formatTime:G,likeProcessing:P,commentProcessing:se},L.id)})})]}),u==="friends"&&s.jsx("div",{className:"friends-tab",children:!te||te.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("p",{children:"還沒有好友"}),s.jsx("p",{children:"去搜尋好友吧！"})]}):s.jsx("div",{className:"friends-list",children:te.filter(L=>L&&L.id).map(L=>s.jsxs("div",{className:"friend-item",children:[s.jsxs("div",{className:"friend-info",children:[s.jsx("img",{src:L.avatarUrl||"/default-avatar.png",alt:"頭像",className:"friend-avatar",onError:ae=>{ae.target.src="/default-avatar.png"}}),s.jsxs("div",{className:"friend-details",children:[s.jsx("div",{className:"friend-name",children:L.nickname||"未命名用戶"}),s.jsx("div",{className:"friend-score",children:L.averageScore?s.jsx(s.Fragment,{children:s.jsxs("span",{className:"score-value",children:["🏆 ",L.averageScore,"分"]})}):s.jsx("span",{className:"no-score",children:"尚未評測"})}),s.jsx("div",{className:"friend-email",children:L.email||""})]})]}),s.jsxs("div",{className:"friend-actions",children:[s.jsx("button",{className:"btn-board",onClick:()=>L.id&&rt(L.id),title:"查看留言板",children:"💬"}),s.jsx("button",{className:"btn-remove",onClick:()=>L.id&&mt(L.id),title:"移除好友",children:"❌"})]})]},L.id||"unknown"))})}),u==="requests"&&s.jsx("div",{className:"requests-tab",children:ue.length===0?s.jsx("div",{className:"empty-state",children:s.jsx("p",{children:"沒有待處理的邀請"})}):s.jsx("div",{className:"requests-list",children:ue.map(L=>s.jsxs("div",{className:"request-item",children:[s.jsxs("div",{className:"request-info",children:[s.jsx("img",{src:L.avatarUrl||"/default-avatar.png",alt:"頭像",className:"request-avatar",onError:ae=>{ae.target.src="/default-avatar.png"}}),s.jsxs("div",{className:"request-details",children:[s.jsx("div",{className:"request-name",children:L.nickname}),s.jsx("div",{className:"request-email",children:L.email})]})]}),s.jsxs("div",{className:"request-actions",children:[s.jsx("button",{className:"btn-accept",onClick:()=>Xe(L.id,L.fromUserId),children:"✅ 接受"}),s.jsx("button",{className:"btn-decline",onClick:()=>Ce(L.id),children:"❌ 拒絕"})]})]},L.id))})}),u==="search"&&s.jsxs("div",{className:"search-tab",children:[s.jsxs("div",{className:"search-container",children:[s.jsx("input",{type:"text",placeholder:"搜尋暱稱或電子郵件...",value:$,onChange:L=>H(L.target.value),onKeyPress:L=>{L.key==="Enter"&&Ne()},className:"search-input"}),s.jsx("button",{onClick:Ne,className:"search-btn",children:"搜尋"})]}),s.jsx("div",{className:"search-results",children:k.length===0&&$.trim()?s.jsx("div",{className:"empty-state",children:s.jsx("p",{children:"沒有找到相關用戶"})}):k.map(L=>s.jsxs("div",{className:"user-item",children:[s.jsxs("div",{className:"user-info",children:[s.jsx("img",{src:L.avatarUrl||"/default-avatar.png",alt:"頭像",className:"user-avatar",onError:ae=>{ae.target.src="/default-avatar.png"}}),s.jsxs("div",{className:"user-details",children:[s.jsx("div",{className:"user-name",children:L.nickname}),s.jsx("div",{className:"user-email",children:L.email})]})]}),s.jsx("div",{className:"user-actions",children:L.isFriend?s.jsx("span",{className:"status-badge",children:"已是好友"}):L.hasPendingRequest?s.jsx("span",{className:"status-badge",children:"邀請已發送"}):s.jsx("button",{className:"btn-add",onClick:()=>Be(L.id),disabled:m,children:"加好友"})})]},L.id))})]})]})]})},O2=({post:r,currentUserId:i,onToggleLike:u,onAddComment:c,onDeleteComment:d,onDeletePost:f,formatTime:m,likeProcessing:p,commentProcessing:v})=>{const[y,S]=E.useState(!1),[j,T]=E.useState(""),O=r.likes.includes(i),_=r.likes.length,z=r.comments.length,te=()=>{j.trim()&&(c(r.id,j),T(""))};return s.jsxs("div",{className:"post-card",children:[s.jsxs("div",{className:"post-header",children:[s.jsxs("div",{className:"post-user",children:[s.jsx("img",{src:r.userAvatarUrl||"/default-avatar.png",alt:"頭像",className:"user-avatar",onError:ee=>{ee.target.src="/default-avatar.png"}}),s.jsxs("div",{className:"user-info",children:[s.jsx("div",{className:"user-name",children:r.userNickname}),s.jsx("div",{className:"post-time",children:m(r.timestamp)})]})]}),r.userId===i&&s.jsx("button",{onClick:()=>f(r.id),className:"delete-post-btn",title:"刪除此動態",children:"🗑️"})]}),s.jsx("div",{className:"post-content",children:r.content}),s.jsxs("div",{className:"post-actions",children:[s.jsxs("button",{onClick:()=>u(r.id,r.likes),className:`action-btn ${O?"liked":""}`,disabled:p.has(r.id),children:[s.jsx("span",{className:"action-icon",children:p.has(r.id)?"⏳":"👍"}),s.jsx("span",{className:"action-text",children:p.has(r.id)?"處理中...":`${_>0?_:""} 讚`})]}),s.jsxs("button",{onClick:()=>S(!y),className:"action-btn",children:[s.jsx("span",{className:"action-icon",children:"💬"}),s.jsxs("span",{className:"action-text",children:[z>0?z:""," 留言"]})]})]}),y&&s.jsxs("div",{className:"comments-section",children:[r.comments.length>0&&s.jsx("div",{className:"comments-list",children:r.comments.map(ee=>{const ue=r.userId===i,q=ee.userId===i,$=ue||q;return s.jsxs("div",{className:"comment-item",children:[s.jsxs("div",{className:"comment-header",children:[s.jsxs("div",{className:"comment-user-info",children:[s.jsx("img",{src:ee.userAvatarUrl||"/guest-avatar.svg",alt:"頭像",className:"comment-avatar",onError:H=>{H.target.src="/guest-avatar.svg"}}),s.jsxs("div",{className:"comment-text-info",children:[s.jsx("div",{className:"comment-name",children:ee.userNickname}),s.jsx("div",{className:"comment-time",children:m(ee.timestamp)})]})]}),$&&s.jsx("button",{onClick:()=>d(r.id,ee.id),className:"comment-delete-btn",title:ue?"刪除此留言":"刪除我的留言",children:"🗑️"})]}),s.jsx("div",{className:"comment-content",children:ee.content})]},ee.id)})}),s.jsxs("div",{className:"comment-input",children:[s.jsx("input",{type:"text",placeholder:"寫留言...",value:j,onChange:ee=>T(ee.target.value),onKeyPress:ee=>{ee.key==="Enter"&&te()}}),s.jsx("button",{onClick:te,disabled:!j.trim()||v.has(r.id),className:"comment-btn",children:v.has(r.id)?"發送中...":"發送"})]})]})]})},B2=()=>{const{userData:r}=sn(),{userId:i}=i1(),u=hn(),[c,d]=E.useState([]),[f,m]=E.useState(!0),[p,v]=E.useState(""),[y,S]=E.useState(""),[j,T]=E.useState(""),[O,_]=E.useState(!1),[z,te]=E.useState(null),[ee,ue]=E.useState(new Set),[q,$]=E.useState(new Set),H=E.useRef(new Map),k=E.useRef(!1),X=E.useCallback(async()=>{try{if(!i){v("用戶ID為空");return}const x=tt(Re,"users",i),b=await getDoc(x);if(b.exists()){const D=b.data();te({id:b.id,...D}),console.log("✅ 好友資料載入成功:",D.nickname||D.email)}else v("找不到該用戶"),console.error("❌ 找不到用戶:",i)}catch(x){console.error("載入好友資料失敗:",x),v("載入用戶資料失敗")}},[i]),P=E.useCallback(async()=>{try{if(k.current)return;m(!0),console.log("🔄 開始載入好友動態...");const x=Sn(Kt(Re,"communityPosts"),Nn("userId","==",i),Hs("timestamp","desc"),gr(50)),b=await jn(x),D=[];b.forEach(W=>{const Y=W.data();Y.comments&&Y.comments.length>0&&(console.log(`🔍 處理好友動態 ${W.id} 的 ${Y.comments.length} 條留言`),Y.comments=Y.comments.map(G=>G.userAvatarUrl?(console.log(`✅ 好友留言 ${G.id} 已有頭像: ${G.userAvatarUrl}`),G):(console.log(`📝 好友留言 ${G.id} 缺少頭像，使用預設頭像`),{...G,userAvatarUrl:"/guest-avatar.svg"}))),D.push({id:W.id,...Y})}),console.log(`📊 載入到 ${D.length} 條動態`);const J=new Set;if(D.forEach(W=>{(W.comments||[]).forEach(Y=>{!Y.userAvatarUrl&&Y.userId&&J.add(Y.userId)})}),J.size>0){const W={};await Promise.all(Array.from(J).map(async Y=>{try{const G=await getDoc(tt(Re,"users",Y));if(G.exists()){const I=G.data();W[Y]=I.avatarUrl||"/guest-avatar.svg"}else W[Y]="/guest-avatar.svg"}catch(G){console.warn(`取得用戶 ${Y} 頭像失敗`,G),W[Y]="/guest-avatar.svg"}})),D.forEach(Y=>{(Y.comments||[]).forEach(G=>{!G.userAvatarUrl&&G.userId===Y.userId&&(G.userAvatarUrl=Y.userAvatarUrl),!G.userAvatarUrl&&W[G.userId]&&(G.userAvatarUrl=W[G.userId])})})}d([...D]),k.current=!0}catch(x){console.error("❌ 載入動態失敗:",x),v("載入動態失敗，請稍後再試")}finally{m(!1)}},[i]),ne=async()=>{var x;if(!j.trim()){v("請輸入動態內容");return}if(!oe.currentUser){v("請先登入");return}try{_(!0),console.log("📝 準備發布動態...");const b={userId:oe.currentUser.uid,userNickname:(r==null?void 0:r.nickname)||((x=r==null?void 0:r.email)==null?void 0:x.split("@")[0])||"匿名用戶",userAvatarUrl:sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":(r==null?void 0:r.avatarUrl)||"",content:j.trim(),type:"status",likes:[],comments:[],timestamp:new Date().toISOString(),privacy:"friends",targetUserId:i},D=await Oo(Kt(Re,"communityPosts"),b);Rt.logWrite("addDoc","communityPosts",D.id),console.log("✅ 動態發布成功，ID:",D.id),T(""),S("動態發布成功！"),await P(),setTimeout(()=>S(""),3e3)}catch(b){console.error("❌ 發布動態失敗:",b),v("發布失敗: "+b.message)}finally{_(!1)}},se=async(x,b)=>{if(!oe.currentUser){v("請先登入");return}if(ee.has(x)){console.log("🔄 點讚操作進行中，請稍候...");return}try{ue(G=>new Set(G).add(x));const D=oe.currentUser.uid,J=b.includes(D),W=J?b.filter(G=>G!==D):[...b,D],Y=tt(Re,"communityPosts",x);await Vn(Y,{likes:W}),Rt.logWrite("updateDoc","communityPosts",x,{likes:`更新為 ${W.length} 個點讚`}),d(G=>G.map(I=>I.id===x?{...I,likes:W}:I)),console.log(`👍 ${J?"取消點讚":"點讚"}成功`)}catch(D){console.error("❌ 點讚操作失敗:",D),v("操作失敗，請稍後再試")}finally{ue(D=>{const J=new Set(D);return J.delete(x),J})}},de=async(x,b)=>{var W;if(!b.trim())return;if(!oe.currentUser){v("請先登入");return}if(q.has(x)){console.log("🔄 留言提交中，請稍候...");return}const D={id:Date.now().toString(),userId:oe.currentUser.uid,userNickname:(r==null?void 0:r.nickname)||((W=r==null?void 0:r.email)==null?void 0:W.split("@")[0])||"匿名用戶",userAvatarUrl:sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":(r==null?void 0:r.avatarUrl)||"",content:b.trim(),timestamp:new Date().toISOString()};d(Y=>Y.map(I=>{if(I.id===x){const he=[...I.comments,D];return{...I,comments:he}}return I})),$(Y=>new Set(Y).add(x)),H.current.has(x)&&clearTimeout(H.current.get(x));const J=setTimeout(async()=>{try{const Y=c.find(he=>he.id===x);if(!Y){v("動態不存在");return}const G=[...Y.comments,D],I=tt(Re,"communityPosts",x);await Vn(I,{comments:G}),Rt.logWrite("updateDoc","communityPosts",x,{comments:`新增留言，總計 ${G.length} 條`}),console.log("💬 留言添加成功")}catch(Y){console.error("❌ 添加留言失敗:",Y),v("留言失敗，請稍後再試"),d(G=>G.map(he=>{if(he.id===x){const Ne=he.comments.filter(Be=>Be.id!==D.id);return{...he,comments:Ne}}return he}))}finally{$(Y=>{const G=new Set(Y);return G.delete(x),G}),H.current.delete(x)}},500);H.current.set(x,J)},Te=async(x,b)=>{if(!oe.currentUser){v("請先登入");return}try{const D=c.find(Be=>Be.id===x);if(!D){v("動態不存在");return}const J=D.comments.find(Be=>Be.id===b);if(!J){v("留言不存在");return}const W=oe.currentUser.uid,Y=D.userId===W,G=J.userId===W;if(!Y&&!G){v("您沒有權限刪除此留言");return}const I=Y?"確定要刪除此留言嗎？":"確定要刪除您的留言嗎？";if(!window.confirm(I))return;const he=D.comments.filter(Be=>Be.id!==b),Ne=tt(Re,"communityPosts",x);await Vn(Ne,{comments:he}),Rt.logWrite("updateDoc","communityPosts",x,{comments:`刪除留言，總計 ${he.length} 條`}),d(Be=>Be.map(Ce=>Ce.id===x?{...Ce,comments:he}:Ce)),S("留言已刪除"),setTimeout(()=>S(""),3e3)}catch(D){console.error("❌ 刪除留言失敗:",D),v("刪除留言失敗，請稍後再試")}},be=async x=>{if(!oe.currentUser){v("請先登入");return}try{const b=c.find(W=>W.id===x);if(!b){v("動態不存在");return}const D=oe.currentUser.uid;if(b.userId!==D){v("您沒有權限刪除此動態");return}if(!window.confirm("確定要刪除此動態嗎？此操作無法撤銷。"))return;const J=tt(Re,"communityPosts",x);await cm(J),Rt.logWrite("deleteDoc","communityPosts",x,{action:"刪除動態"}),console.log("🔄 更新本地狀態，刪除動態:",x),d(W=>{const Y=W.filter(G=>G.id!==x);return console.log(`📊 剩餘動態數: ${Y.length}`),Y}),S("動態已刪除"),setTimeout(()=>S(""),3e3)}catch(b){console.error("❌ 刪除動態失敗:",b),v("刪除動態失敗，請稍後再試")}},ce=x=>{const b=new Date,D=new Date(x),J=b-D,W=Math.floor(J/(1e3*60)),Y=Math.floor(J/(1e3*60*60)),G=Math.floor(J/(1e3*60*60*24));return W<1?"剛剛":W<60?`${W}分鐘前`:Y<24?`${Y}小時前`:G<7?`${G}天前`:D.toLocaleDateString()},Z=({post:x,currentUserId:b,onToggleLike:D,onAddComment:J,onDeleteComment:W,onDeletePost:Y,formatTime:G,likeProcessing:I,commentProcessing:he})=>{const[Ne,Be]=E.useState(!1),[Xe,Ce]=E.useState(""),ke=x.likes.includes(b),rt=x.likes.length,mt=x.comments.length,L=()=>{Xe.trim()&&(J(x.id,Xe),Ce(""))};return s.jsxs("div",{className:"post-card",children:[s.jsxs("div",{className:"post-header",children:[s.jsxs("div",{className:"post-user",children:[s.jsx("img",{src:x.userAvatarUrl||"/default-avatar.png",alt:"頭像",className:"user-avatar",onError:ae=>{ae.target.src="/default-avatar.png"}}),s.jsxs("div",{className:"user-info",children:[s.jsx("div",{className:"user-name",children:x.userNickname}),s.jsx("div",{className:"post-time",children:G(x.timestamp)})]})]}),x.userId===b&&s.jsx("button",{onClick:()=>Y(x.id),className:"delete-post-btn",title:"刪除此動態",children:"🗑️"})]}),s.jsx("div",{className:"post-content",children:x.content}),s.jsxs("div",{className:"post-actions",children:[s.jsxs("button",{onClick:()=>D(x.id,x.likes),className:`action-btn ${ke?"liked":""}`,disabled:I.has(x.id),children:[s.jsx("span",{className:"action-icon",children:I.has(x.id)?"⏳":"👍"}),s.jsx("span",{className:"action-text",children:I.has(x.id)?"處理中...":`${rt>0?rt:""} 讚`})]}),s.jsxs("button",{onClick:()=>Be(!Ne),className:"action-btn",children:[s.jsx("span",{className:"action-icon",children:"💬"}),s.jsxs("span",{className:"action-text",children:[mt>0?mt:""," 留言"]})]})]}),Ne&&s.jsxs("div",{className:"comments-section",children:[x.comments.length>0&&s.jsx("div",{className:"comments-list",children:x.comments.map(ae=>{const ye=x.userId===b,je=ae.userId===b,xe=ye||je;return s.jsxs("div",{className:"comment-item",children:[s.jsxs("div",{className:"comment-header",children:[s.jsxs("div",{className:"comment-user-info",children:[s.jsx("img",{src:ae.userAvatarUrl||"/guest-avatar.svg",alt:"頭像",className:"comment-avatar",onError:re=>{re.target.src="/guest-avatar.svg"}}),s.jsxs("div",{className:"comment-text-info",children:[s.jsx("div",{className:"comment-name",children:ae.userNickname}),s.jsx("div",{className:"comment-time",children:G(ae.timestamp)})]})]}),xe&&s.jsx("button",{onClick:()=>W(x.id,ae.id),className:"comment-delete-btn",title:ye?"刪除此留言":"刪除我的留言",children:"🗑️"})]}),s.jsx("div",{className:"comment-content",children:ae.content})]},ae.id)})}),s.jsxs("div",{className:"comment-input",children:[s.jsx("input",{type:"text",placeholder:"寫留言...",value:Xe,onChange:ae=>Ce(ae.target.value),onKeyPress:ae=>{ae.key==="Enter"&&L()}}),s.jsx("button",{onClick:L,disabled:!Xe.trim()||he.has(x.id),className:"comment-btn",children:he.has(x.id)?"發送中...":"發送"})]})]})]})};return E.useEffect(()=>{if(!oe.currentUser){console.error("❌ 用戶未登入"),v("請先登入");return}return console.log("🔄 開始載入好友頁面數據..."),X(),P(),()=>{H.current.forEach(x=>clearTimeout(x)),H.current.clear()}},[X,P]),f?s.jsx("div",{className:"friend-feed-page",children:s.jsx("div",{className:"loading",children:"載入中..."})}):p&&!oe.currentUser?s.jsxs("div",{className:"friend-feed-page",children:[s.jsxs("div",{className:"error-message",children:[s.jsx("p",{children:"請先登入後再訪問此頁面"}),s.jsx("button",{onClick:()=>u("/login"),className:"login-btn",children:"前往登入"})]}),s.jsx("button",{onClick:()=>u("/community"),className:"back-btn",children:"返回社群"})]}):p&&!z?s.jsxs("div",{className:"friend-feed-page",children:[s.jsx("div",{className:"error-message",children:p}),s.jsx("button",{onClick:()=>u("/community"),className:"back-btn",children:"返回社群"})]}):s.jsxs("div",{className:"friend-feed-page",children:[s.jsxs("div",{className:"friend-feed-header",children:[s.jsx("button",{onClick:()=>u("/community"),className:"back-btn",children:"← 返回社群"}),s.jsxs("div",{className:"friend-info",children:[s.jsx("img",{src:(z==null?void 0:z.avatarUrl)||"/default-avatar.png",alt:"頭像",className:"friend-avatar",onError:x=>{x.target.src="/default-avatar.png"}}),s.jsxs("div",{className:"friend-details",children:[s.jsxs("h1",{children:[(z==null?void 0:z.nickname)||"用戶"," 的個人版"]}),s.jsxs("p",{children:["在這裡給 ",(z==null?void 0:z.nickname)||"用戶"," 留言吧！"]})]})]})]}),p&&s.jsx("div",{className:"alert alert-error",children:p}),y&&s.jsx("div",{className:"alert alert-success",children:y}),s.jsx("div",{className:"post-composer",children:s.jsxs("div",{className:"composer-header",children:[s.jsx("div",{className:"user-avatar",children:s.jsx("img",{src:sessionStorage.getItem("guestMode")==="true"?"/guest-avatar.svg":(r==null?void 0:r.avatarUrl)||"/default-avatar.png",alt:"頭像",onError:x=>{x.target.src="/default-avatar.png"}})}),s.jsxs("div",{className:"composer-input",children:[s.jsx("textarea",{placeholder:`給 ${(z==null?void 0:z.nickname)||"用戶"} 留言...`,value:j,onChange:x=>T(x.target.value),maxLength:500,disabled:O}),s.jsxs("div",{className:"composer-footer",children:[s.jsxs("span",{className:"char-count",children:[j.length,"/500"]}),s.jsx("button",{onClick:ne,disabled:!j.trim()||O,className:"publish-btn",children:O?"發布中...":"發布"})]})]})]})}),s.jsx("div",{className:"posts-container",children:c.length===0?s.jsxs("div",{className:"empty-state",children:[s.jsx("p",{children:"還沒有動態"}),s.jsx("p",{children:"來寫下第一條留言吧！"})]}):c.map(x=>{var b;return s.jsx(Z,{post:x,currentUserId:(b=oe.currentUser)==null?void 0:b.uid,onToggleLike:se,onAddComment:de,onDeleteComment:Te,onDeletePost:be,formatTime:ce,likeProcessing:ee,commentProcessing:q},x.id)})})]})},Zm=({position:r="bottom",className:i="",showAd:u=!0,isFixed:c=!0})=>u?s.jsx("div",{className:`ad-banner ad-banner--${r} ${c?"ad-banner--fixed":""} ${i}`,children:s.jsx("div",{className:"ad-banner__test",children:s.jsxs("div",{className:"ad-banner__test-content",children:[s.jsx("span",{className:"ad-banner__test-label",children:"🎯 廣告空間預留 🎯"}),s.jsx("span",{className:"ad-banner__test-size",children:"點擊體驗優化版設計"})]})})}):null;Zm.propTypes={position:ze.oneOf(["top","bottom","inline"]),className:ze.string,showAd:ze.bool,isFixed:ze.bool};const U2=()=>{const r=Ga(),i=["/user-info","/friends","/ladder","/history","/strength","/cardio","/explosive-power","/muscle-mass","/body-fat"],u=["/login","/privacy-policy","/test","/strength-instructions"];return(()=>{const d=r.pathname;return u.some(f=>d.startsWith(f))?!1:!!i.some(f=>d.startsWith(f))})()?s.jsx(Zm,{position:"bottom",isFixed:!0,showAd:!0,className:"global-ad-banner"}):null},C2=()=>{const[r,i]=E.useState(null),[u,c]=E.useState(!1),[d,f]=E.useState(!1),[m,p]=E.useState(!1);E.useEffect(()=>{const j=()=>window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches?(f(!0),!0):!1,T=_=>{console.log("PWA安裝提示觸發"),_.preventDefault(),i(_),c(!0)},O=()=>{console.log("PWA安裝完成"),f(!0),c(!1),i(null)};return"serviceWorker"in navigator&&"PushManager"in window&&(navigator.serviceWorker.register("/sw.js").then(_=>{console.log("Service Worker註冊成功:",_),_.addEventListener("updatefound",()=>{const z=_.installing;z.addEventListener("statechange",()=>{z.state==="installed"&&navigator.serviceWorker.controller&&p(!0)})})}).catch(_=>{console.log("Service Worker註冊失敗:",_)}),j()||(window.addEventListener("beforeinstallprompt",T),window.addEventListener("appinstalled",O))),()=>{window.removeEventListener("beforeinstallprompt",T),window.removeEventListener("appinstalled",O)}},[]);const v=async()=>{if(!r)return;r.prompt();const{outcome:j}=await r.userChoice;console.log("用戶選擇:",j),i(null),c(!1)},y=()=>{c(!1),i(null)},S=()=>{window.location.reload()};return m?s.jsx("div",{className:"pwa-install-prompt",children:s.jsxs("div",{className:"pwa-install-prompt__content",children:[s.jsx("div",{className:"pwa-install-prompt__icon",children:"🔄"}),s.jsxs("div",{className:"pwa-install-prompt__text",children:[s.jsx("h3",{children:"有新版本可用"}),s.jsx("p",{children:"點擊更新以獲取最新功能"})]}),s.jsxs("div",{className:"pwa-install-prompt__actions",children:[s.jsx("button",{className:"pwa-install-prompt__btn pwa-install-prompt__btn--primary",onClick:S,children:"立即更新"}),s.jsx("button",{className:"pwa-install-prompt__btn pwa-install-prompt__btn--dismiss",onClick:()=>p(!1),children:"稍後再說"})]})]})}):d||!u?null:s.jsx("div",{className:"pwa-install-prompt",children:s.jsxs("div",{className:"pwa-install-prompt__content",children:[s.jsx("div",{className:"pwa-install-prompt__icon",children:"📱"}),s.jsxs("div",{className:"pwa-install-prompt__text",children:[s.jsx("h3",{children:"安裝健身評測小能手"}),s.jsx("p",{children:"將應用程式安裝到主畫面，享受更快的載入速度和離線使用體驗！"})]}),s.jsxs("div",{className:"pwa-install-prompt__actions",children:[s.jsx("button",{className:"pwa-install-prompt__btn pwa-install-prompt__btn--install",onClick:v,children:"安裝"}),s.jsx("button",{className:"pwa-install-prompt__btn pwa-install-prompt__btn--dismiss",onClick:y,children:"稍後再說"})]})]})})},M2=()=>{const[r,i]=E.useState(!1),[u,c]=E.useState(!1),[d,f]=E.useState(!1);E.useEffect(()=>{(()=>{const y=window.navigator.userAgent.toLowerCase(),S=/iphone|ipad|ipod/.test(y);c(S);const j=window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches;f(j),S&&!j&&i(!0)})()},[]);const m=()=>{i(!1),localStorage.setItem("ios-install-prompt-dismissed","true")},p=()=>{i(!1)};return d||!u||!r||localStorage.getItem("ios-install-prompt-dismissed")==="true"?null:s.jsx("div",{className:"ios-install-prompt",children:s.jsxs("div",{className:"ios-install-prompt__content",children:[s.jsx("div",{className:"ios-install-prompt__icon",children:"📱"}),s.jsxs("div",{className:"ios-install-prompt__text",children:[s.jsx("h3",{children:"安裝到主畫面"}),s.jsx("p",{children:"點擊分享按鈕，選擇「添加到主畫面」即可安裝應用程式"})]}),s.jsxs("div",{className:"ios-install-prompt__steps",children:[s.jsxs("div",{className:"ios-install-prompt__step",children:[s.jsx("span",{className:"ios-install-prompt__step-number",children:"1"}),s.jsx("span",{children:"點擊底部的分享按鈕"})]}),s.jsxs("div",{className:"ios-install-prompt__step",children:[s.jsx("span",{className:"ios-install-prompt__step-number",children:"2"}),s.jsx("span",{children:"選擇「添加到主畫面」"})]}),s.jsxs("div",{className:"ios-install-prompt__step",children:[s.jsx("span",{className:"ios-install-prompt__step-number",children:"3"}),s.jsx("span",{children:"點擊「添加」完成安裝"})]})]}),s.jsxs("div",{className:"ios-install-prompt__actions",children:[s.jsx("button",{className:"ios-install-prompt__btn ios-install-prompt__btn--primary",onClick:p,children:"我知道了"}),s.jsx("button",{className:"ios-install-prompt__btn ios-install-prompt__btn--dismiss",onClick:m,children:"稍後再說"})]})]})})};class D2 extends E.Component{constructor(){super(...arguments);Nh(this,"state",{hasError:!1})}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(u,c){console.error("ErrorBoundary 捕獲錯誤:",u,c)}render(){return this.state.hasError?s.jsx("div",{children:"發生錯誤，請稍後再試或聯繫支持團隊。"}):this.props.children}}function k2(){const[r,i]=E.useState(null),u=Ga(),c=["/user-info","/history","/ladder","/community","/friend-feed","/strength","/explosive-power","/cardio","/muscle-mass","/body-fat"].some(j=>u.pathname.startsWith(j)),d=["/user-info","/ladder","/community","/friend-feed","/history","/strength","/cardio","/explosive-power","/muscle-mass","/body-fat"].some(j=>u.pathname.startsWith(j)),f=async(j,T)=>{try{if(!T||T.trim()==="")throw new Error("密碼不能為空");await zo(oe,j,T),sessionStorage.removeItem("guestMode"),i(null)}catch(O){throw console.error("登入失敗:",O),O}},m=()=>{oe.currentUser&&R1(oe).then(()=>{i(null)}).catch(j=>{console.error("登出失敗:",j)})},p=j=>{i(j)},v=()=>{i(null)},y=()=>{sessionStorage.setItem("guestMode","true"),window.location.href="/user-info"},S=({element:j})=>{const{userData:T}=sn(),O=window.location.pathname;if(sessionStorage.getItem("guestMode")==="true"&&!oe.currentUser&&["/user-info","/strength","/cardio","/explosive-power","/muscle-mass","/body-fat"].some(te=>O.startsWith(te)))return j;if(!oe.currentUser)return s.jsx(So,{to:"/login"});if(O!=="/user-info"&&O!=="/login"){const te=typeof(T==null?void 0:T.height)=="number"&&T.height>0,ee=typeof(T==null?void 0:T.weight)=="number"&&T.weight>0,ue=typeof(T==null?void 0:T.age)=="number"&&T.age>0,q=(T==null?void 0:T.gender)==="male"||(T==null?void 0:T.gender)==="female";if(!te||!ee||!ue||!q)return s.jsx(So,{to:"/user-info"})}return j};return S.propTypes={element:ze.element.isRequired},s.jsxs("div",{className:`app-container ${d?"page-with-fixed-ad":""}`,children:[s.jsx(av,{}),s.jsx(D2,{children:s.jsx("div",{className:"main-content",children:s.jsxs(c1,{children:[s.jsx(It,{path:"/",element:oe.currentUser?s.jsx(So,{to:"/user-info"}):s.jsx(Im,{onLogin:f,onGuestMode:y})}),s.jsx(It,{path:"/user-info",element:s.jsx(S,{element:s.jsx(Hm,{testData:r,onLogout:m,clearTestData:v})})}),s.jsx(It,{path:"/strength",element:s.jsx(S,{element:s.jsx(qm,{onComplete:p,clearTestData:v})})}),s.jsx(It,{path:"/cardio",element:s.jsx(S,{element:s.jsx(Gm,{onComplete:p,clearTestData:v})})}),s.jsx(It,{path:"/explosive-power",element:s.jsx(S,{element:s.jsx(Vm,{onComplete:p,clearTestData:v})})}),s.jsx(It,{path:"/muscle-mass",element:s.jsx(S,{element:s.jsx(Ym,{onComplete:p,clearTestData:v})})}),s.jsx(It,{path:"/body-fat",element:s.jsx(S,{element:s.jsx(Fm,{onComplete:p,clearTestData:v})})}),s.jsx(It,{path:"/login",element:s.jsx(Qm,{onLogin:f})}),s.jsx(It,{path:"/history",element:s.jsx(S,{element:s.jsx(j2,{})})}),s.jsx(It,{path:"/ladder",element:s.jsx(S,{element:s.jsx(_2,{})})}),s.jsx(It,{path:"/community",element:s.jsx(S,{element:s.jsx(R2,{})})}),s.jsx(It,{path:"/friend-feed/:userId",element:s.jsx(S,{element:s.jsx(B2,{})})}),s.jsx(It,{path:"/privacy-policy",element:s.jsx(A2,{})}),s.jsx(It,{path:"*",element:s.jsx("div",{children:"404 - 頁面未找到"})})]})})}),s.jsx("footer",{className:"app-footer",children:s.jsx(o1,{to:"/privacy-policy",children:"隱私權政策"})}),u.pathname!=="/ladder"&&s.jsx(U2,{}),c&&s.jsx(T2,{}),s.jsx(C2,{}),s.jsx(M2,{})]})}function z2(){return s.jsx(Um,{children:s.jsx(r1,{children:s.jsx(k2,{})})})}const L2=L1.createRoot(document.getElementById("root"));L2.render(s.jsx(u1.StrictMode,{children:s.jsx(z2,{})}));
